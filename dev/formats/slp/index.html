
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://io.sleap.ai/dev/formats/slp/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../../cli/">
      
      
        
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>SLP Format - sleap-io documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#slp-file-format" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="sleap-io documentation" class="md-header__button md-logo" aria-label="sleap-io documentation" data-md-component="logo">
      
  <img src="../../assets/sleap-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            sleap-io documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SLP Format
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/talmolab/sleap-io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="sleap-io documentation" class="md-nav__button md-logo" aria-label="sleap-io documentation" data-md-component="logo">
      
  <img src="../../assets/sleap-logo.png" alt="logo">

    </a>
    sleap-io documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/talmolab/sleap-io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/talmolab/sleap-io/releases" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../codecs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Codecs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../merging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Merging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rendering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rendering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transforms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Formats
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Formats
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    SLP Format
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    SLP Format
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hdf5-layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        HDF5 Layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#videos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Videos
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#embedded-images" class="md-nav__link">
    <span class="md-ellipsis">
      
        Embedded Images
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skeletons" class="md-nav__link">
    <span class="md-ellipsis">
      
        Skeletons
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        Metadata
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tracks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suggestions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Suggestions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sessions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instances" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instances
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#points" class="md-nav__link">
    <span class="md-ellipsis">
      
        Points
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labeled-frames" class="md-nav__link">
    <span class="md-ellipsis">
      
        Labeled Frames
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazy-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lazy Loading
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version History
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Full API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Full API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/sleap_io/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    sleap_io
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1" id="__nav_6_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    sleap_io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/sleap_io/codecs/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    codecs
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_1" id="__nav_6_4_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    codecs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/codecs/dataframe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataframe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/codecs/dictionary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dictionary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/codecs/numpy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    numpy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/sleap_io/io/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    io
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_2" id="__nav_6_4_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/alphatracker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    alphatracker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/analysis_h5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    analysis_h5
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cli
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/coco/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    coco
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/csv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    csv
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/dlc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dlc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/jabs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    jabs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/labelstudio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    labelstudio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/leap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    leap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/main/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/nwb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    nwb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/nwb_annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    nwb_annotations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/nwb_predictions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    nwb_predictions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/skeleton/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    skeleton
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/slp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    slp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/slp_lazy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    slp_lazy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/ultralytics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ultralytics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/video_reading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    video_reading
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/io/video_writing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    video_writing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/sleap_io/model/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    model
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_3" id="__nav_6_4_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    model
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/camera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/instance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    instance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/labeled_frame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    labeled_frame
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    labels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/labels_set/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    labels_set
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/matching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    matching
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/skeleton/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    skeleton
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/suggestions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    suggestions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/model/video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/sleap_io/rendering/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    rendering
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_4" id="__nav_6_4_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    rendering
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/rendering/callbacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    callbacks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/rendering/colors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    colors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/rendering/core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/rendering/shapes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    shapes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/sleap_io/transform/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    transform
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_5" id="__nav_6_4_1_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    transform
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/transform/core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/transform/frame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    frame
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/transform/points/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    points
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/transform/video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sleap_io/version/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    version
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hdf5-layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        HDF5 Layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#videos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Videos
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#embedded-images" class="md-nav__link">
    <span class="md-ellipsis">
      
        Embedded Images
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skeletons" class="md-nav__link">
    <span class="md-ellipsis">
      
        Skeletons
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        Metadata
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tracks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suggestions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Suggestions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sessions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sessions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instances" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instances
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#points" class="md-nav__link">
    <span class="md-ellipsis">
      
        Points
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labeled-frames" class="md-nav__link">
    <span class="md-ellipsis">
      
        Labeled Frames
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazy-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lazy Loading
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version History
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div class="md-source-file"><a href="../slp.md" title="View markdown source" class="md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m4 18H6V4h7v5h5v11M13 9V3.5L18.5 9H13Z"/></svg></a></div>
<h1 id="slp-file-format">SLP File Format<a class="headerlink" href="#slp-file-format" title="Permanent link">&para;</a></h1>
<p>The <code>.slp</code> file format is SLEAP's native format for storing pose tracking data. It is built on top of <a href="https://www.hdfgroup.org/solutions/hdf5/">HDF5</a>, a hierarchical data format designed for storing and organizing large amounts of scientific data.</p>
<p>SLP files can contain:</p>
<ul>
<li><strong>Video metadata</strong> and references to source video files (<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Video&lt;/code&gt;" href="../../model/#sleap_io.Video"><code>Video</code></a>)</li>
<li><strong>Embedded images</strong> with configurable encoding (PNG, JPEG, or raw arrays)</li>
<li><strong>Skeleton definitions</strong> with nodes, edges, and symmetries (<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Skeleton&lt;/code&gt;" href="../../model/#sleap_io.Skeleton"><code>Skeleton</code></a>)</li>
<li><strong>Labeled frames</strong> with user annotations and model predictions (<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.LabeledFrame&lt;/code&gt;" href="../../model/#sleap_io.LabeledFrame"><code>LabeledFrame</code></a>)</li>
<li><strong>Tracks</strong> for identity tracking across frames (<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Track&lt;/code&gt;" href="../../model/#sleap_io.Track"><code>Track</code></a>)</li>
<li><strong>Suggestions</strong> for frames to label (<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.SuggestionFrame&lt;/code&gt;" href="../../model/#sleap_io.SuggestionFrame"><code>SuggestionFrame</code></a>)</li>
<li><strong>Recording sessions</strong> for multi-camera setups (<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.RecordingSession&lt;/code&gt;" href="../../model/#sleap_io.RecordingSession"><code>RecordingSession</code></a>)</li>
</ul>
<h2 id="hdf5-layout">HDF5 Layout<a class="headerlink" href="#hdf5-layout" title="Permanent link">&para;</a></h2>
<p>SLP files have the following hierarchical structure:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>file.slp
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>├── /metadata                    # Group: Format and skeleton metadata
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>│   ├── @format_id               # Attribute: Format version (float, e.g., 1.4)
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>│   └── @json                    # Attribute: JSON metadata string
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>│
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>├── /videos_json                 # Dataset: Video metadata (variable-length bytes)
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>├── /tracks_json                 # Dataset: Track metadata (variable-length bytes)
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>├── /suggestions_json            # Dataset: Suggestions (variable-length bytes, optional)
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>├── /sessions_json               # Dataset: Recording sessions (variable-length bytes, optional)
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>│
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>├── /frames                      # Dataset: Labeled frame metadata (structured array)
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>├── /instances                   # Dataset: Instance metadata (structured array)
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>├── /points                      # Dataset: User-labeled points (structured array)
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>├── /pred_points                 # Dataset: Predicted points (structured array)
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>│
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>└── /video{N}/                   # Group: Per-video embedded data (one per video)
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    ├── /video                   # Dataset: Embedded image data
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    │   ├── @format              # Attribute: &quot;png&quot;, &quot;jpg&quot;, or &quot;hdf5&quot;
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    │   ├── @channel_order       # Attribute: &quot;RGB&quot; or &quot;BGR&quot;
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    │   ├── @frames              # Attribute: Total frames in source video
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    │   ├── @height              # Attribute: Frame height
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    │   ├── @width               # Attribute: Frame width
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    │   ├── @channels            # Attribute: Number of channels
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    │   └── @fps                 # Attribute: Frames per second (optional)
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>    ├── /frame_numbers           # Dataset: Embedded frame indices (int array)
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>    └── /source_video/           # Group: Source video metadata
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>        └── @json                # Attribute: JSON with source video info
</code></pre></div>
<h3 id="core-datasets">Core Datasets<a class="headerlink" href="#core-datasets" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Dataset</th>
<th>Shape</th>
<th>Dtype</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>points</code></td>
<td><code>(N,)</code></td>
<td>structured</td>
<td>User-labeled point coordinates</td>
</tr>
<tr>
<td><code>pred_points</code></td>
<td><code>(N,)</code></td>
<td>structured</td>
<td>Predicted point coordinates with scores</td>
</tr>
<tr>
<td><code>instances</code></td>
<td><code>(N,)</code></td>
<td>structured</td>
<td>Instance metadata linking to points</td>
</tr>
<tr>
<td><code>frames</code></td>
<td><code>(N,)</code></td>
<td>structured</td>
<td>Frame metadata linking to instances</td>
</tr>
</tbody>
</table>
<h3 id="metadata-datasets">Metadata Datasets<a class="headerlink" href="#metadata-datasets" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Dataset</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>videos_json</code></td>
<td><code>bytes[]</code></td>
<td>JSON array of video metadata</td>
</tr>
<tr>
<td><code>tracks_json</code></td>
<td><code>bytes[]</code></td>
<td>JSON array of track definitions</td>
</tr>
<tr>
<td><code>suggestions_json</code></td>
<td><code>bytes[]</code></td>
<td>JSON array of suggested frames (optional)</td>
</tr>
<tr>
<td><code>sessions_json</code></td>
<td><code>bytes[]</code></td>
<td>JSON array of recording sessions (optional)</td>
</tr>
</tbody>
</table>
<h2 id="videos">Videos<a class="headerlink" href="#videos" title="Permanent link">&para;</a></h2>
<p>Video metadata is stored in the <code>/videos_json</code> dataset as an array of JSON strings. Each video entry contains:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;path/to/video.mp4&quot;</span><span class="p">,</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nt">&quot;backend&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MediaVideo&quot;</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">        </span><span class="nt">&quot;shape&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">        </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;path/to/video.mp4&quot;</span><span class="p">,</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">        </span><span class="nt">&quot;grayscale&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">        </span><span class="nt">&quot;bgr&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">        </span><span class="nt">&quot;fps&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">30.0</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="nt">&quot;source_video&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="p">}</span>
</code></pre></div>
<h3 id="backend-types">Backend Types<a class="headerlink" href="#backend-types" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Key Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MediaVideo</code></td>
<td>Standard video files (mp4, avi, mov, etc.)</td>
<td><code>filename</code>, <code>bgr</code>, <code>fps</code></td>
</tr>
<tr>
<td><code>HDF5Video</code></td>
<td>Embedded frames in HDF5</td>
<td><code>dataset</code>, <code>input_format</code>, <code>has_embedded_images</code></td>
</tr>
<tr>
<td><code>ImageVideo</code></td>
<td>Image sequences</td>
<td><code>filename</code>, <code>filenames</code> (list)</td>
</tr>
<tr>
<td><code>TiffVideo</code></td>
<td>TIFF stacks</td>
<td><code>filename</code>, <code>keep_open</code></td>
</tr>
</tbody>
</table>
<h3 id="source-video-lineage">Source Video Lineage<a class="headerlink" href="#source-video-lineage" title="Permanent link">&para;</a></h3>
<p>Videos can have a <code>source_video</code> field that tracks the original video when frames are embedded:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.&quot;</span><span class="p">,</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nt">&quot;backend&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HDF5Video&quot;</span><span class="p">,</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">        </span><span class="nt">&quot;dataset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;video0/video&quot;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="nt">&quot;source_video&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">        </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;original.mp4&quot;</span><span class="p">,</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">        </span><span class="nt">&quot;backend&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="p">}</span>
</code></pre></div>
<p>This creates a chain of provenance, allowing the original video to be restored when extracting embedded data.</p>
<h2 id="embedded-images">Embedded Images<a class="headerlink" href="#embedded-images" title="Permanent link">&para;</a></h2>
<p>Frames can be embedded directly in SLP files for portability. Embedded frames are stored in <code>/video{N}/</code> groups.</p>
<h3 id="encoding-formats">Encoding Formats<a class="headerlink" href="#encoding-formats" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Format</th>
<th>Storage</th>
<th>Compression</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>png</code></td>
<td><code>int8[]</code></td>
<td>Lossless PNG</td>
<td>Default, best quality</td>
</tr>
<tr>
<td><code>jpg</code></td>
<td><code>int8[]</code></td>
<td>Lossy JPEG</td>
<td>Smaller files, some quality loss</td>
</tr>
<tr>
<td><code>hdf5</code></td>
<td>Raw array</td>
<td>Optional gzip</td>
<td>No encoding overhead, large files</td>
</tr>
</tbody>
</table>
<h3 id="frame-selection-modes">Frame Selection Modes<a class="headerlink" href="#frame-selection-modes" title="Permanent link">&para;</a></h3>
<p>When saving with embedded frames, the <code>embed</code> parameter controls which frames to include:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>None</code></td>
<td>Re-embed existing embedded frames</td>
</tr>
<tr>
<td><code>True</code> / <code>"all"</code></td>
<td>All labeled frames and suggestions</td>
</tr>
<tr>
<td><code>"user"</code></td>
<td>Only user-labeled frames</td>
</tr>
<tr>
<td><code>"suggestions"</code></td>
<td>Only suggested frames</td>
</tr>
<tr>
<td><code>"user+suggestions"</code></td>
<td>Both user and suggested frames</td>
</tr>
<tr>
<td><code>"source"</code></td>
<td>No embedding, restore source video</td>
</tr>
<tr>
<td><code>list[(Video, int)]</code></td>
<td>Custom list of (video, frame_idx) pairs</td>
</tr>
</tbody>
</table>
<h3 id="channel-order">Channel Order<a class="headerlink" href="#channel-order" title="Permanent link">&para;</a></h3>
<p>The <code>channel_order</code> attribute (introduced in format 1.4) tracks the color channel ordering:</p>
<ul>
<li><strong>OpenCV encoding</strong>: BGR (<code>"BGR"</code>)</li>
<li><strong>imageio encoding</strong>: RGB (<code>"RGB"</code>)</li>
<li><strong>Raw HDF5 arrays</strong>: RGB (<code>"RGB"</code>)</li>
</ul>
<p>This ensures correct color reproduction when reading embedded frames.</p>
<h2 id="skeletons">Skeletons<a class="headerlink" href="#skeletons" title="Permanent link">&para;</a></h2>
<p><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Skeleton&lt;/code&gt;" href="../../model/#sleap_io.Skeleton"><code>Skeleton</code></a> definitions are stored in the <code>/metadata</code> group's <code>json</code> attribute. The metadata JSON contains both a global node list and skeleton definitions that reference <a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Node&lt;/code&gt;" href="../../model/#sleap_io.Node"><code>Node</code></a>s by index.</p>
<h3 id="json-format-slp-files">JSON Format (SLP Files)<a class="headerlink" href="#json-format-slp-files" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">&quot;skeletons&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">            </span><span class="nt">&quot;directed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">            </span><span class="nt">&quot;graph&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Skeleton-0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_edges_inserted&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">},</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">            </span><span class="nt">&quot;links&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;py/reduce&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;py/type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sleap.skeleton.EdgeType&quot;</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;py/tuple&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">]}]}},</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">                </span><span class="p">{</span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;py/id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}}</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">            </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}]</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">        </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;head&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;weight&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">},</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">        </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thorax&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;weight&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">},</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">        </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abdomen&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;weight&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">}</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">    </span><span class="p">]</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="p">}</span>
</code></pre></div>
<h3 id="edge-types">Edge Types<a class="headerlink" href="#edge-types" title="Permanent link">&para;</a></h3>
<p><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Edge&lt;/code&gt;" href="../../model/#sleap_io.Edge"><code>Edge</code></a>s are encoded with a type field using Python's pickle-style encoding:</p>
<table>
<thead>
<tr>
<th>Type ID</th>
<th>Meaning</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1</code></td>
<td>Regular edge</td>
<td>Skeletal connection between nodes</td>
</tr>
<tr>
<td><code>2</code></td>
<td>Symmetry edge</td>
<td>Bilateral symmetry relationship</td>
</tr>
</tbody>
</table>
<p>The first occurrence of each type uses the full <code>py/reduce</code> encoding; subsequent occurrences use <code>py/id</code> references.</p>
<h3 id="symmetries">Symmetries<a class="headerlink" href="#symmetries" title="Permanent link">&para;</a></h3>
<p><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Symmetry&lt;/code&gt;" href="../../model/#sleap_io.Symmetry"><code>Symmetry</code></a> relationships define bilateral pairings (e.g., left/right body parts). They are stored as edges with type <code>2</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;py/reduce&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;py/type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sleap.skeleton.EdgeType&quot;</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;py/tuple&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">]}]}</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Symmetry Deduplication</p>
<p>Legacy SLEAP files may store symmetries bidirectionally. The decoder automatically deduplicates them.</p>
</div>
<h3 id="yaml-format">YAML Format<a class="headerlink" href="#yaml-format" title="Permanent link">&para;</a></h3>
<p>In addition to the JSON format stored in SLP files, sleap-io supports a simplified YAML format for <a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Skeleton&lt;/code&gt;" href="../../model/#sleap_io.Skeleton"><code>Skeleton</code></a> definitions. This format is more human-readable and easier to edit manually.</p>
<div class="admonition info">
<p class="admonition-title">Preferred Format</p>
<p>The YAML format is the preferred format for skeleton definitions in sleap-nn and new tooling. The JSON format will be maintained for backwards compatibility with existing SLP files.</p>
</div>
<h4 id="structure">Structure<a class="headerlink" href="#structure" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">skeleton_name</span><span class="p">:</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="nt">nodes</span><span class="p">:</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">head</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thorax</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abdomen</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">source</span><span class="p">:</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">head</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">      </span><span class="nt">destination</span><span class="p">:</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thorax</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">source</span><span class="p">:</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thorax</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">      </span><span class="nt">destination</span><span class="p">:</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abdomen</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">  </span><span class="nt">symmetries</span><span class="p">:</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">left_wing</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">right_wing</span>
</code></pre></div>
<h4 id="fields">Fields<a class="headerlink" href="#fields" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nodes</code></td>
<td><code>list[dict]</code></td>
<td>List of <a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Node&lt;/code&gt;" href="../../model/#sleap_io.Node"><code>Node</code></a> definitions with <code>name</code> key</td>
</tr>
<tr>
<td><code>edges</code></td>
<td><code>list[dict]</code></td>
<td>List of <a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Edge&lt;/code&gt;" href="../../model/#sleap_io.Edge"><code>Edge</code></a> definitions with <code>source</code> and <code>destination</code></td>
</tr>
<tr>
<td><code>symmetries</code></td>
<td><code>list[list]</code></td>
<td>List of <a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Symmetry&lt;/code&gt;" href="../../model/#sleap_io.Symmetry"><code>Symmetry</code></a> pairs, each as a list of two node references</td>
</tr>
</tbody>
</table>
<h4 id="multiple-skeletons">Multiple Skeletons<a class="headerlink" href="#multiple-skeletons" title="Permanent link">&para;</a></h4>
<p>The YAML format supports multiple skeletons in a single file, with skeleton names as top-level keys:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">fly</span><span class="p">:</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">nodes</span><span class="p">:</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">head</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thorax</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">head</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">      </span><span class="nt">destination</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">thorax</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">  </span><span class="nt">symmetries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="nt">mouse</span><span class="p">:</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">  </span><span class="nt">nodes</span><span class="p">:</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nose</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">nose</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">      </span><span class="nt">destination</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">spine</span><span class="w"> </span><span class="p p-Indicator">}</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">  </span><span class="nt">symmetries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</code></pre></div>
<h4 id="api-functions">API Functions<a class="headerlink" href="#api-functions" title="Permanent link">&para;</a></h4>
<p>Use the following functions to work with YAML skeletons:</p>
<ul>
<li><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;encode_yaml_skeleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skeletons&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;" href="../../reference/sleap_io/io/skeleton/#sleap_io.io.skeleton.encode_yaml_skeleton"><code>encode_yaml_skeleton</code></a> - Encode skeleton(s) to YAML string</li>
<li><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;decode_yaml_skeleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yaml_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;" href="../../reference/sleap_io/io/skeleton/#sleap_io.io.skeleton.decode_yaml_skeleton"><code>decode_yaml_skeleton</code></a> - Decode skeleton(s) from YAML string or file</li>
</ul>
<h2 id="metadata">Metadata<a class="headerlink" href="#metadata" title="Permanent link">&para;</a></h2>
<p>The <code>/metadata</code> group stores format information and serialized metadata about the labels.</p>
<h3 id="attributes">Attributes<a class="headerlink" href="#attributes" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>format_id</code></td>
<td><code>float</code></td>
<td>Format version (e.g., <code>1.4</code>)</td>
</tr>
<tr>
<td><code>json</code></td>
<td><code>bytes</code></td>
<td>JSON-encoded metadata string</td>
</tr>
</tbody>
</table>
<h3 id="json-structure">JSON Structure<a class="headerlink" href="#json-structure" title="Permanent link">&para;</a></h3>
<p>The <code>json</code> attribute contains a JSON object with the following fields:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="nt">&quot;skeletons&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="nt">&quot;videos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="nt">&quot;tracks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="nt">&quot;suggestions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nt">&quot;negative_anchors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="nt">&quot;provenance&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">        </span><span class="nt">&quot;sleap_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.3.4&quot;</span><span class="p">,</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">        </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;labels.slp&quot;</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="p">}</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>version</code></td>
<td><code>string</code></td>
<td>SLEAP software version</td>
</tr>
<tr>
<td><code>skeletons</code></td>
<td><code>array</code></td>
<td>Skeleton graph definitions (see <a href="#skeletons">Skeletons</a>)</td>
</tr>
<tr>
<td><code>nodes</code></td>
<td><code>array</code></td>
<td>Node definitions with names and weights</td>
</tr>
<tr>
<td><code>videos</code></td>
<td><code>array</code></td>
<td>Empty (stored in <code>/videos_json</code> dataset)</td>
</tr>
<tr>
<td><code>tracks</code></td>
<td><code>array</code></td>
<td>Empty (stored in <code>/tracks_json</code> dataset)</td>
</tr>
<tr>
<td><code>suggestions</code></td>
<td><code>array</code></td>
<td>Empty (stored in <code>/suggestions_json</code> dataset)</td>
</tr>
<tr>
<td><code>negative_anchors</code></td>
<td><code>object</code></td>
<td>Negative sample anchors for training</td>
</tr>
<tr>
<td><code>provenance</code></td>
<td><code>object</code></td>
<td>File origin and creation metadata</td>
</tr>
</tbody>
</table>
<h3 id="provenance">Provenance<a class="headerlink" href="#provenance" title="Permanent link">&para;</a></h3>
<p>The <code>provenance</code> field tracks the origin and history of the labels file:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sleap_version</code></td>
<td><code>string</code></td>
<td>SLEAP version that created the file</td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>string</code></td>
<td>Original filename</td>
</tr>
<tr>
<td><em>custom</em></td>
<td><code>any</code></td>
<td>Additional user-defined provenance data</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Custom Provenance</p>
<p>The provenance dictionary can contain arbitrary key-value pairs for tracking custom metadata like model training runs, data sources, or processing history.</p>
</div>
<h2 id="tracks">Tracks<a class="headerlink" href="#tracks" title="Permanent link">&para;</a></h2>
<p><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Track&lt;/code&gt;" href="../../model/#sleap_io.Track"><code>Track</code></a>s enable identity tracking of individual animals across frames. Track metadata is stored in the <code>/tracks_json</code> dataset as an array of JSON strings.</p>
<h3 id="json-structure_1">JSON Structure<a class="headerlink" href="#json-structure_1" title="Permanent link">&para;</a></h3>
<p>Each track is stored as a two-element JSON array:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;track_name&quot;</span><span class="p">]</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Index</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td><code>int</code></td>
<td>Spawned frame index (reserved, currently always <code>0</code>)</td>
</tr>
<tr>
<td><code>1</code></td>
<td><code>string</code></td>
<td>Track name for identification</td>
</tr>
</tbody>
</table>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;mouse_1&quot;</span><span class="p">]</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;mouse_2&quot;</span><span class="p">]</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;female&quot;</span><span class="p">]</span>
</code></pre></div>
<h3 id="instance-linking">Instance Linking<a class="headerlink" href="#instance-linking" title="Permanent link">&para;</a></h3>
<p><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Instance&lt;/code&gt;" href="../../model/#sleap_io.Instance"><code>Instance</code></a>s reference tracks by index in the <code>/instances</code> dataset:</p>
<ul>
<li><code>track = 0</code> → First track in <code>/tracks_json</code></li>
<li><code>track = 1</code> → Second track in <code>/tracks_json</code></li>
<li><code>track = -1</code> → Untracked instance</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Track Identity</p>
<p>Tracks are compared by object identity, not name. Two tracks with the same name are considered different unless they are the same object. This allows multiple tracks to share a name if needed.</p>
</div>
<h2 id="suggestions">Suggestions<a class="headerlink" href="#suggestions" title="Permanent link">&para;</a></h2>
<p>Suggestions indicate frames that should be labeled, typically generated by active learning algorithms or manual selection. Suggestion metadata is stored in the <code>/suggestions_json</code> dataset.</p>
<h3 id="json-structure_2">JSON Structure<a class="headerlink" href="#json-structure_2" title="Permanent link">&para;</a></h3>
<p>Each suggestion is stored as a JSON object:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="nt">&quot;video&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="nt">&quot;frame_idx&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="p">}</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>video</code></td>
<td><code>string</code></td>
<td>Video index (as string)</td>
</tr>
<tr>
<td><code>frame_idx</code></td>
<td><code>int</code></td>
<td>Frame index within the video</td>
</tr>
<tr>
<td><code>group</code></td>
<td><code>int</code></td>
<td>Suggestion group ID (default: <code>0</code>)</td>
</tr>
</tbody>
</table>
<h3 id="groups">Groups<a class="headerlink" href="#groups" title="Permanent link">&para;</a></h3>
<p>The <code>group</code> field enables organizing suggestions into batches, useful for:</p>
<ul>
<li>Separating suggestions by generation method</li>
<li>Tracking labeling progress across multiple sessions</li>
<li>Grouping frames by difficulty or priority</li>
</ul>
<h3 id="optional-dataset">Optional Dataset<a class="headerlink" href="#optional-dataset" title="Permanent link">&para;</a></h3>
<p>The <code>/suggestions_json</code> dataset is optional. Files without suggestions will not contain this dataset, and the reader returns an empty list when it's missing.</p>
<h2 id="sessions">Sessions<a class="headerlink" href="#sessions" title="Permanent link">&para;</a></h2>
<p>Recording sessions store multi-camera calibration data and synchronized frame groups. Session metadata is stored in the <code>/sessions_json</code> dataset.</p>
<h3 id="json-structure_3">JSON Structure<a class="headerlink" href="#json-structure_3" title="Permanent link">&para;</a></h3>
<p>Each session is stored as a JSON object:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="nt">&quot;calibration&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">        </span><span class="nt">&quot;cam_0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Camera 1&quot;</span><span class="p">,</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">            </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1080</span><span class="p">,</span><span class="w"> </span><span class="mi">1920</span><span class="p">],</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">            </span><span class="nt">&quot;matrix&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="err">...</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]],</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">            </span><span class="nt">&quot;distortions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">            </span><span class="nt">&quot;rotation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">        </span><span class="nt">&quot;cam_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">        </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">    </span><span class="nt">&quot;camcorder_to_video_idx_map&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">        </span><span class="nt">&quot;0&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">        </span><span class="nt">&quot;1&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="w">    </span><span class="nt">&quot;frame_group_dicts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="p">}</span>
</code></pre></div>
<h3 id="calibration">Calibration<a class="headerlink" href="#calibration" title="Permanent link">&para;</a></h3>
<p>Camera calibration data is stored per camera with these fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Shape</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td>-</td>
<td>Camera identifier</td>
</tr>
<tr>
<td><code>size</code></td>
<td><code>int[]</code></td>
<td><code>(2,)</code></td>
<td>Image dimensions <code>[height, width]</code></td>
</tr>
<tr>
<td><code>matrix</code></td>
<td><code>float[][]</code></td>
<td><code>(3, 3)</code></td>
<td>Intrinsic camera matrix</td>
</tr>
<tr>
<td><code>distortions</code></td>
<td><code>float[]</code></td>
<td><code>(5,)</code></td>
<td>Radial-tangential distortion coefficients <code>[k1, k2, p1, p2, k3]</code></td>
</tr>
<tr>
<td><code>rotation</code></td>
<td><code>float[]</code></td>
<td><code>(3,)</code></td>
<td>Rotation vector (axis-angle representation)</td>
</tr>
<tr>
<td><code>translation</code></td>
<td><code>float[]</code></td>
<td><code>(3,)</code></td>
<td>Translation vector</td>
</tr>
</tbody>
</table>
<h3 id="camera-video-mapping">Camera-Video Mapping<a class="headerlink" href="#camera-video-mapping" title="Permanent link">&para;</a></h3>
<p>The <code>camcorder_to_video_idx_map</code> object maps camera indices to video indices in <code>/videos_json</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">    </span><span class="nt">&quot;0&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="nt">&quot;1&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="p">}</span>
</code></pre></div>
<p>This links each camera in the calibration to its corresponding video.</p>
<h3 id="frame-groups">Frame Groups<a class="headerlink" href="#frame-groups" title="Permanent link">&para;</a></h3>
<p>Frame groups synchronize labeled frames across multiple cameras at the same time point. Each frame group contains:</p>
<ul>
<li>A frame index identifying the synchronized time point</li>
<li>Instance groups linking instances across camera views</li>
<li>References to <code>LabeledFrame</code> objects by index</li>
</ul>
<h3 id="optional-dataset_1">Optional Dataset<a class="headerlink" href="#optional-dataset_1" title="Permanent link">&para;</a></h3>
<p>The <code>/sessions_json</code> dataset is optional. Files without multi-camera sessions will not contain this dataset.</p>
<h2 id="instances">Instances<a class="headerlink" href="#instances" title="Permanent link">&para;</a></h2>
<p><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Instance&lt;/code&gt;" href="../../model/#sleap_io.Instance"><code>Instance</code></a>s represent individual animals or objects in a frame. They are stored in the <code>/instances</code> dataset as a structured array.</p>
<h3 id="instance-dtype">Instance Dtype<a class="headerlink" href="#instance-dtype" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">instance_dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">([</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>    <span class="p">(</span><span class="s2">&quot;instance_id&quot;</span><span class="p">,</span> <span class="s2">&quot;i8&quot;</span><span class="p">),</span>        <span class="c1"># Unique instance identifier</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    <span class="p">(</span><span class="s2">&quot;instance_type&quot;</span><span class="p">,</span> <span class="s2">&quot;u1&quot;</span><span class="p">),</span>      <span class="c1"># 0=USER, 1=PREDICTED</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="p">(</span><span class="s2">&quot;frame_id&quot;</span><span class="p">,</span> <span class="s2">&quot;u8&quot;</span><span class="p">),</span>           <span class="c1"># Index into frames dataset</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="p">(</span><span class="s2">&quot;skeleton&quot;</span><span class="p">,</span> <span class="s2">&quot;u4&quot;</span><span class="p">),</span>           <span class="c1"># Index into skeletons list</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span class="p">(</span><span class="s2">&quot;track&quot;</span><span class="p">,</span> <span class="s2">&quot;i4&quot;</span><span class="p">),</span>              <span class="c1"># Index into tracks list (-1 if untracked)</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>    <span class="p">(</span><span class="s2">&quot;from_predicted&quot;</span><span class="p">,</span> <span class="s2">&quot;i8&quot;</span><span class="p">),</span>     <span class="c1"># Parent prediction ID (-1 if none)</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="p">(</span><span class="s2">&quot;score&quot;</span><span class="p">,</span> <span class="s2">&quot;f4&quot;</span><span class="p">),</span>              <span class="c1"># Prediction score (0.0 for user)</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="p">(</span><span class="s2">&quot;point_id_start&quot;</span><span class="p">,</span> <span class="s2">&quot;u8&quot;</span><span class="p">),</span>     <span class="c1"># Start index in points array</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>    <span class="p">(</span><span class="s2">&quot;point_id_end&quot;</span><span class="p">,</span> <span class="s2">&quot;u8&quot;</span><span class="p">),</span>       <span class="c1"># End index (exclusive)</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>    <span class="p">(</span><span class="s2">&quot;tracking_score&quot;</span><span class="p">,</span> <span class="s2">&quot;f4&quot;</span><span class="p">),</span>     <span class="c1"># Tracking confidence (format &gt;= 1.2)</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="p">])</span>
</code></pre></div>
<h3 id="instance-types">Instance Types<a class="headerlink" href="#instance-types" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Value</th>
<th>Data Model Class</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>USER</code></td>
<td><code>0</code></td>
<td><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Instance&lt;/code&gt;" href="../../model/#sleap_io.Instance"><code>Instance</code></a></td>
<td>User-labeled annotation</td>
</tr>
<tr>
<td><code>PREDICTED</code></td>
<td><code>1</code></td>
<td><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.PredictedInstance&lt;/code&gt;" href="../../model/#sleap_io.PredictedInstance"><code>PredictedInstance</code></a></td>
<td>Model prediction</td>
</tr>
</tbody>
</table>
<h3 id="instance-linking_1">Instance Linking<a class="headerlink" href="#instance-linking_1" title="Permanent link">&para;</a></h3>
<p>The <code>from_predicted</code> field links user <a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Instance&lt;/code&gt;" href="../../model/#sleap_io.Instance"><code>Instance</code></a>s to their source <a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.PredictedInstance&lt;/code&gt;" href="../../model/#sleap_io.PredictedInstance"><code>PredictedInstance</code></a>s, enabling tracking of corrections made to model outputs.</p>
<h2 id="points">Points<a class="headerlink" href="#points" title="Permanent link">&para;</a></h2>
<p>Point coordinates are stored in separate datasets for user-labeled and predicted instances.</p>
<h3 id="user-points-points">User Points (<code>/points</code>)<a class="headerlink" href="#user-points-points" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">point_dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">([</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>    <span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;f8&quot;</span><span class="p">),</span>        <span class="c1"># X coordinate</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>    <span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;f8&quot;</span><span class="p">),</span>        <span class="c1"># Y coordinate</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="s2">&quot;?&quot;</span><span class="p">),</span>   <span class="c1"># Is point visible</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>    <span class="p">(</span><span class="s2">&quot;complete&quot;</span><span class="p">,</span> <span class="s2">&quot;?&quot;</span><span class="p">),</span>  <span class="c1"># Is point marked complete</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="p">])</span>
</code></pre></div>
<h3 id="predicted-points-pred_points">Predicted Points (<code>/pred_points</code>)<a class="headerlink" href="#predicted-points-pred_points" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">predicted_point_dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">([</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>    <span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;f8&quot;</span><span class="p">),</span>        <span class="c1"># X coordinate</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>    <span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;f8&quot;</span><span class="p">),</span>        <span class="c1"># Y coordinate</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    <span class="p">(</span><span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="s2">&quot;?&quot;</span><span class="p">),</span>   <span class="c1"># Is point visible</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    <span class="p">(</span><span class="s2">&quot;complete&quot;</span><span class="p">,</span> <span class="s2">&quot;?&quot;</span><span class="p">),</span>  <span class="c1"># Is point marked complete</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>    <span class="p">(</span><span class="s2">&quot;score&quot;</span><span class="p">,</span> <span class="s2">&quot;f8&quot;</span><span class="p">),</span>    <span class="c1"># Prediction confidence</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="p">])</span>
</code></pre></div>
<h3 id="coordinate-system">Coordinate System<a class="headerlink" href="#coordinate-system" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Coordinate System Change</p>
<p>Format 1.1 changed the coordinate system from pixel corner to pixel center.</p>
</div>
<table>
<thead>
<tr>
<th>Format</th>
<th>Origin</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt; 1.1</td>
<td>Top-left corner of pixel at (0, 0)</td>
<td>Legacy</td>
</tr>
<tr>
<td>&gt;= 1.1</td>
<td>Center of pixel at (0, 0)</td>
<td>Current</td>
</tr>
</tbody>
</table>
<p>When reading format &lt; 1.1 files, the reader applies a -0.5 offset to convert coordinates.</p>
<h2 id="labeled-frames">Labeled Frames<a class="headerlink" href="#labeled-frames" title="Permanent link">&para;</a></h2>
<p><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.LabeledFrame&lt;/code&gt;" href="../../model/#sleap_io.LabeledFrame"><code>LabeledFrame</code></a>s are stored in the <code>/frames</code> dataset, linking video frames to their instances.</p>
<h3 id="frame-dtype">Frame Dtype<a class="headerlink" href="#frame-dtype" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">frame_dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">([</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>    <span class="p">(</span><span class="s2">&quot;frame_id&quot;</span><span class="p">,</span> <span class="s2">&quot;u8&quot;</span><span class="p">),</span>           <span class="c1"># Unique frame identifier</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    <span class="p">(</span><span class="s2">&quot;video&quot;</span><span class="p">,</span> <span class="s2">&quot;u4&quot;</span><span class="p">),</span>              <span class="c1"># Video index or sparse video ID</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    <span class="p">(</span><span class="s2">&quot;frame_idx&quot;</span><span class="p">,</span> <span class="s2">&quot;u8&quot;</span><span class="p">),</span>          <span class="c1"># Frame index within video</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>    <span class="p">(</span><span class="s2">&quot;instance_id_start&quot;</span><span class="p">,</span> <span class="s2">&quot;u8&quot;</span><span class="p">),</span>  <span class="c1"># Start index in instances array</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>    <span class="p">(</span><span class="s2">&quot;instance_id_end&quot;</span><span class="p">,</span> <span class="s2">&quot;u8&quot;</span><span class="p">),</span>    <span class="c1"># End index (exclusive)</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="p">])</span>
</code></pre></div>
<h3 id="video-id-mapping">Video ID Mapping<a class="headerlink" href="#video-id-mapping" title="Permanent link">&para;</a></h3>
<p>Modern SLP files use sequential video indices (0, 1, 2, ...), but legacy files may contain sparse video IDs derived from the embedded video group names (e.g., 0, 15, 29). The reader handles both cases transparently.</p>
<h2 id="lazy-loading">Lazy Loading<a class="headerlink" href="#lazy-loading" title="Permanent link">&para;</a></h2>
<p>For large SLP files with hundreds of thousands of frames, sleap-io provides a lazy loading mode that defers <a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.Labels&lt;/code&gt;" href="../../model/#sleap_io.Labels"><code>Labels</code></a> object creation until needed.</p>
<h3 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>Labels (lazy mode)
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>├── LazyDataStore
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>│   ├── frames_data (numpy array)
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>│   ├── instances_data (numpy array)
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>│   ├── points_data (numpy array)
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>│   └── pred_points_data (numpy array)
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>└── LazyFrameList
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>    └── Materializes frames on-demand
</code></pre></div>
<h3 id="performance-benefits">Performance Benefits<a class="headerlink" href="#performance-benefits" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Eager</th>
<th>Lazy</th>
<th>Speedup</th>
</tr>
</thead>
<tbody>
<tr>
<td>Load file</td>
<td>~0.5s</td>
<td>~0.005s</td>
<td><strong>~100x</strong></td>
</tr>
<tr>
<td>Load + numpy()</td>
<td>~0.9s</td>
<td>~0.4s</td>
<td><strong>~2x</strong></td>
</tr>
<tr>
<td>Full iteration</td>
<td>~0.0002s</td>
<td>~0.4s</td>
<td>Eager faster</td>
</tr>
</tbody>
</table>
<p><em>Benchmarks on 18,000 frames with ~40,000 instances.</em></p>
<h3 id="when-to-use-lazy-loading">When to Use Lazy Loading<a class="headerlink" href="#when-to-use-lazy-loading" title="Permanent link">&para;</a></h3>
<p><strong>Recommended for:</strong></p>
<ul>
<li>Converting to NumPy arrays (<code>labels.numpy()</code>)</li>
<li>Saving to another file without modifications</li>
<li>Accessing a small subset of frames</li>
<li>Quick metadata inspection</li>
</ul>
<p><strong>Not recommended for:</strong></p>
<ul>
<li>Iterating over all frames (eager is faster)</li>
<li>Modifying data (must materialize first)</li>
<li>Multiple passes over the data</li>
</ul>
<h3 id="fast-paths">Fast Paths<a class="headerlink" href="#fast-paths" title="Permanent link">&para;</a></h3>
<p>Lazy labels support optimized code paths:</p>
<ol>
<li><strong>numpy() conversion</strong>: Builds arrays directly from raw HDF5 data without creating Python objects</li>
<li><strong>Saving</strong>: Copies raw arrays directly without materialization (when <code>embed</code> is <code>None</code>, <code>False</code>, or <code>"source"</code>)</li>
<li><strong>Metadata queries</strong>: Properties like <code>n_user_instances</code>, <code>n_pred_instances</code> use O(1) array operations</li>
</ol>
<h3 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sleap_io</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sio</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="c1"># Load lazily</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">labels</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_slp</span><span class="p">(</span><span class="s2">&quot;predictions.slp&quot;</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="c1"># Check lazy state</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">labels</span><span class="o">.</span><span class="n">is_lazy</span><span class="p">)</span>  <span class="c1"># True</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="c1"># Fast numpy conversion</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="n">poses</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="c1"># Materialize when modifications needed</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">materialize</span><span class="p">()</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_frame</span><span class="p">)</span>  <span class="c1"># Now works</span>
</code></pre></div>
<h2 id="version-history">Version History<a class="headerlink" href="#version-history" title="Permanent link">&para;</a></h2>
<p>The SLP format has evolved through several versions, tracked by the <code>format_id</code> attribute in <code>/metadata</code>.</p>
<h3 id="format-10">Format 1.0<a class="headerlink" href="#format-10" title="Permanent link">&para;</a></h3>
<p>Initial release format.</p>
<h3 id="format-11">Format 1.1<a class="headerlink" href="#format-11" title="Permanent link">&para;</a></h3>
<p><strong>Coordinate system change</strong>: Changed from top-left pixel corner at (0, 0) to pixel center at (0, 0).</p>
<ul>
<li>Reading: Applies -0.5 offset to coordinates from older files</li>
<li>Writing: Always uses new coordinate system</li>
</ul>
<h3 id="format-12">Format 1.2<a class="headerlink" href="#format-12" title="Permanent link">&para;</a></h3>
<p><strong>Added tracking_score field</strong> to instance dtype.</p>
<ul>
<li>Instance dtype expanded from 9 to 10 fields</li>
<li><code>tracking_score</code> stores tracking confidence for multi-animal workflows</li>
<li>Reading: Defaults to 0.0 for older files</li>
</ul>
<h3 id="format-13">Format 1.3<a class="headerlink" href="#format-13" title="Permanent link">&para;</a></h3>
<p>Minor handling improvements for tracking_score (no schema change from 1.2).</p>
<h3 id="format-14-current">Format 1.4 (Current)<a class="headerlink" href="#format-14-current" title="Permanent link">&para;</a></h3>
<p><strong>Added channel_order attribute</strong> to embedded video datasets.</p>
<ul>
<li>Tracks RGB vs BGR channel ordering for embedded images</li>
<li>Ensures correct color reproduction across different encoding backends</li>
<li>Reading: Defaults to RGB if attribute missing</li>
</ul>
<h2 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>
<h3 id="high-level-functions">High-Level Functions<a class="headerlink" href="#high-level-functions" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.main.load_slp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">load_slp</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">open_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#sleap_io.io.main.load_slp" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Load a SLEAP dataset.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filename</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to a SLEAP labels file (<code>.slp</code>).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>open_videos</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), attempt to open the video backend for
I/O. If <code>False</code>, the backend will not be opened (useful for reading metadata
when the video files are not available).</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lazy</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code>, defer instance materialization for faster loading.
Lazy-loaded Labels support read operations and fast numpy/save.
To modify, call <code>labels.materialize()</code> first. Default is <code>False</code>.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;Labels&lt;/code&gt; (&lt;code&gt;sleap_io.model.labels.Labels&lt;/code&gt;)" href="../../reference/sleap_io/model/labels/#sleap_io.model.labels.Labels">Labels</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dataset as a <code>Labels</code> object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>Labels.is_lazy: Check if Labels is lazy-loaded.
Labels.materialize: Convert lazy Labels to eager.</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/main.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-25" name="__codelineno-0-25"></a><a href="#__codelineno-0-25"><span class="linenos" data-linenos="25 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">load_slp</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">open_videos</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">lazy</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Labels</span><span class="p">:</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><a href="#__codelineno-0-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a SLEAP dataset.</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><a href="#__codelineno-0-27"><span class="linenos" data-linenos="27 "></span></a>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><a href="#__codelineno-0-28"><span class="linenos" data-linenos="28 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><a href="#__codelineno-0-29"><span class="linenos" data-linenos="29 "></span></a><span class="sd">        filename: Path to a SLEAP labels file (`.slp`).</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><a href="#__codelineno-0-30"><span class="linenos" data-linenos="30 "></span></a><span class="sd">        open_videos: If `True` (the default), attempt to open the video backend for</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><a href="#__codelineno-0-31"><span class="linenos" data-linenos="31 "></span></a><span class="sd">            I/O. If `False`, the backend will not be opened (useful for reading metadata</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><a href="#__codelineno-0-32"><span class="linenos" data-linenos="32 "></span></a><span class="sd">            when the video files are not available).</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><a href="#__codelineno-0-33"><span class="linenos" data-linenos="33 "></span></a><span class="sd">        lazy: If `True`, defer instance materialization for faster loading.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><a href="#__codelineno-0-34"><span class="linenos" data-linenos="34 "></span></a><span class="sd">            Lazy-loaded Labels support read operations and fast numpy/save.</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><a href="#__codelineno-0-35"><span class="linenos" data-linenos="35 "></span></a><span class="sd">            To modify, call `labels.materialize()` first. Default is `False`.</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><a href="#__codelineno-0-36"><span class="linenos" data-linenos="36 "></span></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><a href="#__codelineno-0-37"><span class="linenos" data-linenos="37 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><a href="#__codelineno-0-38"><span class="linenos" data-linenos="38 "></span></a><span class="sd">        The dataset as a `Labels` object.</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><a href="#__codelineno-0-39"><span class="linenos" data-linenos="39 "></span></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><a href="#__codelineno-0-40"><span class="linenos" data-linenos="40 "></span></a><span class="sd">    See Also:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><a href="#__codelineno-0-41"><span class="linenos" data-linenos="41 "></span></a><span class="sd">        Labels.is_lazy: Check if Labels is lazy-loaded.</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><a href="#__codelineno-0-42"><span class="linenos" data-linenos="42 "></span></a><span class="sd">        Labels.materialize: Convert lazy Labels to eager.</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><a href="#__codelineno-0-43"><span class="linenos" data-linenos="43 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><a href="#__codelineno-0-44"><span class="linenos" data-linenos="44 "></span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">slp</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><a href="#__codelineno-0-45"><span class="linenos" data-linenos="45 "></span></a>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><a href="#__codelineno-0-46"><span class="linenos" data-linenos="46 "></span></a>    <span class="k">if</span> <span class="n">lazy</span><span class="p">:</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><a href="#__codelineno-0-47"><span class="linenos" data-linenos="47 "></span></a>        <span class="k">return</span> <span class="n">slp</span><span class="o">.</span><span class="n">_read_labels_lazy</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">open_videos</span><span class="o">=</span><span class="n">open_videos</span><span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><a href="#__codelineno-0-48"><span class="linenos" data-linenos="48 "></span></a>    <span class="k">return</span> <span class="n">slp</span><span class="o">.</span><span class="n">read_labels</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">open_videos</span><span class="o">=</span><span class="n">open_videos</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.main.save_slp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">save_slp</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">embed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">restore_original_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">embed_inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plugin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#sleap_io.io.main.save_slp" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Save a SLEAP dataset to a <code>.slp</code> file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;Labels&lt;/code&gt; (&lt;code&gt;sleap_io.model.labels.Labels&lt;/code&gt;)" href="../../reference/sleap_io/model/labels/#sleap_io.model.labels.Labels">Labels</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A SLEAP <code>Labels</code> object (see <code>load_slp</code>).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to save labels to ending with <code>.slp</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>embed</code>
            </td>
            <td>
                  <code><span title="bool">bool</span> | <span title="str">str</span> | <span title="list">list</span>[<span title="tuple">tuple</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Video&lt;/code&gt; (&lt;code&gt;sleap_io.model.video.Video&lt;/code&gt;)" href="../../reference/sleap_io/model/video/#sleap_io.model.video.Video">Video</a>, <span title="int">int</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frames to embed in the saved labels file. One of <code>None</code>, <code>True</code>,
<code>"all"</code>, <code>"user"</code>, <code>"suggestions"</code>, <code>"user+suggestions"</code>, <code>"source"</code> or list
of tuples of <code>(video, frame_idx)</code>.</p>
<p>If <code>False</code> is specified (the default), the source video will be restored
if available, otherwise the embedded frames will be re-saved.</p>
<p>If <code>True</code> or <code>"all"</code>, all labeled frames and suggested frames will be
embedded.</p>
<p>If <code>"source"</code> is specified, no images will be embedded and the source video
will be restored if available.</p>
<p>This argument is only valid for the SLP backend.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restore_original_videos</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (default) and <code>embed=False</code>, use original
video files. If <code>False</code> and <code>embed=False</code>, keep references to source
<code>.pkg.slp</code> files. Only applies when <code>embed=False</code>.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>embed_inplace</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>False</code> (default), a copy of the labels is made before
embedding to avoid modifying the in-memory labels. If <code>True</code>, the
labels will be modified in-place to point to the embedded videos,
which is faster but mutates the input. Only applies when embedding.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), display a progress bar when embedding frames.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>plugin</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image plugin to use for encoding embedded frames. One of "opencv"
or "imageio". If None, uses the global default from
<code>get_default_image_plugin()</code>. If no global default is set, auto-detects
based on available packages (opencv preferred, then imageio).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_callback</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="int">int</span>, <span title="int">int</span>], <span title="bool">bool</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional callback function called during frame embedding
with <code>(current, total)</code> arguments. If it returns <code>False</code>, the operation
is cancelled and <code>ExportCancelled</code> is raised. When provided, tqdm
progress bar is disabled in favor of the callback.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/main.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-51" name="__codelineno-0-51"></a><a href="#__codelineno-0-51"><span class="linenos" data-linenos=" 51 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">save_slp</span><span class="p">(</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><a href="#__codelineno-0-52"><span class="linenos" data-linenos=" 52 "></span></a>    <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><a href="#__codelineno-0-53"><span class="linenos" data-linenos=" 53 "></span></a>    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><a href="#__codelineno-0-54"><span class="linenos" data-linenos=" 54 "></span></a>    <span class="n">embed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">Video</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><a href="#__codelineno-0-55"><span class="linenos" data-linenos=" 55 "></span></a>    <span class="n">restore_original_videos</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><a href="#__codelineno-0-56"><span class="linenos" data-linenos=" 56 "></span></a>    <span class="n">embed_inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><a href="#__codelineno-0-57"><span class="linenos" data-linenos=" 57 "></span></a>    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><a href="#__codelineno-0-58"><span class="linenos" data-linenos=" 58 "></span></a>    <span class="n">plugin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><a href="#__codelineno-0-59"><span class="linenos" data-linenos=" 59 "></span></a>    <span class="n">progress_callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><a href="#__codelineno-0-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="p">):</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><a href="#__codelineno-0-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Save a SLEAP dataset to a `.slp` file.</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><a href="#__codelineno-0-62"><span class="linenos" data-linenos=" 62 "></span></a>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><a href="#__codelineno-0-63"><span class="linenos" data-linenos=" 63 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><a href="#__codelineno-0-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="sd">        labels: A SLEAP `Labels` object (see `load_slp`).</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><a href="#__codelineno-0-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="sd">        filename: Path to save labels to ending with `.slp`.</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><a href="#__codelineno-0-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="sd">        embed: Frames to embed in the saved labels file. One of `None`, `True`,</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><a href="#__codelineno-0-67"><span class="linenos" data-linenos=" 67 "></span></a><span class="sd">            `&quot;all&quot;`, `&quot;user&quot;`, `&quot;suggestions&quot;`, `&quot;user+suggestions&quot;`, `&quot;source&quot;` or list</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><a href="#__codelineno-0-68"><span class="linenos" data-linenos=" 68 "></span></a><span class="sd">            of tuples of `(video, frame_idx)`.</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><a href="#__codelineno-0-69"><span class="linenos" data-linenos=" 69 "></span></a>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><a href="#__codelineno-0-70"><span class="linenos" data-linenos=" 70 "></span></a><span class="sd">            If `False` is specified (the default), the source video will be restored</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><a href="#__codelineno-0-71"><span class="linenos" data-linenos=" 71 "></span></a><span class="sd">            if available, otherwise the embedded frames will be re-saved.</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><a href="#__codelineno-0-72"><span class="linenos" data-linenos=" 72 "></span></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><a href="#__codelineno-0-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="sd">            If `True` or `&quot;all&quot;`, all labeled frames and suggested frames will be</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><a href="#__codelineno-0-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="sd">            embedded.</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><a href="#__codelineno-0-75"><span class="linenos" data-linenos=" 75 "></span></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><a href="#__codelineno-0-76"><span class="linenos" data-linenos=" 76 "></span></a><span class="sd">            If `&quot;source&quot;` is specified, no images will be embedded and the source video</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><a href="#__codelineno-0-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="sd">            will be restored if available.</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><a href="#__codelineno-0-78"><span class="linenos" data-linenos=" 78 "></span></a>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><a href="#__codelineno-0-79"><span class="linenos" data-linenos=" 79 "></span></a><span class="sd">            This argument is only valid for the SLP backend.</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><a href="#__codelineno-0-80"><span class="linenos" data-linenos=" 80 "></span></a><span class="sd">        restore_original_videos: If `True` (default) and `embed=False`, use original</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><a href="#__codelineno-0-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="sd">            video files. If `False` and `embed=False`, keep references to source</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><a href="#__codelineno-0-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="sd">            `.pkg.slp` files. Only applies when `embed=False`.</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><a href="#__codelineno-0-83"><span class="linenos" data-linenos=" 83 "></span></a><span class="sd">        embed_inplace: If `False` (default), a copy of the labels is made before</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><a href="#__codelineno-0-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="sd">            embedding to avoid modifying the in-memory labels. If `True`, the</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><a href="#__codelineno-0-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="sd">            labels will be modified in-place to point to the embedded videos,</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><a href="#__codelineno-0-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="sd">            which is faster but mutates the input. Only applies when embedding.</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><a href="#__codelineno-0-87"><span class="linenos" data-linenos=" 87 "></span></a><span class="sd">        verbose: If `True` (the default), display a progress bar when embedding frames.</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><a href="#__codelineno-0-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="sd">        plugin: Image plugin to use for encoding embedded frames. One of &quot;opencv&quot;</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><a href="#__codelineno-0-89"><span class="linenos" data-linenos=" 89 "></span></a><span class="sd">            or &quot;imageio&quot;. If None, uses the global default from</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><a href="#__codelineno-0-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="sd">            `get_default_image_plugin()`. If no global default is set, auto-detects</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><a href="#__codelineno-0-91"><span class="linenos" data-linenos=" 91 "></span></a><span class="sd">            based on available packages (opencv preferred, then imageio).</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><a href="#__codelineno-0-92"><span class="linenos" data-linenos=" 92 "></span></a><span class="sd">        progress_callback: Optional callback function called during frame embedding</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><a href="#__codelineno-0-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="sd">            with `(current, total)` arguments. If it returns `False`, the operation</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><a href="#__codelineno-0-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="sd">            is cancelled and `ExportCancelled` is raised. When provided, tqdm</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><a href="#__codelineno-0-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="sd">            progress bar is disabled in favor of the callback.</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><a href="#__codelineno-0-96"><span class="linenos" data-linenos=" 96 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><a href="#__codelineno-0-97"><span class="linenos" data-linenos=" 97 "></span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">slp</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><a href="#__codelineno-0-98"><span class="linenos" data-linenos=" 98 "></span></a>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><a href="#__codelineno-0-99"><span class="linenos" data-linenos=" 99 "></span></a>    <span class="k">return</span> <span class="n">slp</span><span class="o">.</span><span class="n">write_labels</span><span class="p">(</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><a href="#__codelineno-0-100"><span class="linenos" data-linenos="100 "></span></a>        <span class="n">filename</span><span class="p">,</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><a href="#__codelineno-0-101"><span class="linenos" data-linenos="101 "></span></a>        <span class="n">labels</span><span class="p">,</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><a href="#__codelineno-0-102"><span class="linenos" data-linenos="102 "></span></a>        <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><a href="#__codelineno-0-103"><span class="linenos" data-linenos="103 "></span></a>        <span class="n">restore_original_videos</span><span class="o">=</span><span class="n">restore_original_videos</span><span class="p">,</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><a href="#__codelineno-0-104"><span class="linenos" data-linenos="104 "></span></a>        <span class="n">embed_inplace</span><span class="o">=</span><span class="n">embed_inplace</span><span class="p">,</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><a href="#__codelineno-0-105"><span class="linenos" data-linenos="105 "></span></a>        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><a href="#__codelineno-0-106"><span class="linenos" data-linenos="106 "></span></a>        <span class="n">plugin</span><span class="o">=</span><span class="n">plugin</span><span class="p">,</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><a href="#__codelineno-0-107"><span class="linenos" data-linenos="107 "></span></a>        <span class="n">progress_callback</span><span class="o">=</span><span class="n">progress_callback</span><span class="p">,</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><a href="#__codelineno-0-108"><span class="linenos" data-linenos="108 "></span></a>    <span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div><h3 id="core-module">Core Module<a class="headerlink" href="#core-module" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.read_labels" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">read_labels</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">open_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.read_labels" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Read a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string path to the SLEAP labels file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>open_videos</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), attempt to open the video backend for
I/O. If <code>False</code>, the backend will not be opened (useful for reading metadata
when the video files are not available).</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;Labels&lt;/code&gt; (&lt;code&gt;sleap_io.model.labels.Labels&lt;/code&gt;)" href="../../reference/sleap_io/model/labels/#sleap_io.model.labels.Labels">Labels</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The processed <code>Labels</code> object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-2262" name="__codelineno-0-2262"></a><a href="#__codelineno-0-2262"><span class="linenos" data-linenos="2262 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">read_labels</span><span class="p">(</span><span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">open_videos</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Labels</span><span class="p">:</span>
<a id="__codelineno-0-2263" name="__codelineno-0-2263"></a><a href="#__codelineno-0-2263"><span class="linenos" data-linenos="2263 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Read a SLEAP labels file.</span>
<a id="__codelineno-0-2264" name="__codelineno-0-2264"></a><a href="#__codelineno-0-2264"><span class="linenos" data-linenos="2264 "></span></a>
<a id="__codelineno-0-2265" name="__codelineno-0-2265"></a><a href="#__codelineno-0-2265"><span class="linenos" data-linenos="2265 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2266" name="__codelineno-0-2266"></a><a href="#__codelineno-0-2266"><span class="linenos" data-linenos="2266 "></span></a><span class="sd">        labels_path: A string path to the SLEAP labels file.</span>
<a id="__codelineno-0-2267" name="__codelineno-0-2267"></a><a href="#__codelineno-0-2267"><span class="linenos" data-linenos="2267 "></span></a><span class="sd">        open_videos: If `True` (the default), attempt to open the video backend for</span>
<a id="__codelineno-0-2268" name="__codelineno-0-2268"></a><a href="#__codelineno-0-2268"><span class="linenos" data-linenos="2268 "></span></a><span class="sd">            I/O. If `False`, the backend will not be opened (useful for reading metadata</span>
<a id="__codelineno-0-2269" name="__codelineno-0-2269"></a><a href="#__codelineno-0-2269"><span class="linenos" data-linenos="2269 "></span></a><span class="sd">            when the video files are not available).</span>
<a id="__codelineno-0-2270" name="__codelineno-0-2270"></a><a href="#__codelineno-0-2270"><span class="linenos" data-linenos="2270 "></span></a>
<a id="__codelineno-0-2271" name="__codelineno-0-2271"></a><a href="#__codelineno-0-2271"><span class="linenos" data-linenos="2271 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2272" name="__codelineno-0-2272"></a><a href="#__codelineno-0-2272"><span class="linenos" data-linenos="2272 "></span></a><span class="sd">        The processed `Labels` object.</span>
<a id="__codelineno-0-2273" name="__codelineno-0-2273"></a><a href="#__codelineno-0-2273"><span class="linenos" data-linenos="2273 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2274" name="__codelineno-0-2274"></a><a href="#__codelineno-0-2274"><span class="linenos" data-linenos="2274 "></span></a>    <span class="n">tracks</span> <span class="o">=</span> <span class="n">read_tracks</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span>
<a id="__codelineno-0-2275" name="__codelineno-0-2275"></a><a href="#__codelineno-0-2275"><span class="linenos" data-linenos="2275 "></span></a>    <span class="n">videos</span> <span class="o">=</span> <span class="n">read_videos</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">open_backend</span><span class="o">=</span><span class="n">open_videos</span><span class="p">)</span>
<a id="__codelineno-0-2276" name="__codelineno-0-2276"></a><a href="#__codelineno-0-2276"><span class="linenos" data-linenos="2276 "></span></a>    <span class="n">skeletons</span> <span class="o">=</span> <span class="n">read_skeletons</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span>
<a id="__codelineno-0-2277" name="__codelineno-0-2277"></a><a href="#__codelineno-0-2277"><span class="linenos" data-linenos="2277 "></span></a>    <span class="n">points</span> <span class="o">=</span> <span class="n">read_points</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span>
<a id="__codelineno-0-2278" name="__codelineno-0-2278"></a><a href="#__codelineno-0-2278"><span class="linenos" data-linenos="2278 "></span></a>    <span class="n">pred_points</span> <span class="o">=</span> <span class="n">read_pred_points</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span>
<a id="__codelineno-0-2279" name="__codelineno-0-2279"></a><a href="#__codelineno-0-2279"><span class="linenos" data-linenos="2279 "></span></a>    <span class="n">format_id</span> <span class="o">=</span> <span class="n">read_hdf5_attrs</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;format_id&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2280" name="__codelineno-0-2280"></a><a href="#__codelineno-0-2280"><span class="linenos" data-linenos="2280 "></span></a>    <span class="n">instances</span> <span class="o">=</span> <span class="n">read_instances</span><span class="p">(</span>
<a id="__codelineno-0-2281" name="__codelineno-0-2281"></a><a href="#__codelineno-0-2281"><span class="linenos" data-linenos="2281 "></span></a>        <span class="n">labels_path</span><span class="p">,</span> <span class="n">skeletons</span><span class="p">,</span> <span class="n">tracks</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">pred_points</span><span class="p">,</span> <span class="n">format_id</span>
<a id="__codelineno-0-2282" name="__codelineno-0-2282"></a><a href="#__codelineno-0-2282"><span class="linenos" data-linenos="2282 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-2283" name="__codelineno-0-2283"></a><a href="#__codelineno-0-2283"><span class="linenos" data-linenos="2283 "></span></a>    <span class="n">suggestions</span> <span class="o">=</span> <span class="n">read_suggestions</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">videos</span><span class="p">)</span>
<a id="__codelineno-0-2284" name="__codelineno-0-2284"></a><a href="#__codelineno-0-2284"><span class="linenos" data-linenos="2284 "></span></a>    <span class="n">metadata</span> <span class="o">=</span> <span class="n">read_metadata</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span>
<a id="__codelineno-0-2285" name="__codelineno-0-2285"></a><a href="#__codelineno-0-2285"><span class="linenos" data-linenos="2285 "></span></a>    <span class="n">provenance</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;provenance&quot;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">())</span>
<a id="__codelineno-0-2286" name="__codelineno-0-2286"></a><a href="#__codelineno-0-2286"><span class="linenos" data-linenos="2286 "></span></a>
<a id="__codelineno-0-2287" name="__codelineno-0-2287"></a><a href="#__codelineno-0-2287"><span class="linenos" data-linenos="2287 "></span></a>    <span class="n">frames</span> <span class="o">=</span> <span class="n">read_hdf5_dataset</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;frames&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2288" name="__codelineno-0-2288"></a><a href="#__codelineno-0-2288"><span class="linenos" data-linenos="2288 "></span></a>
<a id="__codelineno-0-2289" name="__codelineno-0-2289"></a><a href="#__codelineno-0-2289"><span class="linenos" data-linenos="2289 "></span></a>    <span class="c1"># Check if video IDs in frames are sequential list indices (0, 1, 2, ..., n-1)</span>
<a id="__codelineno-0-2290" name="__codelineno-0-2290"></a><a href="#__codelineno-0-2290"><span class="linenos" data-linenos="2290 "></span></a>    <span class="c1"># or sparse embedded IDs (e.g., 0, 15, 29, 47, ...) that need remapping</span>
<a id="__codelineno-0-2291" name="__codelineno-0-2291"></a><a href="#__codelineno-0-2291"><span class="linenos" data-linenos="2291 "></span></a>    <span class="n">frame_video_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">frames</span><span class="p">)</span>
<a id="__codelineno-0-2292" name="__codelineno-0-2292"></a><a href="#__codelineno-0-2292"><span class="linenos" data-linenos="2292 "></span></a>    <span class="n">max_frame_video_id</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">frame_video_ids</span><span class="p">)</span> <span class="k">if</span> <span class="n">frame_video_ids</span> <span class="k">else</span> <span class="mi">0</span>
<a id="__codelineno-0-2293" name="__codelineno-0-2293"></a><a href="#__codelineno-0-2293"><span class="linenos" data-linenos="2293 "></span></a>
<a id="__codelineno-0-2294" name="__codelineno-0-2294"></a><a href="#__codelineno-0-2294"><span class="linenos" data-linenos="2294 "></span></a>    <span class="c1"># If max video ID == len(videos) - 1 and IDs are contiguous, they&#39;re list indices</span>
<a id="__codelineno-0-2295" name="__codelineno-0-2295"></a><a href="#__codelineno-0-2295"><span class="linenos" data-linenos="2295 "></span></a>    <span class="c1"># In this case, use identity mapping (backwards compatible behavior)</span>
<a id="__codelineno-0-2296" name="__codelineno-0-2296"></a><a href="#__codelineno-0-2296"><span class="linenos" data-linenos="2296 "></span></a>    <span class="n">frames_use_list_indices</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2297" name="__codelineno-0-2297"></a><a href="#__codelineno-0-2297"><span class="linenos" data-linenos="2297 "></span></a>        <span class="nb">len</span><span class="p">(</span><span class="n">frame_video_ids</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">videos</span><span class="p">)</span> <span class="ow">and</span> <span class="n">max_frame_video_id</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">videos</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
<a id="__codelineno-0-2298" name="__codelineno-0-2298"></a><a href="#__codelineno-0-2298"><span class="linenos" data-linenos="2298 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-2299" name="__codelineno-0-2299"></a><a href="#__codelineno-0-2299"><span class="linenos" data-linenos="2299 "></span></a>
<a id="__codelineno-0-2300" name="__codelineno-0-2300"></a><a href="#__codelineno-0-2300"><span class="linenos" data-linenos="2300 "></span></a>    <span class="k">if</span> <span class="n">frames_use_list_indices</span><span class="p">:</span>
<a id="__codelineno-0-2301" name="__codelineno-0-2301"></a><a href="#__codelineno-0-2301"><span class="linenos" data-linenos="2301 "></span></a>        <span class="c1"># Video IDs are sequential list indices - use identity mapping</span>
<a id="__codelineno-0-2302" name="__codelineno-0-2302"></a><a href="#__codelineno-0-2302"><span class="linenos" data-linenos="2302 "></span></a>        <span class="n">video_id_to_index</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">videos</span><span class="p">))}</span>
<a id="__codelineno-0-2303" name="__codelineno-0-2303"></a><a href="#__codelineno-0-2303"><span class="linenos" data-linenos="2303 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2304" name="__codelineno-0-2304"></a><a href="#__codelineno-0-2304"><span class="linenos" data-linenos="2304 "></span></a>        <span class="c1"># Build mapping from sparse video IDs to list indices</span>
<a id="__codelineno-0-2305" name="__codelineno-0-2305"></a><a href="#__codelineno-0-2305"><span class="linenos" data-linenos="2305 "></span></a>        <span class="c1"># This handles files from old SLEAP where video IDs can be sparse</span>
<a id="__codelineno-0-2306" name="__codelineno-0-2306"></a><a href="#__codelineno-0-2306"><span class="linenos" data-linenos="2306 "></span></a>        <span class="c1"># (e.g., 0, 15, 29, 47, ...) rather than sequential (0, 1, 2, 3, ...)</span>
<a id="__codelineno-0-2307" name="__codelineno-0-2307"></a><a href="#__codelineno-0-2307"><span class="linenos" data-linenos="2307 "></span></a>        <span class="n">video_id_to_index</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-2308" name="__codelineno-0-2308"></a><a href="#__codelineno-0-2308"><span class="linenos" data-linenos="2308 "></span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">video</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">videos</span><span class="p">):</span>
<a id="__codelineno-0-2309" name="__codelineno-0-2309"></a><a href="#__codelineno-0-2309"><span class="linenos" data-linenos="2309 "></span></a>            <span class="c1"># For embedded videos, extract the video ID from backend.dataset</span>
<a id="__codelineno-0-2310" name="__codelineno-0-2310"></a><a href="#__codelineno-0-2310"><span class="linenos" data-linenos="2310 "></span></a>            <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-2311" name="__codelineno-0-2311"></a><a href="#__codelineno-0-2311"><span class="linenos" data-linenos="2311 "></span></a>                <span class="nb">hasattr</span><span class="p">(</span><span class="n">video</span><span class="p">,</span> <span class="s2">&quot;backend&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2312" name="__codelineno-0-2312"></a><a href="#__codelineno-0-2312"><span class="linenos" data-linenos="2312 "></span></a>                <span class="ow">and</span> <span class="n">video</span><span class="o">.</span><span class="n">backend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-2313" name="__codelineno-0-2313"></a><a href="#__codelineno-0-2313"><span class="linenos" data-linenos="2313 "></span></a>                <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">video</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;dataset&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2314" name="__codelineno-0-2314"></a><a href="#__codelineno-0-2314"><span class="linenos" data-linenos="2314 "></span></a>                <span class="ow">and</span> <span class="n">video</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">dataset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-2315" name="__codelineno-0-2315"></a><a href="#__codelineno-0-2315"><span class="linenos" data-linenos="2315 "></span></a>            <span class="p">):</span>
<a id="__codelineno-0-2316" name="__codelineno-0-2316"></a><a href="#__codelineno-0-2316"><span class="linenos" data-linenos="2316 "></span></a>                <span class="n">dataset</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">dataset</span>
<a id="__codelineno-0-2317" name="__codelineno-0-2317"></a><a href="#__codelineno-0-2317"><span class="linenos" data-linenos="2317 "></span></a>                <span class="c1"># Extract video ID from dataset name (e.g., &quot;video15/video&quot; → 15)</span>
<a id="__codelineno-0-2318" name="__codelineno-0-2318"></a><a href="#__codelineno-0-2318"><span class="linenos" data-linenos="2318 "></span></a>                <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>
<a id="__codelineno-0-2319" name="__codelineno-0-2319"></a><a href="#__codelineno-0-2319"><span class="linenos" data-linenos="2319 "></span></a>                    <span class="n">video_group</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-2320" name="__codelineno-0-2320"></a><a href="#__codelineno-0-2320"><span class="linenos" data-linenos="2320 "></span></a>                    <span class="k">if</span> <span class="n">video_group</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;video&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2321" name="__codelineno-0-2321"></a><a href="#__codelineno-0-2321"><span class="linenos" data-linenos="2321 "></span></a>                        <span class="n">video_id_str</span> <span class="o">=</span> <span class="n">video_group</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>  <span class="c1"># Remove &quot;video&quot; prefix</span>
<a id="__codelineno-0-2322" name="__codelineno-0-2322"></a><a href="#__codelineno-0-2322"><span class="linenos" data-linenos="2322 "></span></a>                        <span class="k">if</span> <span class="n">video_id_str</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
<a id="__codelineno-0-2323" name="__codelineno-0-2323"></a><a href="#__codelineno-0-2323"><span class="linenos" data-linenos="2323 "></span></a>                            <span class="n">video_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">video_id_str</span><span class="p">)</span>
<a id="__codelineno-0-2324" name="__codelineno-0-2324"></a><a href="#__codelineno-0-2324"><span class="linenos" data-linenos="2324 "></span></a>                            <span class="n">video_id_to_index</span><span class="p">[</span><span class="n">video_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
<a id="__codelineno-0-2325" name="__codelineno-0-2325"></a><a href="#__codelineno-0-2325"><span class="linenos" data-linenos="2325 "></span></a>                            <span class="k">continue</span>
<a id="__codelineno-0-2326" name="__codelineno-0-2326"></a><a href="#__codelineno-0-2326"><span class="linenos" data-linenos="2326 "></span></a>
<a id="__codelineno-0-2327" name="__codelineno-0-2327"></a><a href="#__codelineno-0-2327"><span class="linenos" data-linenos="2327 "></span></a>            <span class="c1"># For non-embedded videos or videos without extractable IDs,</span>
<a id="__codelineno-0-2328" name="__codelineno-0-2328"></a><a href="#__codelineno-0-2328"><span class="linenos" data-linenos="2328 "></span></a>            <span class="c1"># assume sequential indexing (backwards compatible behavior)</span>
<a id="__codelineno-0-2329" name="__codelineno-0-2329"></a><a href="#__codelineno-0-2329"><span class="linenos" data-linenos="2329 "></span></a>            <span class="n">video_id_to_index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
<a id="__codelineno-0-2330" name="__codelineno-0-2330"></a><a href="#__codelineno-0-2330"><span class="linenos" data-linenos="2330 "></span></a>
<a id="__codelineno-0-2331" name="__codelineno-0-2331"></a><a href="#__codelineno-0-2331"><span class="linenos" data-linenos="2331 "></span></a>    <span class="n">labeled_frames</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-2332" name="__codelineno-0-2332"></a><a href="#__codelineno-0-2332"><span class="linenos" data-linenos="2332 "></span></a>    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">video_id</span><span class="p">,</span> <span class="n">frame_idx</span><span class="p">,</span> <span class="n">instance_id_start</span><span class="p">,</span> <span class="n">instance_id_end</span> <span class="ow">in</span> <span class="n">frames</span><span class="p">:</span>
<a id="__codelineno-0-2333" name="__codelineno-0-2333"></a><a href="#__codelineno-0-2333"><span class="linenos" data-linenos="2333 "></span></a>        <span class="c1"># Map sparse video_id to sequential list index</span>
<a id="__codelineno-0-2334" name="__codelineno-0-2334"></a><a href="#__codelineno-0-2334"><span class="linenos" data-linenos="2334 "></span></a>        <span class="n">video_index</span> <span class="o">=</span> <span class="n">video_id_to_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">video_id</span><span class="p">,</span> <span class="n">video_id</span><span class="p">)</span>
<a id="__codelineno-0-2335" name="__codelineno-0-2335"></a><a href="#__codelineno-0-2335"><span class="linenos" data-linenos="2335 "></span></a>
<a id="__codelineno-0-2336" name="__codelineno-0-2336"></a><a href="#__codelineno-0-2336"><span class="linenos" data-linenos="2336 "></span></a>        <span class="n">labeled_frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-2337" name="__codelineno-0-2337"></a><a href="#__codelineno-0-2337"><span class="linenos" data-linenos="2337 "></span></a>            <span class="n">LabeledFrame</span><span class="p">(</span>
<a id="__codelineno-0-2338" name="__codelineno-0-2338"></a><a href="#__codelineno-0-2338"><span class="linenos" data-linenos="2338 "></span></a>                <span class="n">video</span><span class="o">=</span><span class="n">videos</span><span class="p">[</span><span class="n">video_index</span><span class="p">],</span>
<a id="__codelineno-0-2339" name="__codelineno-0-2339"></a><a href="#__codelineno-0-2339"><span class="linenos" data-linenos="2339 "></span></a>                <span class="n">frame_idx</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">frame_idx</span><span class="p">),</span>
<a id="__codelineno-0-2340" name="__codelineno-0-2340"></a><a href="#__codelineno-0-2340"><span class="linenos" data-linenos="2340 "></span></a>                <span class="n">instances</span><span class="o">=</span><span class="n">instances</span><span class="p">[</span><span class="n">instance_id_start</span><span class="p">:</span><span class="n">instance_id_end</span><span class="p">],</span>
<a id="__codelineno-0-2341" name="__codelineno-0-2341"></a><a href="#__codelineno-0-2341"><span class="linenos" data-linenos="2341 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-2342" name="__codelineno-0-2342"></a><a href="#__codelineno-0-2342"><span class="linenos" data-linenos="2342 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-2343" name="__codelineno-0-2343"></a><a href="#__codelineno-0-2343"><span class="linenos" data-linenos="2343 "></span></a>
<a id="__codelineno-0-2344" name="__codelineno-0-2344"></a><a href="#__codelineno-0-2344"><span class="linenos" data-linenos="2344 "></span></a>    <span class="n">sessions</span> <span class="o">=</span> <span class="n">read_sessions</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">videos</span><span class="p">,</span> <span class="n">labeled_frames</span><span class="p">)</span>
<a id="__codelineno-0-2345" name="__codelineno-0-2345"></a><a href="#__codelineno-0-2345"><span class="linenos" data-linenos="2345 "></span></a>
<a id="__codelineno-0-2346" name="__codelineno-0-2346"></a><a href="#__codelineno-0-2346"><span class="linenos" data-linenos="2346 "></span></a>    <span class="n">labels</span> <span class="o">=</span> <span class="n">Labels</span><span class="p">(</span>
<a id="__codelineno-0-2347" name="__codelineno-0-2347"></a><a href="#__codelineno-0-2347"><span class="linenos" data-linenos="2347 "></span></a>        <span class="n">labeled_frames</span><span class="o">=</span><span class="n">labeled_frames</span><span class="p">,</span>
<a id="__codelineno-0-2348" name="__codelineno-0-2348"></a><a href="#__codelineno-0-2348"><span class="linenos" data-linenos="2348 "></span></a>        <span class="n">videos</span><span class="o">=</span><span class="n">videos</span><span class="p">,</span>
<a id="__codelineno-0-2349" name="__codelineno-0-2349"></a><a href="#__codelineno-0-2349"><span class="linenos" data-linenos="2349 "></span></a>        <span class="n">skeletons</span><span class="o">=</span><span class="n">skeletons</span><span class="p">,</span>
<a id="__codelineno-0-2350" name="__codelineno-0-2350"></a><a href="#__codelineno-0-2350"><span class="linenos" data-linenos="2350 "></span></a>        <span class="n">tracks</span><span class="o">=</span><span class="n">tracks</span><span class="p">,</span>
<a id="__codelineno-0-2351" name="__codelineno-0-2351"></a><a href="#__codelineno-0-2351"><span class="linenos" data-linenos="2351 "></span></a>        <span class="n">suggestions</span><span class="o">=</span><span class="n">suggestions</span><span class="p">,</span>
<a id="__codelineno-0-2352" name="__codelineno-0-2352"></a><a href="#__codelineno-0-2352"><span class="linenos" data-linenos="2352 "></span></a>        <span class="n">sessions</span><span class="o">=</span><span class="n">sessions</span><span class="p">,</span>
<a id="__codelineno-0-2353" name="__codelineno-0-2353"></a><a href="#__codelineno-0-2353"><span class="linenos" data-linenos="2353 "></span></a>        <span class="n">provenance</span><span class="o">=</span><span class="n">provenance</span><span class="p">,</span>
<a id="__codelineno-0-2354" name="__codelineno-0-2354"></a><a href="#__codelineno-0-2354"><span class="linenos" data-linenos="2354 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-2355" name="__codelineno-0-2355"></a><a href="#__codelineno-0-2355"><span class="linenos" data-linenos="2355 "></span></a>    <span class="n">labels</span><span class="o">.</span><span class="n">provenance</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels_path</span>
<a id="__codelineno-0-2356" name="__codelineno-0-2356"></a><a href="#__codelineno-0-2356"><span class="linenos" data-linenos="2356 "></span></a>
<a id="__codelineno-0-2357" name="__codelineno-0-2357"></a><a href="#__codelineno-0-2357"><span class="linenos" data-linenos="2357 "></span></a>    <span class="k">return</span> <span class="n">labels</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.write_labels" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">write_labels</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">embed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">restore_original_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">embed_inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plugin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">embed_all_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.write_labels" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Write a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string path to the SLEAP labels file to save.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>labels</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;Labels&lt;/code&gt; (&lt;code&gt;sleap_io.model.labels.Labels&lt;/code&gt;)" href="../../reference/sleap_io/model/labels/#sleap_io.model.labels.Labels">Labels</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A <code>Labels</code> object to save.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>embed</code>
            </td>
            <td>
                  <code><span title="bool">bool</span> | <span title="str">str</span> | <span title="list">list</span>[<span title="tuple">tuple</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Video&lt;/code&gt; (&lt;code&gt;sleap_io.model.video.Video&lt;/code&gt;)" href="../../reference/sleap_io/model/video/#sleap_io.model.video.Video">Video</a>, <span title="int">int</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frames to embed in the saved labels file. One of <code>None</code>, <code>True</code>,
<code>"all"</code>, <code>"user"</code>, <code>"suggestions"</code>, <code>"user+suggestions"</code>, <code>"source"</code> or list
of tuples of <code>(video, frame_idx)</code>.</p>
<p>If <code>None</code> is specified (the default) and the labels contains embedded
frames, those embedded frames will be re-saved to the new file.</p>
<p>If <code>True</code> or <code>"all"</code>, all labeled frames and suggested frames will be
embedded.</p>
<p>If <code>"source"</code> is specified, no images will be embedded and the source video
will be restored if available.</p>
<p>This argument is only valid for the SLP backend.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restore_original_videos</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (default) and <code>embed=False</code>, use original
video files. If <code>False</code> and <code>embed=False</code>, keep references to source
<code>.pkg.slp</code> files. Only applies when <code>embed=False</code>.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>embed_inplace</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>False</code> (default), a copy of the labels is made before
embedding to avoid modifying the in-memory labels. If <code>True</code>, the
labels will be modified in-place to point to the embedded videos,
which is faster but mutates the input. Only applies when embedding.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), display a progress bar when embedding frames.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>plugin</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image plugin to use for encoding embedded frames. One of "opencv"
or "imageio". If None, uses the global default from
<code>get_default_image_plugin()</code>. If no global default is set, auto-detects
based on available packages.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>embed_all_videos</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), all videos in the labels will be
converted to embedded references, even if they have no frames to embed.
This ensures package files are portable. If <code>False</code>, only videos with
frames to embed are converted.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_callback</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="int">int</span>, <span title="int">int</span>], <span title="bool">bool</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional callback function called during frame embedding
with <code>(current, total)</code> arguments. If it returns <code>False</code>, the operation
is cancelled and <code>ExportCancelled</code> is raised.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-2506" name="__codelineno-0-2506"></a><a href="#__codelineno-0-2506"><span class="linenos" data-linenos="2506 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">write_labels</span><span class="p">(</span>
<a id="__codelineno-0-2507" name="__codelineno-0-2507"></a><a href="#__codelineno-0-2507"><span class="linenos" data-linenos="2507 "></span></a>    <span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-2508" name="__codelineno-0-2508"></a><a href="#__codelineno-0-2508"><span class="linenos" data-linenos="2508 "></span></a>    <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span>
<a id="__codelineno-0-2509" name="__codelineno-0-2509"></a><a href="#__codelineno-0-2509"><span class="linenos" data-linenos="2509 "></span></a>    <span class="n">embed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">Video</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2510" name="__codelineno-0-2510"></a><a href="#__codelineno-0-2510"><span class="linenos" data-linenos="2510 "></span></a>    <span class="n">restore_original_videos</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-2511" name="__codelineno-0-2511"></a><a href="#__codelineno-0-2511"><span class="linenos" data-linenos="2511 "></span></a>    <span class="n">embed_inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-2512" name="__codelineno-0-2512"></a><a href="#__codelineno-0-2512"><span class="linenos" data-linenos="2512 "></span></a>    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-2513" name="__codelineno-0-2513"></a><a href="#__codelineno-0-2513"><span class="linenos" data-linenos="2513 "></span></a>    <span class="n">plugin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2514" name="__codelineno-0-2514"></a><a href="#__codelineno-0-2514"><span class="linenos" data-linenos="2514 "></span></a>    <span class="n">embed_all_videos</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-2515" name="__codelineno-0-2515"></a><a href="#__codelineno-0-2515"><span class="linenos" data-linenos="2515 "></span></a>    <span class="n">progress_callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2516" name="__codelineno-0-2516"></a><a href="#__codelineno-0-2516"><span class="linenos" data-linenos="2516 "></span></a><span class="p">):</span>
<a id="__codelineno-0-2517" name="__codelineno-0-2517"></a><a href="#__codelineno-0-2517"><span class="linenos" data-linenos="2517 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Write a SLEAP labels file.</span>
<a id="__codelineno-0-2518" name="__codelineno-0-2518"></a><a href="#__codelineno-0-2518"><span class="linenos" data-linenos="2518 "></span></a>
<a id="__codelineno-0-2519" name="__codelineno-0-2519"></a><a href="#__codelineno-0-2519"><span class="linenos" data-linenos="2519 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2520" name="__codelineno-0-2520"></a><a href="#__codelineno-0-2520"><span class="linenos" data-linenos="2520 "></span></a><span class="sd">        labels_path: A string path to the SLEAP labels file to save.</span>
<a id="__codelineno-0-2521" name="__codelineno-0-2521"></a><a href="#__codelineno-0-2521"><span class="linenos" data-linenos="2521 "></span></a><span class="sd">        labels: A `Labels` object to save.</span>
<a id="__codelineno-0-2522" name="__codelineno-0-2522"></a><a href="#__codelineno-0-2522"><span class="linenos" data-linenos="2522 "></span></a><span class="sd">        embed: Frames to embed in the saved labels file. One of `None`, `True`,</span>
<a id="__codelineno-0-2523" name="__codelineno-0-2523"></a><a href="#__codelineno-0-2523"><span class="linenos" data-linenos="2523 "></span></a><span class="sd">            `&quot;all&quot;`, `&quot;user&quot;`, `&quot;suggestions&quot;`, `&quot;user+suggestions&quot;`, `&quot;source&quot;` or list</span>
<a id="__codelineno-0-2524" name="__codelineno-0-2524"></a><a href="#__codelineno-0-2524"><span class="linenos" data-linenos="2524 "></span></a><span class="sd">            of tuples of `(video, frame_idx)`.</span>
<a id="__codelineno-0-2525" name="__codelineno-0-2525"></a><a href="#__codelineno-0-2525"><span class="linenos" data-linenos="2525 "></span></a>
<a id="__codelineno-0-2526" name="__codelineno-0-2526"></a><a href="#__codelineno-0-2526"><span class="linenos" data-linenos="2526 "></span></a><span class="sd">            If `None` is specified (the default) and the labels contains embedded</span>
<a id="__codelineno-0-2527" name="__codelineno-0-2527"></a><a href="#__codelineno-0-2527"><span class="linenos" data-linenos="2527 "></span></a><span class="sd">            frames, those embedded frames will be re-saved to the new file.</span>
<a id="__codelineno-0-2528" name="__codelineno-0-2528"></a><a href="#__codelineno-0-2528"><span class="linenos" data-linenos="2528 "></span></a>
<a id="__codelineno-0-2529" name="__codelineno-0-2529"></a><a href="#__codelineno-0-2529"><span class="linenos" data-linenos="2529 "></span></a><span class="sd">            If `True` or `&quot;all&quot;`, all labeled frames and suggested frames will be</span>
<a id="__codelineno-0-2530" name="__codelineno-0-2530"></a><a href="#__codelineno-0-2530"><span class="linenos" data-linenos="2530 "></span></a><span class="sd">            embedded.</span>
<a id="__codelineno-0-2531" name="__codelineno-0-2531"></a><a href="#__codelineno-0-2531"><span class="linenos" data-linenos="2531 "></span></a>
<a id="__codelineno-0-2532" name="__codelineno-0-2532"></a><a href="#__codelineno-0-2532"><span class="linenos" data-linenos="2532 "></span></a><span class="sd">            If `&quot;source&quot;` is specified, no images will be embedded and the source video</span>
<a id="__codelineno-0-2533" name="__codelineno-0-2533"></a><a href="#__codelineno-0-2533"><span class="linenos" data-linenos="2533 "></span></a><span class="sd">            will be restored if available.</span>
<a id="__codelineno-0-2534" name="__codelineno-0-2534"></a><a href="#__codelineno-0-2534"><span class="linenos" data-linenos="2534 "></span></a>
<a id="__codelineno-0-2535" name="__codelineno-0-2535"></a><a href="#__codelineno-0-2535"><span class="linenos" data-linenos="2535 "></span></a><span class="sd">            This argument is only valid for the SLP backend.</span>
<a id="__codelineno-0-2536" name="__codelineno-0-2536"></a><a href="#__codelineno-0-2536"><span class="linenos" data-linenos="2536 "></span></a><span class="sd">        restore_original_videos: If `True` (default) and `embed=False`, use original</span>
<a id="__codelineno-0-2537" name="__codelineno-0-2537"></a><a href="#__codelineno-0-2537"><span class="linenos" data-linenos="2537 "></span></a><span class="sd">            video files. If `False` and `embed=False`, keep references to source</span>
<a id="__codelineno-0-2538" name="__codelineno-0-2538"></a><a href="#__codelineno-0-2538"><span class="linenos" data-linenos="2538 "></span></a><span class="sd">            `.pkg.slp` files. Only applies when `embed=False`.</span>
<a id="__codelineno-0-2539" name="__codelineno-0-2539"></a><a href="#__codelineno-0-2539"><span class="linenos" data-linenos="2539 "></span></a><span class="sd">        embed_inplace: If `False` (default), a copy of the labels is made before</span>
<a id="__codelineno-0-2540" name="__codelineno-0-2540"></a><a href="#__codelineno-0-2540"><span class="linenos" data-linenos="2540 "></span></a><span class="sd">            embedding to avoid modifying the in-memory labels. If `True`, the</span>
<a id="__codelineno-0-2541" name="__codelineno-0-2541"></a><a href="#__codelineno-0-2541"><span class="linenos" data-linenos="2541 "></span></a><span class="sd">            labels will be modified in-place to point to the embedded videos,</span>
<a id="__codelineno-0-2542" name="__codelineno-0-2542"></a><a href="#__codelineno-0-2542"><span class="linenos" data-linenos="2542 "></span></a><span class="sd">            which is faster but mutates the input. Only applies when embedding.</span>
<a id="__codelineno-0-2543" name="__codelineno-0-2543"></a><a href="#__codelineno-0-2543"><span class="linenos" data-linenos="2543 "></span></a><span class="sd">        verbose: If `True` (the default), display a progress bar when embedding frames.</span>
<a id="__codelineno-0-2544" name="__codelineno-0-2544"></a><a href="#__codelineno-0-2544"><span class="linenos" data-linenos="2544 "></span></a><span class="sd">        plugin: Image plugin to use for encoding embedded frames. One of &quot;opencv&quot;</span>
<a id="__codelineno-0-2545" name="__codelineno-0-2545"></a><a href="#__codelineno-0-2545"><span class="linenos" data-linenos="2545 "></span></a><span class="sd">            or &quot;imageio&quot;. If None, uses the global default from</span>
<a id="__codelineno-0-2546" name="__codelineno-0-2546"></a><a href="#__codelineno-0-2546"><span class="linenos" data-linenos="2546 "></span></a><span class="sd">            `get_default_image_plugin()`. If no global default is set, auto-detects</span>
<a id="__codelineno-0-2547" name="__codelineno-0-2547"></a><a href="#__codelineno-0-2547"><span class="linenos" data-linenos="2547 "></span></a><span class="sd">            based on available packages.</span>
<a id="__codelineno-0-2548" name="__codelineno-0-2548"></a><a href="#__codelineno-0-2548"><span class="linenos" data-linenos="2548 "></span></a><span class="sd">        embed_all_videos: If `True` (the default), all videos in the labels will be</span>
<a id="__codelineno-0-2549" name="__codelineno-0-2549"></a><a href="#__codelineno-0-2549"><span class="linenos" data-linenos="2549 "></span></a><span class="sd">            converted to embedded references, even if they have no frames to embed.</span>
<a id="__codelineno-0-2550" name="__codelineno-0-2550"></a><a href="#__codelineno-0-2550"><span class="linenos" data-linenos="2550 "></span></a><span class="sd">            This ensures package files are portable. If `False`, only videos with</span>
<a id="__codelineno-0-2551" name="__codelineno-0-2551"></a><a href="#__codelineno-0-2551"><span class="linenos" data-linenos="2551 "></span></a><span class="sd">            frames to embed are converted.</span>
<a id="__codelineno-0-2552" name="__codelineno-0-2552"></a><a href="#__codelineno-0-2552"><span class="linenos" data-linenos="2552 "></span></a><span class="sd">        progress_callback: Optional callback function called during frame embedding</span>
<a id="__codelineno-0-2553" name="__codelineno-0-2553"></a><a href="#__codelineno-0-2553"><span class="linenos" data-linenos="2553 "></span></a><span class="sd">            with `(current, total)` arguments. If it returns `False`, the operation</span>
<a id="__codelineno-0-2554" name="__codelineno-0-2554"></a><a href="#__codelineno-0-2554"><span class="linenos" data-linenos="2554 "></span></a><span class="sd">            is cancelled and `ExportCancelled` is raised.</span>
<a id="__codelineno-0-2555" name="__codelineno-0-2555"></a><a href="#__codelineno-0-2555"><span class="linenos" data-linenos="2555 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2556" name="__codelineno-0-2556"></a><a href="#__codelineno-0-2556"><span class="linenos" data-linenos="2556 "></span></a>    <span class="c1"># Fast path for lazy labels (avoids materializing frames/instances)</span>
<a id="__codelineno-0-2557" name="__codelineno-0-2557"></a><a href="#__codelineno-0-2557"><span class="linenos" data-linenos="2557 "></span></a>    <span class="c1"># Supported for simple embed modes: None, False, &quot;source&quot;</span>
<a id="__codelineno-0-2558" name="__codelineno-0-2558"></a><a href="#__codelineno-0-2558"><span class="linenos" data-linenos="2558 "></span></a>    <span class="k">if</span> <span class="n">labels</span><span class="o">.</span><span class="n">is_lazy</span><span class="p">:</span>
<a id="__codelineno-0-2559" name="__codelineno-0-2559"></a><a href="#__codelineno-0-2559"><span class="linenos" data-linenos="2559 "></span></a>        <span class="c1"># Check if embed mode requires materialization</span>
<a id="__codelineno-0-2560" name="__codelineno-0-2560"></a><a href="#__codelineno-0-2560"><span class="linenos" data-linenos="2560 "></span></a>        <span class="n">needs_materialization</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2561" name="__codelineno-0-2561"></a><a href="#__codelineno-0-2561"><span class="linenos" data-linenos="2561 "></span></a>            <span class="n">embed</span> <span class="ow">is</span> <span class="kc">True</span>
<a id="__codelineno-0-2562" name="__codelineno-0-2562"></a><a href="#__codelineno-0-2562"><span class="linenos" data-linenos="2562 "></span></a>            <span class="ow">or</span> <span class="n">embed</span>
<a id="__codelineno-0-2563" name="__codelineno-0-2563"></a><a href="#__codelineno-0-2563"><span class="linenos" data-linenos="2563 "></span></a>            <span class="ow">in</span> <span class="p">(</span>
<a id="__codelineno-0-2564" name="__codelineno-0-2564"></a><a href="#__codelineno-0-2564"><span class="linenos" data-linenos="2564 "></span></a>                <span class="s2">&quot;all&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2565" name="__codelineno-0-2565"></a><a href="#__codelineno-0-2565"><span class="linenos" data-linenos="2565 "></span></a>                <span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2566" name="__codelineno-0-2566"></a><a href="#__codelineno-0-2566"><span class="linenos" data-linenos="2566 "></span></a>                <span class="s2">&quot;suggestions&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2567" name="__codelineno-0-2567"></a><a href="#__codelineno-0-2567"><span class="linenos" data-linenos="2567 "></span></a>                <span class="s2">&quot;user+suggestions&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2568" name="__codelineno-0-2568"></a><a href="#__codelineno-0-2568"><span class="linenos" data-linenos="2568 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-2569" name="__codelineno-0-2569"></a><a href="#__codelineno-0-2569"><span class="linenos" data-linenos="2569 "></span></a>            <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
<a id="__codelineno-0-2570" name="__codelineno-0-2570"></a><a href="#__codelineno-0-2570"><span class="linenos" data-linenos="2570 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-2571" name="__codelineno-0-2571"></a><a href="#__codelineno-0-2571"><span class="linenos" data-linenos="2571 "></span></a>
<a id="__codelineno-0-2572" name="__codelineno-0-2572"></a><a href="#__codelineno-0-2572"><span class="linenos" data-linenos="2572 "></span></a>        <span class="k">if</span> <span class="n">needs_materialization</span><span class="p">:</span>
<a id="__codelineno-0-2573" name="__codelineno-0-2573"></a><a href="#__codelineno-0-2573"><span class="linenos" data-linenos="2573 "></span></a>            <span class="c1"># Materialize to support embedding</span>
<a id="__codelineno-0-2574" name="__codelineno-0-2574"></a><a href="#__codelineno-0-2574"><span class="linenos" data-linenos="2574 "></span></a>            <span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">materialize</span><span class="p">()</span>
<a id="__codelineno-0-2575" name="__codelineno-0-2575"></a><a href="#__codelineno-0-2575"><span class="linenos" data-linenos="2575 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2576" name="__codelineno-0-2576"></a><a href="#__codelineno-0-2576"><span class="linenos" data-linenos="2576 "></span></a>            <span class="c1"># Use fast path - copy raw arrays directly</span>
<a id="__codelineno-0-2577" name="__codelineno-0-2577"></a><a href="#__codelineno-0-2577"><span class="linenos" data-linenos="2577 "></span></a>            <span class="n">_write_labels_lazy</span><span class="p">(</span>
<a id="__codelineno-0-2578" name="__codelineno-0-2578"></a><a href="#__codelineno-0-2578"><span class="linenos" data-linenos="2578 "></span></a>                <span class="n">labels_path</span><span class="p">,</span>
<a id="__codelineno-0-2579" name="__codelineno-0-2579"></a><a href="#__codelineno-0-2579"><span class="linenos" data-linenos="2579 "></span></a>                <span class="n">labels</span><span class="p">,</span>
<a id="__codelineno-0-2580" name="__codelineno-0-2580"></a><a href="#__codelineno-0-2580"><span class="linenos" data-linenos="2580 "></span></a>                <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">,</span>
<a id="__codelineno-0-2581" name="__codelineno-0-2581"></a><a href="#__codelineno-0-2581"><span class="linenos" data-linenos="2581 "></span></a>                <span class="n">restore_original_videos</span><span class="o">=</span><span class="n">restore_original_videos</span><span class="p">,</span>
<a id="__codelineno-0-2582" name="__codelineno-0-2582"></a><a href="#__codelineno-0-2582"><span class="linenos" data-linenos="2582 "></span></a>                <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-2583" name="__codelineno-0-2583"></a><a href="#__codelineno-0-2583"><span class="linenos" data-linenos="2583 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-2584" name="__codelineno-0-2584"></a><a href="#__codelineno-0-2584"><span class="linenos" data-linenos="2584 "></span></a>            <span class="k">return</span>
<a id="__codelineno-0-2585" name="__codelineno-0-2585"></a><a href="#__codelineno-0-2585"><span class="linenos" data-linenos="2585 "></span></a>
<a id="__codelineno-0-2586" name="__codelineno-0-2586"></a><a href="#__codelineno-0-2586"><span class="linenos" data-linenos="2586 "></span></a>    <span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-2587" name="__codelineno-0-2587"></a><a href="#__codelineno-0-2587"><span class="linenos" data-linenos="2587 "></span></a>        <span class="n">Path</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
<a id="__codelineno-0-2588" name="__codelineno-0-2588"></a><a href="#__codelineno-0-2588"><span class="linenos" data-linenos="2588 "></span></a>
<a id="__codelineno-0-2589" name="__codelineno-0-2589"></a><a href="#__codelineno-0-2589"><span class="linenos" data-linenos="2589 "></span></a>    <span class="c1"># Make a copy to avoid mutating the input labels when embedding</span>
<a id="__codelineno-0-2590" name="__codelineno-0-2590"></a><a href="#__codelineno-0-2590"><span class="linenos" data-linenos="2590 "></span></a>    <span class="k">if</span> <span class="n">embed</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">embed_inplace</span><span class="p">:</span>
<a id="__codelineno-0-2591" name="__codelineno-0-2591"></a><a href="#__codelineno-0-2591"><span class="linenos" data-linenos="2591 "></span></a>        <span class="n">original_labels</span> <span class="o">=</span> <span class="n">labels</span>
<a id="__codelineno-0-2592" name="__codelineno-0-2592"></a><a href="#__codelineno-0-2592"><span class="linenos" data-linenos="2592 "></span></a>        <span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">open_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-2593" name="__codelineno-0-2593"></a><a href="#__codelineno-0-2593"><span class="linenos" data-linenos="2593 "></span></a>
<a id="__codelineno-0-2594" name="__codelineno-0-2594"></a><a href="#__codelineno-0-2594"><span class="linenos" data-linenos="2594 "></span></a>        <span class="c1"># If embed is a list of (video, frame_idx) tuples, remap videos to the copy</span>
<a id="__codelineno-0-2595" name="__codelineno-0-2595"></a><a href="#__codelineno-0-2595"><span class="linenos" data-linenos="2595 "></span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-2596" name="__codelineno-0-2596"></a><a href="#__codelineno-0-2596"><span class="linenos" data-linenos="2596 "></span></a>            <span class="c1"># Create mapping from original videos to copied videos</span>
<a id="__codelineno-0-2597" name="__codelineno-0-2597"></a><a href="#__codelineno-0-2597"><span class="linenos" data-linenos="2597 "></span></a>            <span class="n">video_map</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-2598" name="__codelineno-0-2598"></a><a href="#__codelineno-0-2598"><span class="linenos" data-linenos="2598 "></span></a>                <span class="n">orig</span><span class="p">:</span> <span class="n">copied</span>
<a id="__codelineno-0-2599" name="__codelineno-0-2599"></a><a href="#__codelineno-0-2599"><span class="linenos" data-linenos="2599 "></span></a>                <span class="k">for</span> <span class="n">orig</span><span class="p">,</span> <span class="n">copied</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">original_labels</span><span class="o">.</span><span class="n">videos</span><span class="p">,</span> <span class="n">labels</span><span class="o">.</span><span class="n">videos</span><span class="p">)</span>
<a id="__codelineno-0-2600" name="__codelineno-0-2600"></a><a href="#__codelineno-0-2600"><span class="linenos" data-linenos="2600 "></span></a>            <span class="p">}</span>
<a id="__codelineno-0-2601" name="__codelineno-0-2601"></a><a href="#__codelineno-0-2601"><span class="linenos" data-linenos="2601 "></span></a>            <span class="c1"># Remap the embed list to use copied video objects</span>
<a id="__codelineno-0-2602" name="__codelineno-0-2602"></a><a href="#__codelineno-0-2602"><span class="linenos" data-linenos="2602 "></span></a>            <span class="n">embed</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2603" name="__codelineno-0-2603"></a><a href="#__codelineno-0-2603"><span class="linenos" data-linenos="2603 "></span></a>                <span class="p">(</span><span class="n">video_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">video</span><span class="p">,</span> <span class="n">video</span><span class="p">),</span> <span class="n">frame_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">video</span><span class="p">,</span> <span class="n">frame_idx</span> <span class="ow">in</span> <span class="n">embed</span>
<a id="__codelineno-0-2604" name="__codelineno-0-2604"></a><a href="#__codelineno-0-2604"><span class="linenos" data-linenos="2604 "></span></a>            <span class="p">]</span>
<a id="__codelineno-0-2605" name="__codelineno-0-2605"></a><a href="#__codelineno-0-2605"><span class="linenos" data-linenos="2605 "></span></a>
<a id="__codelineno-0-2606" name="__codelineno-0-2606"></a><a href="#__codelineno-0-2606"><span class="linenos" data-linenos="2606 "></span></a>    <span class="c1"># Store original videos before embedding modifies them</span>
<a id="__codelineno-0-2607" name="__codelineno-0-2607"></a><a href="#__codelineno-0-2607"><span class="linenos" data-linenos="2607 "></span></a>    <span class="c1"># We need to make a copy of the actual video objects, not just the list</span>
<a id="__codelineno-0-2608" name="__codelineno-0-2608"></a><a href="#__codelineno-0-2608"><span class="linenos" data-linenos="2608 "></span></a>    <span class="n">original_videos</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">videos</span><span class="p">]</span> <span class="k">if</span> <span class="n">embed</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-2609" name="__codelineno-0-2609"></a><a href="#__codelineno-0-2609"><span class="linenos" data-linenos="2609 "></span></a>
<a id="__codelineno-0-2610" name="__codelineno-0-2610"></a><a href="#__codelineno-0-2610"><span class="linenos" data-linenos="2610 "></span></a>    <span class="k">if</span> <span class="n">embed</span><span class="p">:</span>
<a id="__codelineno-0-2611" name="__codelineno-0-2611"></a><a href="#__codelineno-0-2611"><span class="linenos" data-linenos="2611 "></span></a>        <span class="n">embed_videos</span><span class="p">(</span>
<a id="__codelineno-0-2612" name="__codelineno-0-2612"></a><a href="#__codelineno-0-2612"><span class="linenos" data-linenos="2612 "></span></a>            <span class="n">labels_path</span><span class="p">,</span>
<a id="__codelineno-0-2613" name="__codelineno-0-2613"></a><a href="#__codelineno-0-2613"><span class="linenos" data-linenos="2613 "></span></a>            <span class="n">labels</span><span class="p">,</span>
<a id="__codelineno-0-2614" name="__codelineno-0-2614"></a><a href="#__codelineno-0-2614"><span class="linenos" data-linenos="2614 "></span></a>            <span class="n">embed</span><span class="p">,</span>
<a id="__codelineno-0-2615" name="__codelineno-0-2615"></a><a href="#__codelineno-0-2615"><span class="linenos" data-linenos="2615 "></span></a>            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-2616" name="__codelineno-0-2616"></a><a href="#__codelineno-0-2616"><span class="linenos" data-linenos="2616 "></span></a>            <span class="n">plugin</span><span class="o">=</span><span class="n">plugin</span><span class="p">,</span>
<a id="__codelineno-0-2617" name="__codelineno-0-2617"></a><a href="#__codelineno-0-2617"><span class="linenos" data-linenos="2617 "></span></a>            <span class="n">embed_all_videos</span><span class="o">=</span><span class="n">embed_all_videos</span><span class="p">,</span>
<a id="__codelineno-0-2618" name="__codelineno-0-2618"></a><a href="#__codelineno-0-2618"><span class="linenos" data-linenos="2618 "></span></a>            <span class="n">progress_callback</span><span class="o">=</span><span class="n">progress_callback</span><span class="p">,</span>
<a id="__codelineno-0-2619" name="__codelineno-0-2619"></a><a href="#__codelineno-0-2619"><span class="linenos" data-linenos="2619 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-2620" name="__codelineno-0-2620"></a><a href="#__codelineno-0-2620"><span class="linenos" data-linenos="2620 "></span></a>
<a id="__codelineno-0-2621" name="__codelineno-0-2621"></a><a href="#__codelineno-0-2621"><span class="linenos" data-linenos="2621 "></span></a>    <span class="c1"># Determine reference mode based on parameters</span>
<a id="__codelineno-0-2622" name="__codelineno-0-2622"></a><a href="#__codelineno-0-2622"><span class="linenos" data-linenos="2622 "></span></a>    <span class="k">if</span> <span class="n">embed</span> <span class="o">==</span> <span class="s2">&quot;source&quot;</span> <span class="ow">or</span> <span class="p">(</span><span class="n">embed</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">restore_original_videos</span><span class="p">):</span>
<a id="__codelineno-0-2623" name="__codelineno-0-2623"></a><a href="#__codelineno-0-2623"><span class="linenos" data-linenos="2623 "></span></a>        <span class="n">reference_mode</span> <span class="o">=</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">RESTORE_ORIGINAL</span>
<a id="__codelineno-0-2624" name="__codelineno-0-2624"></a><a href="#__codelineno-0-2624"><span class="linenos" data-linenos="2624 "></span></a>    <span class="k">elif</span> <span class="n">embed</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">restore_original_videos</span><span class="p">:</span>
<a id="__codelineno-0-2625" name="__codelineno-0-2625"></a><a href="#__codelineno-0-2625"><span class="linenos" data-linenos="2625 "></span></a>        <span class="n">reference_mode</span> <span class="o">=</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">PRESERVE_SOURCE</span>
<a id="__codelineno-0-2626" name="__codelineno-0-2626"></a><a href="#__codelineno-0-2626"><span class="linenos" data-linenos="2626 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2627" name="__codelineno-0-2627"></a><a href="#__codelineno-0-2627"><span class="linenos" data-linenos="2627 "></span></a>        <span class="n">reference_mode</span> <span class="o">=</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">EMBED</span>
<a id="__codelineno-0-2628" name="__codelineno-0-2628"></a><a href="#__codelineno-0-2628"><span class="linenos" data-linenos="2628 "></span></a>
<a id="__codelineno-0-2629" name="__codelineno-0-2629"></a><a href="#__codelineno-0-2629"><span class="linenos" data-linenos="2629 "></span></a>    <span class="n">write_videos</span><span class="p">(</span>
<a id="__codelineno-0-2630" name="__codelineno-0-2630"></a><a href="#__codelineno-0-2630"><span class="linenos" data-linenos="2630 "></span></a>        <span class="n">labels_path</span><span class="p">,</span>
<a id="__codelineno-0-2631" name="__codelineno-0-2631"></a><a href="#__codelineno-0-2631"><span class="linenos" data-linenos="2631 "></span></a>        <span class="n">labels</span><span class="o">.</span><span class="n">videos</span><span class="p">,</span>
<a id="__codelineno-0-2632" name="__codelineno-0-2632"></a><a href="#__codelineno-0-2632"><span class="linenos" data-linenos="2632 "></span></a>        <span class="n">reference_mode</span><span class="o">=</span><span class="n">reference_mode</span><span class="p">,</span>
<a id="__codelineno-0-2633" name="__codelineno-0-2633"></a><a href="#__codelineno-0-2633"><span class="linenos" data-linenos="2633 "></span></a>        <span class="n">original_videos</span><span class="o">=</span><span class="n">original_videos</span><span class="p">,</span>
<a id="__codelineno-0-2634" name="__codelineno-0-2634"></a><a href="#__codelineno-0-2634"><span class="linenos" data-linenos="2634 "></span></a>        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-2635" name="__codelineno-0-2635"></a><a href="#__codelineno-0-2635"><span class="linenos" data-linenos="2635 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-2636" name="__codelineno-0-2636"></a><a href="#__codelineno-0-2636"><span class="linenos" data-linenos="2636 "></span></a>    <span class="n">write_tracks</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">labels</span><span class="o">.</span><span class="n">tracks</span><span class="p">)</span>
<a id="__codelineno-0-2637" name="__codelineno-0-2637"></a><a href="#__codelineno-0-2637"><span class="linenos" data-linenos="2637 "></span></a>    <span class="n">write_suggestions</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">labels</span><span class="o">.</span><span class="n">suggestions</span><span class="p">,</span> <span class="n">labels</span><span class="o">.</span><span class="n">videos</span><span class="p">)</span>
<a id="__codelineno-0-2638" name="__codelineno-0-2638"></a><a href="#__codelineno-0-2638"><span class="linenos" data-linenos="2638 "></span></a>    <span class="n">write_sessions</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">labels</span><span class="o">.</span><span class="n">sessions</span><span class="p">,</span> <span class="n">labels</span><span class="o">.</span><span class="n">videos</span><span class="p">,</span> <span class="n">labels</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">)</span>
<a id="__codelineno-0-2639" name="__codelineno-0-2639"></a><a href="#__codelineno-0-2639"><span class="linenos" data-linenos="2639 "></span></a>    <span class="n">write_metadata</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
<a id="__codelineno-0-2640" name="__codelineno-0-2640"></a><a href="#__codelineno-0-2640"><span class="linenos" data-linenos="2640 "></span></a>    <span class="n">write_lfs</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div><h3 id="video-io">Video I/O<a class="headerlink" href="#video-io" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.read_videos" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">read_videos</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">open_backend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.read_videos" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Read <code>Video</code> dataset in a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string path to the SLEAP labels file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>open_backend</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), attempt to open the video backend for
I/O. If <code>False</code>, the backend will not be opened (useful for reading metadata
when the video files are not available).</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Video&lt;/code&gt; (&lt;code&gt;sleap_io.model.video.Video&lt;/code&gt;)" href="../../reference/sleap_io/model/video/#sleap_io.model.video.Video">Video</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of <code>Video</code> objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-277" name="__codelineno-0-277"></a><a href="#__codelineno-0-277"><span class="linenos" data-linenos="277 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">read_videos</span><span class="p">(</span><span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">open_backend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Video</span><span class="p">]:</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><a href="#__codelineno-0-278"><span class="linenos" data-linenos="278 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Read `Video` dataset in a SLEAP labels file.</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><a href="#__codelineno-0-279"><span class="linenos" data-linenos="279 "></span></a>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><a href="#__codelineno-0-280"><span class="linenos" data-linenos="280 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><a href="#__codelineno-0-281"><span class="linenos" data-linenos="281 "></span></a><span class="sd">        labels_path: A string path to the SLEAP labels file.</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><a href="#__codelineno-0-282"><span class="linenos" data-linenos="282 "></span></a><span class="sd">        open_backend: If `True` (the default), attempt to open the video backend for</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><a href="#__codelineno-0-283"><span class="linenos" data-linenos="283 "></span></a><span class="sd">            I/O. If `False`, the backend will not be opened (useful for reading metadata</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><a href="#__codelineno-0-284"><span class="linenos" data-linenos="284 "></span></a><span class="sd">            when the video files are not available).</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><a href="#__codelineno-0-285"><span class="linenos" data-linenos="285 "></span></a>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><a href="#__codelineno-0-286"><span class="linenos" data-linenos="286 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><a href="#__codelineno-0-287"><span class="linenos" data-linenos="287 "></span></a><span class="sd">        A list of `Video` objects.</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><a href="#__codelineno-0-288"><span class="linenos" data-linenos="288 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><a href="#__codelineno-0-289"><span class="linenos" data-linenos="289 "></span></a>    <span class="n">videos</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><a href="#__codelineno-0-290"><span class="linenos" data-linenos="290 "></span></a>    <span class="c1"># Open file once and pass handle to make_video to avoid repeated opens</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><a href="#__codelineno-0-291"><span class="linenos" data-linenos="291 "></span></a>    <span class="c1"># for embedded videos (which would otherwise open the file per video).</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><a href="#__codelineno-0-292"><span class="linenos" data-linenos="292 "></span></a>    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><a href="#__codelineno-0-293"><span class="linenos" data-linenos="293 "></span></a>        <span class="n">videos_metadata</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s2">&quot;videos_json&quot;</span><span class="p">][:]</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><a href="#__codelineno-0-294"><span class="linenos" data-linenos="294 "></span></a>        <span class="k">for</span> <span class="n">video_data</span> <span class="ow">in</span> <span class="n">videos_metadata</span><span class="p">:</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><a href="#__codelineno-0-295"><span class="linenos" data-linenos="295 "></span></a>            <span class="n">video_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">video_data</span><span class="p">)</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><a href="#__codelineno-0-296"><span class="linenos" data-linenos="296 "></span></a>            <span class="n">video</span> <span class="o">=</span> <span class="n">make_video</span><span class="p">(</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><a href="#__codelineno-0-297"><span class="linenos" data-linenos="297 "></span></a>                <span class="n">labels_path</span><span class="p">,</span> <span class="n">video_json</span><span class="p">,</span> <span class="n">open_backend</span><span class="o">=</span><span class="n">open_backend</span><span class="p">,</span> <span class="n">_hdf5_file</span><span class="o">=</span><span class="n">f</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><a href="#__codelineno-0-298"><span class="linenos" data-linenos="298 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><a href="#__codelineno-0-299"><span class="linenos" data-linenos="299 "></span></a>            <span class="n">videos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><a href="#__codelineno-0-300"><span class="linenos" data-linenos="300 "></span></a>    <span class="k">return</span> <span class="n">videos</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.write_videos" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">write_videos</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">videos</span><span class="p">,</span> <span class="n">restore_source</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reference_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">original_videos</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.write_videos" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Write video metadata to a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string path to the SLEAP labels file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>videos</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Video&lt;/code&gt; (&lt;code&gt;sleap_io.model.video.Video&lt;/code&gt;)" href="../../reference/sleap_io/model/video/#sleap_io.model.video.Video">Video</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of <code>Video</code> objects to store the metadata for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restore_source</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Deprecated. Use reference_mode instead. If <code>True</code>, restore
source videos if available and will not re-embed the embedded images.
If <code>False</code> (the default), will re-embed images that were previously
embedded.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reference_mode</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;VideoReferenceMode&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp.VideoReferenceMode&lt;/code&gt;)" href="../../reference/sleap_io/io/slp/#sleap_io.io.slp.VideoReferenceMode">VideoReferenceMode</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How to handle video references:
- EMBED: Re-embed frames that were previously embedded
- RESTORE_ORIGINAL: Use original video if available
- PRESERVE_SOURCE: Keep reference to source file (e.g., .pkg.slp)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>original_videos</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Video&lt;/code&gt; (&lt;code&gt;sleap_io.model.video.Video&lt;/code&gt;)" href="../../reference/sleap_io/model/video/#sleap_io.model.video.Video">Video</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional list of original video objects before embedding.
Used when reference_mode is EMBED to preserve metadata.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), display a progress bar when embedding frames.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-885" name="__codelineno-0-885"></a><a href="#__codelineno-0-885"><span class="linenos" data-linenos=" 885 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">write_videos</span><span class="p">(</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><a href="#__codelineno-0-886"><span class="linenos" data-linenos=" 886 "></span></a>    <span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><a href="#__codelineno-0-887"><span class="linenos" data-linenos=" 887 "></span></a>    <span class="n">videos</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Video</span><span class="p">],</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><a href="#__codelineno-0-888"><span class="linenos" data-linenos=" 888 "></span></a>    <span class="n">restore_source</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a><a href="#__codelineno-0-889"><span class="linenos" data-linenos=" 889 "></span></a>    <span class="n">reference_mode</span><span class="p">:</span> <span class="n">VideoReferenceMode</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><a href="#__codelineno-0-890"><span class="linenos" data-linenos=" 890 "></span></a>    <span class="n">original_videos</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Video</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><a href="#__codelineno-0-891"><span class="linenos" data-linenos=" 891 "></span></a>    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a><a href="#__codelineno-0-892"><span class="linenos" data-linenos=" 892 "></span></a><span class="p">):</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a><a href="#__codelineno-0-893"><span class="linenos" data-linenos=" 893 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Write video metadata to a SLEAP labels file.</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><a href="#__codelineno-0-894"><span class="linenos" data-linenos=" 894 "></span></a>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><a href="#__codelineno-0-895"><span class="linenos" data-linenos=" 895 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><a href="#__codelineno-0-896"><span class="linenos" data-linenos=" 896 "></span></a><span class="sd">        labels_path: A string path to the SLEAP labels file.</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><a href="#__codelineno-0-897"><span class="linenos" data-linenos=" 897 "></span></a><span class="sd">        videos: A list of `Video` objects to store the metadata for.</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><a href="#__codelineno-0-898"><span class="linenos" data-linenos=" 898 "></span></a><span class="sd">        restore_source: Deprecated. Use reference_mode instead. If `True`, restore</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><a href="#__codelineno-0-899"><span class="linenos" data-linenos=" 899 "></span></a><span class="sd">            source videos if available and will not re-embed the embedded images.</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a><a href="#__codelineno-0-900"><span class="linenos" data-linenos=" 900 "></span></a><span class="sd">            If `False` (the default), will re-embed images that were previously</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><a href="#__codelineno-0-901"><span class="linenos" data-linenos=" 901 "></span></a><span class="sd">            embedded.</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><a href="#__codelineno-0-902"><span class="linenos" data-linenos=" 902 "></span></a><span class="sd">        reference_mode: How to handle video references:</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a><a href="#__codelineno-0-903"><span class="linenos" data-linenos=" 903 "></span></a><span class="sd">            - EMBED: Re-embed frames that were previously embedded</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a><a href="#__codelineno-0-904"><span class="linenos" data-linenos=" 904 "></span></a><span class="sd">            - RESTORE_ORIGINAL: Use original video if available</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a><a href="#__codelineno-0-905"><span class="linenos" data-linenos=" 905 "></span></a><span class="sd">            - PRESERVE_SOURCE: Keep reference to source file (e.g., .pkg.slp)</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a><a href="#__codelineno-0-906"><span class="linenos" data-linenos=" 906 "></span></a><span class="sd">        original_videos: Optional list of original video objects before embedding.</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a><a href="#__codelineno-0-907"><span class="linenos" data-linenos=" 907 "></span></a><span class="sd">            Used when reference_mode is EMBED to preserve metadata.</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a><a href="#__codelineno-0-908"><span class="linenos" data-linenos=" 908 "></span></a><span class="sd">        verbose: If `True` (the default), display a progress bar when embedding frames.</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a><a href="#__codelineno-0-909"><span class="linenos" data-linenos=" 909 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a><a href="#__codelineno-0-910"><span class="linenos" data-linenos=" 910 "></span></a>    <span class="c1"># Handle backwards compatibility</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a><a href="#__codelineno-0-911"><span class="linenos" data-linenos=" 911 "></span></a>    <span class="k">if</span> <span class="n">reference_mode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><a href="#__codelineno-0-912"><span class="linenos" data-linenos=" 912 "></span></a>        <span class="k">if</span> <span class="n">restore_source</span><span class="p">:</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><a href="#__codelineno-0-913"><span class="linenos" data-linenos=" 913 "></span></a>            <span class="n">reference_mode</span> <span class="o">=</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">RESTORE_ORIGINAL</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a><a href="#__codelineno-0-914"><span class="linenos" data-linenos=" 914 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><a href="#__codelineno-0-915"><span class="linenos" data-linenos=" 915 "></span></a>            <span class="n">reference_mode</span> <span class="o">=</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">EMBED</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><a href="#__codelineno-0-916"><span class="linenos" data-linenos=" 916 "></span></a>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a><a href="#__codelineno-0-917"><span class="linenos" data-linenos=" 917 "></span></a>    <span class="n">videos_to_embed</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><a href="#__codelineno-0-918"><span class="linenos" data-linenos=" 918 "></span></a>    <span class="n">videos_to_write</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><a href="#__codelineno-0-919"><span class="linenos" data-linenos=" 919 "></span></a>    <span class="n">videos_to_copy</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># For embedded videos without backend (raw HDF5 copy)</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a><a href="#__codelineno-0-920"><span class="linenos" data-linenos=" 920 "></span></a>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><a href="#__codelineno-0-921"><span class="linenos" data-linenos=" 921 "></span></a>    <span class="c1"># First determine which videos need embedding</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a><a href="#__codelineno-0-922"><span class="linenos" data-linenos=" 922 "></span></a>    <span class="k">for</span> <span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">videos</span><span class="p">):</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a><a href="#__codelineno-0-923"><span class="linenos" data-linenos=" 923 "></span></a>        <span class="c1"># Check if video has an open backend with embedded images</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a><a href="#__codelineno-0-924"><span class="linenos" data-linenos=" 924 "></span></a>        <span class="n">has_backend_with_embedded</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><a href="#__codelineno-0-925"><span class="linenos" data-linenos=" 925 "></span></a>            <span class="nb">type</span><span class="p">(</span><span class="n">video</span><span class="o">.</span><span class="n">backend</span><span class="p">)</span> <span class="ow">is</span> <span class="n">HDF5Video</span> <span class="ow">and</span> <span class="n">video</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">has_embedded_images</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a><a href="#__codelineno-0-926"><span class="linenos" data-linenos=" 926 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a><a href="#__codelineno-0-927"><span class="linenos" data-linenos=" 927 "></span></a>        <span class="c1"># Also detect embedded videos via metadata (when backend is None)</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><a href="#__codelineno-0-928"><span class="linenos" data-linenos=" 928 "></span></a>        <span class="n">has_embedded_via_metadata</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a><a href="#__codelineno-0-929"><span class="linenos" data-linenos=" 929 "></span></a>            <span class="n">video</span><span class="o">.</span><span class="n">backend</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">_is_embedded_video_metadata</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><a href="#__codelineno-0-930"><span class="linenos" data-linenos=" 930 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a><a href="#__codelineno-0-931"><span class="linenos" data-linenos=" 931 "></span></a>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a><a href="#__codelineno-0-932"><span class="linenos" data-linenos=" 932 "></span></a>        <span class="k">if</span> <span class="n">has_backend_with_embedded</span><span class="p">:</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a><a href="#__codelineno-0-933"><span class="linenos" data-linenos=" 933 "></span></a>            <span class="k">if</span> <span class="n">reference_mode</span> <span class="o">==</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">RESTORE_ORIGINAL</span><span class="p">:</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a><a href="#__codelineno-0-934"><span class="linenos" data-linenos=" 934 "></span></a>                <span class="k">if</span> <span class="n">video</span><span class="o">.</span><span class="n">source_video</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a><a href="#__codelineno-0-935"><span class="linenos" data-linenos=" 935 "></span></a>                    <span class="c1"># No source video available, reference the current embedded video</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a><a href="#__codelineno-0-936"><span class="linenos" data-linenos=" 936 "></span></a>                    <span class="c1"># file</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a><a href="#__codelineno-0-937"><span class="linenos" data-linenos=" 937 "></span></a>                    <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a><a href="#__codelineno-0-938"><span class="linenos" data-linenos=" 938 "></span></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><a href="#__codelineno-0-939"><span class="linenos" data-linenos=" 939 "></span></a>                    <span class="c1"># Use the source video</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><a href="#__codelineno-0-940"><span class="linenos" data-linenos=" 940 "></span></a>                    <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="o">.</span><span class="n">source_video</span><span class="p">))</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a><a href="#__codelineno-0-941"><span class="linenos" data-linenos=" 941 "></span></a>            <span class="k">elif</span> <span class="n">reference_mode</span> <span class="o">==</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">PRESERVE_SOURCE</span><span class="p">:</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><a href="#__codelineno-0-942"><span class="linenos" data-linenos=" 942 "></span></a>                <span class="c1"># Keep the reference to the source .pkg.slp file</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a><a href="#__codelineno-0-943"><span class="linenos" data-linenos=" 943 "></span></a>                <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><a href="#__codelineno-0-944"><span class="linenos" data-linenos=" 944 "></span></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># EMBED mode</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a><a href="#__codelineno-0-945"><span class="linenos" data-linenos=" 945 "></span></a>                <span class="c1"># If the video has embedded images, check if we need to re-embed them</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><a href="#__codelineno-0-946"><span class="linenos" data-linenos=" 946 "></span></a>                <span class="n">already_embedded</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a><a href="#__codelineno-0-947"><span class="linenos" data-linenos=" 947 "></span></a>                <span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a><a href="#__codelineno-0-948"><span class="linenos" data-linenos=" 948 "></span></a>                    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a><a href="#__codelineno-0-949"><span class="linenos" data-linenos=" 949 "></span></a>                        <span class="n">already_embedded</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;video</span><span class="si">{</span><span class="n">video_ind</span><span class="si">}</span><span class="s2">/video&quot;</span> <span class="ow">in</span> <span class="n">f</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a><a href="#__codelineno-0-950"><span class="linenos" data-linenos=" 950 "></span></a>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a><a href="#__codelineno-0-951"><span class="linenos" data-linenos=" 951 "></span></a>                <span class="k">if</span> <span class="n">already_embedded</span><span class="p">:</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a><a href="#__codelineno-0-952"><span class="linenos" data-linenos=" 952 "></span></a>                    <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a><a href="#__codelineno-0-953"><span class="linenos" data-linenos=" 953 "></span></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><a href="#__codelineno-0-954"><span class="linenos" data-linenos=" 954 "></span></a>                    <span class="c1"># Collect information for embedding</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a><a href="#__codelineno-0-955"><span class="linenos" data-linenos=" 955 "></span></a>                    <span class="n">frames_to_embed</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><a href="#__codelineno-0-956"><span class="linenos" data-linenos=" 956 "></span></a>                        <span class="p">(</span><span class="n">video</span><span class="p">,</span> <span class="n">frame_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">frame_idx</span> <span class="ow">in</span> <span class="n">video</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">source_inds</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><a href="#__codelineno-0-957"><span class="linenos" data-linenos=" 957 "></span></a>                    <span class="p">]</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><a href="#__codelineno-0-958"><span class="linenos" data-linenos=" 958 "></span></a>                    <span class="n">videos_to_embed</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">,</span> <span class="n">frames_to_embed</span><span class="p">))</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><a href="#__codelineno-0-959"><span class="linenos" data-linenos=" 959 "></span></a>        <span class="k">elif</span> <span class="n">has_embedded_via_metadata</span><span class="p">:</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a><a href="#__codelineno-0-960"><span class="linenos" data-linenos=" 960 "></span></a>            <span class="c1"># Video has embedded frames but backend is not open (open_videos=False)</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a><a href="#__codelineno-0-961"><span class="linenos" data-linenos=" 961 "></span></a>            <span class="k">if</span> <span class="n">reference_mode</span> <span class="o">==</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">RESTORE_ORIGINAL</span><span class="p">:</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a><a href="#__codelineno-0-962"><span class="linenos" data-linenos=" 962 "></span></a>                <span class="k">if</span> <span class="n">video</span><span class="o">.</span><span class="n">source_video</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a><a href="#__codelineno-0-963"><span class="linenos" data-linenos=" 963 "></span></a>                    <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><a href="#__codelineno-0-964"><span class="linenos" data-linenos=" 964 "></span></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a><a href="#__codelineno-0-965"><span class="linenos" data-linenos=" 965 "></span></a>                    <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="o">.</span><span class="n">source_video</span><span class="p">))</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a><a href="#__codelineno-0-966"><span class="linenos" data-linenos=" 966 "></span></a>            <span class="k">elif</span> <span class="n">reference_mode</span> <span class="o">==</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">PRESERVE_SOURCE</span><span class="p">:</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a><a href="#__codelineno-0-967"><span class="linenos" data-linenos=" 967 "></span></a>                <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a><a href="#__codelineno-0-968"><span class="linenos" data-linenos=" 968 "></span></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># EMBED mode</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a><a href="#__codelineno-0-969"><span class="linenos" data-linenos=" 969 "></span></a>                <span class="c1"># Check if already embedded in destination</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a><a href="#__codelineno-0-970"><span class="linenos" data-linenos=" 970 "></span></a>                <span class="n">already_embedded</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a><a href="#__codelineno-0-971"><span class="linenos" data-linenos=" 971 "></span></a>                <span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a><a href="#__codelineno-0-972"><span class="linenos" data-linenos=" 972 "></span></a>                    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a><a href="#__codelineno-0-973"><span class="linenos" data-linenos=" 973 "></span></a>                        <span class="n">already_embedded</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;video</span><span class="si">{</span><span class="n">video_ind</span><span class="si">}</span><span class="s2">/video&quot;</span> <span class="ow">in</span> <span class="n">f</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a><a href="#__codelineno-0-974"><span class="linenos" data-linenos=" 974 "></span></a>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a><a href="#__codelineno-0-975"><span class="linenos" data-linenos=" 975 "></span></a>                <span class="k">if</span> <span class="n">already_embedded</span><span class="p">:</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a><a href="#__codelineno-0-976"><span class="linenos" data-linenos=" 976 "></span></a>                    <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a><a href="#__codelineno-0-977"><span class="linenos" data-linenos=" 977 "></span></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a><a href="#__codelineno-0-978"><span class="linenos" data-linenos=" 978 "></span></a>                    <span class="c1"># Need to copy raw HDF5 data from source file</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a><a href="#__codelineno-0-979"><span class="linenos" data-linenos=" 979 "></span></a>                    <span class="n">videos_to_copy</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a><a href="#__codelineno-0-980"><span class="linenos" data-linenos=" 980 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a><a href="#__codelineno-0-981"><span class="linenos" data-linenos=" 981 "></span></a>            <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a><a href="#__codelineno-0-982"><span class="linenos" data-linenos=" 982 "></span></a>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a><a href="#__codelineno-0-983"><span class="linenos" data-linenos=" 983 "></span></a>    <span class="c1"># Process videos that need embedding</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a><a href="#__codelineno-0-984"><span class="linenos" data-linenos=" 984 "></span></a>    <span class="k">if</span> <span class="n">videos_to_embed</span><span class="p">:</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a><a href="#__codelineno-0-985"><span class="linenos" data-linenos=" 985 "></span></a>        <span class="c1"># Prepare all frames to embed</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a><a href="#__codelineno-0-986"><span class="linenos" data-linenos=" 986 "></span></a>        <span class="n">all_frames_to_embed</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a><a href="#__codelineno-0-987"><span class="linenos" data-linenos=" 987 "></span></a>        <span class="k">for</span> <span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">,</span> <span class="n">frames</span> <span class="ow">in</span> <span class="n">videos_to_embed</span><span class="p">:</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a><a href="#__codelineno-0-988"><span class="linenos" data-linenos=" 988 "></span></a>            <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">frames</span><span class="p">:</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a><a href="#__codelineno-0-989"><span class="linenos" data-linenos=" 989 "></span></a>                <span class="n">all_frames_to_embed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a><a href="#__codelineno-0-990"><span class="linenos" data-linenos=" 990 "></span></a>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a><a href="#__codelineno-0-991"><span class="linenos" data-linenos=" 991 "></span></a>        <span class="c1"># Create a temporary Labels object for embedding</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a><a href="#__codelineno-0-992"><span class="linenos" data-linenos=" 992 "></span></a>        <span class="n">temp_labels</span> <span class="o">=</span> <span class="n">Labels</span><span class="p">(</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a><a href="#__codelineno-0-993"><span class="linenos" data-linenos=" 993 "></span></a>            <span class="n">videos</span><span class="o">=</span><span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">videos_to_embed</span><span class="p">],</span> <span class="n">labeled_frames</span><span class="o">=</span><span class="p">[]</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a><a href="#__codelineno-0-994"><span class="linenos" data-linenos=" 994 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a><a href="#__codelineno-0-995"><span class="linenos" data-linenos=" 995 "></span></a>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a><a href="#__codelineno-0-996"><span class="linenos" data-linenos=" 996 "></span></a>        <span class="c1"># Prepare and embed all frames in a single process</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a><a href="#__codelineno-0-997"><span class="linenos" data-linenos=" 997 "></span></a>        <span class="n">frames_metadata</span> <span class="o">=</span> <span class="n">prepare_frames_to_embed</span><span class="p">(</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a><a href="#__codelineno-0-998"><span class="linenos" data-linenos=" 998 "></span></a>            <span class="n">labels_path</span><span class="p">,</span> <span class="n">temp_labels</span><span class="p">,</span> <span class="n">all_frames_to_embed</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a><a href="#__codelineno-0-999"><span class="linenos" data-linenos=" 999 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a><a href="#__codelineno-0-1000"><span class="linenos" data-linenos="1000 "></span></a>        <span class="n">replaced_videos</span> <span class="o">=</span> <span class="n">process_and_embed_frames</span><span class="p">(</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a><a href="#__codelineno-0-1001"><span class="linenos" data-linenos="1001 "></span></a>            <span class="n">labels_path</span><span class="p">,</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a><a href="#__codelineno-0-1002"><span class="linenos" data-linenos="1002 "></span></a>            <span class="n">frames_metadata</span><span class="p">,</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a><a href="#__codelineno-0-1003"><span class="linenos" data-linenos="1003 "></span></a>            <span class="n">image_format</span><span class="o">=</span><span class="p">[</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><a href="#__codelineno-0-1004"><span class="linenos" data-linenos="1004 "></span></a>                <span class="n">v</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">image_format</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;image_format&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;png&quot;</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a><a href="#__codelineno-0-1005"><span class="linenos" data-linenos="1005 "></span></a>                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">videos_to_embed</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a><a href="#__codelineno-0-1006"><span class="linenos" data-linenos="1006 "></span></a>            <span class="p">][</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># Use the first video&#39;s format</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><a href="#__codelineno-0-1007"><span class="linenos" data-linenos="1007 "></span></a>            <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><a href="#__codelineno-0-1008"><span class="linenos" data-linenos="1008 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a><a href="#__codelineno-0-1009"><span class="linenos" data-linenos="1009 "></span></a>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><a href="#__codelineno-0-1010"><span class="linenos" data-linenos="1010 "></span></a>        <span class="c1"># Add the embedded videos to the list</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><a href="#__codelineno-0-1011"><span class="linenos" data-linenos="1011 "></span></a>        <span class="k">for</span> <span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">videos_to_embed</span><span class="p">:</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><a href="#__codelineno-0-1012"><span class="linenos" data-linenos="1012 "></span></a>            <span class="k">if</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">replaced_videos</span><span class="p">:</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a><a href="#__codelineno-0-1013"><span class="linenos" data-linenos="1013 "></span></a>                <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">replaced_videos</span><span class="p">[</span><span class="n">video</span><span class="p">]))</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><a href="#__codelineno-0-1014"><span class="linenos" data-linenos="1014 "></span></a>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><a href="#__codelineno-0-1015"><span class="linenos" data-linenos="1015 "></span></a>    <span class="c1"># Copy raw HDF5 data for embedded videos without backends</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a><a href="#__codelineno-0-1016"><span class="linenos" data-linenos="1016 "></span></a>    <span class="k">if</span> <span class="n">videos_to_copy</span><span class="p">:</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a><a href="#__codelineno-0-1017"><span class="linenos" data-linenos="1017 "></span></a>        <span class="k">for</span> <span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">videos_to_copy</span><span class="p">:</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a><a href="#__codelineno-0-1018"><span class="linenos" data-linenos="1018 "></span></a>            <span class="c1"># Get the source file path (video.filename points to the source pkg.slp)</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><a href="#__codelineno-0-1019"><span class="linenos" data-linenos="1019 "></span></a>            <span class="n">source_path</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">filename</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a><a href="#__codelineno-0-1020"><span class="linenos" data-linenos="1020 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">Path</span><span class="p">(</span><span class="n">source_path</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a><a href="#__codelineno-0-1021"><span class="linenos" data-linenos="1021 "></span></a>                <span class="c1"># Can&#39;t copy if source doesn&#39;t exist, just write metadata</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a><a href="#__codelineno-0-1022"><span class="linenos" data-linenos="1022 "></span></a>                <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><a href="#__codelineno-0-1023"><span class="linenos" data-linenos="1023 "></span></a>                <span class="k">continue</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a><a href="#__codelineno-0-1024"><span class="linenos" data-linenos="1024 "></span></a>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a><a href="#__codelineno-0-1025"><span class="linenos" data-linenos="1025 "></span></a>            <span class="c1"># Get the source dataset name from backend_metadata</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a><a href="#__codelineno-0-1026"><span class="linenos" data-linenos="1026 "></span></a>            <span class="n">meta</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">backend_metadata</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a><a href="#__codelineno-0-1027"><span class="linenos" data-linenos="1027 "></span></a>            <span class="n">source_dataset</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">meta</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a><a href="#__codelineno-0-1028"><span class="linenos" data-linenos="1028 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">source_dataset</span><span class="p">:</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a><a href="#__codelineno-0-1029"><span class="linenos" data-linenos="1029 "></span></a>                <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a><a href="#__codelineno-0-1030"><span class="linenos" data-linenos="1030 "></span></a>                <span class="k">continue</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a><a href="#__codelineno-0-1031"><span class="linenos" data-linenos="1031 "></span></a>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a><a href="#__codelineno-0-1032"><span class="linenos" data-linenos="1032 "></span></a>            <span class="c1"># Extract the video group name (e.g., &quot;video0&quot; from &quot;video0/video&quot;)</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a><a href="#__codelineno-0-1033"><span class="linenos" data-linenos="1033 "></span></a>            <span class="n">source_group</span> <span class="o">=</span> <span class="n">source_dataset</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">source_dataset</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a><a href="#__codelineno-0-1034"><span class="linenos" data-linenos="1034 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">source_group</span><span class="p">:</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a><a href="#__codelineno-0-1035"><span class="linenos" data-linenos="1035 "></span></a>                <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a><a href="#__codelineno-0-1036"><span class="linenos" data-linenos="1036 "></span></a>                <span class="k">continue</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a><a href="#__codelineno-0-1037"><span class="linenos" data-linenos="1037 "></span></a>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a><a href="#__codelineno-0-1038"><span class="linenos" data-linenos="1038 "></span></a>            <span class="c1"># Destination group name uses the current video index</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a><a href="#__codelineno-0-1039"><span class="linenos" data-linenos="1039 "></span></a>            <span class="n">dest_group</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;video</span><span class="si">{</span><span class="n">video_ind</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a><a href="#__codelineno-0-1040"><span class="linenos" data-linenos="1040 "></span></a>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a><a href="#__codelineno-0-1041"><span class="linenos" data-linenos="1041 "></span></a>            <span class="c1"># Copy the entire video group from source to destination</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a><a href="#__codelineno-0-1042"><span class="linenos" data-linenos="1042 "></span></a>            <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src_f</span><span class="p">:</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a><a href="#__codelineno-0-1043"><span class="linenos" data-linenos="1043 "></span></a>                <span class="k">if</span> <span class="n">source_group</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">src_f</span><span class="p">:</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a><a href="#__codelineno-0-1044"><span class="linenos" data-linenos="1044 "></span></a>                    <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a><a href="#__codelineno-0-1045"><span class="linenos" data-linenos="1045 "></span></a>                    <span class="k">continue</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a><a href="#__codelineno-0-1046"><span class="linenos" data-linenos="1046 "></span></a>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a><a href="#__codelineno-0-1047"><span class="linenos" data-linenos="1047 "></span></a>                <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dst_f</span><span class="p">:</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a><a href="#__codelineno-0-1048"><span class="linenos" data-linenos="1048 "></span></a>                    <span class="c1"># Copy the video group with all its datasets and attributes</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a><a href="#__codelineno-0-1049"><span class="linenos" data-linenos="1049 "></span></a>                    <span class="n">src_f</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">source_group</span><span class="p">,</span> <span class="n">dst_f</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">dest_group</span><span class="p">)</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a><a href="#__codelineno-0-1050"><span class="linenos" data-linenos="1050 "></span></a>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a><a href="#__codelineno-0-1051"><span class="linenos" data-linenos="1051 "></span></a>            <span class="c1"># Add to videos_to_write - the metadata will reference the copied data</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a><a href="#__codelineno-0-1052"><span class="linenos" data-linenos="1052 "></span></a>            <span class="n">videos_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span><span class="p">))</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a><a href="#__codelineno-0-1053"><span class="linenos" data-linenos="1053 "></span></a>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a><a href="#__codelineno-0-1054"><span class="linenos" data-linenos="1054 "></span></a>    <span class="c1"># Write video metadata</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a><a href="#__codelineno-0-1055"><span class="linenos" data-linenos="1055 "></span></a>    <span class="n">video_jsons</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a><a href="#__codelineno-0-1056"><span class="linenos" data-linenos="1056 "></span></a>    <span class="k">for</span> <span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">videos_to_write</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a><a href="#__codelineno-0-1057"><span class="linenos" data-linenos="1057 "></span></a>        <span class="n">video_json</span> <span class="o">=</span> <span class="n">video_to_dict</span><span class="p">(</span><span class="n">video</span><span class="p">,</span> <span class="n">labels_path</span><span class="p">)</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a><a href="#__codelineno-0-1058"><span class="linenos" data-linenos="1058 "></span></a>        <span class="n">video_jsons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">bytes_</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">video_json</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">))))</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a><a href="#__codelineno-0-1059"><span class="linenos" data-linenos="1059 "></span></a>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a><a href="#__codelineno-0-1060"><span class="linenos" data-linenos="1060 "></span></a>    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a><a href="#__codelineno-0-1061"><span class="linenos" data-linenos="1061 "></span></a>        <span class="k">if</span> <span class="s2">&quot;videos_json&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a><a href="#__codelineno-0-1062"><span class="linenos" data-linenos="1062 "></span></a>            <span class="n">f</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;videos_json&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">video_jsons</span><span class="p">,</span> <span class="n">maxshape</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,))</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a><a href="#__codelineno-0-1063"><span class="linenos" data-linenos="1063 "></span></a>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a><a href="#__codelineno-0-1064"><span class="linenos" data-linenos="1064 "></span></a>    <span class="c1"># Save source_video lineage metadata in a separate pass to ensure video groups exist</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a><a href="#__codelineno-0-1065"><span class="linenos" data-linenos="1065 "></span></a>    <span class="c1"># Note: original_video is now a computed property derived from source_video chain,</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a><a href="#__codelineno-0-1066"><span class="linenos" data-linenos="1066 "></span></a>    <span class="c1"># so we only need to store source_video (immediate parent).</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a><a href="#__codelineno-0-1067"><span class="linenos" data-linenos="1067 "></span></a>    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a><a href="#__codelineno-0-1068"><span class="linenos" data-linenos="1068 "></span></a>        <span class="k">for</span> <span class="n">video_ind</span><span class="p">,</span> <span class="n">video</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">videos</span><span class="p">):</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a><a href="#__codelineno-0-1069"><span class="linenos" data-linenos="1069 "></span></a>            <span class="n">dataset</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;video</span><span class="si">{</span><span class="n">video_ind</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a><a href="#__codelineno-0-1070"><span class="linenos" data-linenos="1070 "></span></a>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a><a href="#__codelineno-0-1071"><span class="linenos" data-linenos="1071 "></span></a>            <span class="c1"># If original_videos is provided (e.g., during embedding), use those</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a><a href="#__codelineno-0-1072"><span class="linenos" data-linenos="1072 "></span></a>            <span class="n">pre_embed_video</span> <span class="o">=</span> <span class="n">original_videos</span><span class="p">[</span><span class="n">video_ind</span><span class="p">]</span> <span class="k">if</span> <span class="n">original_videos</span> <span class="k">else</span> <span class="n">video</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a><a href="#__codelineno-0-1073"><span class="linenos" data-linenos="1073 "></span></a>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a><a href="#__codelineno-0-1074"><span class="linenos" data-linenos="1074 "></span></a>            <span class="c1"># Determine source_video to save based on reference mode</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a><a href="#__codelineno-0-1075"><span class="linenos" data-linenos="1075 "></span></a>            <span class="n">source_to_save</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a><a href="#__codelineno-0-1076"><span class="linenos" data-linenos="1076 "></span></a>            <span class="k">if</span> <span class="n">reference_mode</span> <span class="o">!=</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">PRESERVE_SOURCE</span><span class="p">:</span>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a><a href="#__codelineno-0-1077"><span class="linenos" data-linenos="1077 "></span></a>                <span class="k">if</span> <span class="n">reference_mode</span> <span class="o">==</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">EMBED</span> <span class="ow">and</span> <span class="n">original_videos</span><span class="p">:</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a><a href="#__codelineno-0-1078"><span class="linenos" data-linenos="1078 "></span></a>                    <span class="c1"># For embed mode, save the pre-embedding video as source</span>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a><a href="#__codelineno-0-1079"><span class="linenos" data-linenos="1079 "></span></a>                    <span class="n">source_to_save</span> <span class="o">=</span> <span class="n">pre_embed_video</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a><a href="#__codelineno-0-1080"><span class="linenos" data-linenos="1080 "></span></a>                <span class="k">elif</span> <span class="n">pre_embed_video</span><span class="o">.</span><span class="n">source_video</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a><a href="#__codelineno-0-1081"><span class="linenos" data-linenos="1081 "></span></a>                    <span class="n">source_to_save</span> <span class="o">=</span> <span class="n">pre_embed_video</span><span class="o">.</span><span class="n">source_video</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a><a href="#__codelineno-0-1082"><span class="linenos" data-linenos="1082 "></span></a>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a><a href="#__codelineno-0-1083"><span class="linenos" data-linenos="1083 "></span></a>            <span class="c1"># Write source_video metadata to the video group</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a><a href="#__codelineno-0-1084"><span class="linenos" data-linenos="1084 "></span></a>            <span class="k">if</span> <span class="n">dataset</span> <span class="ow">in</span> <span class="n">f</span> <span class="ow">and</span> <span class="n">source_to_save</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a><a href="#__codelineno-0-1085"><span class="linenos" data-linenos="1085 "></span></a>                <span class="n">video_group</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">dataset</span><span class="p">]</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a><a href="#__codelineno-0-1086"><span class="linenos" data-linenos="1086 "></span></a>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a><a href="#__codelineno-0-1087"><span class="linenos" data-linenos="1087 "></span></a>                <span class="c1"># For EMBED mode with original_videos, we need to overwrite</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a><a href="#__codelineno-0-1088"><span class="linenos" data-linenos="1088 "></span></a>                <span class="c1"># source_video because embed_videos saves the wrong metadata</span>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a><a href="#__codelineno-0-1089"><span class="linenos" data-linenos="1089 "></span></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a><a href="#__codelineno-0-1090"><span class="linenos" data-linenos="1090 "></span></a>                    <span class="n">reference_mode</span> <span class="o">==</span> <span class="n">VideoReferenceMode</span><span class="o">.</span><span class="n">EMBED</span>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a><a href="#__codelineno-0-1091"><span class="linenos" data-linenos="1091 "></span></a>                    <span class="ow">and</span> <span class="n">original_videos</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a><a href="#__codelineno-0-1092"><span class="linenos" data-linenos="1092 "></span></a>                    <span class="ow">and</span> <span class="s2">&quot;source_video&quot;</span> <span class="ow">in</span> <span class="n">video_group</span>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a><a href="#__codelineno-0-1093"><span class="linenos" data-linenos="1093 "></span></a>                <span class="p">):</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a><a href="#__codelineno-0-1094"><span class="linenos" data-linenos="1094 "></span></a>                    <span class="k">del</span> <span class="n">video_group</span><span class="p">[</span><span class="s2">&quot;source_video&quot;</span><span class="p">]</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a><a href="#__codelineno-0-1095"><span class="linenos" data-linenos="1095 "></span></a>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a><a href="#__codelineno-0-1096"><span class="linenos" data-linenos="1096 "></span></a>                <span class="k">if</span> <span class="s2">&quot;source_video&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_group</span><span class="p">:</span>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a><a href="#__codelineno-0-1097"><span class="linenos" data-linenos="1097 "></span></a>                    <span class="n">source_grp</span> <span class="o">=</span> <span class="n">video_group</span><span class="o">.</span><span class="n">require_group</span><span class="p">(</span><span class="s2">&quot;source_video&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a><a href="#__codelineno-0-1098"><span class="linenos" data-linenos="1098 "></span></a>                    <span class="n">source_json</span> <span class="o">=</span> <span class="n">video_to_dict</span><span class="p">(</span><span class="n">source_to_save</span><span class="p">,</span> <span class="n">labels_path</span><span class="p">)</span>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a><a href="#__codelineno-0-1099"><span class="linenos" data-linenos="1099 "></span></a>                    <span class="n">source_grp</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a><a href="#__codelineno-0-1100"><span class="linenos" data-linenos="1100 "></span></a>                        <span class="n">source_json</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a><a href="#__codelineno-0-1101"><span class="linenos" data-linenos="1101 "></span></a>                    <span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.embed_videos" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">embed_videos</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">embed</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plugin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">embed_all_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.embed_videos" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Embed videos in a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string path to the SLEAP labels file to save.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>labels</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;Labels&lt;/code&gt; (&lt;code&gt;sleap_io.model.labels.Labels&lt;/code&gt;)" href="../../reference/sleap_io/model/labels/#sleap_io.model.labels.Labels">Labels</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A <code>Labels</code> object to save.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>embed</code>
            </td>
            <td>
                  <code><span title="bool">bool</span> | <span title="str">str</span> | <span title="list">list</span>[<span title="tuple">tuple</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Video&lt;/code&gt; (&lt;code&gt;sleap_io.model.video.Video&lt;/code&gt;)" href="../../reference/sleap_io/model/video/#sleap_io.model.video.Video">Video</a>, <span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frames to embed in the saved labels file. One of <code>None</code>, <code>True</code>,
<code>"all"</code>, <code>"user"</code>, <code>"suggestions"</code>, <code>"user+suggestions"</code>, <code>"source"</code> or list
of tuples of <code>(video, frame_idx)</code>.</p>
<p>If <code>None</code> is specified (the default) and the labels contains embedded
frames, those embedded frames will be re-saved to the new file.</p>
<p>If <code>True</code> or <code>"all"</code>, all labeled frames and suggested frames will be
embedded.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), display a progress bar for the embedding
process.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>plugin</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Image plugin to use for encoding. One of "opencv" or "imageio".
If None, uses the global default from <code>get_default_image_plugin()</code>.</p>
<p>If <code>"source"</code> is specified, no images will be embedded and the source video
will be restored if available.</p>
<p>This argument is only valid for the SLP backend.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>embed_all_videos</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), all videos in the labels will be
converted to embedded references, even if they have no frames to embed.
This ensures package files are portable. If <code>False</code>, only videos with
frames to embed are converted.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_callback</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="int">int</span>, <span title="int">int</span>], <span title="bool">bool</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional callback function called during frame embedding
with <code>(current, total)</code> arguments. If it returns <code>False</code>, the operation
is cancelled and <code>ExportCancelled</code> is raised.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-815" name="__codelineno-0-815"></a><a href="#__codelineno-0-815"><span class="linenos" data-linenos="815 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">embed_videos</span><span class="p">(</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a><a href="#__codelineno-0-816"><span class="linenos" data-linenos="816 "></span></a>    <span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a><a href="#__codelineno-0-817"><span class="linenos" data-linenos="817 "></span></a>    <span class="n">labels</span><span class="p">:</span> <span class="n">Labels</span><span class="p">,</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a><a href="#__codelineno-0-818"><span class="linenos" data-linenos="818 "></span></a>    <span class="n">embed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">Video</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a><a href="#__codelineno-0-819"><span class="linenos" data-linenos="819 "></span></a>    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a><a href="#__codelineno-0-820"><span class="linenos" data-linenos="820 "></span></a>    <span class="n">plugin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a><a href="#__codelineno-0-821"><span class="linenos" data-linenos="821 "></span></a>    <span class="n">embed_all_videos</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a><a href="#__codelineno-0-822"><span class="linenos" data-linenos="822 "></span></a>    <span class="n">progress_callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a><a href="#__codelineno-0-823"><span class="linenos" data-linenos="823 "></span></a><span class="p">):</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a><a href="#__codelineno-0-824"><span class="linenos" data-linenos="824 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Embed videos in a SLEAP labels file.</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a><a href="#__codelineno-0-825"><span class="linenos" data-linenos="825 "></span></a>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a><a href="#__codelineno-0-826"><span class="linenos" data-linenos="826 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><a href="#__codelineno-0-827"><span class="linenos" data-linenos="827 "></span></a><span class="sd">        labels_path: A string path to the SLEAP labels file to save.</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a><a href="#__codelineno-0-828"><span class="linenos" data-linenos="828 "></span></a><span class="sd">        labels: A `Labels` object to save.</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a><a href="#__codelineno-0-829"><span class="linenos" data-linenos="829 "></span></a><span class="sd">        embed: Frames to embed in the saved labels file. One of `None`, `True`,</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a><a href="#__codelineno-0-830"><span class="linenos" data-linenos="830 "></span></a><span class="sd">            `&quot;all&quot;`, `&quot;user&quot;`, `&quot;suggestions&quot;`, `&quot;user+suggestions&quot;`, `&quot;source&quot;` or list</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a><a href="#__codelineno-0-831"><span class="linenos" data-linenos="831 "></span></a><span class="sd">            of tuples of `(video, frame_idx)`.</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a><a href="#__codelineno-0-832"><span class="linenos" data-linenos="832 "></span></a>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><a href="#__codelineno-0-833"><span class="linenos" data-linenos="833 "></span></a><span class="sd">            If `None` is specified (the default) and the labels contains embedded</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a><a href="#__codelineno-0-834"><span class="linenos" data-linenos="834 "></span></a><span class="sd">            frames, those embedded frames will be re-saved to the new file.</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a><a href="#__codelineno-0-835"><span class="linenos" data-linenos="835 "></span></a>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a><a href="#__codelineno-0-836"><span class="linenos" data-linenos="836 "></span></a><span class="sd">            If `True` or `&quot;all&quot;`, all labeled frames and suggested frames will be</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a><a href="#__codelineno-0-837"><span class="linenos" data-linenos="837 "></span></a><span class="sd">            embedded.</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a><a href="#__codelineno-0-838"><span class="linenos" data-linenos="838 "></span></a><span class="sd">        verbose: If `True` (the default), display a progress bar for the embedding</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a><a href="#__codelineno-0-839"><span class="linenos" data-linenos="839 "></span></a><span class="sd">            process.</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a><a href="#__codelineno-0-840"><span class="linenos" data-linenos="840 "></span></a><span class="sd">        plugin: Image plugin to use for encoding. One of &quot;opencv&quot; or &quot;imageio&quot;.</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a><a href="#__codelineno-0-841"><span class="linenos" data-linenos="841 "></span></a><span class="sd">            If None, uses the global default from `get_default_image_plugin()`.</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a><a href="#__codelineno-0-842"><span class="linenos" data-linenos="842 "></span></a>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a><a href="#__codelineno-0-843"><span class="linenos" data-linenos="843 "></span></a><span class="sd">            If `&quot;source&quot;` is specified, no images will be embedded and the source video</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a><a href="#__codelineno-0-844"><span class="linenos" data-linenos="844 "></span></a><span class="sd">            will be restored if available.</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a><a href="#__codelineno-0-845"><span class="linenos" data-linenos="845 "></span></a>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a><a href="#__codelineno-0-846"><span class="linenos" data-linenos="846 "></span></a><span class="sd">            This argument is only valid for the SLP backend.</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a><a href="#__codelineno-0-847"><span class="linenos" data-linenos="847 "></span></a><span class="sd">        embed_all_videos: If `True` (the default), all videos in the labels will be</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a><a href="#__codelineno-0-848"><span class="linenos" data-linenos="848 "></span></a><span class="sd">            converted to embedded references, even if they have no frames to embed.</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a><a href="#__codelineno-0-849"><span class="linenos" data-linenos="849 "></span></a><span class="sd">            This ensures package files are portable. If `False`, only videos with</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a><a href="#__codelineno-0-850"><span class="linenos" data-linenos="850 "></span></a><span class="sd">            frames to embed are converted.</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a><a href="#__codelineno-0-851"><span class="linenos" data-linenos="851 "></span></a><span class="sd">        progress_callback: Optional callback function called during frame embedding</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><a href="#__codelineno-0-852"><span class="linenos" data-linenos="852 "></span></a><span class="sd">            with `(current, total)` arguments. If it returns `False`, the operation</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a><a href="#__codelineno-0-853"><span class="linenos" data-linenos="853 "></span></a><span class="sd">            is cancelled and `ExportCancelled` is raised.</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a><a href="#__codelineno-0-854"><span class="linenos" data-linenos="854 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a><a href="#__codelineno-0-855"><span class="linenos" data-linenos="855 "></span></a>    <span class="k">if</span> <span class="n">embed</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a><a href="#__codelineno-0-856"><span class="linenos" data-linenos="856 "></span></a>        <span class="n">embed</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><a href="#__codelineno-0-857"><span class="linenos" data-linenos="857 "></span></a>    <span class="k">if</span> <span class="n">embed</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">:</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><a href="#__codelineno-0-858"><span class="linenos" data-linenos="858 "></span></a>        <span class="n">embed</span> <span class="o">=</span> <span class="p">[(</span><span class="n">lf</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">lf</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">lf</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">user_labeled_frames</span><span class="p">]</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><a href="#__codelineno-0-859"><span class="linenos" data-linenos="859 "></span></a>    <span class="k">elif</span> <span class="n">embed</span> <span class="o">==</span> <span class="s2">&quot;suggestions&quot;</span><span class="p">:</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><a href="#__codelineno-0-860"><span class="linenos" data-linenos="860 "></span></a>        <span class="n">embed</span> <span class="o">=</span> <span class="p">[(</span><span class="n">sf</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">sf</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">suggestions</span><span class="p">]</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a><a href="#__codelineno-0-861"><span class="linenos" data-linenos="861 "></span></a>    <span class="k">elif</span> <span class="n">embed</span> <span class="o">==</span> <span class="s2">&quot;user+suggestions&quot;</span><span class="p">:</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><a href="#__codelineno-0-862"><span class="linenos" data-linenos="862 "></span></a>        <span class="n">embed</span> <span class="o">=</span> <span class="p">[(</span><span class="n">lf</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">lf</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">lf</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">user_labeled_frames</span><span class="p">]</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><a href="#__codelineno-0-863"><span class="linenos" data-linenos="863 "></span></a>        <span class="n">embed</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">sf</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">sf</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">suggestions</span><span class="p">]</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a><a href="#__codelineno-0-864"><span class="linenos" data-linenos="864 "></span></a>    <span class="k">elif</span> <span class="n">embed</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a><a href="#__codelineno-0-865"><span class="linenos" data-linenos="865 "></span></a>        <span class="n">embed</span> <span class="o">=</span> <span class="p">[(</span><span class="n">lf</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">lf</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">lf</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><a href="#__codelineno-0-866"><span class="linenos" data-linenos="866 "></span></a>        <span class="n">embed</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">sf</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">sf</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">suggestions</span><span class="p">]</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><a href="#__codelineno-0-867"><span class="linenos" data-linenos="867 "></span></a>    <span class="k">elif</span> <span class="n">embed</span> <span class="o">==</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a><a href="#__codelineno-0-868"><span class="linenos" data-linenos="868 "></span></a>        <span class="n">embed</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><a href="#__codelineno-0-869"><span class="linenos" data-linenos="869 "></span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embed</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a><a href="#__codelineno-0-870"><span class="linenos" data-linenos="870 "></span></a>        <span class="n">embed</span> <span class="o">=</span> <span class="n">embed</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a><a href="#__codelineno-0-871"><span class="linenos" data-linenos="871 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><a href="#__codelineno-0-872"><span class="linenos" data-linenos="872 "></span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value for embed: </span><span class="si">{</span><span class="n">embed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a><a href="#__codelineno-0-873"><span class="linenos" data-linenos="873 "></span></a>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><a href="#__codelineno-0-874"><span class="linenos" data-linenos="874 "></span></a>    <span class="n">embed_frames</span><span class="p">(</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a><a href="#__codelineno-0-875"><span class="linenos" data-linenos="875 "></span></a>        <span class="n">labels_path</span><span class="p">,</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><a href="#__codelineno-0-876"><span class="linenos" data-linenos="876 "></span></a>        <span class="n">labels</span><span class="p">,</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><a href="#__codelineno-0-877"><span class="linenos" data-linenos="877 "></span></a>        <span class="n">embed</span><span class="p">,</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><a href="#__codelineno-0-878"><span class="linenos" data-linenos="878 "></span></a>        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><a href="#__codelineno-0-879"><span class="linenos" data-linenos="879 "></span></a>        <span class="n">plugin</span><span class="o">=</span><span class="n">plugin</span><span class="p">,</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a><a href="#__codelineno-0-880"><span class="linenos" data-linenos="880 "></span></a>        <span class="n">embed_all_videos</span><span class="o">=</span><span class="n">embed_all_videos</span><span class="p">,</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a><a href="#__codelineno-0-881"><span class="linenos" data-linenos="881 "></span></a>        <span class="n">progress_callback</span><span class="o">=</span><span class="n">progress_callback</span><span class="p">,</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a><a href="#__codelineno-0-882"><span class="linenos" data-linenos="882 "></span></a>    <span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div><h3 id="skeleton-io">Skeleton I/O<a class="headerlink" href="#skeleton-io" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.read_skeletons" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">read_skeletons</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.read_skeletons" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Read <code>Skeleton</code> dataset from a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string that contains the path to the labels file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Skeleton&lt;/code&gt; (&lt;code&gt;sleap_io.model.skeleton.Skeleton&lt;/code&gt;)" href="../../reference/sleap_io/model/skeleton/#sleap_io.model.skeleton.Skeleton">Skeleton</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of <code>Skeleton</code> objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1207" name="__codelineno-0-1207"></a><a href="#__codelineno-0-1207"><span class="linenos" data-linenos="1207 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">read_skeletons</span><span class="p">(</span><span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Skeleton</span><span class="p">]:</span>
<a id="__codelineno-0-1208" name="__codelineno-0-1208"></a><a href="#__codelineno-0-1208"><span class="linenos" data-linenos="1208 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Read `Skeleton` dataset from a SLEAP labels file.</span>
<a id="__codelineno-0-1209" name="__codelineno-0-1209"></a><a href="#__codelineno-0-1209"><span class="linenos" data-linenos="1209 "></span></a>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a><a href="#__codelineno-0-1210"><span class="linenos" data-linenos="1210 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a><a href="#__codelineno-0-1211"><span class="linenos" data-linenos="1211 "></span></a><span class="sd">        labels_path: A string that contains the path to the labels file.</span>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a><a href="#__codelineno-0-1212"><span class="linenos" data-linenos="1212 "></span></a>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a><a href="#__codelineno-0-1213"><span class="linenos" data-linenos="1213 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a><a href="#__codelineno-0-1214"><span class="linenos" data-linenos="1214 "></span></a><span class="sd">        A list of `Skeleton` objects.</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a><a href="#__codelineno-0-1215"><span class="linenos" data-linenos="1215 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a><a href="#__codelineno-0-1216"><span class="linenos" data-linenos="1216 "></span></a>    <span class="n">metadata</span> <span class="o">=</span> <span class="n">read_metadata</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a><a href="#__codelineno-0-1217"><span class="linenos" data-linenos="1217 "></span></a>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a><a href="#__codelineno-0-1218"><span class="linenos" data-linenos="1218 "></span></a>    <span class="c1"># Get node names. This is a superset of all nodes across all skeletons. Note that</span>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a><a href="#__codelineno-0-1219"><span class="linenos" data-linenos="1219 "></span></a>    <span class="c1"># node ordering is specific to each skeleton, so we&#39;ll need to fix this afterwards.</span>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a><a href="#__codelineno-0-1220"><span class="linenos" data-linenos="1220 "></span></a>    <span class="n">node_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nodes&quot;</span><span class="p">]]</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a><a href="#__codelineno-0-1221"><span class="linenos" data-linenos="1221 "></span></a>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a><a href="#__codelineno-0-1222"><span class="linenos" data-linenos="1222 "></span></a>    <span class="c1"># Use the SLP skeleton decoder</span>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a><a href="#__codelineno-0-1223"><span class="linenos" data-linenos="1223 "></span></a>    <span class="n">decoder</span> <span class="o">=</span> <span class="n">SkeletonSLPDecoder</span><span class="p">()</span>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a><a href="#__codelineno-0-1224"><span class="linenos" data-linenos="1224 "></span></a>    <span class="k">return</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">node_names</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.serialize_skeletons" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">serialize_skeletons</span><span class="p">(</span><span class="n">skeletons</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.serialize_skeletons" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Serialize a list of <code>Skeleton</code> objects to JSON-compatible dicts.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>skeletons</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Skeleton&lt;/code&gt; (&lt;code&gt;sleap_io.model.skeleton.Skeleton&lt;/code&gt;)" href="../../reference/sleap_io/model/skeleton/#sleap_io.model.skeleton.Skeleton">Skeleton</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of <code>Skeleton</code> objects.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="list">list</span>[<span title="dict">dict</span>], <span title="list">list</span>[<span title="dict">dict</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple of <code>skeletons_dicts, nodes_dicts</code>.</p>
<p><code>nodes_dicts</code> is a list of dicts containing the nodes in all the skeletons.</p>
<p><code>skeletons_dicts</code> is a list of dicts containing the skeletons.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <p>This function attempts to replicate the serialization of skeletons in legacy
SLEAP which relies on a combination of networkx's graph serialization and our
own metadata used to store nodes and edges independent of the graph structure.</p>
<p>However, because sleap-io does not currently load in the legacy metadata, this
function will not produce byte-level compatible serialization with legacy
formats, even though the ordering and all attributes of nodes and edges should
match up.</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1227" name="__codelineno-0-1227"></a><a href="#__codelineno-0-1227"><span class="linenos" data-linenos="1227 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">serialize_skeletons</span><span class="p">(</span><span class="n">skeletons</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Skeleton</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]:</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a><a href="#__codelineno-0-1228"><span class="linenos" data-linenos="1228 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize a list of `Skeleton` objects to JSON-compatible dicts.</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a><a href="#__codelineno-0-1229"><span class="linenos" data-linenos="1229 "></span></a>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a><a href="#__codelineno-0-1230"><span class="linenos" data-linenos="1230 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a><a href="#__codelineno-0-1231"><span class="linenos" data-linenos="1231 "></span></a><span class="sd">        skeletons: A list of `Skeleton` objects.</span>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a><a href="#__codelineno-0-1232"><span class="linenos" data-linenos="1232 "></span></a>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a><a href="#__codelineno-0-1233"><span class="linenos" data-linenos="1233 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><a href="#__codelineno-0-1234"><span class="linenos" data-linenos="1234 "></span></a><span class="sd">        A tuple of `skeletons_dicts, nodes_dicts`.</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a><a href="#__codelineno-0-1235"><span class="linenos" data-linenos="1235 "></span></a>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><a href="#__codelineno-0-1236"><span class="linenos" data-linenos="1236 "></span></a><span class="sd">        `nodes_dicts` is a list of dicts containing the nodes in all the skeletons.</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a><a href="#__codelineno-0-1237"><span class="linenos" data-linenos="1237 "></span></a>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a><a href="#__codelineno-0-1238"><span class="linenos" data-linenos="1238 "></span></a><span class="sd">        `skeletons_dicts` is a list of dicts containing the skeletons.</span>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><a href="#__codelineno-0-1239"><span class="linenos" data-linenos="1239 "></span></a>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a><a href="#__codelineno-0-1240"><span class="linenos" data-linenos="1240 "></span></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><a href="#__codelineno-0-1241"><span class="linenos" data-linenos="1241 "></span></a><span class="sd">        This function attempts to replicate the serialization of skeletons in legacy</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><a href="#__codelineno-0-1242"><span class="linenos" data-linenos="1242 "></span></a><span class="sd">        SLEAP which relies on a combination of networkx&#39;s graph serialization and our</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a><a href="#__codelineno-0-1243"><span class="linenos" data-linenos="1243 "></span></a><span class="sd">        own metadata used to store nodes and edges independent of the graph structure.</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a><a href="#__codelineno-0-1244"><span class="linenos" data-linenos="1244 "></span></a>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a><a href="#__codelineno-0-1245"><span class="linenos" data-linenos="1245 "></span></a><span class="sd">        However, because sleap-io does not currently load in the legacy metadata, this</span>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a><a href="#__codelineno-0-1246"><span class="linenos" data-linenos="1246 "></span></a><span class="sd">        function will not produce byte-level compatible serialization with legacy</span>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a><a href="#__codelineno-0-1247"><span class="linenos" data-linenos="1247 "></span></a><span class="sd">        formats, even though the ordering and all attributes of nodes and edges should</span>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a><a href="#__codelineno-0-1248"><span class="linenos" data-linenos="1248 "></span></a><span class="sd">        match up.</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a><a href="#__codelineno-0-1249"><span class="linenos" data-linenos="1249 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a><a href="#__codelineno-0-1250"><span class="linenos" data-linenos="1250 "></span></a>    <span class="c1"># Use the SLP skeleton encoder</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a><a href="#__codelineno-0-1251"><span class="linenos" data-linenos="1251 "></span></a>    <span class="n">encoder</span> <span class="o">=</span> <span class="n">SkeletonSLPEncoder</span><span class="p">()</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a><a href="#__codelineno-0-1252"><span class="linenos" data-linenos="1252 "></span></a>    <span class="k">return</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode_skeletons</span><span class="p">(</span><span class="n">skeletons</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div><h3 id="instance-io">Instance I/O<a class="headerlink" href="#instance-io" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.read_instances" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">read_instances</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="n">skeletons</span><span class="p">,</span> <span class="n">tracks</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">pred_points</span><span class="p">,</span> <span class="n">format_id</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.read_instances" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Read <code>Instance</code> dataset in a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string path to the SLEAP labels file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skeletons</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Skeleton&lt;/code&gt; (&lt;code&gt;sleap_io.model.skeleton.Skeleton&lt;/code&gt;)" href="../../reference/sleap_io/model/skeleton/#sleap_io.model.skeleton.Skeleton">Skeleton</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of <code>Skeleton</code> objects (see <code>read_skeletons</code>).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tracks</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Track&lt;/code&gt; (&lt;code&gt;sleap_io.model.instance.Track&lt;/code&gt;)" href="../../reference/sleap_io/model/instance/#sleap_io.model.instance.Track">Track</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of <code>Track</code> objects (see <code>read_tracks</code>).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>points</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A structured array of point data (see <code>read_points</code>).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pred_points</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A structured array of predicted point data (see
<code>read_pred_points</code>).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>format_id</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format version identifier used to specify the format of the input
file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;Instance&lt;/code&gt; (&lt;code&gt;sleap_io.model.instance.Instance&lt;/code&gt;)" href="../../reference/sleap_io/model/instance/#sleap_io.model.instance.Instance">Instance</a> | <a class="autorefs autorefs-internal" title="&lt;code&gt;PredictedInstance&lt;/code&gt; (&lt;code&gt;sleap_io.model.instance.PredictedInstance&lt;/code&gt;)" href="../../reference/sleap_io/model/instance/#sleap_io.model.instance.PredictedInstance">PredictedInstance</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of <code>Instance</code> and/or <code>PredictedInstance</code> objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1356" name="__codelineno-0-1356"></a><a href="#__codelineno-0-1356"><span class="linenos" data-linenos="1356 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">read_instances</span><span class="p">(</span>
<a id="__codelineno-0-1357" name="__codelineno-0-1357"></a><a href="#__codelineno-0-1357"><span class="linenos" data-linenos="1357 "></span></a>    <span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-1358" name="__codelineno-0-1358"></a><a href="#__codelineno-0-1358"><span class="linenos" data-linenos="1358 "></span></a>    <span class="n">skeletons</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Skeleton</span><span class="p">],</span>
<a id="__codelineno-0-1359" name="__codelineno-0-1359"></a><a href="#__codelineno-0-1359"><span class="linenos" data-linenos="1359 "></span></a>    <span class="n">tracks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Track</span><span class="p">],</span>
<a id="__codelineno-0-1360" name="__codelineno-0-1360"></a><a href="#__codelineno-0-1360"><span class="linenos" data-linenos="1360 "></span></a>    <span class="n">points</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-1361" name="__codelineno-0-1361"></a><a href="#__codelineno-0-1361"><span class="linenos" data-linenos="1361 "></span></a>    <span class="n">pred_points</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-1362" name="__codelineno-0-1362"></a><a href="#__codelineno-0-1362"><span class="linenos" data-linenos="1362 "></span></a>    <span class="n">format_id</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<a id="__codelineno-0-1363" name="__codelineno-0-1363"></a><a href="#__codelineno-0-1363"><span class="linenos" data-linenos="1363 "></span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span> <span class="o">|</span> <span class="n">PredictedInstance</span><span class="p">]:</span>
<a id="__codelineno-0-1364" name="__codelineno-0-1364"></a><a href="#__codelineno-0-1364"><span class="linenos" data-linenos="1364 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Read `Instance` dataset in a SLEAP labels file.</span>
<a id="__codelineno-0-1365" name="__codelineno-0-1365"></a><a href="#__codelineno-0-1365"><span class="linenos" data-linenos="1365 "></span></a>
<a id="__codelineno-0-1366" name="__codelineno-0-1366"></a><a href="#__codelineno-0-1366"><span class="linenos" data-linenos="1366 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1367" name="__codelineno-0-1367"></a><a href="#__codelineno-0-1367"><span class="linenos" data-linenos="1367 "></span></a><span class="sd">        labels_path: A string path to the SLEAP labels file.</span>
<a id="__codelineno-0-1368" name="__codelineno-0-1368"></a><a href="#__codelineno-0-1368"><span class="linenos" data-linenos="1368 "></span></a><span class="sd">        skeletons: A list of `Skeleton` objects (see `read_skeletons`).</span>
<a id="__codelineno-0-1369" name="__codelineno-0-1369"></a><a href="#__codelineno-0-1369"><span class="linenos" data-linenos="1369 "></span></a><span class="sd">        tracks: A list of `Track` objects (see `read_tracks`).</span>
<a id="__codelineno-0-1370" name="__codelineno-0-1370"></a><a href="#__codelineno-0-1370"><span class="linenos" data-linenos="1370 "></span></a><span class="sd">        points: A structured array of point data (see `read_points`).</span>
<a id="__codelineno-0-1371" name="__codelineno-0-1371"></a><a href="#__codelineno-0-1371"><span class="linenos" data-linenos="1371 "></span></a><span class="sd">        pred_points: A structured array of predicted point data (see</span>
<a id="__codelineno-0-1372" name="__codelineno-0-1372"></a><a href="#__codelineno-0-1372"><span class="linenos" data-linenos="1372 "></span></a><span class="sd">            `read_pred_points`).</span>
<a id="__codelineno-0-1373" name="__codelineno-0-1373"></a><a href="#__codelineno-0-1373"><span class="linenos" data-linenos="1373 "></span></a><span class="sd">        format_id: The format version identifier used to specify the format of the input</span>
<a id="__codelineno-0-1374" name="__codelineno-0-1374"></a><a href="#__codelineno-0-1374"><span class="linenos" data-linenos="1374 "></span></a><span class="sd">            file.</span>
<a id="__codelineno-0-1375" name="__codelineno-0-1375"></a><a href="#__codelineno-0-1375"><span class="linenos" data-linenos="1375 "></span></a>
<a id="__codelineno-0-1376" name="__codelineno-0-1376"></a><a href="#__codelineno-0-1376"><span class="linenos" data-linenos="1376 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1377" name="__codelineno-0-1377"></a><a href="#__codelineno-0-1377"><span class="linenos" data-linenos="1377 "></span></a><span class="sd">        A list of `Instance` and/or `PredictedInstance` objects.</span>
<a id="__codelineno-0-1378" name="__codelineno-0-1378"></a><a href="#__codelineno-0-1378"><span class="linenos" data-linenos="1378 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1379" name="__codelineno-0-1379"></a><a href="#__codelineno-0-1379"><span class="linenos" data-linenos="1379 "></span></a>    <span class="n">instances_data</span> <span class="o">=</span> <span class="n">read_hdf5_dataset</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;instances&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1380" name="__codelineno-0-1380"></a><a href="#__codelineno-0-1380"><span class="linenos" data-linenos="1380 "></span></a>
<a id="__codelineno-0-1381" name="__codelineno-0-1381"></a><a href="#__codelineno-0-1381"><span class="linenos" data-linenos="1381 "></span></a>    <span class="n">instances</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1382" name="__codelineno-0-1382"></a><a href="#__codelineno-0-1382"><span class="linenos" data-linenos="1382 "></span></a>    <span class="n">from_predicted_pairs</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1383" name="__codelineno-0-1383"></a><a href="#__codelineno-0-1383"><span class="linenos" data-linenos="1383 "></span></a>    <span class="k">for</span> <span class="n">instance_data</span> <span class="ow">in</span> <span class="n">instances_data</span><span class="p">:</span>
<a id="__codelineno-0-1384" name="__codelineno-0-1384"></a><a href="#__codelineno-0-1384"><span class="linenos" data-linenos="1384 "></span></a>        <span class="k">if</span> <span class="n">format_id</span> <span class="o">&lt;</span> <span class="mf">1.2</span><span class="p">:</span>
<a id="__codelineno-0-1385" name="__codelineno-0-1385"></a><a href="#__codelineno-0-1385"><span class="linenos" data-linenos="1385 "></span></a>            <span class="p">(</span>
<a id="__codelineno-0-1386" name="__codelineno-0-1386"></a><a href="#__codelineno-0-1386"><span class="linenos" data-linenos="1386 "></span></a>                <span class="n">instance_id</span><span class="p">,</span>
<a id="__codelineno-0-1387" name="__codelineno-0-1387"></a><a href="#__codelineno-0-1387"><span class="linenos" data-linenos="1387 "></span></a>                <span class="n">instance_type</span><span class="p">,</span>
<a id="__codelineno-0-1388" name="__codelineno-0-1388"></a><a href="#__codelineno-0-1388"><span class="linenos" data-linenos="1388 "></span></a>                <span class="n">frame_id</span><span class="p">,</span>
<a id="__codelineno-0-1389" name="__codelineno-0-1389"></a><a href="#__codelineno-0-1389"><span class="linenos" data-linenos="1389 "></span></a>                <span class="n">skeleton_id</span><span class="p">,</span>
<a id="__codelineno-0-1390" name="__codelineno-0-1390"></a><a href="#__codelineno-0-1390"><span class="linenos" data-linenos="1390 "></span></a>                <span class="n">track_id</span><span class="p">,</span>
<a id="__codelineno-0-1391" name="__codelineno-0-1391"></a><a href="#__codelineno-0-1391"><span class="linenos" data-linenos="1391 "></span></a>                <span class="n">from_predicted</span><span class="p">,</span>
<a id="__codelineno-0-1392" name="__codelineno-0-1392"></a><a href="#__codelineno-0-1392"><span class="linenos" data-linenos="1392 "></span></a>                <span class="n">instance_score</span><span class="p">,</span>
<a id="__codelineno-0-1393" name="__codelineno-0-1393"></a><a href="#__codelineno-0-1393"><span class="linenos" data-linenos="1393 "></span></a>                <span class="n">point_id_start</span><span class="p">,</span>
<a id="__codelineno-0-1394" name="__codelineno-0-1394"></a><a href="#__codelineno-0-1394"><span class="linenos" data-linenos="1394 "></span></a>                <span class="n">point_id_end</span><span class="p">,</span>
<a id="__codelineno-0-1395" name="__codelineno-0-1395"></a><a href="#__codelineno-0-1395"><span class="linenos" data-linenos="1395 "></span></a>            <span class="p">)</span> <span class="o">=</span> <span class="n">instance_data</span>
<a id="__codelineno-0-1396" name="__codelineno-0-1396"></a><a href="#__codelineno-0-1396"><span class="linenos" data-linenos="1396 "></span></a>            <span class="n">tracking_score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-1397" name="__codelineno-0-1397"></a><a href="#__codelineno-0-1397"><span class="linenos" data-linenos="1397 "></span></a>        <span class="k">elif</span> <span class="n">format_id</span> <span class="o">&gt;=</span> <span class="mf">1.2</span><span class="p">:</span>
<a id="__codelineno-0-1398" name="__codelineno-0-1398"></a><a href="#__codelineno-0-1398"><span class="linenos" data-linenos="1398 "></span></a>            <span class="p">(</span>
<a id="__codelineno-0-1399" name="__codelineno-0-1399"></a><a href="#__codelineno-0-1399"><span class="linenos" data-linenos="1399 "></span></a>                <span class="n">instance_id</span><span class="p">,</span>
<a id="__codelineno-0-1400" name="__codelineno-0-1400"></a><a href="#__codelineno-0-1400"><span class="linenos" data-linenos="1400 "></span></a>                <span class="n">instance_type</span><span class="p">,</span>
<a id="__codelineno-0-1401" name="__codelineno-0-1401"></a><a href="#__codelineno-0-1401"><span class="linenos" data-linenos="1401 "></span></a>                <span class="n">frame_id</span><span class="p">,</span>
<a id="__codelineno-0-1402" name="__codelineno-0-1402"></a><a href="#__codelineno-0-1402"><span class="linenos" data-linenos="1402 "></span></a>                <span class="n">skeleton_id</span><span class="p">,</span>
<a id="__codelineno-0-1403" name="__codelineno-0-1403"></a><a href="#__codelineno-0-1403"><span class="linenos" data-linenos="1403 "></span></a>                <span class="n">track_id</span><span class="p">,</span>
<a id="__codelineno-0-1404" name="__codelineno-0-1404"></a><a href="#__codelineno-0-1404"><span class="linenos" data-linenos="1404 "></span></a>                <span class="n">from_predicted</span><span class="p">,</span>
<a id="__codelineno-0-1405" name="__codelineno-0-1405"></a><a href="#__codelineno-0-1405"><span class="linenos" data-linenos="1405 "></span></a>                <span class="n">instance_score</span><span class="p">,</span>
<a id="__codelineno-0-1406" name="__codelineno-0-1406"></a><a href="#__codelineno-0-1406"><span class="linenos" data-linenos="1406 "></span></a>                <span class="n">point_id_start</span><span class="p">,</span>
<a id="__codelineno-0-1407" name="__codelineno-0-1407"></a><a href="#__codelineno-0-1407"><span class="linenos" data-linenos="1407 "></span></a>                <span class="n">point_id_end</span><span class="p">,</span>
<a id="__codelineno-0-1408" name="__codelineno-0-1408"></a><a href="#__codelineno-0-1408"><span class="linenos" data-linenos="1408 "></span></a>                <span class="n">tracking_score</span><span class="p">,</span>
<a id="__codelineno-0-1409" name="__codelineno-0-1409"></a><a href="#__codelineno-0-1409"><span class="linenos" data-linenos="1409 "></span></a>            <span class="p">)</span> <span class="o">=</span> <span class="n">instance_data</span>
<a id="__codelineno-0-1410" name="__codelineno-0-1410"></a><a href="#__codelineno-0-1410"><span class="linenos" data-linenos="1410 "></span></a>
<a id="__codelineno-0-1411" name="__codelineno-0-1411"></a><a href="#__codelineno-0-1411"><span class="linenos" data-linenos="1411 "></span></a>        <span class="n">skeleton</span> <span class="o">=</span> <span class="n">skeletons</span><span class="p">[</span><span class="n">skeleton_id</span><span class="p">]</span>
<a id="__codelineno-0-1412" name="__codelineno-0-1412"></a><a href="#__codelineno-0-1412"><span class="linenos" data-linenos="1412 "></span></a>        <span class="n">track</span> <span class="o">=</span> <span class="n">tracks</span><span class="p">[</span><span class="n">track_id</span><span class="p">]</span> <span class="k">if</span> <span class="n">track_id</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-1413" name="__codelineno-0-1413"></a><a href="#__codelineno-0-1413"><span class="linenos" data-linenos="1413 "></span></a>
<a id="__codelineno-0-1414" name="__codelineno-0-1414"></a><a href="#__codelineno-0-1414"><span class="linenos" data-linenos="1414 "></span></a>        <span class="k">if</span> <span class="n">instance_type</span> <span class="o">==</span> <span class="n">InstanceType</span><span class="o">.</span><span class="n">USER</span><span class="p">:</span>
<a id="__codelineno-0-1415" name="__codelineno-0-1415"></a><a href="#__codelineno-0-1415"><span class="linenos" data-linenos="1415 "></span></a>            <span class="n">pts_data</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">point_id_start</span><span class="p">:</span><span class="n">point_id_end</span><span class="p">]</span>
<a id="__codelineno-0-1416" name="__codelineno-0-1416"></a><a href="#__codelineno-0-1416"><span class="linenos" data-linenos="1416 "></span></a>            <span class="c1"># Fast path: Build PointsArray directly from HDF5 data</span>
<a id="__codelineno-0-1417" name="__codelineno-0-1417"></a><a href="#__codelineno-0-1417"><span class="linenos" data-linenos="1417 "></span></a>            <span class="n">points_array</span> <span class="o">=</span> <span class="n">_points_from_hdf5_data</span><span class="p">(</span>
<a id="__codelineno-0-1418" name="__codelineno-0-1418"></a><a href="#__codelineno-0-1418"><span class="linenos" data-linenos="1418 "></span></a>                <span class="n">pts_data</span><span class="p">,</span> <span class="n">skeleton</span><span class="p">,</span> <span class="n">is_predicted</span><span class="o">=</span><span class="kc">False</span>
<a id="__codelineno-0-1419" name="__codelineno-0-1419"></a><a href="#__codelineno-0-1419"><span class="linenos" data-linenos="1419 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-1420" name="__codelineno-0-1420"></a><a href="#__codelineno-0-1420"><span class="linenos" data-linenos="1420 "></span></a>            <span class="k">if</span> <span class="n">format_id</span> <span class="o">&lt;</span> <span class="mf">1.1</span><span class="p">:</span>
<a id="__codelineno-0-1421" name="__codelineno-0-1421"></a><a href="#__codelineno-0-1421"><span class="linenos" data-linenos="1421 "></span></a>                <span class="c1"># Legacy coordinate system: top-left of pixel is (0, 0)</span>
<a id="__codelineno-0-1422" name="__codelineno-0-1422"></a><a href="#__codelineno-0-1422"><span class="linenos" data-linenos="1422 "></span></a>                <span class="c1"># Adjust to new system: center of pixel is (0, 0)</span>
<a id="__codelineno-0-1423" name="__codelineno-0-1423"></a><a href="#__codelineno-0-1423"><span class="linenos" data-linenos="1423 "></span></a>                <span class="n">points_array</span><span class="p">[</span><span class="s2">&quot;xy&quot;</span><span class="p">]</span> <span class="o">-=</span> <span class="mf">0.5</span>
<a id="__codelineno-0-1424" name="__codelineno-0-1424"></a><a href="#__codelineno-0-1424"><span class="linenos" data-linenos="1424 "></span></a>            <span class="n">inst</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span>
<a id="__codelineno-0-1425" name="__codelineno-0-1425"></a><a href="#__codelineno-0-1425"><span class="linenos" data-linenos="1425 "></span></a>                <span class="n">points_array</span><span class="p">,</span>
<a id="__codelineno-0-1426" name="__codelineno-0-1426"></a><a href="#__codelineno-0-1426"><span class="linenos" data-linenos="1426 "></span></a>                <span class="n">skeleton</span><span class="o">=</span><span class="n">skeleton</span><span class="p">,</span>
<a id="__codelineno-0-1427" name="__codelineno-0-1427"></a><a href="#__codelineno-0-1427"><span class="linenos" data-linenos="1427 "></span></a>                <span class="n">track</span><span class="o">=</span><span class="n">track</span><span class="p">,</span>
<a id="__codelineno-0-1428" name="__codelineno-0-1428"></a><a href="#__codelineno-0-1428"><span class="linenos" data-linenos="1428 "></span></a>                <span class="n">tracking_score</span><span class="o">=</span><span class="n">tracking_score</span><span class="p">,</span>
<a id="__codelineno-0-1429" name="__codelineno-0-1429"></a><a href="#__codelineno-0-1429"><span class="linenos" data-linenos="1429 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-1430" name="__codelineno-0-1430"></a><a href="#__codelineno-0-1430"><span class="linenos" data-linenos="1430 "></span></a>            <span class="n">instances</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">inst</span>
<a id="__codelineno-0-1431" name="__codelineno-0-1431"></a><a href="#__codelineno-0-1431"><span class="linenos" data-linenos="1431 "></span></a>
<a id="__codelineno-0-1432" name="__codelineno-0-1432"></a><a href="#__codelineno-0-1432"><span class="linenos" data-linenos="1432 "></span></a>        <span class="k">elif</span> <span class="n">instance_type</span> <span class="o">==</span> <span class="n">InstanceType</span><span class="o">.</span><span class="n">PREDICTED</span><span class="p">:</span>
<a id="__codelineno-0-1433" name="__codelineno-0-1433"></a><a href="#__codelineno-0-1433"><span class="linenos" data-linenos="1433 "></span></a>            <span class="n">pts_data</span> <span class="o">=</span> <span class="n">pred_points</span><span class="p">[</span><span class="n">point_id_start</span><span class="p">:</span><span class="n">point_id_end</span><span class="p">]</span>
<a id="__codelineno-0-1434" name="__codelineno-0-1434"></a><a href="#__codelineno-0-1434"><span class="linenos" data-linenos="1434 "></span></a>            <span class="c1"># Fast path: Build PredictedPointsArray directly from HDF5 data</span>
<a id="__codelineno-0-1435" name="__codelineno-0-1435"></a><a href="#__codelineno-0-1435"><span class="linenos" data-linenos="1435 "></span></a>            <span class="n">points_array</span> <span class="o">=</span> <span class="n">_points_from_hdf5_data</span><span class="p">(</span><span class="n">pts_data</span><span class="p">,</span> <span class="n">skeleton</span><span class="p">,</span> <span class="n">is_predicted</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1436" name="__codelineno-0-1436"></a><a href="#__codelineno-0-1436"><span class="linenos" data-linenos="1436 "></span></a>            <span class="k">if</span> <span class="n">format_id</span> <span class="o">&lt;</span> <span class="mf">1.1</span><span class="p">:</span>
<a id="__codelineno-0-1437" name="__codelineno-0-1437"></a><a href="#__codelineno-0-1437"><span class="linenos" data-linenos="1437 "></span></a>                <span class="c1"># Legacy coordinate system: top-left of pixel is (0, 0)</span>
<a id="__codelineno-0-1438" name="__codelineno-0-1438"></a><a href="#__codelineno-0-1438"><span class="linenos" data-linenos="1438 "></span></a>                <span class="c1"># Adjust to new system: center of pixel is (0, 0)</span>
<a id="__codelineno-0-1439" name="__codelineno-0-1439"></a><a href="#__codelineno-0-1439"><span class="linenos" data-linenos="1439 "></span></a>                <span class="n">points_array</span><span class="p">[</span><span class="s2">&quot;xy&quot;</span><span class="p">]</span> <span class="o">-=</span> <span class="mf">0.5</span>
<a id="__codelineno-0-1440" name="__codelineno-0-1440"></a><a href="#__codelineno-0-1440"><span class="linenos" data-linenos="1440 "></span></a>            <span class="n">inst</span> <span class="o">=</span> <span class="n">PredictedInstance</span><span class="p">(</span>
<a id="__codelineno-0-1441" name="__codelineno-0-1441"></a><a href="#__codelineno-0-1441"><span class="linenos" data-linenos="1441 "></span></a>                <span class="n">points_array</span><span class="p">,</span>
<a id="__codelineno-0-1442" name="__codelineno-0-1442"></a><a href="#__codelineno-0-1442"><span class="linenos" data-linenos="1442 "></span></a>                <span class="n">skeleton</span><span class="o">=</span><span class="n">skeleton</span><span class="p">,</span>
<a id="__codelineno-0-1443" name="__codelineno-0-1443"></a><a href="#__codelineno-0-1443"><span class="linenos" data-linenos="1443 "></span></a>                <span class="n">track</span><span class="o">=</span><span class="n">track</span><span class="p">,</span>
<a id="__codelineno-0-1444" name="__codelineno-0-1444"></a><a href="#__codelineno-0-1444"><span class="linenos" data-linenos="1444 "></span></a>                <span class="n">score</span><span class="o">=</span><span class="n">instance_score</span><span class="p">,</span>
<a id="__codelineno-0-1445" name="__codelineno-0-1445"></a><a href="#__codelineno-0-1445"><span class="linenos" data-linenos="1445 "></span></a>                <span class="n">tracking_score</span><span class="o">=</span><span class="n">tracking_score</span><span class="p">,</span>
<a id="__codelineno-0-1446" name="__codelineno-0-1446"></a><a href="#__codelineno-0-1446"><span class="linenos" data-linenos="1446 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-1447" name="__codelineno-0-1447"></a><a href="#__codelineno-0-1447"><span class="linenos" data-linenos="1447 "></span></a>            <span class="n">instances</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">inst</span>
<a id="__codelineno-0-1448" name="__codelineno-0-1448"></a><a href="#__codelineno-0-1448"><span class="linenos" data-linenos="1448 "></span></a>
<a id="__codelineno-0-1449" name="__codelineno-0-1449"></a><a href="#__codelineno-0-1449"><span class="linenos" data-linenos="1449 "></span></a>        <span class="k">if</span> <span class="n">from_predicted</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-1450" name="__codelineno-0-1450"></a><a href="#__codelineno-0-1450"><span class="linenos" data-linenos="1450 "></span></a>            <span class="n">from_predicted_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">instance_id</span><span class="p">,</span> <span class="n">from_predicted</span><span class="p">))</span>
<a id="__codelineno-0-1451" name="__codelineno-0-1451"></a><a href="#__codelineno-0-1451"><span class="linenos" data-linenos="1451 "></span></a>
<a id="__codelineno-0-1452" name="__codelineno-0-1452"></a><a href="#__codelineno-0-1452"><span class="linenos" data-linenos="1452 "></span></a>    <span class="c1"># Link instances based on from_predicted field.</span>
<a id="__codelineno-0-1453" name="__codelineno-0-1453"></a><a href="#__codelineno-0-1453"><span class="linenos" data-linenos="1453 "></span></a>    <span class="k">for</span> <span class="n">instance_id</span><span class="p">,</span> <span class="n">from_predicted</span> <span class="ow">in</span> <span class="n">from_predicted_pairs</span><span class="p">:</span>
<a id="__codelineno-0-1454" name="__codelineno-0-1454"></a><a href="#__codelineno-0-1454"><span class="linenos" data-linenos="1454 "></span></a>        <span class="n">instances</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span><span class="o">.</span><span class="n">from_predicted</span> <span class="o">=</span> <span class="n">instances</span><span class="p">[</span><span class="n">from_predicted</span><span class="p">]</span>
<a id="__codelineno-0-1455" name="__codelineno-0-1455"></a><a href="#__codelineno-0-1455"><span class="linenos" data-linenos="1455 "></span></a>
<a id="__codelineno-0-1456" name="__codelineno-0-1456"></a><a href="#__codelineno-0-1456"><span class="linenos" data-linenos="1456 "></span></a>    <span class="c1"># Convert instances back to list.</span>
<a id="__codelineno-0-1457" name="__codelineno-0-1457"></a><a href="#__codelineno-0-1457"><span class="linenos" data-linenos="1457 "></span></a>    <span class="n">instances</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instances</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<a id="__codelineno-0-1458" name="__codelineno-0-1458"></a><a href="#__codelineno-0-1458"><span class="linenos" data-linenos="1458 "></span></a>
<a id="__codelineno-0-1459" name="__codelineno-0-1459"></a><a href="#__codelineno-0-1459"><span class="linenos" data-linenos="1459 "></span></a>    <span class="k">return</span> <span class="n">instances</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.read_points" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">read_points</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.read_points" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Read points dataset from a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string path to the SLEAP labels file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A structured array of point data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1291" name="__codelineno-0-1291"></a><a href="#__codelineno-0-1291"><span class="linenos" data-linenos="1291 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">read_points</span><span class="p">(</span><span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-1292" name="__codelineno-0-1292"></a><a href="#__codelineno-0-1292"><span class="linenos" data-linenos="1292 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Read points dataset from a SLEAP labels file.</span>
<a id="__codelineno-0-1293" name="__codelineno-0-1293"></a><a href="#__codelineno-0-1293"><span class="linenos" data-linenos="1293 "></span></a>
<a id="__codelineno-0-1294" name="__codelineno-0-1294"></a><a href="#__codelineno-0-1294"><span class="linenos" data-linenos="1294 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1295" name="__codelineno-0-1295"></a><a href="#__codelineno-0-1295"><span class="linenos" data-linenos="1295 "></span></a><span class="sd">        labels_path: A string path to the SLEAP labels file.</span>
<a id="__codelineno-0-1296" name="__codelineno-0-1296"></a><a href="#__codelineno-0-1296"><span class="linenos" data-linenos="1296 "></span></a>
<a id="__codelineno-0-1297" name="__codelineno-0-1297"></a><a href="#__codelineno-0-1297"><span class="linenos" data-linenos="1297 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1298" name="__codelineno-0-1298"></a><a href="#__codelineno-0-1298"><span class="linenos" data-linenos="1298 "></span></a><span class="sd">        A structured array of point data.</span>
<a id="__codelineno-0-1299" name="__codelineno-0-1299"></a><a href="#__codelineno-0-1299"><span class="linenos" data-linenos="1299 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1300" name="__codelineno-0-1300"></a><a href="#__codelineno-0-1300"><span class="linenos" data-linenos="1300 "></span></a>    <span class="n">pts</span> <span class="o">=</span> <span class="n">read_hdf5_dataset</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;points&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1301" name="__codelineno-0-1301"></a><a href="#__codelineno-0-1301"><span class="linenos" data-linenos="1301 "></span></a>    <span class="k">return</span> <span class="n">pts</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="sleap_io.io.slp.read_pred_points" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">slp</span><span class="o">.</span><span class="n">read_pred_points</span><span class="p">(</span><span class="n">labels_path</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp.read_pred_points" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Read predicted points dataset from a SLEAP labels file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>labels_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string path to the SLEAP labels file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A structured array of predicted point data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/io/slp.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1304" name="__codelineno-0-1304"></a><a href="#__codelineno-0-1304"><span class="linenos" data-linenos="1304 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">read_pred_points</span><span class="p">(</span><span class="n">labels_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-1305" name="__codelineno-0-1305"></a><a href="#__codelineno-0-1305"><span class="linenos" data-linenos="1305 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Read predicted points dataset from a SLEAP labels file.</span>
<a id="__codelineno-0-1306" name="__codelineno-0-1306"></a><a href="#__codelineno-0-1306"><span class="linenos" data-linenos="1306 "></span></a>
<a id="__codelineno-0-1307" name="__codelineno-0-1307"></a><a href="#__codelineno-0-1307"><span class="linenos" data-linenos="1307 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1308" name="__codelineno-0-1308"></a><a href="#__codelineno-0-1308"><span class="linenos" data-linenos="1308 "></span></a><span class="sd">        labels_path: A string path to the SLEAP labels file.</span>
<a id="__codelineno-0-1309" name="__codelineno-0-1309"></a><a href="#__codelineno-0-1309"><span class="linenos" data-linenos="1309 "></span></a>
<a id="__codelineno-0-1310" name="__codelineno-0-1310"></a><a href="#__codelineno-0-1310"><span class="linenos" data-linenos="1310 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1311" name="__codelineno-0-1311"></a><a href="#__codelineno-0-1311"><span class="linenos" data-linenos="1311 "></span></a><span class="sd">        A structured array of predicted point data.</span>
<a id="__codelineno-0-1312" name="__codelineno-0-1312"></a><a href="#__codelineno-0-1312"><span class="linenos" data-linenos="1312 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1313" name="__codelineno-0-1313"></a><a href="#__codelineno-0-1313"><span class="linenos" data-linenos="1313 "></span></a>    <span class="n">pred_pts</span> <span class="o">=</span> <span class="n">read_hdf5_dataset</span><span class="p">(</span><span class="n">labels_path</span><span class="p">,</span> <span class="s2">&quot;pred_points&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1314" name="__codelineno-0-1314"></a><a href="#__codelineno-0-1314"><span class="linenos" data-linenos="1314 "></span></a>    <span class="k">return</span> <span class="n">pred_pts</span>
</code></pre></div>
            </details>
    </div>

</div><h3 id="lazy-loading_1">Lazy Loading<a class="headerlink" href="#lazy-loading_1" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-class">



<h4 id="sleap_io.io.slp_lazy.LazyDataStore" class="doc doc-heading">
            <code>sleap_io.io.slp_lazy.LazyDataStore</code>


<a href="#sleap_io.io.slp_lazy.LazyDataStore" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">



        <p>Holds raw HDF5 data and provides lazy access methods.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore.frames_data">frames_data</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Structured array from /frames HDF5 dataset.
Fields: frame_id, video_id, frame_idx, instance_id_start, instance_id_end.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore.instances_data">instances_data</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Structured array from /instances HDF5 dataset.
Fields vary by format_id but include: instance_id, instance_type, frame_id,
skeleton_id, track_id, from_predicted, instance_score, point_id_start,
point_id_end, and optionally tracking_score.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore.pred_points_data">pred_points_data</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Structured array from /pred_points HDF5 dataset.
Fields: x, y, visible, complete, score.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore.points_data">points_data</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Structured array from /points HDF5 dataset.
Fields: x, y, visible, complete.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore.videos">videos</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of eagerly loaded Video objects.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore.skeletons">skeletons</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of eagerly loaded Skeleton objects.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore.tracks">tracks</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of eagerly loaded Track objects.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore.format_id">format_id</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SLP format version.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.io.slp_lazy.LazyDataStore._source_path">_source_path</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to source SLP file (for debugging).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;materialize_frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyDataStore.materialize_frame&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyDataStore.materialize_frame">materialize_frame</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Create a fully materialized LabeledFrame.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;materialize_all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyDataStore.materialize_all&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyDataStore.materialize_all">materialize_all</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Materialize all frames.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;to_numpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;video&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;untracked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;return_confidence&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user_instances&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyDataStore.to_numpy&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyDataStore.to_numpy">to_numpy</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Build numpy array directly from raw data (fast path).</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;get_user_frame_indices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyDataStore.get_user_frame_indices&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyDataStore.get_user_frame_indices">get_user_frame_indices</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Find indices of frames containing user (non-predicted) instances.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>






<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyDataStore.materialize_frame" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">materialize_frame</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyDataStore.materialize_frame" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Create a fully materialized LabeledFrame.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>idx</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index into frames_data array.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;LabeledFrame&lt;/code&gt; (&lt;code&gt;sleap_io.model.labeled_frame.LabeledFrame&lt;/code&gt;)" href="../../reference/sleap_io/model/labeled_frame/#sleap_io.model.labeled_frame.LabeledFrame">LabeledFrame</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A real LabeledFrame with real Instance objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyDataStore.materialize_all" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">materialize_all</span><span class="p">()</span></code>

<a href="#sleap_io.io.slp_lazy.LazyDataStore.materialize_all" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Materialize all frames.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;LabeledFrame&lt;/code&gt; (&lt;code&gt;sleap_io.model.labeled_frame.LabeledFrame&lt;/code&gt;)" href="../../reference/sleap_io/model/labeled_frame/#sleap_io.model.labeled_frame.LabeledFrame">LabeledFrame</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of all LabeledFrame objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyDataStore.to_numpy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_numpy</span><span class="p">(</span><span class="n">video</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">untracked</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">return_confidence</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">user_instances</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyDataStore.to_numpy" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Build numpy array directly from raw data (fast path).</p>
<p>This method builds the output array directly from raw HDF5 data without
creating any Instance or LabeledFrame objects, providing significant
performance improvement for workflows that only need numpy output.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>video</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;Video&lt;/code&gt; (&lt;code&gt;sleap_io.model.video.Video&lt;/code&gt;)" href="../../reference/sleap_io/model/video/#sleap_io.model.video.Video">Video</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Video to filter by. If None, uses the first video.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>untracked</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, index by instance order instead of tracks.
If False (default), organize instances by their track assignment.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>return_confidence</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, include confidence as third coordinate.
For user instances, confidence is set to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user_instances</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True (default), prefer user instances over predicted
instances. If False, only include predicted instances.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Array of shape (n_frames, n_tracks, n_nodes, 2) or
(n_frames, n_tracks, n_nodes, 3) if return_confidence is True.
Missing data is filled with np.nan.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyDataStore.get_user_frame_indices" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_user_frame_indices</span><span class="p">()</span></code>

<a href="#sleap_io.io.slp_lazy.LazyDataStore.get_user_frame_indices" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Find indices of frames containing user (non-predicted) instances.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of frame indices (into frames_data) that have at least one user
instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="sleap_io.io.slp_lazy.LazyFrameList" class="doc doc-heading">
            <code>sleap_io.io.slp_lazy.LazyFrameList</code>


<a href="#sleap_io.io.slp_lazy.LazyFrameList" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">



        <p>List-like proxy that materializes LabeledFrame objects on access.</p>
<p>This provides backward compatibility for code that accesses
labels.labeled_frames directly. Frames are created on-demand when
accessed via indexing or iteration.</p>
<p>Mutations are blocked with helpful error messages suggesting to call
labels.materialize() first.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__delitem__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__delitem__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__delitem__">__delitem__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Block item deletion with helpful error.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__getitem__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__getitem__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__getitem__">__getitem__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Get frame(s) by index or slice.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__init__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Initialize with a LazyDataStore.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__iter__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__iter__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__iter__">__iter__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Iterate over frames, materializing each.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__len__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__len__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__len__">__len__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Return number of frames.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__repr__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__repr__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__repr__">__repr__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Return informative representation.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__setitem__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__setitem__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__setitem__">__setitem__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Block item assignment with helpful error.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.append&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.append">append</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Block append with helpful error.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.extend&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.extend">extend</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Block extend with helpful error.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;insert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.insert&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.insert">insert</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Block insert with helpful error.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;vm&quot;&gt;__dict__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mappingproxy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;__module__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;sleap_io.io.slp_lazy&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__firstlineno__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;654&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__doc__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;List-like proxy that materializes LabeledFrame objects on access.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;This provides backward compatibility for code that accesses&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;labels.labeled_frames directly. Frames are created on-demand when&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;accessed via indexing or iteration.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Mutations are blocked with helpful error messages suggesting to call&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;labels.materialize() first.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__init__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;fm&quot;&gt;__init__&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d8220&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__len__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;fm&quot;&gt;__len__&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d82c0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__getitem__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;fm&quot;&gt;__getitem__&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d87c0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__iter__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;fm&quot;&gt;__iter__&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d8fe0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__repr__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;fm&quot;&gt;__repr__&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d9080&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;_mutation_error&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_mutation_error&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d9120&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;append&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d91c0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;extend&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extend&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d9260&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;insert&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d9300&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__setitem__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;fm&quot;&gt;__setitem__&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d93a0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__delitem__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LazyFrameList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;fm&quot;&gt;__delitem__&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f88927d9440&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__static_attributes__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;_store&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,),&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__dict__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attribute&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__dict__&amp;#39;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;LazyFrameList&amp;#39;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__weakref__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attribute&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;__weakref__&amp;#39;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;LazyFrameList&amp;#39;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__dict__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__dict__">__dict__</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Read-only proxy of a mapping.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;vm&quot;&gt;__doc__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;List-like proxy that materializes LabeledFrame objects on access.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;This provides backward compatibility for code that accesses&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;labels.labeled_frames directly. Frames are created on-demand when&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;accessed via indexing or iteration.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Mutations are blocked with helpful error messages suggesting to call&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;labels.materialize() first.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__doc__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__doc__">__doc__</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str(object='') -&gt; str</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;__firstlineno__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;654&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__firstlineno__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__firstlineno__">__firstlineno__</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>int([x]) -&gt; integer</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;vm&quot;&gt;__module__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;sleap_io.io.slp_lazy&amp;#39;&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__module__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__module__">__module__</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str(object='') -&gt; str</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;__static_attributes__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;_store&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__static_attributes__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__static_attributes__">__static_attributes__</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Built-in immutable sequence.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;vm&quot;&gt;__weakref__&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-property&quot;&gt;&lt;code&gt;property&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.io.slp_lazy.LazyFrameList.__weakref__&lt;/code&gt;)" href="#sleap_io.io.slp_lazy.LazyFrameList.__weakref__">__weakref__</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of weak references to the object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>




<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__dict__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">mappingproxy</span><span class="p">({</span><span class="s1">&#39;__module__&#39;</span><span class="p">:</span> <span class="s1">&#39;sleap_io.io.slp_lazy&#39;</span><span class="p">,</span> <span class="s1">&#39;__firstlineno__&#39;</span><span class="p">:</span> <span class="mi">654</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">:</span> <span class="s1">&#39;List-like proxy that materializes LabeledFrame objects on access.</span><span class="se">\n\n</span><span class="s1">This provides backward compatibility for code that accesses</span><span class="se">\n</span><span class="s1">labels.labeled_frames directly. Frames are created on-demand when</span><span class="se">\n</span><span class="s1">accessed via indexing or iteration.</span><span class="se">\n\n</span><span class="s1">Mutations are blocked with helpful error messages suggesting to call</span><span class="se">\n</span><span class="s1">labels.materialize() first.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="fm">__init__</span> <span class="n">at</span> <span class="mh">0x7f88927d8220</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__len__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="fm">__len__</span> <span class="n">at</span> <span class="mh">0x7f88927d82c0</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__getitem__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="fm">__getitem__</span> <span class="n">at</span> <span class="mh">0x7f88927d87c0</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="fm">__iter__</span> <span class="n">at</span> <span class="mh">0x7f88927d8fe0</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__repr__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="fm">__repr__</span> <span class="n">at</span> <span class="mh">0x7f88927d9080</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;_mutation_error&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="n">_mutation_error</span> <span class="n">at</span> <span class="mh">0x7f88927d9120</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;append&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="n">append</span> <span class="n">at</span> <span class="mh">0x7f88927d91c0</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;extend&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="n">extend</span> <span class="n">at</span> <span class="mh">0x7f88927d9260</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;insert&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="n">insert</span> <span class="n">at</span> <span class="mh">0x7f88927d9300</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__setitem__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="fm">__setitem__</span> <span class="n">at</span> <span class="mh">0x7f88927d93a0</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__delitem__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">LazyFrameList</span><span class="o">.</span><span class="fm">__delitem__</span> <span class="n">at</span> <span class="mh">0x7f88927d9440</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__static_attributes__&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;_store&#39;</span><span class="p">,),</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">attribute</span> <span class="s1">&#39;__dict__&#39;</span> <span class="n">of</span> <span class="s1">&#39;LazyFrameList&#39;</span> <span class="n">objects</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">attribute</span> <span class="s1">&#39;__weakref__&#39;</span> <span class="n">of</span> <span class="s1">&#39;LazyFrameList&#39;</span> <span class="n">objects</span><span class="o">&gt;</span><span class="p">})</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__dict__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Read-only proxy of a mapping.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__doc__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__doc__</span> <span class="o">=</span> <span class="s1">&#39;List-like proxy that materializes LabeledFrame objects on access.</span><span class="se">\n\n</span><span class="s1">This provides backward compatibility for code that accesses</span><span class="se">\n</span><span class="s1">labels.labeled_frames directly. Frames are created on-demand when</span><span class="se">\n</span><span class="s1">accessed via indexing or iteration.</span><span class="se">\n\n</span><span class="s1">Mutations are blocked with helpful error messages suggesting to call</span><span class="se">\n</span><span class="s1">labels.materialize() first.</span><span class="se">\n</span><span class="s1">&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__doc__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to 'utf-8'.
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__firstlineno__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__firstlineno__</span> <span class="o">=</span> <span class="mi">654</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__firstlineno__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>int([x]) -&gt; integer
int(x, base=10) -&gt; integer</p>
<p>Convert a number or string to an integer, or return 0 if no arguments
are given.  If x is a number, return x.<strong>int</strong>().  For floating-point
numbers, this truncates towards zero.</p>
<p>If x is not a number or if base is given, then x must be a string,
bytes, or bytearray instance representing an integer literal in the
given base.  The literal can be preceded by '+' or '-' and be surrounded
by whitespace.  The base defaults to 10.  Valid bases are 0 and 2-36.
Base 0 means to interpret the base from the string as an integer literal.</p>
<blockquote>
<blockquote>
<blockquote>
<p>int('0b100', base=0)
4</p>
</blockquote>
</blockquote>
</blockquote>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__module__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__module__</span> <span class="o">=</span> <span class="s1">&#39;sleap_io.io.slp_lazy&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__module__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to 'utf-8'.
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__static_attributes__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__static_attributes__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_store&#39;</span><span class="p">,)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__static_attributes__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__weakref__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__weakref__</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__weakref__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>list of weak references to the object</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__delitem__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__delitem__</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__delitem__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Block item deletion with helpful error.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always, with guidance to materialize first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__getitem__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__getitem__</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__getitem__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Get frame(s) by index or slice.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>idx</code>
            </td>
            <td>
                  <code><span title="int">int</span> | <span title="slice">slice</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Integer index or slice object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;LabeledFrame&lt;/code&gt; (&lt;code&gt;sleap_io.model.labeled_frame.LabeledFrame&lt;/code&gt;)" href="../../reference/sleap_io/model/labeled_frame/#sleap_io.model.labeled_frame.LabeledFrame">LabeledFrame</a> | <span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;LabeledFrame&lt;/code&gt; (&lt;code&gt;sleap_io.model.labeled_frame.LabeledFrame&lt;/code&gt;)" href="../../reference/sleap_io/model/labeled_frame/#sleap_io.model.labeled_frame.LabeledFrame">LabeledFrame</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A single LabeledFrame for integer indexing, or a list of
LabeledFrames for slicing.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="IndexError">IndexError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If index is out of range.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">store</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__init__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Initialize with a LazyDataStore.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>store</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.io.slp_lazy.LazyDataStore&lt;/code&gt;" href="#sleap_io.io.slp_lazy.LazyDataStore">LazyDataStore</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The LazyDataStore containing raw frame data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__iter__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Iterate over frames, materializing each.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__len__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Return number of frames.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__repr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Return informative representation.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.__setitem__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__setitem__</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.__setitem__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Block item assignment with helpful error.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always, with guidance to materialize first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.append" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.append" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Block append with helpful error.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always, with guidance to materialize first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.extend" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extend</span><span class="p">(</span><span class="n">items</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.extend" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Block extend with helpful error.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always, with guidance to materialize first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.io.slp_lazy.LazyFrameList.insert" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">insert</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span></code>

<a href="#sleap_io.io.slp_lazy.LazyFrameList.insert" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Block insert with helpful error.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always, with guidance to materialize first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2026 Talmo Lab

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/talmolab" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/talmop" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tracking", "toc.follow", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.tooltips", "content.code.select", "content.footnote.tooltips"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../js/toc-code-style.js"></script>
      
    
  </body>
</html>