
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://io.sleap.ai/dev/merging/">
      
      
        <link rel="prev" href="../rendering/">
      
      
        <link rel="next" href="../model/">
      
      
        
      
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Merging - sleap-io documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#merging-annotations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="sleap-io documentation" class="md-header__button md-logo" aria-label="sleap-io documentation" data-md-component="logo">
      
  <img src="../assets/sleap-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            sleap-io documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Merging
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/talmolab/sleap-io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="sleap-io documentation" class="md-nav__button md-logo" aria-label="sleap-io documentation" data-md-component="logo">
      
  <img src="../assets/sleap-logo.png" alt="logo">

    </a>
    sleap-io documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/talmolab/sleap-io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/talmolab/sleap-io/releases" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../codecs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Codecs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rendering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rendering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Merging
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Merging
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-merging-works" class="md-nav__link">
    <span class="md-ellipsis">
      
        How merging works
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Strategies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frame-level-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Frame-level strategies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instance-level-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instance-level strategies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matching configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        API reference
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../formats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Formats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Full API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Full API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sleap_io/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    sleap_io
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1" id="__nav_6_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    sleap_io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sleap_io/codecs/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    codecs
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_1" id="__nav_6_4_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    codecs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/codecs/dataframe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dataframe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/codecs/dictionary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dictionary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/codecs/numpy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    numpy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sleap_io/io/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    io
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_2" id="__nav_6_4_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    io
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/alphatracker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    alphatracker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cli
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/coco/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    coco
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/dlc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dlc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/jabs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    jabs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/labelstudio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    labelstudio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/leap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    leap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/main/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    main
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/nwb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    nwb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/nwb_annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    nwb_annotations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/nwb_predictions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    nwb_predictions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/skeleton/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    skeleton
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/slp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    slp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/slp_lazy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    slp_lazy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/ultralytics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ultralytics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/video_reading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    video_reading
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/video_writing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    video_writing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sleap_io/model/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    model
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_3" id="__nav_6_4_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    model
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/camera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    camera
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/instance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    instance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/labeled_frame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    labeled_frame
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    labels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/labels_set/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    labels_set
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/matching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    matching
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/skeleton/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    skeleton
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/suggestions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    suggestions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    video
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_1_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sleap_io/rendering/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    rendering
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_1_4" id="__nav_6_4_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_4_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    rendering
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/rendering/callbacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    callbacks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/rendering/colors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    colors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/rendering/core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/rendering/shapes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    shapes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/version/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    version
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-merging-works" class="md-nav__link">
    <span class="md-ellipsis">
      
        How merging works
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Strategies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frame-level-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Frame-level strategies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instance-level-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instance-level strategies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matching configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        API reference
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="merging-annotations">Merging annotations<a class="headerlink" href="#merging-annotations" title="Permanent link">&para;</a></h1>
<p>Merging combines annotations from multiple sources into a single dataset.</p>
<h2 id="quick-start">Quick start<a class="headerlink" href="#quick-start" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sleap_io</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sio</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">base</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;manual_annotations.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">predictions</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;predictions.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span>  <span class="c1"># default: smart strategy</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">base</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;merged.slp&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="how-merging-works">How merging works<a class="headerlink" href="#how-merging-works" title="Permanent link">&para;</a></h2>
<p>Merging proceeds in four steps:</p>
<ol>
<li><strong>Match skeletons</strong> — Find corresponding skeletons by node names</li>
<li><strong>Match videos</strong> — Identify same videos across datasets (see <a href="#video-matching">Video matching</a>)</li>
<li><strong>Match tracks</strong> — Map track identities by name</li>
<li><strong>Merge frames</strong> — For each frame in <code>other</code>:</li>
<li>If frame doesn't exist in <code>base</code>: add it</li>
<li>If frame exists in both: apply the <code>frame_strategy</code></li>
</ol>
<p>The <code>frame_strategy</code> parameter controls what happens when both datasets have the same frame. Strategies fall into two categories:</p>
<p><strong>Frame-level strategies</strong> operate on whole frames without comparing individual instances:</p>
<ul>
<li><code>keep_original</code>, <code>keep_new</code>, <code>keep_both</code>, <code>replace_predictions</code></li>
</ul>
<p><strong>Instance-level strategies</strong> use spatial matching to pair up instances, then decide per-pair:</p>
<ul>
<li><code>smart</code>, <code>update_tracks</code></li>
</ul>
<h3 id="spatial-matching-algorithm">Spatial matching algorithm<a class="headerlink" href="#spatial-matching-algorithm" title="Permanent link">&para;</a></h3>
<p>Instance-level strategies use spatial matching to find corresponding instances between frames. The algorithm:</p>
<ol>
<li>For each instance, extract all point coordinates as an array</li>
<li>For two instances to match:</li>
<li>Their NaN patterns must match exactly (same missing points)</li>
<li>All visible points must be within the threshold distance (default: 5 pixels)</li>
<li>Distance is computed as Euclidean distance per point: <code>sqrt((x1-x2)² + (y1-y2)²)</code></li>
<li>All point distances must be ≤ threshold for instances to be considered "matched"</li>
</ol>
<p>Unmatched instances (no corresponding instance within threshold) are handled according to the strategy.</p>
<h2 id="strategies">Strategies<a class="headerlink" href="#strategies" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Spatial matching</th>
<th>Use case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>smart</code></td>
<td>Yes</td>
<td>HITL: add predictions, preserve labels</td>
</tr>
<tr>
<td><code>update_tracks</code></td>
<td>Yes</td>
<td>Apply tracking to existing poses</td>
</tr>
<tr>
<td><code>keep_original</code></td>
<td>No</td>
<td>Protect base from any changes</td>
</tr>
<tr>
<td><code>keep_new</code></td>
<td>No</td>
<td>Overwrite base with new data</td>
</tr>
<tr>
<td><code>keep_both</code></td>
<td>No</td>
<td>Combine multiple annotators</td>
</tr>
<tr>
<td><code>replace_predictions</code></td>
<td>No</td>
<td>Re-run inference, replace old predictions</td>
</tr>
</tbody>
</table>
<h2 id="frame-level-strategies">Frame-level strategies<a class="headerlink" href="#frame-level-strategies" title="Permanent link">&para;</a></h2>
<p>These strategies do NOT perform spatial matching. They operate on entire frames.</p>
<h3 id="keep_original"><code>keep_original</code><a class="headerlink" href="#keep_original" title="Permanent link">&para;</a></h3>
<p>Keep base unchanged. Ignore everything from other.</p>
<table>
<thead>
<tr>
<th>Frame location</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Only in base</td>
<td>Keep</td>
</tr>
<tr>
<td>Only in other</td>
<td>Discard</td>
</tr>
<tr>
<td>In both</td>
<td>Keep base, ignore other</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Base frame 0: [User A, Pred B]</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1"># Other frame 0: [Pred C, Pred D]</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># Other frame 1: [Pred E]</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;keep_original&quot;</span><span class="p">)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1"># Result:</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1">#   Frame 0: [User A, Pred B]  (unchanged)</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="c1">#   Frame 1: does not exist    (discarded)</span>
</code></pre></div>
<h3 id="keep_new"><code>keep_new</code><a class="headerlink" href="#keep_new" title="Permanent link">&para;</a></h3>
<p>Replace base with other. Discard base.</p>
<table>
<thead>
<tr>
<th>Frame location</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Only in base</td>
<td>Discard</td>
</tr>
<tr>
<td>Only in other</td>
<td>Add</td>
</tr>
<tr>
<td>In both</td>
<td>Replace with other</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Base frame 0: [User A, Pred B]</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1"># Base frame 1: [User C]</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1"># Other frame 0: [Pred D]</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;keep_new&quot;</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="c1"># Result:</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="c1">#   Frame 0: [Pred D]          (replaced)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="c1">#   Frame 1: does not exist    (discarded)</span>
</code></pre></div>
<h3 id="keep_both"><code>keep_both</code><a class="headerlink" href="#keep_both" title="Permanent link">&para;</a></h3>
<p>Concatenate all instances. No deduplication.</p>
<table>
<thead>
<tr>
<th>Frame location</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Only in base</td>
<td>Keep</td>
</tr>
<tr>
<td>Only in other</td>
<td>Add</td>
</tr>
<tr>
<td>In both</td>
<td>Concatenate (base + other)</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Base frame 0: [User A, Pred B]</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1"># Other frame 0: [Pred C, Pred D]</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;keep_both&quot;</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="c1"># Result:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="c1">#   Frame 0: [User A, Pred B, Pred C, Pred D]</span>
</code></pre></div>
<p><strong>Warning:</strong> Creates duplicates at same locations. Use for multi-annotator review.</p>
<h3 id="replace_predictions"><code>replace_predictions</code><a class="headerlink" href="#replace_predictions" title="Permanent link">&para;</a></h3>
<p>Keep user instances (<code>Instance</code>) from base. Remove predictions (<code>PredictedInstance</code>) from base. Add only predictions from other.</p>
<table>
<thead>
<tr>
<th>Frame location</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Only in base</td>
<td>Keep</td>
</tr>
<tr>
<td>Only in other</td>
<td>Add predictions only</td>
</tr>
<tr>
<td>In both</td>
<td>Base users + other predictions</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Instance type</th>
<th>From base</th>
<th>From other</th>
</tr>
</thead>
<tbody>
<tr>
<td>User (<code>Instance</code>)</td>
<td>Keep</td>
<td>Ignore</td>
</tr>
<tr>
<td>Prediction (<code>PredictedInstance</code>)</td>
<td>Remove</td>
<td>Add</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Base frame 0: [User A, Pred B, Pred C]</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1"># Other frame 0: [User X, Pred D, Pred E]</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;replace_predictions&quot;</span><span class="p">)</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="c1"># Result:</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1">#   Frame 0: [User A, Pred D, Pred E]</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="c1">#   - User A kept (user from base)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="c1">#   - Pred B, C removed (old predictions)</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="c1">#   - User X ignored (user from other)</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="c1">#   - Pred D, E added (new predictions)</span>
</code></pre></div>
<h2 id="instance-level-strategies">Instance-level strategies<a class="headerlink" href="#instance-level-strategies" title="Permanent link">&para;</a></h2>
<p>These strategies perform spatial matching to pair instances, then decide per-pair.</p>
<h3 id="smart-default"><code>smart</code> (default)<a class="headerlink" href="#smart-default" title="Permanent link">&para;</a></h3>
<p>Preserve user labels. Replace matched predictions. Add unmatched instances.</p>
<table>
<thead>
<tr>
<th>Frame location</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Only in base</td>
<td>Keep</td>
</tr>
<tr>
<td>Only in other</td>
<td>Add</td>
</tr>
<tr>
<td>In both</td>
<td>Spatial matching (see below)</td>
</tr>
</tbody>
</table>
<p><strong>When instances are matched:</strong></p>
<table>
<thead>
<tr>
<th>Base</th>
<th>Other</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>User</td>
<td>User</td>
<td>Keep base</td>
</tr>
<tr>
<td>User</td>
<td>Prediction</td>
<td>Keep base</td>
</tr>
<tr>
<td>Prediction</td>
<td>User</td>
<td>Replace with other</td>
</tr>
<tr>
<td>Prediction</td>
<td>Prediction</td>
<td>Replace with other</td>
</tr>
</tbody>
</table>
<p><strong>Unmatched:</strong> Keep from base, add from other.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Base frame 0:</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1">#   User A at (10, 10)</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="c1">#   Pred B at (50, 50)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1">#   Pred C at (100, 100)  &lt;- no match</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="c1"># Other frame 0:</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="c1">#   Pred D at (12, 12)    &lt;- matches User A (within 5px)</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="c1">#   Pred E at (52, 52)    &lt;- matches Pred B</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="c1">#   Pred F at (200, 200)  &lt;- no match</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;smart&quot;</span><span class="p">)</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="c1"># Result:</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="c1">#   User A at (10, 10)    &lt;- kept (user beats prediction)</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="c1">#   Pred E at (52, 52)    &lt;- replaced (newer prediction)</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="c1">#   Pred C at (100, 100)  &lt;- kept (unmatched)</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="c1">#   Pred F at (200, 200)  &lt;- added (unmatched)</span>
</code></pre></div>
<h3 id="update_tracks"><code>update_tracks</code><a class="headerlink" href="#update_tracks" title="Permanent link">&para;</a></h3>
<p>Update track assignments only. Do not modify poses. Do not add or remove instances.</p>
<table>
<thead>
<tr>
<th>Frame location</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Only in base</td>
<td>Keep</td>
</tr>
<tr>
<td>Only in other</td>
<td>Ignore</td>
</tr>
<tr>
<td>In both</td>
<td>Spatial matching (see below)</td>
</tr>
</tbody>
</table>
<p><strong>When matched:</strong> Copy <code>.track</code> and <code>.tracking_score</code> from other to base.</p>
<p><strong>Unmatched:</strong> Keep base unchanged, ignore other.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Base frame 0:</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1">#   Pred A at (10, 10) with track=None</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="c1">#   Pred B at (50, 50) with track=None</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1"># Other frame 0:</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1">#   Pred X at (12, 12) with track=Track(&quot;animal_1&quot;)</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c1">#   Pred Y at (52, 52) with track=Track(&quot;animal_2&quot;)</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;update_tracks&quot;</span><span class="p">)</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="c1"># Result:</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="c1">#   Pred A at (10, 10) with track=Track(&quot;animal_1&quot;)</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="c1">#   Pred B at (50, 50) with track=Track(&quot;animal_2&quot;)</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="c1">#   (poses unchanged, only tracks updated)</span>
</code></pre></div>
<h2 id="matching-configuration">Matching configuration<a class="headerlink" href="#matching-configuration" title="Permanent link">&para;</a></h2>
<h3 id="video-matching">Video matching<a class="headerlink" href="#video-matching" title="Permanent link">&para;</a></h3>
<p>Videos must match for frames to merge. The default <code>AUTO</code> method tries multiple strategies in order:</p>
<ol>
<li><strong>Exact path</strong> — Full resolved paths match exactly</li>
<li><strong>Basename</strong> — Filename matches (ignoring directory)</li>
<li><strong>Content</strong> — Same shape (frames, height, width, channels) and backend type</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">VideoMatcher</span><span class="p">,</span> <span class="n">VideoMatchMethod</span><span class="p">,</span> <span class="n">BASENAME_VIDEO_MATCHER</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1"># AUTO (default): tries path → basename → content</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="c1"># BASENAME: match by filename only</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">BASENAME_VIDEO_MATCHER</span><span class="p">)</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="c1"># CONTENT: match by video shape and backend type</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="n">matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">)</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">matcher</span><span class="p">)</span>
</code></pre></div>
<h4 id="cross-platform-video-paths">Cross-platform video paths<a class="headerlink" href="#cross-platform-video-paths" title="Permanent link">&para;</a></h4>
<p>When merging labels created on different computers, video paths won't match:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Windows: C:\Users\alice\data\video.mp4
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Linux:   /home/bob/data/video.mp4
</code></pre></div>
<p><strong>Option 1: Use basename matching</strong> (if filenames are unique)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">BASENAME_VIDEO_MATCHER</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">BASENAME_VIDEO_MATCHER</span><span class="p">)</span>
</code></pre></div>
<p><strong>Option 2: Fix paths before merging</strong> with <code>replace_filenames</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Replace by prefix (useful for different mount points)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">other</span><span class="o">.</span><span class="n">replace_filenames</span><span class="p">(</span><span class="n">prefix_map</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="s2">&quot;/home/bob/data&quot;</span><span class="p">:</span> <span class="s2">&quot;C:/Users/alice/data&quot;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="p">})</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="c1"># Or replace specific files</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="n">other</span><span class="o">.</span><span class="n">replace_filenames</span><span class="p">(</span><span class="n">filename_map</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>    <span class="s2">&quot;/home/bob/data/video.mp4&quot;</span><span class="p">:</span> <span class="s2">&quot;C:/Users/alice/data/video.mp4&quot;</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="p">})</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</code></pre></div>
<p><strong>Option 3: Use content matching</strong> (if videos have same dimensions)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">VideoMatcher</span><span class="p">,</span> <span class="n">VideoMatchMethod</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">)</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">matcher</span><span class="p">)</span>
</code></pre></div>
<p>Content matching compares video shape <code>(frames, height, width, channels)</code> and backend type. It does NOT compare actual pixel data.</p>
<h3 id="instance-matching">Instance matching<a class="headerlink" href="#instance-matching" title="Permanent link">&para;</a></h3>
<p>Configure how instances are paired for <code>smart</code> and <code>update_tracks</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">InstanceMatcher</span><span class="p">,</span> <span class="n">InstanceMatchMethod</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="c1"># Spatial (default): match by average point distance</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="n">matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="c1"># Identity: match by track identity</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="n">matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">)</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="c1"># IoU: match by bounding box overlap</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="n">matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">instance_matcher</span><span class="o">=</span><span class="n">matcher</span><span class="p">)</span>
</code></pre></div>
<h3 id="skeleton-matching">Skeleton matching<a class="headerlink" href="#skeleton-matching" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">SkeletonMatcher</span><span class="p">,</span> <span class="n">SkeletonMatchMethod</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="c1"># Structure (default): same nodes (any order)</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="c1"># Exact: same nodes in same order</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1"># Overlap: partial match by Jaccard similarity</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="c1"># Subset: one skeleton&#39;s nodes are subset of other</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="n">matcher</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">OVERLAP</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">skeleton_matcher</span><span class="o">=</span><span class="n">matcher</span><span class="p">)</span>
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="no-frames-merged">No frames merged<a class="headerlink" href="#no-frames-merged" title="Permanent link">&para;</a></h3>
<p>Videos don't match. Check paths and try basename matching:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Base videos:&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">filename</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">base</span><span class="o">.</span><span class="n">videos</span><span class="p">])</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Other videos:&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">filename</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">videos</span><span class="p">])</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">BASENAME_VIDEO_MATCHER</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">BASENAME_VIDEO_MATCHER</span><span class="p">)</span>
</code></pre></div>
<h3 id="duplicate-instances">Duplicate instances<a class="headerlink" href="#duplicate-instances" title="Permanent link">&para;</a></h3>
<p>Use <code>smart</code> instead of <code>keep_both</code>, or tighten match threshold:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">InstanceMatcher</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;spatial&quot;</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">instance_matcher</span><span class="o">=</span><span class="n">matcher</span><span class="p">)</span>
</code></pre></div>
<h2 id="api-reference">API reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h2>
<h3 id="labelsmerge">Labels.merge<a class="headerlink" href="#labelsmerge" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">


<h4 id="sleap_io.model.labels.Labels.merge" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">instance_matcher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skeleton_matcher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">track_matcher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s1">&#39;smart&#39;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">error_mode</span><span class="o">=</span><span class="s1">&#39;continue&#39;</span><span class="p">)</span></code>

<a href="#sleap_io.model.labels.Labels.merge" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Merge another Labels object into this one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>other</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;Labels&lt;/code&gt; (&lt;code&gt;sleap_io.model.labels.Labels&lt;/code&gt;)" href="../reference/sleap_io/model/labels/#sleap_io.model.labels.Labels">Labels</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Another Labels object to merge into this one.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>instance_matcher</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="InstanceMatcher">InstanceMatcher</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matcher for comparing instances. If None, uses default
spatial matching with 5px tolerance.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skeleton_matcher</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="SkeletonMatcher">SkeletonMatcher</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matcher for comparing skeletons. If None, uses structure
matching.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>video_matcher</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="VideoMatcher">VideoMatcher</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matcher for comparing videos. If None, uses auto matching.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>track_matcher</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="TrackMatcher">TrackMatcher</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matcher for comparing tracks. If None, uses name matching.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>frame_strategy</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Strategy for merging frames:
- "smart": Keep user labels, update predictions
- "keep_original": Keep original frames
- "keep_new": Replace with new frames
- "keep_both": Keep all frames
- "update_tracks": Update track and score of the original instances
    from the new instances.</p>
              </div>
            </td>
            <td>
                  <code>&#39;smart&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>validate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, validate for conflicts before merging.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_callback</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional callback for progress updates.
Should accept (current, total, message) arguments.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>error_mode</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How to handle errors:
- "continue": Log errors but continue
- "strict": Raise exception on first error
- "warn": Print warnings but continue</p>
              </div>
            </td>
            <td>
                  <code>&#39;continue&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="MergeResult">MergeResult</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>MergeResult object with statistics and any errors/conflicts.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If Labels is lazy-loaded.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <p>This method modifies the Labels object in place. The merge is designed to
handle common workflows like merging predictions back into a project.</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/labels.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1863" name="__codelineno-0-1863"></a><a href="#__codelineno-0-1863"><span class="linenos" data-linenos="1863 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span>
<a id="__codelineno-0-1864" name="__codelineno-0-1864"></a><a href="#__codelineno-0-1864"><span class="linenos" data-linenos="1864 "></span></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1865" name="__codelineno-0-1865"></a><a href="#__codelineno-0-1865"><span class="linenos" data-linenos="1865 "></span></a>    <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;Labels&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1866" name="__codelineno-0-1866"></a><a href="#__codelineno-0-1866"><span class="linenos" data-linenos="1866 "></span></a>    <span class="n">instance_matcher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;InstanceMatcher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1867" name="__codelineno-0-1867"></a><a href="#__codelineno-0-1867"><span class="linenos" data-linenos="1867 "></span></a>    <span class="n">skeleton_matcher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;SkeletonMatcher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1868" name="__codelineno-0-1868"></a><a href="#__codelineno-0-1868"><span class="linenos" data-linenos="1868 "></span></a>    <span class="n">video_matcher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;VideoMatcher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1869" name="__codelineno-0-1869"></a><a href="#__codelineno-0-1869"><span class="linenos" data-linenos="1869 "></span></a>    <span class="n">track_matcher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;TrackMatcher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1870" name="__codelineno-0-1870"></a><a href="#__codelineno-0-1870"><span class="linenos" data-linenos="1870 "></span></a>    <span class="n">frame_strategy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;smart&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1871" name="__codelineno-0-1871"></a><a href="#__codelineno-0-1871"><span class="linenos" data-linenos="1871 "></span></a>    <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-1872" name="__codelineno-0-1872"></a><a href="#__codelineno-0-1872"><span class="linenos" data-linenos="1872 "></span></a>    <span class="n">progress_callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1873" name="__codelineno-0-1873"></a><a href="#__codelineno-0-1873"><span class="linenos" data-linenos="1873 "></span></a>    <span class="n">error_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;continue&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1874" name="__codelineno-0-1874"></a><a href="#__codelineno-0-1874"><span class="linenos" data-linenos="1874 "></span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;MergeResult&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1875" name="__codelineno-0-1875"></a><a href="#__codelineno-0-1875"><span class="linenos" data-linenos="1875 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Merge another Labels object into this one.</span>
<a id="__codelineno-0-1876" name="__codelineno-0-1876"></a><a href="#__codelineno-0-1876"><span class="linenos" data-linenos="1876 "></span></a>
<a id="__codelineno-0-1877" name="__codelineno-0-1877"></a><a href="#__codelineno-0-1877"><span class="linenos" data-linenos="1877 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1878" name="__codelineno-0-1878"></a><a href="#__codelineno-0-1878"><span class="linenos" data-linenos="1878 "></span></a><span class="sd">        other: Another Labels object to merge into this one.</span>
<a id="__codelineno-0-1879" name="__codelineno-0-1879"></a><a href="#__codelineno-0-1879"><span class="linenos" data-linenos="1879 "></span></a><span class="sd">        instance_matcher: Matcher for comparing instances. If None, uses default</span>
<a id="__codelineno-0-1880" name="__codelineno-0-1880"></a><a href="#__codelineno-0-1880"><span class="linenos" data-linenos="1880 "></span></a><span class="sd">            spatial matching with 5px tolerance.</span>
<a id="__codelineno-0-1881" name="__codelineno-0-1881"></a><a href="#__codelineno-0-1881"><span class="linenos" data-linenos="1881 "></span></a><span class="sd">        skeleton_matcher: Matcher for comparing skeletons. If None, uses structure</span>
<a id="__codelineno-0-1882" name="__codelineno-0-1882"></a><a href="#__codelineno-0-1882"><span class="linenos" data-linenos="1882 "></span></a><span class="sd">            matching.</span>
<a id="__codelineno-0-1883" name="__codelineno-0-1883"></a><a href="#__codelineno-0-1883"><span class="linenos" data-linenos="1883 "></span></a><span class="sd">        video_matcher: Matcher for comparing videos. If None, uses auto matching.</span>
<a id="__codelineno-0-1884" name="__codelineno-0-1884"></a><a href="#__codelineno-0-1884"><span class="linenos" data-linenos="1884 "></span></a><span class="sd">        track_matcher: Matcher for comparing tracks. If None, uses name matching.</span>
<a id="__codelineno-0-1885" name="__codelineno-0-1885"></a><a href="#__codelineno-0-1885"><span class="linenos" data-linenos="1885 "></span></a><span class="sd">        frame_strategy: Strategy for merging frames:</span>
<a id="__codelineno-0-1886" name="__codelineno-0-1886"></a><a href="#__codelineno-0-1886"><span class="linenos" data-linenos="1886 "></span></a><span class="sd">            - &quot;smart&quot;: Keep user labels, update predictions</span>
<a id="__codelineno-0-1887" name="__codelineno-0-1887"></a><a href="#__codelineno-0-1887"><span class="linenos" data-linenos="1887 "></span></a><span class="sd">            - &quot;keep_original&quot;: Keep original frames</span>
<a id="__codelineno-0-1888" name="__codelineno-0-1888"></a><a href="#__codelineno-0-1888"><span class="linenos" data-linenos="1888 "></span></a><span class="sd">            - &quot;keep_new&quot;: Replace with new frames</span>
<a id="__codelineno-0-1889" name="__codelineno-0-1889"></a><a href="#__codelineno-0-1889"><span class="linenos" data-linenos="1889 "></span></a><span class="sd">            - &quot;keep_both&quot;: Keep all frames</span>
<a id="__codelineno-0-1890" name="__codelineno-0-1890"></a><a href="#__codelineno-0-1890"><span class="linenos" data-linenos="1890 "></span></a><span class="sd">            - &quot;update_tracks&quot;: Update track and score of the original instances</span>
<a id="__codelineno-0-1891" name="__codelineno-0-1891"></a><a href="#__codelineno-0-1891"><span class="linenos" data-linenos="1891 "></span></a><span class="sd">                from the new instances.</span>
<a id="__codelineno-0-1892" name="__codelineno-0-1892"></a><a href="#__codelineno-0-1892"><span class="linenos" data-linenos="1892 "></span></a><span class="sd">        validate: If True, validate for conflicts before merging.</span>
<a id="__codelineno-0-1893" name="__codelineno-0-1893"></a><a href="#__codelineno-0-1893"><span class="linenos" data-linenos="1893 "></span></a><span class="sd">        progress_callback: Optional callback for progress updates.</span>
<a id="__codelineno-0-1894" name="__codelineno-0-1894"></a><a href="#__codelineno-0-1894"><span class="linenos" data-linenos="1894 "></span></a><span class="sd">            Should accept (current, total, message) arguments.</span>
<a id="__codelineno-0-1895" name="__codelineno-0-1895"></a><a href="#__codelineno-0-1895"><span class="linenos" data-linenos="1895 "></span></a><span class="sd">        error_mode: How to handle errors:</span>
<a id="__codelineno-0-1896" name="__codelineno-0-1896"></a><a href="#__codelineno-0-1896"><span class="linenos" data-linenos="1896 "></span></a><span class="sd">            - &quot;continue&quot;: Log errors but continue</span>
<a id="__codelineno-0-1897" name="__codelineno-0-1897"></a><a href="#__codelineno-0-1897"><span class="linenos" data-linenos="1897 "></span></a><span class="sd">            - &quot;strict&quot;: Raise exception on first error</span>
<a id="__codelineno-0-1898" name="__codelineno-0-1898"></a><a href="#__codelineno-0-1898"><span class="linenos" data-linenos="1898 "></span></a><span class="sd">            - &quot;warn&quot;: Print warnings but continue</span>
<a id="__codelineno-0-1899" name="__codelineno-0-1899"></a><a href="#__codelineno-0-1899"><span class="linenos" data-linenos="1899 "></span></a>
<a id="__codelineno-0-1900" name="__codelineno-0-1900"></a><a href="#__codelineno-0-1900"><span class="linenos" data-linenos="1900 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1901" name="__codelineno-0-1901"></a><a href="#__codelineno-0-1901"><span class="linenos" data-linenos="1901 "></span></a><span class="sd">        MergeResult object with statistics and any errors/conflicts.</span>
<a id="__codelineno-0-1902" name="__codelineno-0-1902"></a><a href="#__codelineno-0-1902"><span class="linenos" data-linenos="1902 "></span></a>
<a id="__codelineno-0-1903" name="__codelineno-0-1903"></a><a href="#__codelineno-0-1903"><span class="linenos" data-linenos="1903 "></span></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-1904" name="__codelineno-0-1904"></a><a href="#__codelineno-0-1904"><span class="linenos" data-linenos="1904 "></span></a><span class="sd">        RuntimeError: If Labels is lazy-loaded.</span>
<a id="__codelineno-0-1905" name="__codelineno-0-1905"></a><a href="#__codelineno-0-1905"><span class="linenos" data-linenos="1905 "></span></a>
<a id="__codelineno-0-1906" name="__codelineno-0-1906"></a><a href="#__codelineno-0-1906"><span class="linenos" data-linenos="1906 "></span></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-1907" name="__codelineno-0-1907"></a><a href="#__codelineno-0-1907"><span class="linenos" data-linenos="1907 "></span></a><span class="sd">        This method modifies the Labels object in place. The merge is designed to</span>
<a id="__codelineno-0-1908" name="__codelineno-0-1908"></a><a href="#__codelineno-0-1908"><span class="linenos" data-linenos="1908 "></span></a><span class="sd">        handle common workflows like merging predictions back into a project.</span>
<a id="__codelineno-0-1909" name="__codelineno-0-1909"></a><a href="#__codelineno-0-1909"><span class="linenos" data-linenos="1909 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1910" name="__codelineno-0-1910"></a><a href="#__codelineno-0-1910"><span class="linenos" data-linenos="1910 "></span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_check_not_lazy</span><span class="p">(</span><span class="s2">&quot;merge&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1911" name="__codelineno-0-1911"></a><a href="#__codelineno-0-1911"><span class="linenos" data-linenos="1911 "></span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<a id="__codelineno-0-1912" name="__codelineno-0-1912"></a><a href="#__codelineno-0-1912"><span class="linenos" data-linenos="1912 "></span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<a id="__codelineno-0-1913" name="__codelineno-0-1913"></a><a href="#__codelineno-0-1913"><span class="linenos" data-linenos="1913 "></span></a>
<a id="__codelineno-0-1914" name="__codelineno-0-1914"></a><a href="#__codelineno-0-1914"><span class="linenos" data-linenos="1914 "></span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-0-1915" name="__codelineno-0-1915"></a><a href="#__codelineno-0-1915"><span class="linenos" data-linenos="1915 "></span></a>        <span class="n">ConflictResolution</span><span class="p">,</span>
<a id="__codelineno-0-1916" name="__codelineno-0-1916"></a><a href="#__codelineno-0-1916"><span class="linenos" data-linenos="1916 "></span></a>        <span class="n">ErrorMode</span><span class="p">,</span>
<a id="__codelineno-0-1917" name="__codelineno-0-1917"></a><a href="#__codelineno-0-1917"><span class="linenos" data-linenos="1917 "></span></a>        <span class="n">InstanceMatcher</span><span class="p">,</span>
<a id="__codelineno-0-1918" name="__codelineno-0-1918"></a><a href="#__codelineno-0-1918"><span class="linenos" data-linenos="1918 "></span></a>        <span class="n">MergeError</span><span class="p">,</span>
<a id="__codelineno-0-1919" name="__codelineno-0-1919"></a><a href="#__codelineno-0-1919"><span class="linenos" data-linenos="1919 "></span></a>        <span class="n">MergeResult</span><span class="p">,</span>
<a id="__codelineno-0-1920" name="__codelineno-0-1920"></a><a href="#__codelineno-0-1920"><span class="linenos" data-linenos="1920 "></span></a>        <span class="n">SkeletonMatcher</span><span class="p">,</span>
<a id="__codelineno-0-1921" name="__codelineno-0-1921"></a><a href="#__codelineno-0-1921"><span class="linenos" data-linenos="1921 "></span></a>        <span class="n">SkeletonMatchMethod</span><span class="p">,</span>
<a id="__codelineno-0-1922" name="__codelineno-0-1922"></a><a href="#__codelineno-0-1922"><span class="linenos" data-linenos="1922 "></span></a>        <span class="n">SkeletonMismatchError</span><span class="p">,</span>
<a id="__codelineno-0-1923" name="__codelineno-0-1923"></a><a href="#__codelineno-0-1923"><span class="linenos" data-linenos="1923 "></span></a>        <span class="n">TrackMatcher</span><span class="p">,</span>
<a id="__codelineno-0-1924" name="__codelineno-0-1924"></a><a href="#__codelineno-0-1924"><span class="linenos" data-linenos="1924 "></span></a>        <span class="n">VideoMatcher</span><span class="p">,</span>
<a id="__codelineno-0-1925" name="__codelineno-0-1925"></a><a href="#__codelineno-0-1925"><span class="linenos" data-linenos="1925 "></span></a>        <span class="n">VideoMatchMethod</span><span class="p">,</span>
<a id="__codelineno-0-1926" name="__codelineno-0-1926"></a><a href="#__codelineno-0-1926"><span class="linenos" data-linenos="1926 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-1927" name="__codelineno-0-1927"></a><a href="#__codelineno-0-1927"><span class="linenos" data-linenos="1927 "></span></a>
<a id="__codelineno-0-1928" name="__codelineno-0-1928"></a><a href="#__codelineno-0-1928"><span class="linenos" data-linenos="1928 "></span></a>    <span class="c1"># Initialize matchers with defaults if not provided</span>
<a id="__codelineno-0-1929" name="__codelineno-0-1929"></a><a href="#__codelineno-0-1929"><span class="linenos" data-linenos="1929 "></span></a>    <span class="k">if</span> <span class="n">instance_matcher</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1930" name="__codelineno-0-1930"></a><a href="#__codelineno-0-1930"><span class="linenos" data-linenos="1930 "></span></a>        <span class="n">instance_matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">()</span>
<a id="__codelineno-0-1931" name="__codelineno-0-1931"></a><a href="#__codelineno-0-1931"><span class="linenos" data-linenos="1931 "></span></a>    <span class="k">if</span> <span class="n">skeleton_matcher</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1932" name="__codelineno-0-1932"></a><a href="#__codelineno-0-1932"><span class="linenos" data-linenos="1932 "></span></a>        <span class="n">skeleton_matcher</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">)</span>
<a id="__codelineno-0-1933" name="__codelineno-0-1933"></a><a href="#__codelineno-0-1933"><span class="linenos" data-linenos="1933 "></span></a>    <span class="k">if</span> <span class="n">video_matcher</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1934" name="__codelineno-0-1934"></a><a href="#__codelineno-0-1934"><span class="linenos" data-linenos="1934 "></span></a>        <span class="n">video_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">()</span>
<a id="__codelineno-0-1935" name="__codelineno-0-1935"></a><a href="#__codelineno-0-1935"><span class="linenos" data-linenos="1935 "></span></a>    <span class="k">if</span> <span class="n">track_matcher</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1936" name="__codelineno-0-1936"></a><a href="#__codelineno-0-1936"><span class="linenos" data-linenos="1936 "></span></a>        <span class="n">track_matcher</span> <span class="o">=</span> <span class="n">TrackMatcher</span><span class="p">()</span>
<a id="__codelineno-0-1937" name="__codelineno-0-1937"></a><a href="#__codelineno-0-1937"><span class="linenos" data-linenos="1937 "></span></a>
<a id="__codelineno-0-1938" name="__codelineno-0-1938"></a><a href="#__codelineno-0-1938"><span class="linenos" data-linenos="1938 "></span></a>    <span class="c1"># Parse error mode</span>
<a id="__codelineno-0-1939" name="__codelineno-0-1939"></a><a href="#__codelineno-0-1939"><span class="linenos" data-linenos="1939 "></span></a>    <span class="n">error_mode_enum</span> <span class="o">=</span> <span class="n">ErrorMode</span><span class="p">(</span><span class="n">error_mode</span><span class="p">)</span>
<a id="__codelineno-0-1940" name="__codelineno-0-1940"></a><a href="#__codelineno-0-1940"><span class="linenos" data-linenos="1940 "></span></a>
<a id="__codelineno-0-1941" name="__codelineno-0-1941"></a><a href="#__codelineno-0-1941"><span class="linenos" data-linenos="1941 "></span></a>    <span class="c1"># Initialize result</span>
<a id="__codelineno-0-1942" name="__codelineno-0-1942"></a><a href="#__codelineno-0-1942"><span class="linenos" data-linenos="1942 "></span></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">MergeResult</span><span class="p">(</span><span class="n">successful</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1943" name="__codelineno-0-1943"></a><a href="#__codelineno-0-1943"><span class="linenos" data-linenos="1943 "></span></a>
<a id="__codelineno-0-1944" name="__codelineno-0-1944"></a><a href="#__codelineno-0-1944"><span class="linenos" data-linenos="1944 "></span></a>    <span class="c1"># Track merge history in provenance</span>
<a id="__codelineno-0-1945" name="__codelineno-0-1945"></a><a href="#__codelineno-0-1945"><span class="linenos" data-linenos="1945 "></span></a>    <span class="k">if</span> <span class="s2">&quot;merge_history&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">provenance</span><span class="p">:</span>
<a id="__codelineno-0-1946" name="__codelineno-0-1946"></a><a href="#__codelineno-0-1946"><span class="linenos" data-linenos="1946 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">provenance</span><span class="p">[</span><span class="s2">&quot;merge_history&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1947" name="__codelineno-0-1947"></a><a href="#__codelineno-0-1947"><span class="linenos" data-linenos="1947 "></span></a>
<a id="__codelineno-0-1948" name="__codelineno-0-1948"></a><a href="#__codelineno-0-1948"><span class="linenos" data-linenos="1948 "></span></a>    <span class="n">merge_record</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-1949" name="__codelineno-0-1949"></a><a href="#__codelineno-0-1949"><span class="linenos" data-linenos="1949 "></span></a>        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
<a id="__codelineno-0-1950" name="__codelineno-0-1950"></a><a href="#__codelineno-0-1950"><span class="linenos" data-linenos="1950 "></span></a>        <span class="s2">&quot;source_labels&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-1951" name="__codelineno-0-1951"></a><a href="#__codelineno-0-1951"><span class="linenos" data-linenos="1951 "></span></a>            <span class="s2">&quot;n_frames&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">),</span>
<a id="__codelineno-0-1952" name="__codelineno-0-1952"></a><a href="#__codelineno-0-1952"><span class="linenos" data-linenos="1952 "></span></a>            <span class="s2">&quot;n_videos&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">videos</span><span class="p">),</span>
<a id="__codelineno-0-1953" name="__codelineno-0-1953"></a><a href="#__codelineno-0-1953"><span class="linenos" data-linenos="1953 "></span></a>            <span class="s2">&quot;n_skeletons&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">skeletons</span><span class="p">),</span>
<a id="__codelineno-0-1954" name="__codelineno-0-1954"></a><a href="#__codelineno-0-1954"><span class="linenos" data-linenos="1954 "></span></a>            <span class="s2">&quot;n_tracks&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">tracks</span><span class="p">),</span>
<a id="__codelineno-0-1955" name="__codelineno-0-1955"></a><a href="#__codelineno-0-1955"><span class="linenos" data-linenos="1955 "></span></a>        <span class="p">},</span>
<a id="__codelineno-0-1956" name="__codelineno-0-1956"></a><a href="#__codelineno-0-1956"><span class="linenos" data-linenos="1956 "></span></a>        <span class="s2">&quot;strategy&quot;</span><span class="p">:</span> <span class="n">frame_strategy</span><span class="p">,</span>
<a id="__codelineno-0-1957" name="__codelineno-0-1957"></a><a href="#__codelineno-0-1957"><span class="linenos" data-linenos="1957 "></span></a>    <span class="p">}</span>
<a id="__codelineno-0-1958" name="__codelineno-0-1958"></a><a href="#__codelineno-0-1958"><span class="linenos" data-linenos="1958 "></span></a>
<a id="__codelineno-0-1959" name="__codelineno-0-1959"></a><a href="#__codelineno-0-1959"><span class="linenos" data-linenos="1959 "></span></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1960" name="__codelineno-0-1960"></a><a href="#__codelineno-0-1960"><span class="linenos" data-linenos="1960 "></span></a>        <span class="c1"># Step 1: Match and merge skeletons</span>
<a id="__codelineno-0-1961" name="__codelineno-0-1961"></a><a href="#__codelineno-0-1961"><span class="linenos" data-linenos="1961 "></span></a>        <span class="n">skeleton_map</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1962" name="__codelineno-0-1962"></a><a href="#__codelineno-0-1962"><span class="linenos" data-linenos="1962 "></span></a>        <span class="k">for</span> <span class="n">other_skel</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">skeletons</span><span class="p">:</span>
<a id="__codelineno-0-1963" name="__codelineno-0-1963"></a><a href="#__codelineno-0-1963"><span class="linenos" data-linenos="1963 "></span></a>            <span class="n">matched</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1964" name="__codelineno-0-1964"></a><a href="#__codelineno-0-1964"><span class="linenos" data-linenos="1964 "></span></a>            <span class="k">for</span> <span class="n">self_skel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">skeletons</span><span class="p">:</span>
<a id="__codelineno-0-1965" name="__codelineno-0-1965"></a><a href="#__codelineno-0-1965"><span class="linenos" data-linenos="1965 "></span></a>                <span class="k">if</span> <span class="n">skeleton_matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">self_skel</span><span class="p">,</span> <span class="n">other_skel</span><span class="p">):</span>
<a id="__codelineno-0-1966" name="__codelineno-0-1966"></a><a href="#__codelineno-0-1966"><span class="linenos" data-linenos="1966 "></span></a>                    <span class="n">skeleton_map</span><span class="p">[</span><span class="n">other_skel</span><span class="p">]</span> <span class="o">=</span> <span class="n">self_skel</span>
<a id="__codelineno-0-1967" name="__codelineno-0-1967"></a><a href="#__codelineno-0-1967"><span class="linenos" data-linenos="1967 "></span></a>                    <span class="n">matched</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-1968" name="__codelineno-0-1968"></a><a href="#__codelineno-0-1968"><span class="linenos" data-linenos="1968 "></span></a>                    <span class="k">break</span>
<a id="__codelineno-0-1969" name="__codelineno-0-1969"></a><a href="#__codelineno-0-1969"><span class="linenos" data-linenos="1969 "></span></a>
<a id="__codelineno-0-1970" name="__codelineno-0-1970"></a><a href="#__codelineno-0-1970"><span class="linenos" data-linenos="1970 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">matched</span><span class="p">:</span>
<a id="__codelineno-0-1971" name="__codelineno-0-1971"></a><a href="#__codelineno-0-1971"><span class="linenos" data-linenos="1971 "></span></a>                <span class="k">if</span> <span class="n">validate</span> <span class="ow">and</span> <span class="n">error_mode_enum</span> <span class="o">==</span> <span class="n">ErrorMode</span><span class="o">.</span><span class="n">STRICT</span><span class="p">:</span>
<a id="__codelineno-0-1972" name="__codelineno-0-1972"></a><a href="#__codelineno-0-1972"><span class="linenos" data-linenos="1972 "></span></a>                    <span class="k">raise</span> <span class="n">SkeletonMismatchError</span><span class="p">(</span>
<a id="__codelineno-0-1973" name="__codelineno-0-1973"></a><a href="#__codelineno-0-1973"><span class="linenos" data-linenos="1973 "></span></a>                        <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;No matching skeleton found for </span><span class="si">{</span><span class="n">other_skel</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1974" name="__codelineno-0-1974"></a><a href="#__codelineno-0-1974"><span class="linenos" data-linenos="1974 "></span></a>                        <span class="n">details</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;skeleton&quot;</span><span class="p">:</span> <span class="n">other_skel</span><span class="p">},</span>
<a id="__codelineno-0-1975" name="__codelineno-0-1975"></a><a href="#__codelineno-0-1975"><span class="linenos" data-linenos="1975 "></span></a>                    <span class="p">)</span>
<a id="__codelineno-0-1976" name="__codelineno-0-1976"></a><a href="#__codelineno-0-1976"><span class="linenos" data-linenos="1976 "></span></a>                <span class="k">elif</span> <span class="n">error_mode_enum</span> <span class="o">==</span> <span class="n">ErrorMode</span><span class="o">.</span><span class="n">WARN</span><span class="p">:</span>
<a id="__codelineno-0-1977" name="__codelineno-0-1977"></a><a href="#__codelineno-0-1977"><span class="linenos" data-linenos="1977 "></span></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: No matching skeleton for </span><span class="si">{</span><span class="n">other_skel</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1978" name="__codelineno-0-1978"></a><a href="#__codelineno-0-1978"><span class="linenos" data-linenos="1978 "></span></a>
<a id="__codelineno-0-1979" name="__codelineno-0-1979"></a><a href="#__codelineno-0-1979"><span class="linenos" data-linenos="1979 "></span></a>                <span class="c1"># Add new skeleton if no match</span>
<a id="__codelineno-0-1980" name="__codelineno-0-1980"></a><a href="#__codelineno-0-1980"><span class="linenos" data-linenos="1980 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">skeletons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other_skel</span><span class="p">)</span>
<a id="__codelineno-0-1981" name="__codelineno-0-1981"></a><a href="#__codelineno-0-1981"><span class="linenos" data-linenos="1981 "></span></a>                <span class="n">skeleton_map</span><span class="p">[</span><span class="n">other_skel</span><span class="p">]</span> <span class="o">=</span> <span class="n">other_skel</span>
<a id="__codelineno-0-1982" name="__codelineno-0-1982"></a><a href="#__codelineno-0-1982"><span class="linenos" data-linenos="1982 "></span></a>
<a id="__codelineno-0-1983" name="__codelineno-0-1983"></a><a href="#__codelineno-0-1983"><span class="linenos" data-linenos="1983 "></span></a>        <span class="c1"># Step 2: Match and merge videos</span>
<a id="__codelineno-0-1984" name="__codelineno-0-1984"></a><a href="#__codelineno-0-1984"><span class="linenos" data-linenos="1984 "></span></a>        <span class="n">video_map</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1985" name="__codelineno-0-1985"></a><a href="#__codelineno-0-1985"><span class="linenos" data-linenos="1985 "></span></a>        <span class="n">frame_idx_map</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Maps (old_video, old_idx) -&gt; (new_video, new_idx)</span>
<a id="__codelineno-0-1986" name="__codelineno-0-1986"></a><a href="#__codelineno-0-1986"><span class="linenos" data-linenos="1986 "></span></a>
<a id="__codelineno-0-1987" name="__codelineno-0-1987"></a><a href="#__codelineno-0-1987"><span class="linenos" data-linenos="1987 "></span></a>        <span class="k">for</span> <span class="n">other_video</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-0-1988" name="__codelineno-0-1988"></a><a href="#__codelineno-0-1988"><span class="linenos" data-linenos="1988 "></span></a>            <span class="n">matched</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1989" name="__codelineno-0-1989"></a><a href="#__codelineno-0-1989"><span class="linenos" data-linenos="1989 "></span></a>            <span class="n">matched_video</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1990" name="__codelineno-0-1990"></a><a href="#__codelineno-0-1990"><span class="linenos" data-linenos="1990 "></span></a>
<a id="__codelineno-0-1991" name="__codelineno-0-1991"></a><a href="#__codelineno-0-1991"><span class="linenos" data-linenos="1991 "></span></a>            <span class="c1"># Special handling for AUTO to prefer basename over content</span>
<a id="__codelineno-0-1992" name="__codelineno-0-1992"></a><a href="#__codelineno-0-1992"><span class="linenos" data-linenos="1992 "></span></a>            <span class="k">if</span> <span class="n">video_matcher</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">:</span>
<a id="__codelineno-0-1993" name="__codelineno-0-1993"></a><a href="#__codelineno-0-1993"><span class="linenos" data-linenos="1993 "></span></a>                <span class="c1"># Collect all matches and categorize by match quality</span>
<a id="__codelineno-0-1994" name="__codelineno-0-1994"></a><a href="#__codelineno-0-1994"><span class="linenos" data-linenos="1994 "></span></a>                <span class="n">basename_matches</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1995" name="__codelineno-0-1995"></a><a href="#__codelineno-0-1995"><span class="linenos" data-linenos="1995 "></span></a>                <span class="n">content_only_matches</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1996" name="__codelineno-0-1996"></a><a href="#__codelineno-0-1996"><span class="linenos" data-linenos="1996 "></span></a>
<a id="__codelineno-0-1997" name="__codelineno-0-1997"></a><a href="#__codelineno-0-1997"><span class="linenos" data-linenos="1997 "></span></a>                <span class="k">for</span> <span class="n">self_video</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-0-1998" name="__codelineno-0-1998"></a><a href="#__codelineno-0-1998"><span class="linenos" data-linenos="1998 "></span></a>                    <span class="c1"># Check strict path match</span>
<a id="__codelineno-0-1999" name="__codelineno-0-1999"></a><a href="#__codelineno-0-1999"><span class="linenos" data-linenos="1999 "></span></a>                    <span class="k">if</span> <span class="n">self_video</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">other_video</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-2000" name="__codelineno-0-2000"></a><a href="#__codelineno-0-2000"><span class="linenos" data-linenos="2000 "></span></a>                        <span class="c1"># Exact path match - use immediately</span>
<a id="__codelineno-0-2001" name="__codelineno-0-2001"></a><a href="#__codelineno-0-2001"><span class="linenos" data-linenos="2001 "></span></a>                        <span class="n">matched_video</span> <span class="o">=</span> <span class="n">self_video</span>
<a id="__codelineno-0-2002" name="__codelineno-0-2002"></a><a href="#__codelineno-0-2002"><span class="linenos" data-linenos="2002 "></span></a>                        <span class="k">break</span>
<a id="__codelineno-0-2003" name="__codelineno-0-2003"></a><a href="#__codelineno-0-2003"><span class="linenos" data-linenos="2003 "></span></a>                    <span class="c1"># Check basename match</span>
<a id="__codelineno-0-2004" name="__codelineno-0-2004"></a><a href="#__codelineno-0-2004"><span class="linenos" data-linenos="2004 "></span></a>                    <span class="k">if</span> <span class="n">self_video</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">other_video</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-2005" name="__codelineno-0-2005"></a><a href="#__codelineno-0-2005"><span class="linenos" data-linenos="2005 "></span></a>                        <span class="n">basename_matches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">self_video</span><span class="p">)</span>
<a id="__codelineno-0-2006" name="__codelineno-0-2006"></a><a href="#__codelineno-0-2006"><span class="linenos" data-linenos="2006 "></span></a>                    <span class="c1"># Check content-only match (no path match)</span>
<a id="__codelineno-0-2007" name="__codelineno-0-2007"></a><a href="#__codelineno-0-2007"><span class="linenos" data-linenos="2007 "></span></a>                    <span class="k">elif</span> <span class="n">self_video</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">other_video</span><span class="p">):</span>
<a id="__codelineno-0-2008" name="__codelineno-0-2008"></a><a href="#__codelineno-0-2008"><span class="linenos" data-linenos="2008 "></span></a>                        <span class="n">content_only_matches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">self_video</span><span class="p">)</span>
<a id="__codelineno-0-2009" name="__codelineno-0-2009"></a><a href="#__codelineno-0-2009"><span class="linenos" data-linenos="2009 "></span></a>
<a id="__codelineno-0-2010" name="__codelineno-0-2010"></a><a href="#__codelineno-0-2010"><span class="linenos" data-linenos="2010 "></span></a>                <span class="c1"># Pick best match: prefer basename over content-only</span>
<a id="__codelineno-0-2011" name="__codelineno-0-2011"></a><a href="#__codelineno-0-2011"><span class="linenos" data-linenos="2011 "></span></a>                <span class="k">if</span> <span class="n">matched_video</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2012" name="__codelineno-0-2012"></a><a href="#__codelineno-0-2012"><span class="linenos" data-linenos="2012 "></span></a>                    <span class="k">if</span> <span class="n">basename_matches</span><span class="p">:</span>
<a id="__codelineno-0-2013" name="__codelineno-0-2013"></a><a href="#__codelineno-0-2013"><span class="linenos" data-linenos="2013 "></span></a>                        <span class="n">matched_video</span> <span class="o">=</span> <span class="n">basename_matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-2014" name="__codelineno-0-2014"></a><a href="#__codelineno-0-2014"><span class="linenos" data-linenos="2014 "></span></a>                    <span class="k">elif</span> <span class="n">content_only_matches</span><span class="p">:</span>
<a id="__codelineno-0-2015" name="__codelineno-0-2015"></a><a href="#__codelineno-0-2015"><span class="linenos" data-linenos="2015 "></span></a>                        <span class="n">matched_video</span> <span class="o">=</span> <span class="n">content_only_matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-2016" name="__codelineno-0-2016"></a><a href="#__codelineno-0-2016"><span class="linenos" data-linenos="2016 "></span></a>
<a id="__codelineno-0-2017" name="__codelineno-0-2017"></a><a href="#__codelineno-0-2017"><span class="linenos" data-linenos="2017 "></span></a>                <span class="k">if</span> <span class="n">matched_video</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2018" name="__codelineno-0-2018"></a><a href="#__codelineno-0-2018"><span class="linenos" data-linenos="2018 "></span></a>                    <span class="n">video_map</span><span class="p">[</span><span class="n">other_video</span><span class="p">]</span> <span class="o">=</span> <span class="n">matched_video</span>
<a id="__codelineno-0-2019" name="__codelineno-0-2019"></a><a href="#__codelineno-0-2019"><span class="linenos" data-linenos="2019 "></span></a>                    <span class="n">matched</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-2020" name="__codelineno-0-2020"></a><a href="#__codelineno-0-2020"><span class="linenos" data-linenos="2020 "></span></a>
<a id="__codelineno-0-2021" name="__codelineno-0-2021"></a><a href="#__codelineno-0-2021"><span class="linenos" data-linenos="2021 "></span></a>            <span class="c1"># For non-AUTO methods, use original first-match logic</span>
<a id="__codelineno-0-2022" name="__codelineno-0-2022"></a><a href="#__codelineno-0-2022"><span class="linenos" data-linenos="2022 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">matched</span><span class="p">:</span>
<a id="__codelineno-0-2023" name="__codelineno-0-2023"></a><a href="#__codelineno-0-2023"><span class="linenos" data-linenos="2023 "></span></a>                <span class="k">for</span> <span class="n">self_video</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-0-2024" name="__codelineno-0-2024"></a><a href="#__codelineno-0-2024"><span class="linenos" data-linenos="2024 "></span></a>                    <span class="k">if</span> <span class="n">video_matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">self_video</span><span class="p">,</span> <span class="n">other_video</span><span class="p">):</span>
<a id="__codelineno-0-2025" name="__codelineno-0-2025"></a><a href="#__codelineno-0-2025"><span class="linenos" data-linenos="2025 "></span></a>                        <span class="n">matched_video</span> <span class="o">=</span> <span class="n">self_video</span>
<a id="__codelineno-0-2026" name="__codelineno-0-2026"></a><a href="#__codelineno-0-2026"><span class="linenos" data-linenos="2026 "></span></a>                        <span class="c1"># Special handling for different match methods</span>
<a id="__codelineno-0-2027" name="__codelineno-0-2027"></a><a href="#__codelineno-0-2027"><span class="linenos" data-linenos="2027 "></span></a>                        <span class="k">if</span> <span class="n">video_matcher</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">IMAGE_DEDUP</span><span class="p">:</span>
<a id="__codelineno-0-2028" name="__codelineno-0-2028"></a><a href="#__codelineno-0-2028"><span class="linenos" data-linenos="2028 "></span></a>                            <span class="c1"># Deduplicate images from other_video</span>
<a id="__codelineno-0-2029" name="__codelineno-0-2029"></a><a href="#__codelineno-0-2029"><span class="linenos" data-linenos="2029 "></span></a>                            <span class="n">deduped_video</span> <span class="o">=</span> <span class="n">other_video</span><span class="o">.</span><span class="n">deduplicate_with</span><span class="p">(</span><span class="n">self_video</span><span class="p">)</span>
<a id="__codelineno-0-2030" name="__codelineno-0-2030"></a><a href="#__codelineno-0-2030"><span class="linenos" data-linenos="2030 "></span></a>                            <span class="k">if</span> <span class="n">deduped_video</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2031" name="__codelineno-0-2031"></a><a href="#__codelineno-0-2031"><span class="linenos" data-linenos="2031 "></span></a>                                <span class="c1"># All images were duplicates, map to existing video</span>
<a id="__codelineno-0-2032" name="__codelineno-0-2032"></a><a href="#__codelineno-0-2032"><span class="linenos" data-linenos="2032 "></span></a>                                <span class="n">video_map</span><span class="p">[</span><span class="n">other_video</span><span class="p">]</span> <span class="o">=</span> <span class="n">self_video</span>
<a id="__codelineno-0-2033" name="__codelineno-0-2033"></a><a href="#__codelineno-0-2033"><span class="linenos" data-linenos="2033 "></span></a>                                <span class="c1"># Build frame index mapping for deduplicated frames</span>
<a id="__codelineno-0-2034" name="__codelineno-0-2034"></a><a href="#__codelineno-0-2034"><span class="linenos" data-linenos="2034 "></span></a>                                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
<a id="__codelineno-0-2035" name="__codelineno-0-2035"></a><a href="#__codelineno-0-2035"><span class="linenos" data-linenos="2035 "></span></a>                                    <span class="n">other_video</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="nb">list</span>
<a id="__codelineno-0-2036" name="__codelineno-0-2036"></a><a href="#__codelineno-0-2036"><span class="linenos" data-linenos="2036 "></span></a>                                <span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">self_video</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-2037" name="__codelineno-0-2037"></a><a href="#__codelineno-0-2037"><span class="linenos" data-linenos="2037 "></span></a>                                    <span class="n">other_basenames</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2038" name="__codelineno-0-2038"></a><a href="#__codelineno-0-2038"><span class="linenos" data-linenos="2038 "></span></a>                                        <span class="n">Path</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">other_video</span><span class="o">.</span><span class="n">filename</span>
<a id="__codelineno-0-2039" name="__codelineno-0-2039"></a><a href="#__codelineno-0-2039"><span class="linenos" data-linenos="2039 "></span></a>                                    <span class="p">]</span>
<a id="__codelineno-0-2040" name="__codelineno-0-2040"></a><a href="#__codelineno-0-2040"><span class="linenos" data-linenos="2040 "></span></a>                                    <span class="n">self_basenames</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2041" name="__codelineno-0-2041"></a><a href="#__codelineno-0-2041"><span class="linenos" data-linenos="2041 "></span></a>                                        <span class="n">Path</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">self_video</span><span class="o">.</span><span class="n">filename</span>
<a id="__codelineno-0-2042" name="__codelineno-0-2042"></a><a href="#__codelineno-0-2042"><span class="linenos" data-linenos="2042 "></span></a>                                    <span class="p">]</span>
<a id="__codelineno-0-2043" name="__codelineno-0-2043"></a><a href="#__codelineno-0-2043"><span class="linenos" data-linenos="2043 "></span></a>                                    <span class="k">for</span> <span class="n">old_idx</span><span class="p">,</span> <span class="n">basename</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
<a id="__codelineno-0-2044" name="__codelineno-0-2044"></a><a href="#__codelineno-0-2044"><span class="linenos" data-linenos="2044 "></span></a>                                        <span class="n">other_basenames</span>
<a id="__codelineno-0-2045" name="__codelineno-0-2045"></a><a href="#__codelineno-0-2045"><span class="linenos" data-linenos="2045 "></span></a>                                    <span class="p">):</span>
<a id="__codelineno-0-2046" name="__codelineno-0-2046"></a><a href="#__codelineno-0-2046"><span class="linenos" data-linenos="2046 "></span></a>                                        <span class="k">if</span> <span class="n">basename</span> <span class="ow">in</span> <span class="n">self_basenames</span><span class="p">:</span>
<a id="__codelineno-0-2047" name="__codelineno-0-2047"></a><a href="#__codelineno-0-2047"><span class="linenos" data-linenos="2047 "></span></a>                                            <span class="n">new_idx</span> <span class="o">=</span> <span class="n">self_basenames</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
<a id="__codelineno-0-2048" name="__codelineno-0-2048"></a><a href="#__codelineno-0-2048"><span class="linenos" data-linenos="2048 "></span></a>                                            <span class="n">frame_idx_map</span><span class="p">[</span>
<a id="__codelineno-0-2049" name="__codelineno-0-2049"></a><a href="#__codelineno-0-2049"><span class="linenos" data-linenos="2049 "></span></a>                                                <span class="p">(</span><span class="n">other_video</span><span class="p">,</span> <span class="n">old_idx</span><span class="p">)</span>
<a id="__codelineno-0-2050" name="__codelineno-0-2050"></a><a href="#__codelineno-0-2050"><span class="linenos" data-linenos="2050 "></span></a>                                            <span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2051" name="__codelineno-0-2051"></a><a href="#__codelineno-0-2051"><span class="linenos" data-linenos="2051 "></span></a>                                                <span class="n">self_video</span><span class="p">,</span>
<a id="__codelineno-0-2052" name="__codelineno-0-2052"></a><a href="#__codelineno-0-2052"><span class="linenos" data-linenos="2052 "></span></a>                                                <span class="n">new_idx</span><span class="p">,</span>
<a id="__codelineno-0-2053" name="__codelineno-0-2053"></a><a href="#__codelineno-0-2053"><span class="linenos" data-linenos="2053 "></span></a>                                            <span class="p">)</span>
<a id="__codelineno-0-2054" name="__codelineno-0-2054"></a><a href="#__codelineno-0-2054"><span class="linenos" data-linenos="2054 "></span></a>                            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2055" name="__codelineno-0-2055"></a><a href="#__codelineno-0-2055"><span class="linenos" data-linenos="2055 "></span></a>                                <span class="c1"># Add deduplicated video as new</span>
<a id="__codelineno-0-2056" name="__codelineno-0-2056"></a><a href="#__codelineno-0-2056"><span class="linenos" data-linenos="2056 "></span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deduped_video</span><span class="p">)</span>
<a id="__codelineno-0-2057" name="__codelineno-0-2057"></a><a href="#__codelineno-0-2057"><span class="linenos" data-linenos="2057 "></span></a>                                <span class="n">video_map</span><span class="p">[</span><span class="n">other_video</span><span class="p">]</span> <span class="o">=</span> <span class="n">deduped_video</span>
<a id="__codelineno-0-2058" name="__codelineno-0-2058"></a><a href="#__codelineno-0-2058"><span class="linenos" data-linenos="2058 "></span></a>                                <span class="c1"># Build frame index mapping for remaining frames</span>
<a id="__codelineno-0-2059" name="__codelineno-0-2059"></a><a href="#__codelineno-0-2059"><span class="linenos" data-linenos="2059 "></span></a>                                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
<a id="__codelineno-0-2060" name="__codelineno-0-2060"></a><a href="#__codelineno-0-2060"><span class="linenos" data-linenos="2060 "></span></a>                                    <span class="n">other_video</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="nb">list</span>
<a id="__codelineno-0-2061" name="__codelineno-0-2061"></a><a href="#__codelineno-0-2061"><span class="linenos" data-linenos="2061 "></span></a>                                <span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">deduped_video</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-2062" name="__codelineno-0-2062"></a><a href="#__codelineno-0-2062"><span class="linenos" data-linenos="2062 "></span></a>                                    <span class="n">other_basenames</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2063" name="__codelineno-0-2063"></a><a href="#__codelineno-0-2063"><span class="linenos" data-linenos="2063 "></span></a>                                        <span class="n">Path</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">other_video</span><span class="o">.</span><span class="n">filename</span>
<a id="__codelineno-0-2064" name="__codelineno-0-2064"></a><a href="#__codelineno-0-2064"><span class="linenos" data-linenos="2064 "></span></a>                                    <span class="p">]</span>
<a id="__codelineno-0-2065" name="__codelineno-0-2065"></a><a href="#__codelineno-0-2065"><span class="linenos" data-linenos="2065 "></span></a>                                    <span class="n">deduped_basenames</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2066" name="__codelineno-0-2066"></a><a href="#__codelineno-0-2066"><span class="linenos" data-linenos="2066 "></span></a>                                        <span class="n">Path</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">deduped_video</span><span class="o">.</span><span class="n">filename</span>
<a id="__codelineno-0-2067" name="__codelineno-0-2067"></a><a href="#__codelineno-0-2067"><span class="linenos" data-linenos="2067 "></span></a>                                    <span class="p">]</span>
<a id="__codelineno-0-2068" name="__codelineno-0-2068"></a><a href="#__codelineno-0-2068"><span class="linenos" data-linenos="2068 "></span></a>                                    <span class="n">self_basenames</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2069" name="__codelineno-0-2069"></a><a href="#__codelineno-0-2069"><span class="linenos" data-linenos="2069 "></span></a>                                        <span class="n">Path</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">self_video</span><span class="o">.</span><span class="n">filename</span>
<a id="__codelineno-0-2070" name="__codelineno-0-2070"></a><a href="#__codelineno-0-2070"><span class="linenos" data-linenos="2070 "></span></a>                                    <span class="p">]</span>
<a id="__codelineno-0-2071" name="__codelineno-0-2071"></a><a href="#__codelineno-0-2071"><span class="linenos" data-linenos="2071 "></span></a>                                    <span class="k">for</span> <span class="n">old_idx</span><span class="p">,</span> <span class="n">basename</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
<a id="__codelineno-0-2072" name="__codelineno-0-2072"></a><a href="#__codelineno-0-2072"><span class="linenos" data-linenos="2072 "></span></a>                                        <span class="n">other_basenames</span>
<a id="__codelineno-0-2073" name="__codelineno-0-2073"></a><a href="#__codelineno-0-2073"><span class="linenos" data-linenos="2073 "></span></a>                                    <span class="p">):</span>
<a id="__codelineno-0-2074" name="__codelineno-0-2074"></a><a href="#__codelineno-0-2074"><span class="linenos" data-linenos="2074 "></span></a>                                        <span class="k">if</span> <span class="n">basename</span> <span class="ow">in</span> <span class="n">deduped_basenames</span><span class="p">:</span>
<a id="__codelineno-0-2075" name="__codelineno-0-2075"></a><a href="#__codelineno-0-2075"><span class="linenos" data-linenos="2075 "></span></a>                                            <span class="n">new_idx</span> <span class="o">=</span> <span class="n">deduped_basenames</span><span class="o">.</span><span class="n">index</span><span class="p">(</span>
<a id="__codelineno-0-2076" name="__codelineno-0-2076"></a><a href="#__codelineno-0-2076"><span class="linenos" data-linenos="2076 "></span></a>                                                <span class="n">basename</span>
<a id="__codelineno-0-2077" name="__codelineno-0-2077"></a><a href="#__codelineno-0-2077"><span class="linenos" data-linenos="2077 "></span></a>                                            <span class="p">)</span>
<a id="__codelineno-0-2078" name="__codelineno-0-2078"></a><a href="#__codelineno-0-2078"><span class="linenos" data-linenos="2078 "></span></a>                                            <span class="n">frame_idx_map</span><span class="p">[</span>
<a id="__codelineno-0-2079" name="__codelineno-0-2079"></a><a href="#__codelineno-0-2079"><span class="linenos" data-linenos="2079 "></span></a>                                                <span class="p">(</span><span class="n">other_video</span><span class="p">,</span> <span class="n">old_idx</span><span class="p">)</span>
<a id="__codelineno-0-2080" name="__codelineno-0-2080"></a><a href="#__codelineno-0-2080"><span class="linenos" data-linenos="2080 "></span></a>                                            <span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2081" name="__codelineno-0-2081"></a><a href="#__codelineno-0-2081"><span class="linenos" data-linenos="2081 "></span></a>                                                <span class="n">deduped_video</span><span class="p">,</span>
<a id="__codelineno-0-2082" name="__codelineno-0-2082"></a><a href="#__codelineno-0-2082"><span class="linenos" data-linenos="2082 "></span></a>                                                <span class="n">new_idx</span><span class="p">,</span>
<a id="__codelineno-0-2083" name="__codelineno-0-2083"></a><a href="#__codelineno-0-2083"><span class="linenos" data-linenos="2083 "></span></a>                                            <span class="p">)</span>
<a id="__codelineno-0-2084" name="__codelineno-0-2084"></a><a href="#__codelineno-0-2084"><span class="linenos" data-linenos="2084 "></span></a>                                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2085" name="__codelineno-0-2085"></a><a href="#__codelineno-0-2085"><span class="linenos" data-linenos="2085 "></span></a>                                            <span class="c1"># Cases where the image was a duplicate,</span>
<a id="__codelineno-0-2086" name="__codelineno-0-2086"></a><a href="#__codelineno-0-2086"><span class="linenos" data-linenos="2086 "></span></a>                                            <span class="c1"># present in both self and other labels</span>
<a id="__codelineno-0-2087" name="__codelineno-0-2087"></a><a href="#__codelineno-0-2087"><span class="linenos" data-linenos="2087 "></span></a>                                            <span class="c1"># See Issue #239.</span>
<a id="__codelineno-0-2088" name="__codelineno-0-2088"></a><a href="#__codelineno-0-2088"><span class="linenos" data-linenos="2088 "></span></a>                                            <span class="k">assert</span> <span class="n">basename</span> <span class="ow">in</span> <span class="n">self_basenames</span><span class="p">,</span> <span class="p">(</span>
<a id="__codelineno-0-2089" name="__codelineno-0-2089"></a><a href="#__codelineno-0-2089"><span class="linenos" data-linenos="2089 "></span></a>                                                <span class="s2">&quot;Unexpected basename mismatch, </span><span class="se">\</span>
<a id="__codelineno-0-2090" name="__codelineno-0-2090"></a><a href="#__codelineno-0-2090"><span class="linenos" data-linenos="2090 "></span></a><span class="s2">                                                    possible file corruption.&quot;</span>
<a id="__codelineno-0-2091" name="__codelineno-0-2091"></a><a href="#__codelineno-0-2091"><span class="linenos" data-linenos="2091 "></span></a>                                            <span class="p">)</span>
<a id="__codelineno-0-2092" name="__codelineno-0-2092"></a><a href="#__codelineno-0-2092"><span class="linenos" data-linenos="2092 "></span></a>                                            <span class="n">new_idx</span> <span class="o">=</span> <span class="n">self_basenames</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
<a id="__codelineno-0-2093" name="__codelineno-0-2093"></a><a href="#__codelineno-0-2093"><span class="linenos" data-linenos="2093 "></span></a>                                            <span class="n">frame_idx_map</span><span class="p">[</span>
<a id="__codelineno-0-2094" name="__codelineno-0-2094"></a><a href="#__codelineno-0-2094"><span class="linenos" data-linenos="2094 "></span></a>                                                <span class="p">(</span><span class="n">other_video</span><span class="p">,</span> <span class="n">old_idx</span><span class="p">)</span>
<a id="__codelineno-0-2095" name="__codelineno-0-2095"></a><a href="#__codelineno-0-2095"><span class="linenos" data-linenos="2095 "></span></a>                                            <span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2096" name="__codelineno-0-2096"></a><a href="#__codelineno-0-2096"><span class="linenos" data-linenos="2096 "></span></a>                                                <span class="n">self_video</span><span class="p">,</span>
<a id="__codelineno-0-2097" name="__codelineno-0-2097"></a><a href="#__codelineno-0-2097"><span class="linenos" data-linenos="2097 "></span></a>                                                <span class="n">new_idx</span><span class="p">,</span>
<a id="__codelineno-0-2098" name="__codelineno-0-2098"></a><a href="#__codelineno-0-2098"><span class="linenos" data-linenos="2098 "></span></a>                                            <span class="p">)</span>
<a id="__codelineno-0-2099" name="__codelineno-0-2099"></a><a href="#__codelineno-0-2099"><span class="linenos" data-linenos="2099 "></span></a>                        <span class="k">elif</span> <span class="n">video_matcher</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">SHAPE</span><span class="p">:</span>
<a id="__codelineno-0-2100" name="__codelineno-0-2100"></a><a href="#__codelineno-0-2100"><span class="linenos" data-linenos="2100 "></span></a>                            <span class="c1"># Merge videos with same shape</span>
<a id="__codelineno-0-2101" name="__codelineno-0-2101"></a><a href="#__codelineno-0-2101"><span class="linenos" data-linenos="2101 "></span></a>                            <span class="n">merged_video</span> <span class="o">=</span> <span class="n">self_video</span><span class="o">.</span><span class="n">merge_with</span><span class="p">(</span><span class="n">other_video</span><span class="p">)</span>
<a id="__codelineno-0-2102" name="__codelineno-0-2102"></a><a href="#__codelineno-0-2102"><span class="linenos" data-linenos="2102 "></span></a>                            <span class="c1"># Replace self_video with merged version</span>
<a id="__codelineno-0-2103" name="__codelineno-0-2103"></a><a href="#__codelineno-0-2103"><span class="linenos" data-linenos="2103 "></span></a>                            <span class="n">self_video_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">self_video</span><span class="p">)</span>
<a id="__codelineno-0-2104" name="__codelineno-0-2104"></a><a href="#__codelineno-0-2104"><span class="linenos" data-linenos="2104 "></span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">[</span><span class="n">self_video_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">merged_video</span>
<a id="__codelineno-0-2105" name="__codelineno-0-2105"></a><a href="#__codelineno-0-2105"><span class="linenos" data-linenos="2105 "></span></a>                            <span class="n">video_map</span><span class="p">[</span><span class="n">other_video</span><span class="p">]</span> <span class="o">=</span> <span class="n">merged_video</span>
<a id="__codelineno-0-2106" name="__codelineno-0-2106"></a><a href="#__codelineno-0-2106"><span class="linenos" data-linenos="2106 "></span></a>                            <span class="n">video_map</span><span class="p">[</span><span class="n">self_video</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2107" name="__codelineno-0-2107"></a><a href="#__codelineno-0-2107"><span class="linenos" data-linenos="2107 "></span></a>                                <span class="n">merged_video</span>  <span class="c1"># Update mapping for self too</span>
<a id="__codelineno-0-2108" name="__codelineno-0-2108"></a><a href="#__codelineno-0-2108"><span class="linenos" data-linenos="2108 "></span></a>                            <span class="p">)</span>
<a id="__codelineno-0-2109" name="__codelineno-0-2109"></a><a href="#__codelineno-0-2109"><span class="linenos" data-linenos="2109 "></span></a>                            <span class="c1"># Build frame index mapping</span>
<a id="__codelineno-0-2110" name="__codelineno-0-2110"></a><a href="#__codelineno-0-2110"><span class="linenos" data-linenos="2110 "></span></a>                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
<a id="__codelineno-0-2111" name="__codelineno-0-2111"></a><a href="#__codelineno-0-2111"><span class="linenos" data-linenos="2111 "></span></a>                                <span class="n">other_video</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="nb">list</span>
<a id="__codelineno-0-2112" name="__codelineno-0-2112"></a><a href="#__codelineno-0-2112"><span class="linenos" data-linenos="2112 "></span></a>                            <span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">merged_video</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-2113" name="__codelineno-0-2113"></a><a href="#__codelineno-0-2113"><span class="linenos" data-linenos="2113 "></span></a>                                <span class="n">other_basenames</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2114" name="__codelineno-0-2114"></a><a href="#__codelineno-0-2114"><span class="linenos" data-linenos="2114 "></span></a>                                    <span class="n">Path</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">other_video</span><span class="o">.</span><span class="n">filename</span>
<a id="__codelineno-0-2115" name="__codelineno-0-2115"></a><a href="#__codelineno-0-2115"><span class="linenos" data-linenos="2115 "></span></a>                                <span class="p">]</span>
<a id="__codelineno-0-2116" name="__codelineno-0-2116"></a><a href="#__codelineno-0-2116"><span class="linenos" data-linenos="2116 "></span></a>                                <span class="n">merged_basenames</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-2117" name="__codelineno-0-2117"></a><a href="#__codelineno-0-2117"><span class="linenos" data-linenos="2117 "></span></a>                                    <span class="n">Path</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">merged_video</span><span class="o">.</span><span class="n">filename</span>
<a id="__codelineno-0-2118" name="__codelineno-0-2118"></a><a href="#__codelineno-0-2118"><span class="linenos" data-linenos="2118 "></span></a>                                <span class="p">]</span>
<a id="__codelineno-0-2119" name="__codelineno-0-2119"></a><a href="#__codelineno-0-2119"><span class="linenos" data-linenos="2119 "></span></a>                                <span class="k">for</span> <span class="n">old_idx</span><span class="p">,</span> <span class="n">basename</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">other_basenames</span><span class="p">):</span>
<a id="__codelineno-0-2120" name="__codelineno-0-2120"></a><a href="#__codelineno-0-2120"><span class="linenos" data-linenos="2120 "></span></a>                                    <span class="k">if</span> <span class="n">basename</span> <span class="ow">in</span> <span class="n">merged_basenames</span><span class="p">:</span>
<a id="__codelineno-0-2121" name="__codelineno-0-2121"></a><a href="#__codelineno-0-2121"><span class="linenos" data-linenos="2121 "></span></a>                                        <span class="n">new_idx</span> <span class="o">=</span> <span class="n">merged_basenames</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
<a id="__codelineno-0-2122" name="__codelineno-0-2122"></a><a href="#__codelineno-0-2122"><span class="linenos" data-linenos="2122 "></span></a>                                        <span class="n">frame_idx_map</span><span class="p">[(</span><span class="n">other_video</span><span class="p">,</span> <span class="n">old_idx</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2123" name="__codelineno-0-2123"></a><a href="#__codelineno-0-2123"><span class="linenos" data-linenos="2123 "></span></a>                                            <span class="n">merged_video</span><span class="p">,</span>
<a id="__codelineno-0-2124" name="__codelineno-0-2124"></a><a href="#__codelineno-0-2124"><span class="linenos" data-linenos="2124 "></span></a>                                            <span class="n">new_idx</span><span class="p">,</span>
<a id="__codelineno-0-2125" name="__codelineno-0-2125"></a><a href="#__codelineno-0-2125"><span class="linenos" data-linenos="2125 "></span></a>                                        <span class="p">)</span>
<a id="__codelineno-0-2126" name="__codelineno-0-2126"></a><a href="#__codelineno-0-2126"><span class="linenos" data-linenos="2126 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2127" name="__codelineno-0-2127"></a><a href="#__codelineno-0-2127"><span class="linenos" data-linenos="2127 "></span></a>                            <span class="c1"># Regular matching, no special handling</span>
<a id="__codelineno-0-2128" name="__codelineno-0-2128"></a><a href="#__codelineno-0-2128"><span class="linenos" data-linenos="2128 "></span></a>                            <span class="n">video_map</span><span class="p">[</span><span class="n">other_video</span><span class="p">]</span> <span class="o">=</span> <span class="n">self_video</span>
<a id="__codelineno-0-2129" name="__codelineno-0-2129"></a><a href="#__codelineno-0-2129"><span class="linenos" data-linenos="2129 "></span></a>                        <span class="n">matched</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-2130" name="__codelineno-0-2130"></a><a href="#__codelineno-0-2130"><span class="linenos" data-linenos="2130 "></span></a>                        <span class="k">break</span>
<a id="__codelineno-0-2131" name="__codelineno-0-2131"></a><a href="#__codelineno-0-2131"><span class="linenos" data-linenos="2131 "></span></a>
<a id="__codelineno-0-2132" name="__codelineno-0-2132"></a><a href="#__codelineno-0-2132"><span class="linenos" data-linenos="2132 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">matched</span><span class="p">:</span>
<a id="__codelineno-0-2133" name="__codelineno-0-2133"></a><a href="#__codelineno-0-2133"><span class="linenos" data-linenos="2133 "></span></a>                <span class="c1"># Add new video if no match</span>
<a id="__codelineno-0-2134" name="__codelineno-0-2134"></a><a href="#__codelineno-0-2134"><span class="linenos" data-linenos="2134 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other_video</span><span class="p">)</span>
<a id="__codelineno-0-2135" name="__codelineno-0-2135"></a><a href="#__codelineno-0-2135"><span class="linenos" data-linenos="2135 "></span></a>                <span class="n">video_map</span><span class="p">[</span><span class="n">other_video</span><span class="p">]</span> <span class="o">=</span> <span class="n">other_video</span>
<a id="__codelineno-0-2136" name="__codelineno-0-2136"></a><a href="#__codelineno-0-2136"><span class="linenos" data-linenos="2136 "></span></a>
<a id="__codelineno-0-2137" name="__codelineno-0-2137"></a><a href="#__codelineno-0-2137"><span class="linenos" data-linenos="2137 "></span></a>        <span class="c1"># Step 3: Match and merge tracks</span>
<a id="__codelineno-0-2138" name="__codelineno-0-2138"></a><a href="#__codelineno-0-2138"><span class="linenos" data-linenos="2138 "></span></a>        <span class="n">track_map</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-2139" name="__codelineno-0-2139"></a><a href="#__codelineno-0-2139"><span class="linenos" data-linenos="2139 "></span></a>        <span class="k">for</span> <span class="n">other_track</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">tracks</span><span class="p">:</span>
<a id="__codelineno-0-2140" name="__codelineno-0-2140"></a><a href="#__codelineno-0-2140"><span class="linenos" data-linenos="2140 "></span></a>            <span class="n">matched</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-2141" name="__codelineno-0-2141"></a><a href="#__codelineno-0-2141"><span class="linenos" data-linenos="2141 "></span></a>            <span class="k">for</span> <span class="n">self_track</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracks</span><span class="p">:</span>
<a id="__codelineno-0-2142" name="__codelineno-0-2142"></a><a href="#__codelineno-0-2142"><span class="linenos" data-linenos="2142 "></span></a>                <span class="k">if</span> <span class="n">track_matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">self_track</span><span class="p">,</span> <span class="n">other_track</span><span class="p">):</span>
<a id="__codelineno-0-2143" name="__codelineno-0-2143"></a><a href="#__codelineno-0-2143"><span class="linenos" data-linenos="2143 "></span></a>                    <span class="n">track_map</span><span class="p">[</span><span class="n">other_track</span><span class="p">]</span> <span class="o">=</span> <span class="n">self_track</span>
<a id="__codelineno-0-2144" name="__codelineno-0-2144"></a><a href="#__codelineno-0-2144"><span class="linenos" data-linenos="2144 "></span></a>                    <span class="n">matched</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-2145" name="__codelineno-0-2145"></a><a href="#__codelineno-0-2145"><span class="linenos" data-linenos="2145 "></span></a>                    <span class="k">break</span>
<a id="__codelineno-0-2146" name="__codelineno-0-2146"></a><a href="#__codelineno-0-2146"><span class="linenos" data-linenos="2146 "></span></a>
<a id="__codelineno-0-2147" name="__codelineno-0-2147"></a><a href="#__codelineno-0-2147"><span class="linenos" data-linenos="2147 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">matched</span><span class="p">:</span>
<a id="__codelineno-0-2148" name="__codelineno-0-2148"></a><a href="#__codelineno-0-2148"><span class="linenos" data-linenos="2148 "></span></a>                <span class="c1"># Add new track if no match</span>
<a id="__codelineno-0-2149" name="__codelineno-0-2149"></a><a href="#__codelineno-0-2149"><span class="linenos" data-linenos="2149 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tracks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other_track</span><span class="p">)</span>
<a id="__codelineno-0-2150" name="__codelineno-0-2150"></a><a href="#__codelineno-0-2150"><span class="linenos" data-linenos="2150 "></span></a>                <span class="n">track_map</span><span class="p">[</span><span class="n">other_track</span><span class="p">]</span> <span class="o">=</span> <span class="n">other_track</span>
<a id="__codelineno-0-2151" name="__codelineno-0-2151"></a><a href="#__codelineno-0-2151"><span class="linenos" data-linenos="2151 "></span></a>
<a id="__codelineno-0-2152" name="__codelineno-0-2152"></a><a href="#__codelineno-0-2152"><span class="linenos" data-linenos="2152 "></span></a>        <span class="c1"># Step 4: Merge frames</span>
<a id="__codelineno-0-2153" name="__codelineno-0-2153"></a><a href="#__codelineno-0-2153"><span class="linenos" data-linenos="2153 "></span></a>        <span class="n">total_frames</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">)</span>
<a id="__codelineno-0-2154" name="__codelineno-0-2154"></a><a href="#__codelineno-0-2154"><span class="linenos" data-linenos="2154 "></span></a>
<a id="__codelineno-0-2155" name="__codelineno-0-2155"></a><a href="#__codelineno-0-2155"><span class="linenos" data-linenos="2155 "></span></a>        <span class="k">for</span> <span class="n">frame_idx</span><span class="p">,</span> <span class="n">other_frame</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">):</span>
<a id="__codelineno-0-2156" name="__codelineno-0-2156"></a><a href="#__codelineno-0-2156"><span class="linenos" data-linenos="2156 "></span></a>            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
<a id="__codelineno-0-2157" name="__codelineno-0-2157"></a><a href="#__codelineno-0-2157"><span class="linenos" data-linenos="2157 "></span></a>                <span class="n">progress_callback</span><span class="p">(</span>
<a id="__codelineno-0-2158" name="__codelineno-0-2158"></a><a href="#__codelineno-0-2158"><span class="linenos" data-linenos="2158 "></span></a>                    <span class="n">frame_idx</span><span class="p">,</span>
<a id="__codelineno-0-2159" name="__codelineno-0-2159"></a><a href="#__codelineno-0-2159"><span class="linenos" data-linenos="2159 "></span></a>                    <span class="n">total_frames</span><span class="p">,</span>
<a id="__codelineno-0-2160" name="__codelineno-0-2160"></a><a href="#__codelineno-0-2160"><span class="linenos" data-linenos="2160 "></span></a>                    <span class="sa">f</span><span class="s2">&quot;Merging frame </span><span class="si">{</span><span class="n">frame_idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total_frames</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2161" name="__codelineno-0-2161"></a><a href="#__codelineno-0-2161"><span class="linenos" data-linenos="2161 "></span></a>                <span class="p">)</span>
<a id="__codelineno-0-2162" name="__codelineno-0-2162"></a><a href="#__codelineno-0-2162"><span class="linenos" data-linenos="2162 "></span></a>
<a id="__codelineno-0-2163" name="__codelineno-0-2163"></a><a href="#__codelineno-0-2163"><span class="linenos" data-linenos="2163 "></span></a>            <span class="c1"># Check if frame index needs remapping (for deduplicated/merged videos)</span>
<a id="__codelineno-0-2164" name="__codelineno-0-2164"></a><a href="#__codelineno-0-2164"><span class="linenos" data-linenos="2164 "></span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">other_frame</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">other_frame</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span> <span class="ow">in</span> <span class="n">frame_idx_map</span><span class="p">:</span>
<a id="__codelineno-0-2165" name="__codelineno-0-2165"></a><a href="#__codelineno-0-2165"><span class="linenos" data-linenos="2165 "></span></a>                <span class="n">mapped_video</span><span class="p">,</span> <span class="n">mapped_frame_idx</span> <span class="o">=</span> <span class="n">frame_idx_map</span><span class="p">[</span>
<a id="__codelineno-0-2166" name="__codelineno-0-2166"></a><a href="#__codelineno-0-2166"><span class="linenos" data-linenos="2166 "></span></a>                    <span class="p">(</span><span class="n">other_frame</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">other_frame</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span>
<a id="__codelineno-0-2167" name="__codelineno-0-2167"></a><a href="#__codelineno-0-2167"><span class="linenos" data-linenos="2167 "></span></a>                <span class="p">]</span>
<a id="__codelineno-0-2168" name="__codelineno-0-2168"></a><a href="#__codelineno-0-2168"><span class="linenos" data-linenos="2168 "></span></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2169" name="__codelineno-0-2169"></a><a href="#__codelineno-0-2169"><span class="linenos" data-linenos="2169 "></span></a>                <span class="c1"># Map video to self</span>
<a id="__codelineno-0-2170" name="__codelineno-0-2170"></a><a href="#__codelineno-0-2170"><span class="linenos" data-linenos="2170 "></span></a>                <span class="n">mapped_video</span> <span class="o">=</span> <span class="n">video_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">other_frame</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">other_frame</span><span class="o">.</span><span class="n">video</span><span class="p">)</span>
<a id="__codelineno-0-2171" name="__codelineno-0-2171"></a><a href="#__codelineno-0-2171"><span class="linenos" data-linenos="2171 "></span></a>                <span class="n">mapped_frame_idx</span> <span class="o">=</span> <span class="n">other_frame</span><span class="o">.</span><span class="n">frame_idx</span>
<a id="__codelineno-0-2172" name="__codelineno-0-2172"></a><a href="#__codelineno-0-2172"><span class="linenos" data-linenos="2172 "></span></a>
<a id="__codelineno-0-2173" name="__codelineno-0-2173"></a><a href="#__codelineno-0-2173"><span class="linenos" data-linenos="2173 "></span></a>            <span class="c1"># Find matching frame in self</span>
<a id="__codelineno-0-2174" name="__codelineno-0-2174"></a><a href="#__codelineno-0-2174"><span class="linenos" data-linenos="2174 "></span></a>            <span class="n">matching_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">mapped_video</span><span class="p">,</span> <span class="n">mapped_frame_idx</span><span class="p">)</span>
<a id="__codelineno-0-2175" name="__codelineno-0-2175"></a><a href="#__codelineno-0-2175"><span class="linenos" data-linenos="2175 "></span></a>
<a id="__codelineno-0-2176" name="__codelineno-0-2176"></a><a href="#__codelineno-0-2176"><span class="linenos" data-linenos="2176 "></span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching_frames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-2177" name="__codelineno-0-2177"></a><a href="#__codelineno-0-2177"><span class="linenos" data-linenos="2177 "></span></a>                <span class="c1"># No matching frame, create new one</span>
<a id="__codelineno-0-2178" name="__codelineno-0-2178"></a><a href="#__codelineno-0-2178"><span class="linenos" data-linenos="2178 "></span></a>                <span class="n">new_frame</span> <span class="o">=</span> <span class="n">LabeledFrame</span><span class="p">(</span>
<a id="__codelineno-0-2179" name="__codelineno-0-2179"></a><a href="#__codelineno-0-2179"><span class="linenos" data-linenos="2179 "></span></a>                    <span class="n">video</span><span class="o">=</span><span class="n">mapped_video</span><span class="p">,</span>
<a id="__codelineno-0-2180" name="__codelineno-0-2180"></a><a href="#__codelineno-0-2180"><span class="linenos" data-linenos="2180 "></span></a>                    <span class="n">frame_idx</span><span class="o">=</span><span class="n">mapped_frame_idx</span><span class="p">,</span>
<a id="__codelineno-0-2181" name="__codelineno-0-2181"></a><a href="#__codelineno-0-2181"><span class="linenos" data-linenos="2181 "></span></a>                    <span class="n">instances</span><span class="o">=</span><span class="p">[],</span>
<a id="__codelineno-0-2182" name="__codelineno-0-2182"></a><a href="#__codelineno-0-2182"><span class="linenos" data-linenos="2182 "></span></a>                <span class="p">)</span>
<a id="__codelineno-0-2183" name="__codelineno-0-2183"></a><a href="#__codelineno-0-2183"><span class="linenos" data-linenos="2183 "></span></a>
<a id="__codelineno-0-2184" name="__codelineno-0-2184"></a><a href="#__codelineno-0-2184"><span class="linenos" data-linenos="2184 "></span></a>                <span class="c1"># Map instances to new skeleton/track</span>
<a id="__codelineno-0-2185" name="__codelineno-0-2185"></a><a href="#__codelineno-0-2185"><span class="linenos" data-linenos="2185 "></span></a>                <span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">other_frame</span><span class="o">.</span><span class="n">instances</span><span class="p">:</span>
<a id="__codelineno-0-2186" name="__codelineno-0-2186"></a><a href="#__codelineno-0-2186"><span class="linenos" data-linenos="2186 "></span></a>                    <span class="n">new_inst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_instance</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span> <span class="n">skeleton_map</span><span class="p">,</span> <span class="n">track_map</span><span class="p">)</span>
<a id="__codelineno-0-2187" name="__codelineno-0-2187"></a><a href="#__codelineno-0-2187"><span class="linenos" data-linenos="2187 "></span></a>                    <span class="n">new_frame</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_inst</span><span class="p">)</span>
<a id="__codelineno-0-2188" name="__codelineno-0-2188"></a><a href="#__codelineno-0-2188"><span class="linenos" data-linenos="2188 "></span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">instances_added</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-2189" name="__codelineno-0-2189"></a><a href="#__codelineno-0-2189"><span class="linenos" data-linenos="2189 "></span></a>
<a id="__codelineno-0-2190" name="__codelineno-0-2190"></a><a href="#__codelineno-0-2190"><span class="linenos" data-linenos="2190 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_frame</span><span class="p">)</span>
<a id="__codelineno-0-2191" name="__codelineno-0-2191"></a><a href="#__codelineno-0-2191"><span class="linenos" data-linenos="2191 "></span></a>                <span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-2192" name="__codelineno-0-2192"></a><a href="#__codelineno-0-2192"><span class="linenos" data-linenos="2192 "></span></a>
<a id="__codelineno-0-2193" name="__codelineno-0-2193"></a><a href="#__codelineno-0-2193"><span class="linenos" data-linenos="2193 "></span></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2194" name="__codelineno-0-2194"></a><a href="#__codelineno-0-2194"><span class="linenos" data-linenos="2194 "></span></a>                <span class="c1"># Merge into existing frame</span>
<a id="__codelineno-0-2195" name="__codelineno-0-2195"></a><a href="#__codelineno-0-2195"><span class="linenos" data-linenos="2195 "></span></a>                <span class="n">self_frame</span> <span class="o">=</span> <span class="n">matching_frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-2196" name="__codelineno-0-2196"></a><a href="#__codelineno-0-2196"><span class="linenos" data-linenos="2196 "></span></a>
<a id="__codelineno-0-2197" name="__codelineno-0-2197"></a><a href="#__codelineno-0-2197"><span class="linenos" data-linenos="2197 "></span></a>                <span class="c1"># Merge instances using frame-level merge</span>
<a id="__codelineno-0-2198" name="__codelineno-0-2198"></a><a href="#__codelineno-0-2198"><span class="linenos" data-linenos="2198 "></span></a>                <span class="n">merged_instances</span><span class="p">,</span> <span class="n">conflicts</span> <span class="o">=</span> <span class="n">self_frame</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-0-2199" name="__codelineno-0-2199"></a><a href="#__codelineno-0-2199"><span class="linenos" data-linenos="2199 "></span></a>                    <span class="n">other_frame</span><span class="p">,</span>
<a id="__codelineno-0-2200" name="__codelineno-0-2200"></a><a href="#__codelineno-0-2200"><span class="linenos" data-linenos="2200 "></span></a>                    <span class="n">instance_matcher</span><span class="o">=</span><span class="n">instance_matcher</span><span class="p">,</span>
<a id="__codelineno-0-2201" name="__codelineno-0-2201"></a><a href="#__codelineno-0-2201"><span class="linenos" data-linenos="2201 "></span></a>                    <span class="n">strategy</span><span class="o">=</span><span class="n">frame_strategy</span><span class="p">,</span>
<a id="__codelineno-0-2202" name="__codelineno-0-2202"></a><a href="#__codelineno-0-2202"><span class="linenos" data-linenos="2202 "></span></a>                <span class="p">)</span>
<a id="__codelineno-0-2203" name="__codelineno-0-2203"></a><a href="#__codelineno-0-2203"><span class="linenos" data-linenos="2203 "></span></a>
<a id="__codelineno-0-2204" name="__codelineno-0-2204"></a><a href="#__codelineno-0-2204"><span class="linenos" data-linenos="2204 "></span></a>                <span class="c1"># Remap skeleton and track references for instances from other frame</span>
<a id="__codelineno-0-2205" name="__codelineno-0-2205"></a><a href="#__codelineno-0-2205"><span class="linenos" data-linenos="2205 "></span></a>                <span class="n">remapped_instances</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-2206" name="__codelineno-0-2206"></a><a href="#__codelineno-0-2206"><span class="linenos" data-linenos="2206 "></span></a>                <span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">merged_instances</span><span class="p">:</span>
<a id="__codelineno-0-2207" name="__codelineno-0-2207"></a><a href="#__codelineno-0-2207"><span class="linenos" data-linenos="2207 "></span></a>                    <span class="c1"># Check if instance needs remapping (from other_frame)</span>
<a id="__codelineno-0-2208" name="__codelineno-0-2208"></a><a href="#__codelineno-0-2208"><span class="linenos" data-linenos="2208 "></span></a>                    <span class="k">if</span> <span class="n">inst</span><span class="o">.</span><span class="n">skeleton</span> <span class="ow">in</span> <span class="n">skeleton_map</span><span class="p">:</span>
<a id="__codelineno-0-2209" name="__codelineno-0-2209"></a><a href="#__codelineno-0-2209"><span class="linenos" data-linenos="2209 "></span></a>                        <span class="c1"># Instance needs remapping</span>
<a id="__codelineno-0-2210" name="__codelineno-0-2210"></a><a href="#__codelineno-0-2210"><span class="linenos" data-linenos="2210 "></span></a>                        <span class="n">remapped_inst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_instance</span><span class="p">(</span>
<a id="__codelineno-0-2211" name="__codelineno-0-2211"></a><a href="#__codelineno-0-2211"><span class="linenos" data-linenos="2211 "></span></a>                            <span class="n">inst</span><span class="p">,</span> <span class="n">skeleton_map</span><span class="p">,</span> <span class="n">track_map</span>
<a id="__codelineno-0-2212" name="__codelineno-0-2212"></a><a href="#__codelineno-0-2212"><span class="linenos" data-linenos="2212 "></span></a>                        <span class="p">)</span>
<a id="__codelineno-0-2213" name="__codelineno-0-2213"></a><a href="#__codelineno-0-2213"><span class="linenos" data-linenos="2213 "></span></a>                        <span class="n">remapped_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">remapped_inst</span><span class="p">)</span>
<a id="__codelineno-0-2214" name="__codelineno-0-2214"></a><a href="#__codelineno-0-2214"><span class="linenos" data-linenos="2214 "></span></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2215" name="__codelineno-0-2215"></a><a href="#__codelineno-0-2215"><span class="linenos" data-linenos="2215 "></span></a>                        <span class="c1"># Instance already has correct skeleton (from self_frame)</span>
<a id="__codelineno-0-2216" name="__codelineno-0-2216"></a><a href="#__codelineno-0-2216"><span class="linenos" data-linenos="2216 "></span></a>                        <span class="n">remapped_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>
<a id="__codelineno-0-2217" name="__codelineno-0-2217"></a><a href="#__codelineno-0-2217"><span class="linenos" data-linenos="2217 "></span></a>                <span class="n">merged_instances</span> <span class="o">=</span> <span class="n">remapped_instances</span>
<a id="__codelineno-0-2218" name="__codelineno-0-2218"></a><a href="#__codelineno-0-2218"><span class="linenos" data-linenos="2218 "></span></a>
<a id="__codelineno-0-2219" name="__codelineno-0-2219"></a><a href="#__codelineno-0-2219"><span class="linenos" data-linenos="2219 "></span></a>                <span class="c1"># Count changes</span>
<a id="__codelineno-0-2220" name="__codelineno-0-2220"></a><a href="#__codelineno-0-2220"><span class="linenos" data-linenos="2220 "></span></a>                <span class="n">n_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">self_frame</span><span class="o">.</span><span class="n">instances</span><span class="p">)</span>
<a id="__codelineno-0-2221" name="__codelineno-0-2221"></a><a href="#__codelineno-0-2221"><span class="linenos" data-linenos="2221 "></span></a>                <span class="n">n_after</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">merged_instances</span><span class="p">)</span>
<a id="__codelineno-0-2222" name="__codelineno-0-2222"></a><a href="#__codelineno-0-2222"><span class="linenos" data-linenos="2222 "></span></a>                <span class="n">result</span><span class="o">.</span><span class="n">instances_added</span> <span class="o">+=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_after</span> <span class="o">-</span> <span class="n">n_before</span><span class="p">)</span>
<a id="__codelineno-0-2223" name="__codelineno-0-2223"></a><a href="#__codelineno-0-2223"><span class="linenos" data-linenos="2223 "></span></a>
<a id="__codelineno-0-2224" name="__codelineno-0-2224"></a><a href="#__codelineno-0-2224"><span class="linenos" data-linenos="2224 "></span></a>                <span class="c1"># Record conflicts</span>
<a id="__codelineno-0-2225" name="__codelineno-0-2225"></a><a href="#__codelineno-0-2225"><span class="linenos" data-linenos="2225 "></span></a>                <span class="k">for</span> <span class="n">orig</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">resolution</span> <span class="ow">in</span> <span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-0-2226" name="__codelineno-0-2226"></a><a href="#__codelineno-0-2226"><span class="linenos" data-linenos="2226 "></span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-2227" name="__codelineno-0-2227"></a><a href="#__codelineno-0-2227"><span class="linenos" data-linenos="2227 "></span></a>                        <span class="n">ConflictResolution</span><span class="p">(</span>
<a id="__codelineno-0-2228" name="__codelineno-0-2228"></a><a href="#__codelineno-0-2228"><span class="linenos" data-linenos="2228 "></span></a>                            <span class="n">frame</span><span class="o">=</span><span class="n">self_frame</span><span class="p">,</span>
<a id="__codelineno-0-2229" name="__codelineno-0-2229"></a><a href="#__codelineno-0-2229"><span class="linenos" data-linenos="2229 "></span></a>                            <span class="n">conflict_type</span><span class="o">=</span><span class="s2">&quot;instance_conflict&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2230" name="__codelineno-0-2230"></a><a href="#__codelineno-0-2230"><span class="linenos" data-linenos="2230 "></span></a>                            <span class="n">original_data</span><span class="o">=</span><span class="n">orig</span><span class="p">,</span>
<a id="__codelineno-0-2231" name="__codelineno-0-2231"></a><a href="#__codelineno-0-2231"><span class="linenos" data-linenos="2231 "></span></a>                            <span class="n">new_data</span><span class="o">=</span><span class="n">new</span><span class="p">,</span>
<a id="__codelineno-0-2232" name="__codelineno-0-2232"></a><a href="#__codelineno-0-2232"><span class="linenos" data-linenos="2232 "></span></a>                            <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
<a id="__codelineno-0-2233" name="__codelineno-0-2233"></a><a href="#__codelineno-0-2233"><span class="linenos" data-linenos="2233 "></span></a>                        <span class="p">)</span>
<a id="__codelineno-0-2234" name="__codelineno-0-2234"></a><a href="#__codelineno-0-2234"><span class="linenos" data-linenos="2234 "></span></a>                    <span class="p">)</span>
<a id="__codelineno-0-2235" name="__codelineno-0-2235"></a><a href="#__codelineno-0-2235"><span class="linenos" data-linenos="2235 "></span></a>
<a id="__codelineno-0-2236" name="__codelineno-0-2236"></a><a href="#__codelineno-0-2236"><span class="linenos" data-linenos="2236 "></span></a>                <span class="c1"># Update frame instances</span>
<a id="__codelineno-0-2237" name="__codelineno-0-2237"></a><a href="#__codelineno-0-2237"><span class="linenos" data-linenos="2237 "></span></a>                <span class="n">self_frame</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">merged_instances</span>
<a id="__codelineno-0-2238" name="__codelineno-0-2238"></a><a href="#__codelineno-0-2238"><span class="linenos" data-linenos="2238 "></span></a>                <span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-2239" name="__codelineno-0-2239"></a><a href="#__codelineno-0-2239"><span class="linenos" data-linenos="2239 "></span></a>
<a id="__codelineno-0-2240" name="__codelineno-0-2240"></a><a href="#__codelineno-0-2240"><span class="linenos" data-linenos="2240 "></span></a>        <span class="c1"># Step 5: Merge suggestions</span>
<a id="__codelineno-0-2241" name="__codelineno-0-2241"></a><a href="#__codelineno-0-2241"><span class="linenos" data-linenos="2241 "></span></a>        <span class="k">for</span> <span class="n">other_suggestion</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">suggestions</span><span class="p">:</span>
<a id="__codelineno-0-2242" name="__codelineno-0-2242"></a><a href="#__codelineno-0-2242"><span class="linenos" data-linenos="2242 "></span></a>            <span class="n">mapped_video</span> <span class="o">=</span> <span class="n">video_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-2243" name="__codelineno-0-2243"></a><a href="#__codelineno-0-2243"><span class="linenos" data-linenos="2243 "></span></a>                <span class="n">other_suggestion</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">other_suggestion</span><span class="o">.</span><span class="n">video</span>
<a id="__codelineno-0-2244" name="__codelineno-0-2244"></a><a href="#__codelineno-0-2244"><span class="linenos" data-linenos="2244 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-2245" name="__codelineno-0-2245"></a><a href="#__codelineno-0-2245"><span class="linenos" data-linenos="2245 "></span></a>            <span class="c1"># Check if suggestion already exists</span>
<a id="__codelineno-0-2246" name="__codelineno-0-2246"></a><a href="#__codelineno-0-2246"><span class="linenos" data-linenos="2246 "></span></a>            <span class="n">exists</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-2247" name="__codelineno-0-2247"></a><a href="#__codelineno-0-2247"><span class="linenos" data-linenos="2247 "></span></a>            <span class="k">for</span> <span class="n">self_suggestion</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">suggestions</span><span class="p">:</span>
<a id="__codelineno-0-2248" name="__codelineno-0-2248"></a><a href="#__codelineno-0-2248"><span class="linenos" data-linenos="2248 "></span></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-2249" name="__codelineno-0-2249"></a><a href="#__codelineno-0-2249"><span class="linenos" data-linenos="2249 "></span></a>                    <span class="n">self_suggestion</span><span class="o">.</span><span class="n">video</span> <span class="o">==</span> <span class="n">mapped_video</span>
<a id="__codelineno-0-2250" name="__codelineno-0-2250"></a><a href="#__codelineno-0-2250"><span class="linenos" data-linenos="2250 "></span></a>                    <span class="ow">and</span> <span class="n">self_suggestion</span><span class="o">.</span><span class="n">frame_idx</span> <span class="o">==</span> <span class="n">other_suggestion</span><span class="o">.</span><span class="n">frame_idx</span>
<a id="__codelineno-0-2251" name="__codelineno-0-2251"></a><a href="#__codelineno-0-2251"><span class="linenos" data-linenos="2251 "></span></a>                <span class="p">):</span>
<a id="__codelineno-0-2252" name="__codelineno-0-2252"></a><a href="#__codelineno-0-2252"><span class="linenos" data-linenos="2252 "></span></a>                    <span class="n">exists</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-2253" name="__codelineno-0-2253"></a><a href="#__codelineno-0-2253"><span class="linenos" data-linenos="2253 "></span></a>                    <span class="k">break</span>
<a id="__codelineno-0-2254" name="__codelineno-0-2254"></a><a href="#__codelineno-0-2254"><span class="linenos" data-linenos="2254 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">:</span>
<a id="__codelineno-0-2255" name="__codelineno-0-2255"></a><a href="#__codelineno-0-2255"><span class="linenos" data-linenos="2255 "></span></a>                <span class="c1"># Create new suggestion with mapped video</span>
<a id="__codelineno-0-2256" name="__codelineno-0-2256"></a><a href="#__codelineno-0-2256"><span class="linenos" data-linenos="2256 "></span></a>                <span class="n">new_suggestion</span> <span class="o">=</span> <span class="n">SuggestionFrame</span><span class="p">(</span>
<a id="__codelineno-0-2257" name="__codelineno-0-2257"></a><a href="#__codelineno-0-2257"><span class="linenos" data-linenos="2257 "></span></a>                    <span class="n">video</span><span class="o">=</span><span class="n">mapped_video</span><span class="p">,</span> <span class="n">frame_idx</span><span class="o">=</span><span class="n">other_suggestion</span><span class="o">.</span><span class="n">frame_idx</span>
<a id="__codelineno-0-2258" name="__codelineno-0-2258"></a><a href="#__codelineno-0-2258"><span class="linenos" data-linenos="2258 "></span></a>                <span class="p">)</span>
<a id="__codelineno-0-2259" name="__codelineno-0-2259"></a><a href="#__codelineno-0-2259"><span class="linenos" data-linenos="2259 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">suggestions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_suggestion</span><span class="p">)</span>
<a id="__codelineno-0-2260" name="__codelineno-0-2260"></a><a href="#__codelineno-0-2260"><span class="linenos" data-linenos="2260 "></span></a>
<a id="__codelineno-0-2261" name="__codelineno-0-2261"></a><a href="#__codelineno-0-2261"><span class="linenos" data-linenos="2261 "></span></a>        <span class="c1"># Update merge record</span>
<a id="__codelineno-0-2262" name="__codelineno-0-2262"></a><a href="#__codelineno-0-2262"><span class="linenos" data-linenos="2262 "></span></a>        <span class="n">merge_record</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-2263" name="__codelineno-0-2263"></a><a href="#__codelineno-0-2263"><span class="linenos" data-linenos="2263 "></span></a>            <span class="s2">&quot;frames_merged&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span><span class="p">,</span>
<a id="__codelineno-0-2264" name="__codelineno-0-2264"></a><a href="#__codelineno-0-2264"><span class="linenos" data-linenos="2264 "></span></a>            <span class="s2">&quot;instances_added&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">instances_added</span><span class="p">,</span>
<a id="__codelineno-0-2265" name="__codelineno-0-2265"></a><a href="#__codelineno-0-2265"><span class="linenos" data-linenos="2265 "></span></a>            <span class="s2">&quot;conflicts&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="p">),</span>
<a id="__codelineno-0-2266" name="__codelineno-0-2266"></a><a href="#__codelineno-0-2266"><span class="linenos" data-linenos="2266 "></span></a>        <span class="p">}</span>
<a id="__codelineno-0-2267" name="__codelineno-0-2267"></a><a href="#__codelineno-0-2267"><span class="linenos" data-linenos="2267 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">provenance</span><span class="p">[</span><span class="s2">&quot;merge_history&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">merge_record</span><span class="p">)</span>
<a id="__codelineno-0-2268" name="__codelineno-0-2268"></a><a href="#__codelineno-0-2268"><span class="linenos" data-linenos="2268 "></span></a>
<a id="__codelineno-0-2269" name="__codelineno-0-2269"></a><a href="#__codelineno-0-2269"><span class="linenos" data-linenos="2269 "></span></a>    <span class="k">except</span> <span class="n">MergeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-2270" name="__codelineno-0-2270"></a><a href="#__codelineno-0-2270"><span class="linenos" data-linenos="2270 "></span></a>        <span class="n">result</span><span class="o">.</span><span class="n">successful</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-2271" name="__codelineno-0-2271"></a><a href="#__codelineno-0-2271"><span class="linenos" data-linenos="2271 "></span></a>        <span class="n">result</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<a id="__codelineno-0-2272" name="__codelineno-0-2272"></a><a href="#__codelineno-0-2272"><span class="linenos" data-linenos="2272 "></span></a>        <span class="k">if</span> <span class="n">error_mode_enum</span> <span class="o">==</span> <span class="n">ErrorMode</span><span class="o">.</span><span class="n">STRICT</span><span class="p">:</span>
<a id="__codelineno-0-2273" name="__codelineno-0-2273"></a><a href="#__codelineno-0-2273"><span class="linenos" data-linenos="2273 "></span></a>            <span class="k">raise</span>
<a id="__codelineno-0-2274" name="__codelineno-0-2274"></a><a href="#__codelineno-0-2274"><span class="linenos" data-linenos="2274 "></span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-2275" name="__codelineno-0-2275"></a><a href="#__codelineno-0-2275"><span class="linenos" data-linenos="2275 "></span></a>        <span class="n">result</span><span class="o">.</span><span class="n">successful</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-2276" name="__codelineno-0-2276"></a><a href="#__codelineno-0-2276"><span class="linenos" data-linenos="2276 "></span></a>        <span class="n">result</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-2277" name="__codelineno-0-2277"></a><a href="#__codelineno-0-2277"><span class="linenos" data-linenos="2277 "></span></a>            <span class="n">MergeError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">details</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;exception&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">})</span>
<a id="__codelineno-0-2278" name="__codelineno-0-2278"></a><a href="#__codelineno-0-2278"><span class="linenos" data-linenos="2278 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-2279" name="__codelineno-0-2279"></a><a href="#__codelineno-0-2279"><span class="linenos" data-linenos="2279 "></span></a>        <span class="k">if</span> <span class="n">error_mode_enum</span> <span class="o">==</span> <span class="n">ErrorMode</span><span class="o">.</span><span class="n">STRICT</span><span class="p">:</span>
<a id="__codelineno-0-2280" name="__codelineno-0-2280"></a><a href="#__codelineno-0-2280"><span class="linenos" data-linenos="2280 "></span></a>            <span class="k">raise</span>
<a id="__codelineno-0-2281" name="__codelineno-0-2281"></a><a href="#__codelineno-0-2281"><span class="linenos" data-linenos="2281 "></span></a>
<a id="__codelineno-0-2282" name="__codelineno-0-2282"></a><a href="#__codelineno-0-2282"><span class="linenos" data-linenos="2282 "></span></a>    <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
<a id="__codelineno-0-2283" name="__codelineno-0-2283"></a><a href="#__codelineno-0-2283"><span class="linenos" data-linenos="2283 "></span></a>        <span class="n">progress_callback</span><span class="p">(</span><span class="n">total_frames</span><span class="p">,</span> <span class="n">total_frames</span><span class="p">,</span> <span class="s2">&quot;Merge complete&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2284" name="__codelineno-0-2284"></a><a href="#__codelineno-0-2284"><span class="linenos" data-linenos="2284 "></span></a>
<a id="__codelineno-0-2285" name="__codelineno-0-2285"></a><a href="#__codelineno-0-2285"><span class="linenos" data-linenos="2285 "></span></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
            </details>
    </div>

</div><h3 id="labelsreplace_filenames">Labels.replace_filenames<a class="headerlink" href="#labelsreplace_filenames" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">


<h4 id="sleap_io.model.labels.Labels.replace_filenames" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Labels</span><span class="o">.</span><span class="n">replace_filenames</span><span class="p">(</span><span class="n">new_filenames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">open_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#sleap_io.model.labels.Labels.replace_filenames" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Replace video filenames.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_filenames</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | <span title="pathlib.Path">Path</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of new filenames. Must have the same length as the
number of videos in the labels.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename_map</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span> | <span title="pathlib.Path">Path</span>, <span title="str">str</span> | <span title="pathlib.Path">Path</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping old filenames (keys) to new filenames
(values).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prefix_map</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span> | <span title="pathlib.Path">Path</span>, <span title="str">str</span> | <span title="pathlib.Path">Path</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping old prefixes (keys) to new prefixes (values).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>open_videos</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code> (the default), attempt to open the video backend for
I/O after replacing the filename. If <code>False</code>, the backend will not be
opened (useful for operations with costly file existence checks).</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <p>Only one of the argument types can be provided.</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/labels.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1209" name="__codelineno-0-1209"></a><a href="#__codelineno-0-1209"><span class="linenos" data-linenos="1209 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">replace_filenames</span><span class="p">(</span>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a><a href="#__codelineno-0-1210"><span class="linenos" data-linenos="1210 "></span></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a><a href="#__codelineno-0-1211"><span class="linenos" data-linenos="1211 "></span></a>    <span class="n">new_filenames</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a><a href="#__codelineno-0-1212"><span class="linenos" data-linenos="1212 "></span></a>    <span class="n">filename_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a><a href="#__codelineno-0-1213"><span class="linenos" data-linenos="1213 "></span></a>    <span class="n">prefix_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a><a href="#__codelineno-0-1214"><span class="linenos" data-linenos="1214 "></span></a>    <span class="n">open_videos</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a><a href="#__codelineno-0-1215"><span class="linenos" data-linenos="1215 "></span></a><span class="p">):</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a><a href="#__codelineno-0-1216"><span class="linenos" data-linenos="1216 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Replace video filenames.</span>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a><a href="#__codelineno-0-1217"><span class="linenos" data-linenos="1217 "></span></a>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a><a href="#__codelineno-0-1218"><span class="linenos" data-linenos="1218 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a><a href="#__codelineno-0-1219"><span class="linenos" data-linenos="1219 "></span></a><span class="sd">        new_filenames: List of new filenames. Must have the same length as the</span>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a><a href="#__codelineno-0-1220"><span class="linenos" data-linenos="1220 "></span></a><span class="sd">            number of videos in the labels.</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a><a href="#__codelineno-0-1221"><span class="linenos" data-linenos="1221 "></span></a><span class="sd">        filename_map: Dictionary mapping old filenames (keys) to new filenames</span>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a><a href="#__codelineno-0-1222"><span class="linenos" data-linenos="1222 "></span></a><span class="sd">            (values).</span>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a><a href="#__codelineno-0-1223"><span class="linenos" data-linenos="1223 "></span></a><span class="sd">        prefix_map: Dictionary mapping old prefixes (keys) to new prefixes (values).</span>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a><a href="#__codelineno-0-1224"><span class="linenos" data-linenos="1224 "></span></a><span class="sd">        open_videos: If `True` (the default), attempt to open the video backend for</span>
<a id="__codelineno-0-1225" name="__codelineno-0-1225"></a><a href="#__codelineno-0-1225"><span class="linenos" data-linenos="1225 "></span></a><span class="sd">            I/O after replacing the filename. If `False`, the backend will not be</span>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a><a href="#__codelineno-0-1226"><span class="linenos" data-linenos="1226 "></span></a><span class="sd">            opened (useful for operations with costly file existence checks).</span>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a><a href="#__codelineno-0-1227"><span class="linenos" data-linenos="1227 "></span></a>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a><a href="#__codelineno-0-1228"><span class="linenos" data-linenos="1228 "></span></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a><a href="#__codelineno-0-1229"><span class="linenos" data-linenos="1229 "></span></a><span class="sd">        Only one of the argument types can be provided.</span>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a><a href="#__codelineno-0-1230"><span class="linenos" data-linenos="1230 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a><a href="#__codelineno-0-1231"><span class="linenos" data-linenos="1231 "></span></a>    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a><a href="#__codelineno-0-1232"><span class="linenos" data-linenos="1232 "></span></a>    <span class="k">if</span> <span class="n">new_filenames</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a><a href="#__codelineno-0-1233"><span class="linenos" data-linenos="1233 "></span></a>        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><a href="#__codelineno-0-1234"><span class="linenos" data-linenos="1234 "></span></a>    <span class="k">if</span> <span class="n">filename_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a><a href="#__codelineno-0-1235"><span class="linenos" data-linenos="1235 "></span></a>        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><a href="#__codelineno-0-1236"><span class="linenos" data-linenos="1236 "></span></a>    <span class="k">if</span> <span class="n">prefix_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a><a href="#__codelineno-0-1237"><span class="linenos" data-linenos="1237 "></span></a>        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a><a href="#__codelineno-0-1238"><span class="linenos" data-linenos="1238 "></span></a>    <span class="k">if</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><a href="#__codelineno-0-1239"><span class="linenos" data-linenos="1239 "></span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a><a href="#__codelineno-0-1240"><span class="linenos" data-linenos="1240 "></span></a>            <span class="s2">&quot;Exactly one input method must be provided to replace filenames.&quot;</span>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><a href="#__codelineno-0-1241"><span class="linenos" data-linenos="1241 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><a href="#__codelineno-0-1242"><span class="linenos" data-linenos="1242 "></span></a>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a><a href="#__codelineno-0-1243"><span class="linenos" data-linenos="1243 "></span></a>    <span class="k">if</span> <span class="n">new_filenames</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a><a href="#__codelineno-0-1244"><span class="linenos" data-linenos="1244 "></span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_filenames</span><span class="p">):</span>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a><a href="#__codelineno-0-1245"><span class="linenos" data-linenos="1245 "></span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a><a href="#__codelineno-0-1246"><span class="linenos" data-linenos="1246 "></span></a>                <span class="sa">f</span><span class="s2">&quot;Number of new filenames (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">new_filenames</span><span class="p">)</span><span class="si">}</span><span class="s2">) does not match &quot;</span>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a><a href="#__codelineno-0-1247"><span class="linenos" data-linenos="1247 "></span></a>                <span class="sa">f</span><span class="s2">&quot;the number of videos (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">)</span><span class="si">}</span><span class="s2">).&quot;</span>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a><a href="#__codelineno-0-1248"><span class="linenos" data-linenos="1248 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a><a href="#__codelineno-0-1249"><span class="linenos" data-linenos="1249 "></span></a>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a><a href="#__codelineno-0-1250"><span class="linenos" data-linenos="1250 "></span></a>        <span class="k">for</span> <span class="n">video</span><span class="p">,</span> <span class="n">new_filename</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">,</span> <span class="n">new_filenames</span><span class="p">):</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a><a href="#__codelineno-0-1251"><span class="linenos" data-linenos="1251 "></span></a>            <span class="n">video</span><span class="o">.</span><span class="n">replace_filename</span><span class="p">(</span><span class="n">new_filename</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">open_videos</span><span class="p">)</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a><a href="#__codelineno-0-1252"><span class="linenos" data-linenos="1252 "></span></a>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a><a href="#__codelineno-0-1253"><span class="linenos" data-linenos="1253 "></span></a>    <span class="k">elif</span> <span class="n">filename_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a><a href="#__codelineno-0-1254"><span class="linenos" data-linenos="1254 "></span></a>        <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a><a href="#__codelineno-0-1255"><span class="linenos" data-linenos="1255 "></span></a>            <span class="k">for</span> <span class="n">old_fn</span><span class="p">,</span> <span class="n">new_fn</span> <span class="ow">in</span> <span class="n">filename_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a><a href="#__codelineno-0-1256"><span class="linenos" data-linenos="1256 "></span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">video</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a><a href="#__codelineno-0-1257"><span class="linenos" data-linenos="1257 "></span></a>                    <span class="n">new_fns</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a><a href="#__codelineno-0-1258"><span class="linenos" data-linenos="1258 "></span></a>                    <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">video</span><span class="o">.</span><span class="n">filename</span><span class="p">:</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a><a href="#__codelineno-0-1259"><span class="linenos" data-linenos="1259 "></span></a>                        <span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="o">==</span> <span class="n">Path</span><span class="p">(</span><span class="n">old_fn</span><span class="p">):</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a><a href="#__codelineno-0-1260"><span class="linenos" data-linenos="1260 "></span></a>                            <span class="n">new_fns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_fn</span><span class="p">)</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a><a href="#__codelineno-0-1261"><span class="linenos" data-linenos="1261 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a><a href="#__codelineno-0-1262"><span class="linenos" data-linenos="1262 "></span></a>                            <span class="n">new_fns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a><a href="#__codelineno-0-1263"><span class="linenos" data-linenos="1263 "></span></a>                    <span class="n">video</span><span class="o">.</span><span class="n">replace_filename</span><span class="p">(</span><span class="n">new_fns</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">open_videos</span><span class="p">)</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a><a href="#__codelineno-0-1264"><span class="linenos" data-linenos="1264 "></span></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1265" name="__codelineno-0-1265"></a><a href="#__codelineno-0-1265"><span class="linenos" data-linenos="1265 "></span></a>                    <span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">video</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span> <span class="o">==</span> <span class="n">Path</span><span class="p">(</span><span class="n">old_fn</span><span class="p">):</span>
<a id="__codelineno-0-1266" name="__codelineno-0-1266"></a><a href="#__codelineno-0-1266"><span class="linenos" data-linenos="1266 "></span></a>                        <span class="n">video</span><span class="o">.</span><span class="n">replace_filename</span><span class="p">(</span><span class="n">new_fn</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">open_videos</span><span class="p">)</span>
<a id="__codelineno-0-1267" name="__codelineno-0-1267"></a><a href="#__codelineno-0-1267"><span class="linenos" data-linenos="1267 "></span></a>
<a id="__codelineno-0-1268" name="__codelineno-0-1268"></a><a href="#__codelineno-0-1268"><span class="linenos" data-linenos="1268 "></span></a>    <span class="k">elif</span> <span class="n">prefix_map</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1269" name="__codelineno-0-1269"></a><a href="#__codelineno-0-1269"><span class="linenos" data-linenos="1269 "></span></a>        <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-0-1270" name="__codelineno-0-1270"></a><a href="#__codelineno-0-1270"><span class="linenos" data-linenos="1270 "></span></a>            <span class="k">for</span> <span class="n">old_prefix</span><span class="p">,</span> <span class="n">new_prefix</span> <span class="ow">in</span> <span class="n">prefix_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-1271" name="__codelineno-0-1271"></a><a href="#__codelineno-0-1271"><span class="linenos" data-linenos="1271 "></span></a>                <span class="c1"># Sanitize old_prefix for cross-platform matching</span>
<a id="__codelineno-0-1272" name="__codelineno-0-1272"></a><a href="#__codelineno-0-1272"><span class="linenos" data-linenos="1272 "></span></a>                <span class="n">old_prefix_sanitized</span> <span class="o">=</span> <span class="n">sanitize_filename</span><span class="p">(</span><span class="n">old_prefix</span><span class="p">)</span>
<a id="__codelineno-0-1273" name="__codelineno-0-1273"></a><a href="#__codelineno-0-1273"><span class="linenos" data-linenos="1273 "></span></a>
<a id="__codelineno-0-1274" name="__codelineno-0-1274"></a><a href="#__codelineno-0-1274"><span class="linenos" data-linenos="1274 "></span></a>                <span class="c1"># Check if old prefix ends with a separator</span>
<a id="__codelineno-0-1275" name="__codelineno-0-1275"></a><a href="#__codelineno-0-1275"><span class="linenos" data-linenos="1275 "></span></a>                <span class="n">old_ends_with_sep</span> <span class="o">=</span> <span class="n">old_prefix_sanitized</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1276" name="__codelineno-0-1276"></a><a href="#__codelineno-0-1276"><span class="linenos" data-linenos="1276 "></span></a>
<a id="__codelineno-0-1277" name="__codelineno-0-1277"></a><a href="#__codelineno-0-1277"><span class="linenos" data-linenos="1277 "></span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">video</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
<a id="__codelineno-0-1278" name="__codelineno-0-1278"></a><a href="#__codelineno-0-1278"><span class="linenos" data-linenos="1278 "></span></a>                    <span class="n">new_fns</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1279" name="__codelineno-0-1279"></a><a href="#__codelineno-0-1279"><span class="linenos" data-linenos="1279 "></span></a>                    <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">video</span><span class="o">.</span><span class="n">filename</span><span class="p">:</span>
<a id="__codelineno-0-1280" name="__codelineno-0-1280"></a><a href="#__codelineno-0-1280"><span class="linenos" data-linenos="1280 "></span></a>                        <span class="c1"># Sanitize filename for matching</span>
<a id="__codelineno-0-1281" name="__codelineno-0-1281"></a><a href="#__codelineno-0-1281"><span class="linenos" data-linenos="1281 "></span></a>                        <span class="n">fn_sanitized</span> <span class="o">=</span> <span class="n">sanitize_filename</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<a id="__codelineno-0-1282" name="__codelineno-0-1282"></a><a href="#__codelineno-0-1282"><span class="linenos" data-linenos="1282 "></span></a>
<a id="__codelineno-0-1283" name="__codelineno-0-1283"></a><a href="#__codelineno-0-1283"><span class="linenos" data-linenos="1283 "></span></a>                        <span class="k">if</span> <span class="n">fn_sanitized</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">old_prefix_sanitized</span><span class="p">):</span>
<a id="__codelineno-0-1284" name="__codelineno-0-1284"></a><a href="#__codelineno-0-1284"><span class="linenos" data-linenos="1284 "></span></a>                            <span class="c1"># Calculate the remainder after removing the prefix</span>
<a id="__codelineno-0-1285" name="__codelineno-0-1285"></a><a href="#__codelineno-0-1285"><span class="linenos" data-linenos="1285 "></span></a>                            <span class="n">remainder</span> <span class="o">=</span> <span class="n">fn_sanitized</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">old_prefix_sanitized</span><span class="p">)</span> <span class="p">:]</span>
<a id="__codelineno-0-1286" name="__codelineno-0-1286"></a><a href="#__codelineno-0-1286"><span class="linenos" data-linenos="1286 "></span></a>
<a id="__codelineno-0-1287" name="__codelineno-0-1287"></a><a href="#__codelineno-0-1287"><span class="linenos" data-linenos="1287 "></span></a>                            <span class="c1"># Build the new filename</span>
<a id="__codelineno-0-1288" name="__codelineno-0-1288"></a><a href="#__codelineno-0-1288"><span class="linenos" data-linenos="1288 "></span></a>                            <span class="k">if</span> <span class="n">remainder</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1289" name="__codelineno-0-1289"></a><a href="#__codelineno-0-1289"><span class="linenos" data-linenos="1289 "></span></a>                                <span class="c1"># Remainder has separator, remove it to avoid double</span>
<a id="__codelineno-0-1290" name="__codelineno-0-1290"></a><a href="#__codelineno-0-1290"><span class="linenos" data-linenos="1290 "></span></a>                                <span class="c1"># slash</span>
<a id="__codelineno-0-1291" name="__codelineno-0-1291"></a><a href="#__codelineno-0-1291"><span class="linenos" data-linenos="1291 "></span></a>                                <span class="n">remainder</span> <span class="o">=</span> <span class="n">remainder</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<a id="__codelineno-0-1292" name="__codelineno-0-1292"></a><a href="#__codelineno-0-1292"><span class="linenos" data-linenos="1292 "></span></a>                                <span class="c1"># Always add separator between prefix and remainder</span>
<a id="__codelineno-0-1293" name="__codelineno-0-1293"></a><a href="#__codelineno-0-1293"><span class="linenos" data-linenos="1293 "></span></a>                                <span class="k">if</span> <span class="n">new_prefix</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">new_prefix</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span>
<a id="__codelineno-0-1294" name="__codelineno-0-1294"></a><a href="#__codelineno-0-1294"><span class="linenos" data-linenos="1294 "></span></a>                                    <span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1295" name="__codelineno-0-1295"></a><a href="#__codelineno-0-1295"><span class="linenos" data-linenos="1295 "></span></a>                                <span class="p">):</span>
<a id="__codelineno-0-1296" name="__codelineno-0-1296"></a><a href="#__codelineno-0-1296"><span class="linenos" data-linenos="1296 "></span></a>                                    <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1297" name="__codelineno-0-1297"></a><a href="#__codelineno-0-1297"><span class="linenos" data-linenos="1297 "></span></a>                                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1298" name="__codelineno-0-1298"></a><a href="#__codelineno-0-1298"><span class="linenos" data-linenos="1298 "></span></a>                                    <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1299" name="__codelineno-0-1299"></a><a href="#__codelineno-0-1299"><span class="linenos" data-linenos="1299 "></span></a>                            <span class="k">elif</span> <span class="n">old_ends_with_sep</span><span class="p">:</span>
<a id="__codelineno-0-1300" name="__codelineno-0-1300"></a><a href="#__codelineno-0-1300"><span class="linenos" data-linenos="1300 "></span></a>                                <span class="c1"># Old prefix had separator, preserve it in the new</span>
<a id="__codelineno-0-1301" name="__codelineno-0-1301"></a><a href="#__codelineno-0-1301"><span class="linenos" data-linenos="1301 "></span></a>                                <span class="c1"># one</span>
<a id="__codelineno-0-1302" name="__codelineno-0-1302"></a><a href="#__codelineno-0-1302"><span class="linenos" data-linenos="1302 "></span></a>                                <span class="k">if</span> <span class="n">new_prefix</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">new_prefix</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span>
<a id="__codelineno-0-1303" name="__codelineno-0-1303"></a><a href="#__codelineno-0-1303"><span class="linenos" data-linenos="1303 "></span></a>                                    <span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1304" name="__codelineno-0-1304"></a><a href="#__codelineno-0-1304"><span class="linenos" data-linenos="1304 "></span></a>                                <span class="p">):</span>
<a id="__codelineno-0-1305" name="__codelineno-0-1305"></a><a href="#__codelineno-0-1305"><span class="linenos" data-linenos="1305 "></span></a>                                    <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1306" name="__codelineno-0-1306"></a><a href="#__codelineno-0-1306"><span class="linenos" data-linenos="1306 "></span></a>                                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1307" name="__codelineno-0-1307"></a><a href="#__codelineno-0-1307"><span class="linenos" data-linenos="1307 "></span></a>                                    <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1308" name="__codelineno-0-1308"></a><a href="#__codelineno-0-1308"><span class="linenos" data-linenos="1308 "></span></a>                            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1309" name="__codelineno-0-1309"></a><a href="#__codelineno-0-1309"><span class="linenos" data-linenos="1309 "></span></a>                                <span class="c1"># No separator in old prefix, don&#39;t add one</span>
<a id="__codelineno-0-1310" name="__codelineno-0-1310"></a><a href="#__codelineno-0-1310"><span class="linenos" data-linenos="1310 "></span></a>                                <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1311" name="__codelineno-0-1311"></a><a href="#__codelineno-0-1311"><span class="linenos" data-linenos="1311 "></span></a>
<a id="__codelineno-0-1312" name="__codelineno-0-1312"></a><a href="#__codelineno-0-1312"><span class="linenos" data-linenos="1312 "></span></a>                            <span class="n">new_fns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_fn</span><span class="p">)</span>
<a id="__codelineno-0-1313" name="__codelineno-0-1313"></a><a href="#__codelineno-0-1313"><span class="linenos" data-linenos="1313 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1314" name="__codelineno-0-1314"></a><a href="#__codelineno-0-1314"><span class="linenos" data-linenos="1314 "></span></a>                            <span class="n">new_fns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<a id="__codelineno-0-1315" name="__codelineno-0-1315"></a><a href="#__codelineno-0-1315"><span class="linenos" data-linenos="1315 "></span></a>                    <span class="n">video</span><span class="o">.</span><span class="n">replace_filename</span><span class="p">(</span><span class="n">new_fns</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">open_videos</span><span class="p">)</span>
<a id="__codelineno-0-1316" name="__codelineno-0-1316"></a><a href="#__codelineno-0-1316"><span class="linenos" data-linenos="1316 "></span></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1317" name="__codelineno-0-1317"></a><a href="#__codelineno-0-1317"><span class="linenos" data-linenos="1317 "></span></a>                    <span class="c1"># Sanitize filename for matching</span>
<a id="__codelineno-0-1318" name="__codelineno-0-1318"></a><a href="#__codelineno-0-1318"><span class="linenos" data-linenos="1318 "></span></a>                    <span class="n">fn_sanitized</span> <span class="o">=</span> <span class="n">sanitize_filename</span><span class="p">(</span><span class="n">video</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
<a id="__codelineno-0-1319" name="__codelineno-0-1319"></a><a href="#__codelineno-0-1319"><span class="linenos" data-linenos="1319 "></span></a>
<a id="__codelineno-0-1320" name="__codelineno-0-1320"></a><a href="#__codelineno-0-1320"><span class="linenos" data-linenos="1320 "></span></a>                    <span class="k">if</span> <span class="n">fn_sanitized</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">old_prefix_sanitized</span><span class="p">):</span>
<a id="__codelineno-0-1321" name="__codelineno-0-1321"></a><a href="#__codelineno-0-1321"><span class="linenos" data-linenos="1321 "></span></a>                        <span class="c1"># Calculate the remainder after removing the prefix</span>
<a id="__codelineno-0-1322" name="__codelineno-0-1322"></a><a href="#__codelineno-0-1322"><span class="linenos" data-linenos="1322 "></span></a>                        <span class="n">remainder</span> <span class="o">=</span> <span class="n">fn_sanitized</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">old_prefix_sanitized</span><span class="p">)</span> <span class="p">:]</span>
<a id="__codelineno-0-1323" name="__codelineno-0-1323"></a><a href="#__codelineno-0-1323"><span class="linenos" data-linenos="1323 "></span></a>
<a id="__codelineno-0-1324" name="__codelineno-0-1324"></a><a href="#__codelineno-0-1324"><span class="linenos" data-linenos="1324 "></span></a>                        <span class="c1"># Build the new filename</span>
<a id="__codelineno-0-1325" name="__codelineno-0-1325"></a><a href="#__codelineno-0-1325"><span class="linenos" data-linenos="1325 "></span></a>                        <span class="k">if</span> <span class="n">remainder</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1326" name="__codelineno-0-1326"></a><a href="#__codelineno-0-1326"><span class="linenos" data-linenos="1326 "></span></a>                            <span class="c1"># Remainder has separator, remove it to avoid double</span>
<a id="__codelineno-0-1327" name="__codelineno-0-1327"></a><a href="#__codelineno-0-1327"><span class="linenos" data-linenos="1327 "></span></a>                            <span class="c1"># slash</span>
<a id="__codelineno-0-1328" name="__codelineno-0-1328"></a><a href="#__codelineno-0-1328"><span class="linenos" data-linenos="1328 "></span></a>                            <span class="n">remainder</span> <span class="o">=</span> <span class="n">remainder</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<a id="__codelineno-0-1329" name="__codelineno-0-1329"></a><a href="#__codelineno-0-1329"><span class="linenos" data-linenos="1329 "></span></a>                            <span class="c1"># Always add separator between prefix and remainder</span>
<a id="__codelineno-0-1330" name="__codelineno-0-1330"></a><a href="#__codelineno-0-1330"><span class="linenos" data-linenos="1330 "></span></a>                            <span class="k">if</span> <span class="n">new_prefix</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">new_prefix</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)):</span>
<a id="__codelineno-0-1331" name="__codelineno-0-1331"></a><a href="#__codelineno-0-1331"><span class="linenos" data-linenos="1331 "></span></a>                                <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1332" name="__codelineno-0-1332"></a><a href="#__codelineno-0-1332"><span class="linenos" data-linenos="1332 "></span></a>                            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1333" name="__codelineno-0-1333"></a><a href="#__codelineno-0-1333"><span class="linenos" data-linenos="1333 "></span></a>                                <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1334" name="__codelineno-0-1334"></a><a href="#__codelineno-0-1334"><span class="linenos" data-linenos="1334 "></span></a>                        <span class="k">elif</span> <span class="n">old_ends_with_sep</span><span class="p">:</span>
<a id="__codelineno-0-1335" name="__codelineno-0-1335"></a><a href="#__codelineno-0-1335"><span class="linenos" data-linenos="1335 "></span></a>                            <span class="c1"># Old prefix had separator, preserve it in the new one</span>
<a id="__codelineno-0-1336" name="__codelineno-0-1336"></a><a href="#__codelineno-0-1336"><span class="linenos" data-linenos="1336 "></span></a>                            <span class="k">if</span> <span class="n">new_prefix</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">new_prefix</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)):</span>
<a id="__codelineno-0-1337" name="__codelineno-0-1337"></a><a href="#__codelineno-0-1337"><span class="linenos" data-linenos="1337 "></span></a>                                <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1338" name="__codelineno-0-1338"></a><a href="#__codelineno-0-1338"><span class="linenos" data-linenos="1338 "></span></a>                            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1339" name="__codelineno-0-1339"></a><a href="#__codelineno-0-1339"><span class="linenos" data-linenos="1339 "></span></a>                                <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1340" name="__codelineno-0-1340"></a><a href="#__codelineno-0-1340"><span class="linenos" data-linenos="1340 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1341" name="__codelineno-0-1341"></a><a href="#__codelineno-0-1341"><span class="linenos" data-linenos="1341 "></span></a>                            <span class="c1"># No separator in old prefix, don&#39;t add one</span>
<a id="__codelineno-0-1342" name="__codelineno-0-1342"></a><a href="#__codelineno-0-1342"><span class="linenos" data-linenos="1342 "></span></a>                            <span class="n">new_fn</span> <span class="o">=</span> <span class="n">new_prefix</span> <span class="o">+</span> <span class="n">remainder</span>
<a id="__codelineno-0-1343" name="__codelineno-0-1343"></a><a href="#__codelineno-0-1343"><span class="linenos" data-linenos="1343 "></span></a>
<a id="__codelineno-0-1344" name="__codelineno-0-1344"></a><a href="#__codelineno-0-1344"><span class="linenos" data-linenos="1344 "></span></a>                        <span class="n">video</span><span class="o">.</span><span class="n">replace_filename</span><span class="p">(</span><span class="n">new_fn</span><span class="p">,</span> <span class="nb">open</span><span class="o">=</span><span class="n">open_videos</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div><h3 id="strategy-enum">Strategy enum<a class="headerlink" href="#strategy-enum" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-class">



<h4 id="sleap_io.model.matching.FrameStrategy" class="doc doc-heading">
            <code>sleap_io.model.matching.FrameStrategy</code>


<a href="#sleap_io.model.matching.FrameStrategy" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code>builtins.str</code>, <code>enum.Enum</code></p>



        <p>Strategies for handling frame merging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;SMART&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FrameStrategy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SMART&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;smart&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.model.matching.FrameStrategy.SMART&lt;/code&gt;)" href="#sleap_io.model.matching.FrameStrategy.SMART">SMART</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Smart merging that preserves user labels over predictions when
they overlap.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;KEEP_ORIGINAL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FrameStrategy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KEEP_ORIGINAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;keep_original&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL&lt;/code&gt;)" href="#sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL">KEEP_ORIGINAL</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the original (base) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;KEEP_NEW&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FrameStrategy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KEEP_NEW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;keep_new&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.model.matching.FrameStrategy.KEEP_NEW&lt;/code&gt;)" href="#sleap_io.model.matching.FrameStrategy.KEEP_NEW">KEEP_NEW</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the new (incoming) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;KEEP_BOTH&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FrameStrategy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KEEP_BOTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;keep_both&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;sleap_io.model.matching.FrameStrategy.KEEP_BOTH&lt;/code&gt;)" href="#sleap_io.model.matching.FrameStrategy.KEEP_BOTH">KEEP_BOTH</a></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keep all instances from both frames without filtering.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>













              <details class="mkdocstrings-source">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-100" name="__codelineno-0-100"></a><a href="#__codelineno-0-100"><span class="linenos" data-linenos="100 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">FrameStrategy</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><a href="#__codelineno-0-101"><span class="linenos" data-linenos="101 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Strategies for handling frame merging.</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><a href="#__codelineno-0-102"><span class="linenos" data-linenos="102 "></span></a>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><a href="#__codelineno-0-103"><span class="linenos" data-linenos="103 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><a href="#__codelineno-0-104"><span class="linenos" data-linenos="104 "></span></a><span class="sd">        SMART: Smart merging that preserves user labels over predictions when</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><a href="#__codelineno-0-105"><span class="linenos" data-linenos="105 "></span></a><span class="sd">            they overlap.</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><a href="#__codelineno-0-106"><span class="linenos" data-linenos="106 "></span></a><span class="sd">        KEEP_ORIGINAL: Always keep instances from the original (base) frame.</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><a href="#__codelineno-0-107"><span class="linenos" data-linenos="107 "></span></a><span class="sd">        KEEP_NEW: Always keep instances from the new (incoming) frame.</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><a href="#__codelineno-0-108"><span class="linenos" data-linenos="108 "></span></a><span class="sd">        KEEP_BOTH: Keep all instances from both frames without filtering.</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><a href="#__codelineno-0-109"><span class="linenos" data-linenos="109 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><a href="#__codelineno-0-110"><span class="linenos" data-linenos="110 "></span></a>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><a href="#__codelineno-0-111"><span class="linenos" data-linenos="111 "></span></a>    <span class="n">SMART</span> <span class="o">=</span> <span class="s2">&quot;smart&quot;</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><a href="#__codelineno-0-112"><span class="linenos" data-linenos="112 "></span></a>    <span class="n">KEEP_ORIGINAL</span> <span class="o">=</span> <span class="s2">&quot;keep_original&quot;</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><a href="#__codelineno-0-113"><span class="linenos" data-linenos="113 "></span></a>    <span class="n">KEEP_NEW</span> <span class="o">=</span> <span class="s2">&quot;keep_new&quot;</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><a href="#__codelineno-0-114"><span class="linenos" data-linenos="114 "></span></a>    <span class="n">KEEP_BOTH</span> <span class="o">=</span> <span class="s2">&quot;keep_both&quot;</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><a href="#__codelineno-0-115"><span class="linenos" data-linenos="115 "></span></a>    <span class="n">UPDATE_TRACKS</span> <span class="o">=</span> <span class="s2">&quot;update_tracks&quot;</span>
</code></pre></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.FrameStrategy.KEEP_BOTH" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">KEEP_BOTH</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FrameStrategy</span><span class="o">.</span><span class="n">KEEP_BOTH</span><span class="p">:</span> <span class="s1">&#39;keep_both&#39;</span><span class="o">&gt;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.FrameStrategy.KEEP_BOTH" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Strategies for handling frame merging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_BOTH.SMART">SMART</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Smart merging that preserves user labels over predictions when
they overlap.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_BOTH.KEEP_ORIGINAL">KEEP_ORIGINAL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the original (base) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_BOTH.KEEP_NEW">KEEP_NEW</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the new (incoming) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_BOTH.KEEP_BOTH">KEEP_BOTH</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keep all instances from both frames without filtering.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.FrameStrategy.KEEP_NEW" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">KEEP_NEW</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FrameStrategy</span><span class="o">.</span><span class="n">KEEP_NEW</span><span class="p">:</span> <span class="s1">&#39;keep_new&#39;</span><span class="o">&gt;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.FrameStrategy.KEEP_NEW" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Strategies for handling frame merging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_NEW.SMART">SMART</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Smart merging that preserves user labels over predictions when
they overlap.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_NEW.KEEP_ORIGINAL">KEEP_ORIGINAL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the original (base) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_NEW.KEEP_NEW">KEEP_NEW</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the new (incoming) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_NEW.KEEP_BOTH">KEEP_BOTH</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keep all instances from both frames without filtering.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">KEEP_ORIGINAL</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FrameStrategy</span><span class="o">.</span><span class="n">KEEP_ORIGINAL</span><span class="p">:</span> <span class="s1">&#39;keep_original&#39;</span><span class="o">&gt;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Strategies for handling frame merging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL.SMART">SMART</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Smart merging that preserves user labels over predictions when
they overlap.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL.KEEP_ORIGINAL">KEEP_ORIGINAL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the original (base) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL.KEEP_NEW">KEEP_NEW</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the new (incoming) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL.KEEP_BOTH">KEEP_BOTH</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keep all instances from both frames without filtering.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.FrameStrategy.SMART" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">SMART</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FrameStrategy</span><span class="o">.</span><span class="n">SMART</span><span class="p">:</span> <span class="s1">&#39;smart&#39;</span><span class="o">&gt;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.FrameStrategy.SMART" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Strategies for handling frame merging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.SMART.SMART">SMART</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Smart merging that preserves user labels over predictions when
they overlap.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.SMART.KEEP_ORIGINAL">KEEP_ORIGINAL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the original (base) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.SMART.KEEP_NEW">KEEP_NEW</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the new (incoming) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.SMART.KEEP_BOTH">KEEP_BOTH</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keep all instances from both frames without filtering.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.FrameStrategy.UPDATE_TRACKS" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">UPDATE_TRACKS</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">FrameStrategy</span><span class="o">.</span><span class="n">UPDATE_TRACKS</span><span class="p">:</span> <span class="s1">&#39;update_tracks&#39;</span><span class="o">&gt;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.FrameStrategy.UPDATE_TRACKS" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Strategies for handling frame merging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.UPDATE_TRACKS.SMART">SMART</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Smart merging that preserves user labels over predictions when
they overlap.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.UPDATE_TRACKS.KEEP_ORIGINAL">KEEP_ORIGINAL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the original (base) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.UPDATE_TRACKS.KEEP_NEW">KEEP_NEW</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the new (incoming) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.UPDATE_TRACKS.KEEP_BOTH">KEEP_BOTH</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keep all instances from both frames without filtering.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.FrameStrategy.__doc__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__doc__</span> <span class="o">=</span> <span class="s1">&#39;Strategies for handling frame merging.</span><span class="se">\n\n</span><span class="s1">    Attributes:</span><span class="se">\n</span><span class="s1">        SMART: Smart merging that preserves user labels over predictions when</span><span class="se">\n</span><span class="s1">            they overlap.</span><span class="se">\n</span><span class="s1">        KEEP_ORIGINAL: Always keep instances from the original (base) frame.</span><span class="se">\n</span><span class="s1">        KEEP_NEW: Always keep instances from the new (incoming) frame.</span><span class="se">\n</span><span class="s1">        KEEP_BOTH: Keep all instances from both frames without filtering.</span><span class="se">\n</span><span class="s1">    &#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.FrameStrategy.__doc__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.FrameStrategy.__module__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__module__</span> <span class="o">=</span> <span class="s1">&#39;sleap_io.model.matching&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.FrameStrategy.__module__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>






  </div>

    </div>

</div><h3 id="matcher-classes">Matcher classes<a class="headerlink" href="#matcher-classes" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-class">



<h4 id="sleap_io.model.matching.VideoMatcher" class="doc doc-heading">
            <code>sleap_io.model.matching.VideoMatcher</code>


<a href="#sleap_io.model.matching.VideoMatcher" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">



        <p>Matcher for comparing and matching videos.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.method">method</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be a VideoMatchMethod enum value
or a string that will be converted to the enum. Default is AUTO.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.strict">strict</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use strict path matching for the PATH method.
When True, paths must be exactly identical. When False, paths
are normalized before comparison. Only used when method is PATH.
Default is False.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__eq__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.VideoMatcher.__eq__&lt;/code&gt;)" href="#sleap_io.model.matching.VideoMatcher.__eq__">__eq__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class VideoMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;VideoMatchMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AUTO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;auto&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strict&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.VideoMatcher.__init__&lt;/code&gt;)" href="#sleap_io.model.matching.VideoMatcher.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class VideoMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__repr__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.VideoMatcher.__repr__&lt;/code&gt;)" href="#sleap_io.model.matching.VideoMatcher.__repr__">__repr__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class VideoMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__setattr__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.VideoMatcher.__setattr__&lt;/code&gt;)" href="#sleap_io.model.matching.VideoMatcher.__setattr__">__setattr__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class VideoMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;video1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;video2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.VideoMatcher.match&lt;/code&gt;)" href="#sleap_io.model.matching.VideoMatcher.match">match</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if two videos match according to the configured method.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="mkdocstrings-source">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-278" name="__codelineno-0-278"></a><a href="#__codelineno-0-278"><span class="linenos" data-linenos="278 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><a href="#__codelineno-0-279"><span class="linenos" data-linenos="279 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">VideoMatcher</span><span class="p">:</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><a href="#__codelineno-0-280"><span class="linenos" data-linenos="280 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Matcher for comparing and matching videos.</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><a href="#__codelineno-0-281"><span class="linenos" data-linenos="281 "></span></a>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><a href="#__codelineno-0-282"><span class="linenos" data-linenos="282 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><a href="#__codelineno-0-283"><span class="linenos" data-linenos="283 "></span></a><span class="sd">        method: The matching method to use. Can be a VideoMatchMethod enum value</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><a href="#__codelineno-0-284"><span class="linenos" data-linenos="284 "></span></a><span class="sd">            or a string that will be converted to the enum. Default is AUTO.</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><a href="#__codelineno-0-285"><span class="linenos" data-linenos="285 "></span></a><span class="sd">        strict: Whether to use strict path matching for the PATH method.</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><a href="#__codelineno-0-286"><span class="linenos" data-linenos="286 "></span></a><span class="sd">            When True, paths must be exactly identical. When False, paths</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><a href="#__codelineno-0-287"><span class="linenos" data-linenos="287 "></span></a><span class="sd">            are normalized before comparison. Only used when method is PATH.</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><a href="#__codelineno-0-288"><span class="linenos" data-linenos="288 "></span></a><span class="sd">            Default is False.</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><a href="#__codelineno-0-289"><span class="linenos" data-linenos="289 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><a href="#__codelineno-0-290"><span class="linenos" data-linenos="290 "></span></a>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><a href="#__codelineno-0-291"><span class="linenos" data-linenos="291 "></span></a>    <span class="n">method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">VideoMatchMethod</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><a href="#__codelineno-0-292"><span class="linenos" data-linenos="292 "></span></a>        <span class="n">default</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">,</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><a href="#__codelineno-0-293"><span class="linenos" data-linenos="293 "></span></a>        <span class="n">converter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">VideoMatchMethod</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><a href="#__codelineno-0-294"><span class="linenos" data-linenos="294 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><a href="#__codelineno-0-295"><span class="linenos" data-linenos="295 "></span></a>    <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><a href="#__codelineno-0-296"><span class="linenos" data-linenos="296 "></span></a>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><a href="#__codelineno-0-297"><span class="linenos" data-linenos="297 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video1</span><span class="p">:</span> <span class="n">Video</span><span class="p">,</span> <span class="n">video2</span><span class="p">:</span> <span class="n">Video</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><a href="#__codelineno-0-298"><span class="linenos" data-linenos="298 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two videos match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><a href="#__codelineno-0-299"><span class="linenos" data-linenos="299 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">:</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><a href="#__codelineno-0-300"><span class="linenos" data-linenos="300 "></span></a>            <span class="c1"># Try different methods in order of specificity (most to least specific).</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><a href="#__codelineno-0-301"><span class="linenos" data-linenos="301 "></span></a>            <span class="c1"># This prioritizes exact path matches, then basename matches, and only</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><a href="#__codelineno-0-302"><span class="linenos" data-linenos="302 "></span></a>            <span class="c1"># falls back to content matching (shape + backend) as a last resort.</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><a href="#__codelineno-0-303"><span class="linenos" data-linenos="303 "></span></a>            <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><a href="#__codelineno-0-304"><span class="linenos" data-linenos="304 "></span></a>                <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><a href="#__codelineno-0-305"><span class="linenos" data-linenos="305 "></span></a>            <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><a href="#__codelineno-0-306"><span class="linenos" data-linenos="306 "></span></a>                <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><a href="#__codelineno-0-307"><span class="linenos" data-linenos="307 "></span></a>            <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">video2</span><span class="p">):</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><a href="#__codelineno-0-308"><span class="linenos" data-linenos="308 "></span></a>                <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><a href="#__codelineno-0-309"><span class="linenos" data-linenos="309 "></span></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><a href="#__codelineno-0-310"><span class="linenos" data-linenos="310 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">PATH</span><span class="p">:</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><a href="#__codelineno-0-311"><span class="linenos" data-linenos="311 "></span></a>            <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">)</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><a href="#__codelineno-0-312"><span class="linenos" data-linenos="312 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">:</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><a href="#__codelineno-0-313"><span class="linenos" data-linenos="313 "></span></a>            <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><a href="#__codelineno-0-314"><span class="linenos" data-linenos="314 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">:</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><a href="#__codelineno-0-315"><span class="linenos" data-linenos="315 "></span></a>            <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">video2</span><span class="p">)</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><a href="#__codelineno-0-316"><span class="linenos" data-linenos="316 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">IMAGE_DEDUP</span><span class="p">:</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><a href="#__codelineno-0-317"><span class="linenos" data-linenos="317 "></span></a>            <span class="c1"># Match ImageVideo instances with overlapping images (ImageVideo only)</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><a href="#__codelineno-0-318"><span class="linenos" data-linenos="318 "></span></a>            <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">has_overlapping_images</span><span class="p">(</span><span class="n">video2</span><span class="p">)</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><a href="#__codelineno-0-319"><span class="linenos" data-linenos="319 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">SHAPE</span><span class="p">:</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><a href="#__codelineno-0-320"><span class="linenos" data-linenos="320 "></span></a>            <span class="c1"># Match videos by shape only (height, width, channels)</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><a href="#__codelineno-0-321"><span class="linenos" data-linenos="321 "></span></a>            <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_shape</span><span class="p">(</span><span class="n">video2</span><span class="p">)</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><a href="#__codelineno-0-322"><span class="linenos" data-linenos="322 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><a href="#__codelineno-0-323"><span class="linenos" data-linenos="323 "></span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown video match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.VideoMatcher.__annotations__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__annotations__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Union[VideoMatchMethod, str]&#39;</span><span class="p">,</span> <span class="s1">&#39;strict&#39;</span><span class="p">:</span> <span class="s1">&#39;bool&#39;</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.VideoMatcher.__annotations__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>dict() -&gt; new empty dictionary
dict(mapping) -&gt; new dictionary initialized from a mapping object's
    (key, value) pairs
dict(iterable) -&gt; new dictionary initialized as if via:
    d = {}
    for k, v in iterable:
        d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.VideoMatcher.__attrs_own_setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__attrs_own_setattr__</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.VideoMatcher.__attrs_own_setattr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.VideoMatcher.__attrs_props__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__attrs_props__</span> <span class="o">=</span> <span class="n">ClassProps</span><span class="p">(</span><span class="n">is_exception</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_slotted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">has_weakref_slot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">kw_only</span><span class="o">=&lt;</span><span class="n">KeywordOnly</span><span class="o">.</span><span class="n">NO</span><span class="p">:</span> <span class="s1">&#39;no&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">collected_fields_by_mro</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_init</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_repr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_eq</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_ordering</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hashability</span><span class="o">=&lt;</span><span class="n">Hashability</span><span class="o">.</span><span class="n">UNHASHABLE</span><span class="p">:</span> <span class="s1">&#39;unhashable&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">added_match_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_str</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">added_pickling</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on_setattr_hook</span><span class="o">=&lt;</span><span class="n">function</span> <span class="n">pipe</span><span class="o">.&lt;</span><span class="nb">locals</span><span class="o">&gt;.</span><span class="n">wrapped_pipe</span> <span class="n">at</span> <span class="mh">0x7f2d7812e0c0</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">field_transformer</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.VideoMatcher.__attrs_props__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Effective class properties as derived from parameters to <code>attr.s()</code> or
<code>define()</code> decorators.</p>
<p>This is the same data structure that <em>attrs</em> uses internally to decide how
to construct the final class.</p>
<p>Warning:</p>
<div class="highlight"><pre><span></span><code>This feature is currently **experimental** and is not covered by our
strict backwards-compatibility guarantees.
</code></pre></div>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.is_exception">is_exception</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is treated as an exception class.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.is_slotted">is_slotted</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is <code>slotted &lt;slotted classes&gt;</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.has_weakref_slot">has_weakref_slot</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has a slot for weak references.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.is_frozen">is_frozen</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is frozen.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.kw_only">kw_only</span></code></td>
            <td>
                  <code><span title="KeywordOnly">KeywordOnly</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether / how the class enforces keyword-only arguments on the
<code>__init__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.collected_fields_by_mro">collected_fields_by_mro</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class fields were collected by method resolution order.
That is, correctly but unlike <code>dataclasses</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.added_init">added_init</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__init__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.added_repr">added_repr</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__repr__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.added_eq">added_eq</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated equality methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.added_ordering">added_ordering</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated ordering methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.hashability">hashability</span></code></td>
            <td>
                  <code><span title="Hashability">Hashability</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How <code>hashable &lt;hashing&gt;</code> the class is.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.added_match_args">added_match_args</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class supports positional <code>match &lt;match&gt;</code> over its
fields.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.added_str">added_str</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__str__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.added_pickling">added_pickling</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated <code>__getstate__</code> and
<code>__setstate__</code> methods for <code>pickle</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.on_setattr_hook">on_setattr_hook</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span>[[<span title="typing.Any">Any</span>, <span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class's <code>__setattr__</code> hook.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.__attrs_props__.field_transformer">field_transformer</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span>[[<span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>]], <span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class's <code>field transformers &lt;transform-fields&gt;</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>.. versionadded:: 25.4.0</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.VideoMatcher.__doc__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__doc__</span> <span class="o">=</span> <span class="s1">&#39;Matcher for comparing and matching videos.</span><span class="se">\n\n</span><span class="s1">    Attributes:</span><span class="se">\n</span><span class="s1">        method: The matching method to use. Can be a VideoMatchMethod enum value</span><span class="se">\n</span><span class="s1">            or a string that will be converted to the enum. Default is AUTO.</span><span class="se">\n</span><span class="s1">        strict: Whether to use strict path matching for the PATH method.</span><span class="se">\n</span><span class="s1">            When True, paths must be exactly identical. When False, paths</span><span class="se">\n</span><span class="s1">            are normalized before comparison. Only used when method is PATH.</span><span class="se">\n</span><span class="s1">            Default is False.</span><span class="se">\n</span><span class="s1">    &#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.VideoMatcher.__doc__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.VideoMatcher.__match_args__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__match_args__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s1">&#39;strict&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.VideoMatcher.__match_args__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.VideoMatcher.__module__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__module__</span> <span class="o">=</span> <span class="s1">&#39;sleap_io.model.matching&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.VideoMatcher.__module__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.VideoMatcher.__slots__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s1">&#39;strict&#39;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.VideoMatcher.__slots__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.VideoMatcher.__weakref__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__weakref__</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#sleap_io.model.matching.VideoMatcher.__weakref__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>list of weak references to the object</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.VideoMatcher.__eq__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.VideoMatcher.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class VideoMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-16" name="__codelineno-0-16"></a><a href="#__codelineno-0-16"><span class="linenos" data-linenos="16 "></span></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><a href="#__codelineno-0-17"><span class="linenos" data-linenos="17 "></span></a>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><a href="#__codelineno-0-18"><span class="linenos" data-linenos="18 "></span></a><span class="s2">from __future__ import annotations</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><a href="#__codelineno-0-19"><span class="linenos" data-linenos="19 "></span></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><a href="#__codelineno-0-20"><span class="linenos" data-linenos="20 "></span></a><span class="s2">from enum import Enum</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><a href="#__codelineno-0-21"><span class="linenos" data-linenos="21 "></span></a><span class="s2">from typing import Any, Union</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.VideoMatcher.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">method</span><span class="o">=&lt;</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.VideoMatcher.__init__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class VideoMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-23" name="__codelineno-0-23"></a><a href="#__codelineno-0-23"><span class="linenos" data-linenos="23 "></span></a><span class="kn">import</span><span class="w"> </span><span class="nn">attrs</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><a href="#__codelineno-0-24"><span class="linenos" data-linenos="24 "></span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><a href="#__codelineno-0-25"><span class="linenos" data-linenos="25 "></span></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><a href="#__codelineno-0-26"><span class="linenos" data-linenos="26 "></span></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.instance</span><span class="w"> </span><span class="kn">import</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">Track</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.VideoMatcher.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#sleap_io.model.matching.VideoMatcher.__repr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class VideoMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="s2">&quot;&quot;&quot;Unified matcher system for comparing and matching data structures during merging.</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos=" 2 "></span></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><a href="#__codelineno-0-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s2">This module provides configurable matchers for comparing skeletons, instances, tracks,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><a href="#__codelineno-0-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s2">videos, and frames during merge operations. The matchers use various strategies to</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><a href="#__codelineno-0-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s2">determine when data structures should be considered equivalent during merging.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><a href="#__codelineno-0-6"><span class="linenos" data-linenos=" 6 "></span></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><a href="#__codelineno-0-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s2">Key features:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><a href="#__codelineno-0-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s2">- Skeleton matching: exact, structure-based, overlap, and subset matching</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><a href="#__codelineno-0-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s2">- Instance matching: spatial proximity, track identity, and bounding box IoU</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><a href="#__codelineno-0-10"><span class="linenos" data-linenos="10 "></span></a><span class="s2">- Track matching: by name or object identity</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><a href="#__codelineno-0-11"><span class="linenos" data-linenos="11 "></span></a><span class="s2">- Video matching: path, basename, content, and auto matching</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><a href="#__codelineno-0-12"><span class="linenos" data-linenos="12 "></span></a><span class="s2">- Frame matching with configurable video matching requirements</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><a href="#__codelineno-0-13"><span class="linenos" data-linenos="13 "></span></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><a href="#__codelineno-0-14"><span class="linenos" data-linenos="14 "></span></a><span class="s2">Video matching supports path-based, filename-based, content-based, and</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><a href="#__codelineno-0-15"><span class="linenos" data-linenos="15 "></span></a><span class="s2">automatic strategies.</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.VideoMatcher.__setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.VideoMatcher.__setattr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class VideoMatcher.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.VideoMatcher.match" class="doc doc-heading">
            <code class="highlight language-python"><span class="k">match</span><span class="p">(</span><span class="n">video1</span><span class="p">,</span> <span class="n">video2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.VideoMatcher.match" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Check if two videos match according to the configured method.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-297" name="__codelineno-0-297"></a><a href="#__codelineno-0-297"><span class="linenos" data-linenos="297 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video1</span><span class="p">:</span> <span class="n">Video</span><span class="p">,</span> <span class="n">video2</span><span class="p">:</span> <span class="n">Video</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><a href="#__codelineno-0-298"><span class="linenos" data-linenos="298 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two videos match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><a href="#__codelineno-0-299"><span class="linenos" data-linenos="299 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">:</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><a href="#__codelineno-0-300"><span class="linenos" data-linenos="300 "></span></a>        <span class="c1"># Try different methods in order of specificity (most to least specific).</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><a href="#__codelineno-0-301"><span class="linenos" data-linenos="301 "></span></a>        <span class="c1"># This prioritizes exact path matches, then basename matches, and only</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><a href="#__codelineno-0-302"><span class="linenos" data-linenos="302 "></span></a>        <span class="c1"># falls back to content matching (shape + backend) as a last resort.</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><a href="#__codelineno-0-303"><span class="linenos" data-linenos="303 "></span></a>        <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><a href="#__codelineno-0-304"><span class="linenos" data-linenos="304 "></span></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><a href="#__codelineno-0-305"><span class="linenos" data-linenos="305 "></span></a>        <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><a href="#__codelineno-0-306"><span class="linenos" data-linenos="306 "></span></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><a href="#__codelineno-0-307"><span class="linenos" data-linenos="307 "></span></a>        <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">video2</span><span class="p">):</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><a href="#__codelineno-0-308"><span class="linenos" data-linenos="308 "></span></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><a href="#__codelineno-0-309"><span class="linenos" data-linenos="309 "></span></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><a href="#__codelineno-0-310"><span class="linenos" data-linenos="310 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">PATH</span><span class="p">:</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><a href="#__codelineno-0-311"><span class="linenos" data-linenos="311 "></span></a>        <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">)</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><a href="#__codelineno-0-312"><span class="linenos" data-linenos="312 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">:</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><a href="#__codelineno-0-313"><span class="linenos" data-linenos="313 "></span></a>        <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><a href="#__codelineno-0-314"><span class="linenos" data-linenos="314 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">:</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><a href="#__codelineno-0-315"><span class="linenos" data-linenos="315 "></span></a>        <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">video2</span><span class="p">)</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><a href="#__codelineno-0-316"><span class="linenos" data-linenos="316 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">IMAGE_DEDUP</span><span class="p">:</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><a href="#__codelineno-0-317"><span class="linenos" data-linenos="317 "></span></a>        <span class="c1"># Match ImageVideo instances with overlapping images (ImageVideo only)</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><a href="#__codelineno-0-318"><span class="linenos" data-linenos="318 "></span></a>        <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">has_overlapping_images</span><span class="p">(</span><span class="n">video2</span><span class="p">)</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><a href="#__codelineno-0-319"><span class="linenos" data-linenos="319 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">SHAPE</span><span class="p">:</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><a href="#__codelineno-0-320"><span class="linenos" data-linenos="320 "></span></a>        <span class="c1"># Match videos by shape only (height, width, channels)</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><a href="#__codelineno-0-321"><span class="linenos" data-linenos="321 "></span></a>        <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_shape</span><span class="p">(</span><span class="n">video2</span><span class="p">)</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><a href="#__codelineno-0-322"><span class="linenos" data-linenos="322 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><a href="#__codelineno-0-323"><span class="linenos" data-linenos="323 "></span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown video match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="sleap_io.model.matching.InstanceMatcher" class="doc doc-heading">
            <code>sleap_io.model.matching.InstanceMatcher</code>


<a href="#sleap_io.model.matching.InstanceMatcher" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">



        <p>Matcher for comparing and matching instances.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.method">method</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be an InstanceMatchMethod enum value
or a string that will be converted to the enum. Default is SPATIAL.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.threshold">threshold</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The threshold value used for matching. For SPATIAL method, this is
the maximum pixel distance. For IOU method, this is the minimum IoU value.
Not used for IDENTITY method. Default is 5.0.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__eq__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.InstanceMatcher.__eq__&lt;/code&gt;)" href="#sleap_io.model.matching.InstanceMatcher.__eq__">__eq__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class InstanceMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;InstanceMatchMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SPATIAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;spatial&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threshold&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.InstanceMatcher.__init__&lt;/code&gt;)" href="#sleap_io.model.matching.InstanceMatcher.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class InstanceMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__repr__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.InstanceMatcher.__repr__&lt;/code&gt;)" href="#sleap_io.model.matching.InstanceMatcher.__repr__">__repr__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class InstanceMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__setattr__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.InstanceMatcher.__setattr__&lt;/code&gt;)" href="#sleap_io.model.matching.InstanceMatcher.__setattr__">__setattr__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class InstanceMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;find_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instances1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instances2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.InstanceMatcher.find_matches&lt;/code&gt;)" href="#sleap_io.model.matching.InstanceMatcher.find_matches">find_matches</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Find all matching instances between two lists.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.InstanceMatcher.match&lt;/code&gt;)" href="#sleap_io.model.matching.InstanceMatcher.match">match</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if two instances match according to the configured method.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="mkdocstrings-source">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-172" name="__codelineno-0-172"></a><a href="#__codelineno-0-172"><span class="linenos" data-linenos="172 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><a href="#__codelineno-0-173"><span class="linenos" data-linenos="173 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">InstanceMatcher</span><span class="p">:</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><a href="#__codelineno-0-174"><span class="linenos" data-linenos="174 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Matcher for comparing and matching instances.</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><a href="#__codelineno-0-175"><span class="linenos" data-linenos="175 "></span></a>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a><a href="#__codelineno-0-176"><span class="linenos" data-linenos="176 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><a href="#__codelineno-0-177"><span class="linenos" data-linenos="177 "></span></a><span class="sd">        method: The matching method to use. Can be an InstanceMatchMethod enum value</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><a href="#__codelineno-0-178"><span class="linenos" data-linenos="178 "></span></a><span class="sd">            or a string that will be converted to the enum. Default is SPATIAL.</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><a href="#__codelineno-0-179"><span class="linenos" data-linenos="179 "></span></a><span class="sd">        threshold: The threshold value used for matching. For SPATIAL method, this is</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><a href="#__codelineno-0-180"><span class="linenos" data-linenos="180 "></span></a><span class="sd">            the maximum pixel distance. For IOU method, this is the minimum IoU value.</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><a href="#__codelineno-0-181"><span class="linenos" data-linenos="181 "></span></a><span class="sd">            Not used for IDENTITY method. Default is 5.0.</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><a href="#__codelineno-0-182"><span class="linenos" data-linenos="182 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><a href="#__codelineno-0-183"><span class="linenos" data-linenos="183 "></span></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><a href="#__codelineno-0-184"><span class="linenos" data-linenos="184 "></span></a>    <span class="n">method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">InstanceMatchMethod</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><a href="#__codelineno-0-185"><span class="linenos" data-linenos="185 "></span></a>        <span class="n">default</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">,</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><a href="#__codelineno-0-186"><span class="linenos" data-linenos="186 "></span></a>        <span class="n">converter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">InstanceMatchMethod</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><a href="#__codelineno-0-187"><span class="linenos" data-linenos="187 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><a href="#__codelineno-0-188"><span class="linenos" data-linenos="188 "></span></a>    <span class="n">threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><a href="#__codelineno-0-189"><span class="linenos" data-linenos="189 "></span></a>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><a href="#__codelineno-0-190"><span class="linenos" data-linenos="190 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance1</span><span class="p">:</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">instance2</span><span class="p">:</span> <span class="n">Instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><a href="#__codelineno-0-191"><span class="linenos" data-linenos="191 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two instances match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><a href="#__codelineno-0-192"><span class="linenos" data-linenos="192 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><a href="#__codelineno-0-193"><span class="linenos" data-linenos="193 "></span></a>            <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">same_pose_as</span><span class="p">(</span><span class="n">instance2</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><a href="#__codelineno-0-194"><span class="linenos" data-linenos="194 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><a href="#__codelineno-0-195"><span class="linenos" data-linenos="195 "></span></a>            <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">same_identity_as</span><span class="p">(</span><span class="n">instance2</span><span class="p">)</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><a href="#__codelineno-0-196"><span class="linenos" data-linenos="196 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">:</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><a href="#__codelineno-0-197"><span class="linenos" data-linenos="197 "></span></a>            <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">instance2</span><span class="p">,</span> <span class="n">iou_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><a href="#__codelineno-0-198"><span class="linenos" data-linenos="198 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><a href="#__codelineno-0-199"><span class="linenos" data-linenos="199 "></span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown instance match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><a href="#__codelineno-0-200"><span class="linenos" data-linenos="200 "></span></a>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><a href="#__codelineno-0-201"><span class="linenos" data-linenos="201 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">find_matches</span><span class="p">(</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><a href="#__codelineno-0-202"><span class="linenos" data-linenos="202 "></span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">instances1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span><span class="p">],</span> <span class="n">instances2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span><span class="p">]</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><a href="#__codelineno-0-203"><span class="linenos" data-linenos="203 "></span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><a href="#__codelineno-0-204"><span class="linenos" data-linenos="204 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Find all matching instances between two lists.</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><a href="#__codelineno-0-205"><span class="linenos" data-linenos="205 "></span></a>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><a href="#__codelineno-0-206"><span class="linenos" data-linenos="206 "></span></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><a href="#__codelineno-0-207"><span class="linenos" data-linenos="207 "></span></a><span class="sd">            List of (idx1, idx2, score) tuples for matching instances.</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><a href="#__codelineno-0-208"><span class="linenos" data-linenos="208 "></span></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><a href="#__codelineno-0-209"><span class="linenos" data-linenos="209 "></span></a>        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><a href="#__codelineno-0-210"><span class="linenos" data-linenos="210 "></span></a>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><a href="#__codelineno-0-211"><span class="linenos" data-linenos="211 "></span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">inst1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instances1</span><span class="p">):</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><a href="#__codelineno-0-212"><span class="linenos" data-linenos="212 "></span></a>            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">inst2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instances2</span><span class="p">):</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><a href="#__codelineno-0-213"><span class="linenos" data-linenos="213 "></span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">inst1</span><span class="p">,</span> <span class="n">inst2</span><span class="p">):</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><a href="#__codelineno-0-214"><span class="linenos" data-linenos="214 "></span></a>                    <span class="c1"># Calculate match score based on method</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><a href="#__codelineno-0-215"><span class="linenos" data-linenos="215 "></span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><a href="#__codelineno-0-216"><span class="linenos" data-linenos="216 "></span></a>                        <span class="c1"># Use inverse distance as score</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><a href="#__codelineno-0-217"><span class="linenos" data-linenos="217 "></span></a>                        <span class="n">pts1</span> <span class="o">=</span> <span class="n">inst1</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><a href="#__codelineno-0-218"><span class="linenos" data-linenos="218 "></span></a>                        <span class="n">pts2</span> <span class="o">=</span> <span class="n">inst2</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><a href="#__codelineno-0-219"><span class="linenos" data-linenos="219 "></span></a>                        <span class="n">valid</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pts1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pts2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]))</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><a href="#__codelineno-0-220"><span class="linenos" data-linenos="220 "></span></a>                        <span class="k">if</span> <span class="n">valid</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><a href="#__codelineno-0-221"><span class="linenos" data-linenos="221 "></span></a>                            <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><a href="#__codelineno-0-222"><span class="linenos" data-linenos="222 "></span></a>                                <span class="n">pts1</span><span class="p">[</span><span class="n">valid</span><span class="p">]</span> <span class="o">-</span> <span class="n">pts2</span><span class="p">[</span><span class="n">valid</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><a href="#__codelineno-0-223"><span class="linenos" data-linenos="223 "></span></a>                            <span class="p">)</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><a href="#__codelineno-0-224"><span class="linenos" data-linenos="224 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">distances</span><span class="p">))</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><a href="#__codelineno-0-225"><span class="linenos" data-linenos="225 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><a href="#__codelineno-0-226"><span class="linenos" data-linenos="226 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><a href="#__codelineno-0-227"><span class="linenos" data-linenos="227 "></span></a>                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">:</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><a href="#__codelineno-0-228"><span class="linenos" data-linenos="228 "></span></a>                        <span class="c1"># Calculate actual IoU as score</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><a href="#__codelineno-0-229"><span class="linenos" data-linenos="229 "></span></a>                        <span class="n">bbox1</span> <span class="o">=</span> <span class="n">inst1</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><a href="#__codelineno-0-230"><span class="linenos" data-linenos="230 "></span></a>                        <span class="n">bbox2</span> <span class="o">=</span> <span class="n">inst2</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><a href="#__codelineno-0-231"><span class="linenos" data-linenos="231 "></span></a>                        <span class="k">if</span> <span class="n">bbox1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bbox2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><a href="#__codelineno-0-232"><span class="linenos" data-linenos="232 "></span></a>                            <span class="c1"># Calculate IoU</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><a href="#__codelineno-0-233"><span class="linenos" data-linenos="233 "></span></a>                            <span class="n">intersection_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><a href="#__codelineno-0-234"><span class="linenos" data-linenos="234 "></span></a>                            <span class="n">intersection_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><a href="#__codelineno-0-235"><span class="linenos" data-linenos="235 "></span></a>                            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">intersection_min</span> <span class="o">&lt;</span> <span class="n">intersection_max</span><span class="p">):</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><a href="#__codelineno-0-236"><span class="linenos" data-linenos="236 "></span></a>                                <span class="n">intersection_area</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><a href="#__codelineno-0-237"><span class="linenos" data-linenos="237 "></span></a>                                    <span class="n">intersection_max</span> <span class="o">-</span> <span class="n">intersection_min</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><a href="#__codelineno-0-238"><span class="linenos" data-linenos="238 "></span></a>                                <span class="p">)</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><a href="#__codelineno-0-239"><span class="linenos" data-linenos="239 "></span></a>                                <span class="n">area1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><a href="#__codelineno-0-240"><span class="linenos" data-linenos="240 "></span></a>                                <span class="n">area2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">bbox2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><a href="#__codelineno-0-241"><span class="linenos" data-linenos="241 "></span></a>                                <span class="n">union_area</span> <span class="o">=</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">area2</span> <span class="o">-</span> <span class="n">intersection_area</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><a href="#__codelineno-0-242"><span class="linenos" data-linenos="242 "></span></a>                                <span class="n">score</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><a href="#__codelineno-0-243"><span class="linenos" data-linenos="243 "></span></a>                                    <span class="n">intersection_area</span> <span class="o">/</span> <span class="n">union_area</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><a href="#__codelineno-0-244"><span class="linenos" data-linenos="244 "></span></a>                                    <span class="k">if</span> <span class="n">union_area</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><a href="#__codelineno-0-245"><span class="linenos" data-linenos="245 "></span></a>                                    <span class="k">else</span> <span class="mi">0</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><a href="#__codelineno-0-246"><span class="linenos" data-linenos="246 "></span></a>                                <span class="p">)</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><a href="#__codelineno-0-247"><span class="linenos" data-linenos="247 "></span></a>                            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><a href="#__codelineno-0-248"><span class="linenos" data-linenos="248 "></span></a>                                <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><a href="#__codelineno-0-249"><span class="linenos" data-linenos="249 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><a href="#__codelineno-0-250"><span class="linenos" data-linenos="250 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><a href="#__codelineno-0-251"><span class="linenos" data-linenos="251 "></span></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><a href="#__codelineno-0-252"><span class="linenos" data-linenos="252 "></span></a>                        <span class="n">score</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Binary match for identity</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><a href="#__codelineno-0-253"><span class="linenos" data-linenos="253 "></span></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><a href="#__codelineno-0-254"><span class="linenos" data-linenos="254 "></span></a>                    <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">score</span><span class="p">))</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><a href="#__codelineno-0-255"><span class="linenos" data-linenos="255 "></span></a>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><a href="#__codelineno-0-256"><span class="linenos" data-linenos="256 "></span></a>        <span class="k">return</span> <span class="n">matches</span>
</code></pre></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.InstanceMatcher.__annotations__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__annotations__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Union[InstanceMatchMethod, str]&#39;</span><span class="p">,</span> <span class="s1">&#39;threshold&#39;</span><span class="p">:</span> <span class="s1">&#39;float&#39;</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.InstanceMatcher.__annotations__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>dict() -&gt; new empty dictionary
dict(mapping) -&gt; new dictionary initialized from a mapping object's
    (key, value) pairs
dict(iterable) -&gt; new dictionary initialized as if via:
    d = {}
    for k, v in iterable:
        d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.InstanceMatcher.__attrs_own_setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__attrs_own_setattr__</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.InstanceMatcher.__attrs_own_setattr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.InstanceMatcher.__attrs_props__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__attrs_props__</span> <span class="o">=</span> <span class="n">ClassProps</span><span class="p">(</span><span class="n">is_exception</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_slotted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">has_weakref_slot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">kw_only</span><span class="o">=&lt;</span><span class="n">KeywordOnly</span><span class="o">.</span><span class="n">NO</span><span class="p">:</span> <span class="s1">&#39;no&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">collected_fields_by_mro</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_init</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_repr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_eq</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_ordering</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hashability</span><span class="o">=&lt;</span><span class="n">Hashability</span><span class="o">.</span><span class="n">UNHASHABLE</span><span class="p">:</span> <span class="s1">&#39;unhashable&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">added_match_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_str</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">added_pickling</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on_setattr_hook</span><span class="o">=&lt;</span><span class="n">function</span> <span class="n">pipe</span><span class="o">.&lt;</span><span class="nb">locals</span><span class="o">&gt;.</span><span class="n">wrapped_pipe</span> <span class="n">at</span> <span class="mh">0x7f2d7812e0c0</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">field_transformer</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.InstanceMatcher.__attrs_props__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Effective class properties as derived from parameters to <code>attr.s()</code> or
<code>define()</code> decorators.</p>
<p>This is the same data structure that <em>attrs</em> uses internally to decide how
to construct the final class.</p>
<p>Warning:</p>
<div class="highlight"><pre><span></span><code>This feature is currently **experimental** and is not covered by our
strict backwards-compatibility guarantees.
</code></pre></div>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.is_exception">is_exception</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is treated as an exception class.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.is_slotted">is_slotted</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is <code>slotted &lt;slotted classes&gt;</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.has_weakref_slot">has_weakref_slot</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has a slot for weak references.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.is_frozen">is_frozen</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is frozen.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.kw_only">kw_only</span></code></td>
            <td>
                  <code><span title="KeywordOnly">KeywordOnly</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether / how the class enforces keyword-only arguments on the
<code>__init__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.collected_fields_by_mro">collected_fields_by_mro</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class fields were collected by method resolution order.
That is, correctly but unlike <code>dataclasses</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.added_init">added_init</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__init__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.added_repr">added_repr</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__repr__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.added_eq">added_eq</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated equality methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.added_ordering">added_ordering</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated ordering methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.hashability">hashability</span></code></td>
            <td>
                  <code><span title="Hashability">Hashability</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How <code>hashable &lt;hashing&gt;</code> the class is.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.added_match_args">added_match_args</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class supports positional <code>match &lt;match&gt;</code> over its
fields.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.added_str">added_str</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__str__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.added_pickling">added_pickling</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated <code>__getstate__</code> and
<code>__setstate__</code> methods for <code>pickle</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.on_setattr_hook">on_setattr_hook</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span>[[<span title="typing.Any">Any</span>, <span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class's <code>__setattr__</code> hook.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.__attrs_props__.field_transformer">field_transformer</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span>[[<span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>]], <span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class's <code>field transformers &lt;transform-fields&gt;</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>.. versionadded:: 25.4.0</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.InstanceMatcher.__doc__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__doc__</span> <span class="o">=</span> <span class="s1">&#39;Matcher for comparing and matching instances.</span><span class="se">\n\n</span><span class="s1">    Attributes:</span><span class="se">\n</span><span class="s1">        method: The matching method to use. Can be an InstanceMatchMethod enum value</span><span class="se">\n</span><span class="s1">            or a string that will be converted to the enum. Default is SPATIAL.</span><span class="se">\n</span><span class="s1">        threshold: The threshold value used for matching. For SPATIAL method, this is</span><span class="se">\n</span><span class="s1">            the maximum pixel distance. For IOU method, this is the minimum IoU value.</span><span class="se">\n</span><span class="s1">            Not used for IDENTITY method. Default is 5.0.</span><span class="se">\n</span><span class="s1">    &#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.InstanceMatcher.__doc__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.InstanceMatcher.__match_args__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__match_args__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s1">&#39;threshold&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.InstanceMatcher.__match_args__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.InstanceMatcher.__module__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__module__</span> <span class="o">=</span> <span class="s1">&#39;sleap_io.model.matching&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.InstanceMatcher.__module__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.InstanceMatcher.__slots__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s1">&#39;threshold&#39;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.InstanceMatcher.__slots__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.InstanceMatcher.__weakref__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__weakref__</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#sleap_io.model.matching.InstanceMatcher.__weakref__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>list of weak references to the object</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.InstanceMatcher.__eq__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.InstanceMatcher.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class InstanceMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-16" name="__codelineno-0-16"></a><a href="#__codelineno-0-16"><span class="linenos" data-linenos="16 "></span></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><a href="#__codelineno-0-17"><span class="linenos" data-linenos="17 "></span></a>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><a href="#__codelineno-0-18"><span class="linenos" data-linenos="18 "></span></a><span class="s2">from __future__ import annotations</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><a href="#__codelineno-0-19"><span class="linenos" data-linenos="19 "></span></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><a href="#__codelineno-0-20"><span class="linenos" data-linenos="20 "></span></a><span class="s2">from enum import Enum</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><a href="#__codelineno-0-21"><span class="linenos" data-linenos="21 "></span></a><span class="s2">from typing import Any, Union</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.InstanceMatcher.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">method</span><span class="o">=&lt;</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span> <span class="s1">&#39;spatial&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.InstanceMatcher.__init__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class InstanceMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-23" name="__codelineno-0-23"></a><a href="#__codelineno-0-23"><span class="linenos" data-linenos="23 "></span></a><span class="kn">import</span><span class="w"> </span><span class="nn">attrs</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><a href="#__codelineno-0-24"><span class="linenos" data-linenos="24 "></span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><a href="#__codelineno-0-25"><span class="linenos" data-linenos="25 "></span></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><a href="#__codelineno-0-26"><span class="linenos" data-linenos="26 "></span></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.instance</span><span class="w"> </span><span class="kn">import</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">Track</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.InstanceMatcher.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#sleap_io.model.matching.InstanceMatcher.__repr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class InstanceMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="s2">&quot;&quot;&quot;Unified matcher system for comparing and matching data structures during merging.</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos=" 2 "></span></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><a href="#__codelineno-0-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s2">This module provides configurable matchers for comparing skeletons, instances, tracks,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><a href="#__codelineno-0-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s2">videos, and frames during merge operations. The matchers use various strategies to</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><a href="#__codelineno-0-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s2">determine when data structures should be considered equivalent during merging.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><a href="#__codelineno-0-6"><span class="linenos" data-linenos=" 6 "></span></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><a href="#__codelineno-0-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s2">Key features:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><a href="#__codelineno-0-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s2">- Skeleton matching: exact, structure-based, overlap, and subset matching</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><a href="#__codelineno-0-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s2">- Instance matching: spatial proximity, track identity, and bounding box IoU</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><a href="#__codelineno-0-10"><span class="linenos" data-linenos="10 "></span></a><span class="s2">- Track matching: by name or object identity</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><a href="#__codelineno-0-11"><span class="linenos" data-linenos="11 "></span></a><span class="s2">- Video matching: path, basename, content, and auto matching</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><a href="#__codelineno-0-12"><span class="linenos" data-linenos="12 "></span></a><span class="s2">- Frame matching with configurable video matching requirements</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><a href="#__codelineno-0-13"><span class="linenos" data-linenos="13 "></span></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><a href="#__codelineno-0-14"><span class="linenos" data-linenos="14 "></span></a><span class="s2">Video matching supports path-based, filename-based, content-based, and</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><a href="#__codelineno-0-15"><span class="linenos" data-linenos="15 "></span></a><span class="s2">automatic strategies.</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.InstanceMatcher.__setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.InstanceMatcher.__setattr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class InstanceMatcher.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.InstanceMatcher.find_matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_matches</span><span class="p">(</span><span class="n">instances1</span><span class="p">,</span> <span class="n">instances2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.InstanceMatcher.find_matches" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Find all matching instances between two lists.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of (idx1, idx2, score) tuples for matching instances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-201" name="__codelineno-0-201"></a><a href="#__codelineno-0-201"><span class="linenos" data-linenos="201 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">find_matches</span><span class="p">(</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><a href="#__codelineno-0-202"><span class="linenos" data-linenos="202 "></span></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">instances1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span><span class="p">],</span> <span class="n">instances2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span><span class="p">]</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><a href="#__codelineno-0-203"><span class="linenos" data-linenos="203 "></span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><a href="#__codelineno-0-204"><span class="linenos" data-linenos="204 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Find all matching instances between two lists.</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><a href="#__codelineno-0-205"><span class="linenos" data-linenos="205 "></span></a>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><a href="#__codelineno-0-206"><span class="linenos" data-linenos="206 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><a href="#__codelineno-0-207"><span class="linenos" data-linenos="207 "></span></a><span class="sd">        List of (idx1, idx2, score) tuples for matching instances.</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><a href="#__codelineno-0-208"><span class="linenos" data-linenos="208 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><a href="#__codelineno-0-209"><span class="linenos" data-linenos="209 "></span></a>    <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><a href="#__codelineno-0-210"><span class="linenos" data-linenos="210 "></span></a>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><a href="#__codelineno-0-211"><span class="linenos" data-linenos="211 "></span></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">inst1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instances1</span><span class="p">):</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><a href="#__codelineno-0-212"><span class="linenos" data-linenos="212 "></span></a>        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">inst2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instances2</span><span class="p">):</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><a href="#__codelineno-0-213"><span class="linenos" data-linenos="213 "></span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">inst1</span><span class="p">,</span> <span class="n">inst2</span><span class="p">):</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><a href="#__codelineno-0-214"><span class="linenos" data-linenos="214 "></span></a>                <span class="c1"># Calculate match score based on method</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><a href="#__codelineno-0-215"><span class="linenos" data-linenos="215 "></span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><a href="#__codelineno-0-216"><span class="linenos" data-linenos="216 "></span></a>                    <span class="c1"># Use inverse distance as score</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><a href="#__codelineno-0-217"><span class="linenos" data-linenos="217 "></span></a>                    <span class="n">pts1</span> <span class="o">=</span> <span class="n">inst1</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><a href="#__codelineno-0-218"><span class="linenos" data-linenos="218 "></span></a>                    <span class="n">pts2</span> <span class="o">=</span> <span class="n">inst2</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><a href="#__codelineno-0-219"><span class="linenos" data-linenos="219 "></span></a>                    <span class="n">valid</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pts1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pts2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]))</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><a href="#__codelineno-0-220"><span class="linenos" data-linenos="220 "></span></a>                    <span class="k">if</span> <span class="n">valid</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><a href="#__codelineno-0-221"><span class="linenos" data-linenos="221 "></span></a>                        <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><a href="#__codelineno-0-222"><span class="linenos" data-linenos="222 "></span></a>                            <span class="n">pts1</span><span class="p">[</span><span class="n">valid</span><span class="p">]</span> <span class="o">-</span> <span class="n">pts2</span><span class="p">[</span><span class="n">valid</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><a href="#__codelineno-0-223"><span class="linenos" data-linenos="223 "></span></a>                        <span class="p">)</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><a href="#__codelineno-0-224"><span class="linenos" data-linenos="224 "></span></a>                        <span class="n">score</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">distances</span><span class="p">))</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><a href="#__codelineno-0-225"><span class="linenos" data-linenos="225 "></span></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><a href="#__codelineno-0-226"><span class="linenos" data-linenos="226 "></span></a>                        <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><a href="#__codelineno-0-227"><span class="linenos" data-linenos="227 "></span></a>                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">:</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><a href="#__codelineno-0-228"><span class="linenos" data-linenos="228 "></span></a>                    <span class="c1"># Calculate actual IoU as score</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><a href="#__codelineno-0-229"><span class="linenos" data-linenos="229 "></span></a>                    <span class="n">bbox1</span> <span class="o">=</span> <span class="n">inst1</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><a href="#__codelineno-0-230"><span class="linenos" data-linenos="230 "></span></a>                    <span class="n">bbox2</span> <span class="o">=</span> <span class="n">inst2</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><a href="#__codelineno-0-231"><span class="linenos" data-linenos="231 "></span></a>                    <span class="k">if</span> <span class="n">bbox1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bbox2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><a href="#__codelineno-0-232"><span class="linenos" data-linenos="232 "></span></a>                        <span class="c1"># Calculate IoU</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><a href="#__codelineno-0-233"><span class="linenos" data-linenos="233 "></span></a>                        <span class="n">intersection_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><a href="#__codelineno-0-234"><span class="linenos" data-linenos="234 "></span></a>                        <span class="n">intersection_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><a href="#__codelineno-0-235"><span class="linenos" data-linenos="235 "></span></a>                        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">intersection_min</span> <span class="o">&lt;</span> <span class="n">intersection_max</span><span class="p">):</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><a href="#__codelineno-0-236"><span class="linenos" data-linenos="236 "></span></a>                            <span class="n">intersection_area</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><a href="#__codelineno-0-237"><span class="linenos" data-linenos="237 "></span></a>                                <span class="n">intersection_max</span> <span class="o">-</span> <span class="n">intersection_min</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><a href="#__codelineno-0-238"><span class="linenos" data-linenos="238 "></span></a>                            <span class="p">)</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><a href="#__codelineno-0-239"><span class="linenos" data-linenos="239 "></span></a>                            <span class="n">area1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><a href="#__codelineno-0-240"><span class="linenos" data-linenos="240 "></span></a>                            <span class="n">area2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">bbox2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><a href="#__codelineno-0-241"><span class="linenos" data-linenos="241 "></span></a>                            <span class="n">union_area</span> <span class="o">=</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">area2</span> <span class="o">-</span> <span class="n">intersection_area</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><a href="#__codelineno-0-242"><span class="linenos" data-linenos="242 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><a href="#__codelineno-0-243"><span class="linenos" data-linenos="243 "></span></a>                                <span class="n">intersection_area</span> <span class="o">/</span> <span class="n">union_area</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><a href="#__codelineno-0-244"><span class="linenos" data-linenos="244 "></span></a>                                <span class="k">if</span> <span class="n">union_area</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><a href="#__codelineno-0-245"><span class="linenos" data-linenos="245 "></span></a>                                <span class="k">else</span> <span class="mi">0</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><a href="#__codelineno-0-246"><span class="linenos" data-linenos="246 "></span></a>                            <span class="p">)</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><a href="#__codelineno-0-247"><span class="linenos" data-linenos="247 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><a href="#__codelineno-0-248"><span class="linenos" data-linenos="248 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><a href="#__codelineno-0-249"><span class="linenos" data-linenos="249 "></span></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><a href="#__codelineno-0-250"><span class="linenos" data-linenos="250 "></span></a>                        <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><a href="#__codelineno-0-251"><span class="linenos" data-linenos="251 "></span></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><a href="#__codelineno-0-252"><span class="linenos" data-linenos="252 "></span></a>                    <span class="n">score</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Binary match for identity</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><a href="#__codelineno-0-253"><span class="linenos" data-linenos="253 "></span></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><a href="#__codelineno-0-254"><span class="linenos" data-linenos="254 "></span></a>                <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">score</span><span class="p">))</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><a href="#__codelineno-0-255"><span class="linenos" data-linenos="255 "></span></a>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><a href="#__codelineno-0-256"><span class="linenos" data-linenos="256 "></span></a>    <span class="k">return</span> <span class="n">matches</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.InstanceMatcher.match" class="doc doc-heading">
            <code class="highlight language-python"><span class="k">match</span><span class="p">(</span><span class="n">instance1</span><span class="p">,</span> <span class="n">instance2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.InstanceMatcher.match" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Check if two instances match according to the configured method.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-190" name="__codelineno-0-190"></a><a href="#__codelineno-0-190"><span class="linenos" data-linenos="190 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance1</span><span class="p">:</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">instance2</span><span class="p">:</span> <span class="n">Instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><a href="#__codelineno-0-191"><span class="linenos" data-linenos="191 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two instances match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><a href="#__codelineno-0-192"><span class="linenos" data-linenos="192 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><a href="#__codelineno-0-193"><span class="linenos" data-linenos="193 "></span></a>        <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">same_pose_as</span><span class="p">(</span><span class="n">instance2</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><a href="#__codelineno-0-194"><span class="linenos" data-linenos="194 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><a href="#__codelineno-0-195"><span class="linenos" data-linenos="195 "></span></a>        <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">same_identity_as</span><span class="p">(</span><span class="n">instance2</span><span class="p">)</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><a href="#__codelineno-0-196"><span class="linenos" data-linenos="196 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">:</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><a href="#__codelineno-0-197"><span class="linenos" data-linenos="197 "></span></a>        <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">instance2</span><span class="p">,</span> <span class="n">iou_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><a href="#__codelineno-0-198"><span class="linenos" data-linenos="198 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><a href="#__codelineno-0-199"><span class="linenos" data-linenos="199 "></span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown instance match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="sleap_io.model.matching.SkeletonMatcher" class="doc doc-heading">
            <code>sleap_io.model.matching.SkeletonMatcher</code>


<a href="#sleap_io.model.matching.SkeletonMatcher" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">



        <p>Matcher for comparing and matching skeletons.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.method">method</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be a SkeletonMatchMethod enum value
or a string that will be converted to the enum. Default is STRUCTURE.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.require_same_order">require_same_order</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to require nodes in the same order for STRUCTURE
matching. Only used when method is STRUCTURE. Default is False.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.min_overlap">min_overlap</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum Jaccard similarity required for OVERLAP matching.
Only used when method is OVERLAP. Default is 0.5.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__eq__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.SkeletonMatcher.__eq__&lt;/code&gt;)" href="#sleap_io.model.matching.SkeletonMatcher.__eq__">__eq__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class SkeletonMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SkeletonMatchMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;STRUCTURE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;structure&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;require_same_order&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min_overlap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.SkeletonMatcher.__init__&lt;/code&gt;)" href="#sleap_io.model.matching.SkeletonMatcher.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class SkeletonMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__repr__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.SkeletonMatcher.__repr__&lt;/code&gt;)" href="#sleap_io.model.matching.SkeletonMatcher.__repr__">__repr__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class SkeletonMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__setattr__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.SkeletonMatcher.__setattr__&lt;/code&gt;)" href="#sleap_io.model.matching.SkeletonMatcher.__setattr__">__setattr__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class SkeletonMatcher.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skeleton1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;skeleton2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.SkeletonMatcher.match&lt;/code&gt;)" href="#sleap_io.model.matching.SkeletonMatcher.match">match</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if two skeletons match according to the configured method.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="mkdocstrings-source">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-132" name="__codelineno-0-132"></a><a href="#__codelineno-0-132"><span class="linenos" data-linenos="132 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><a href="#__codelineno-0-133"><span class="linenos" data-linenos="133 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">SkeletonMatcher</span><span class="p">:</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><a href="#__codelineno-0-134"><span class="linenos" data-linenos="134 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Matcher for comparing and matching skeletons.</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><a href="#__codelineno-0-135"><span class="linenos" data-linenos="135 "></span></a>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><a href="#__codelineno-0-136"><span class="linenos" data-linenos="136 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><a href="#__codelineno-0-137"><span class="linenos" data-linenos="137 "></span></a><span class="sd">        method: The matching method to use. Can be a SkeletonMatchMethod enum value</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><a href="#__codelineno-0-138"><span class="linenos" data-linenos="138 "></span></a><span class="sd">            or a string that will be converted to the enum. Default is STRUCTURE.</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><a href="#__codelineno-0-139"><span class="linenos" data-linenos="139 "></span></a><span class="sd">        require_same_order: Whether to require nodes in the same order for STRUCTURE</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><a href="#__codelineno-0-140"><span class="linenos" data-linenos="140 "></span></a><span class="sd">            matching. Only used when method is STRUCTURE. Default is False.</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><a href="#__codelineno-0-141"><span class="linenos" data-linenos="141 "></span></a><span class="sd">        min_overlap: Minimum Jaccard similarity required for OVERLAP matching.</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><a href="#__codelineno-0-142"><span class="linenos" data-linenos="142 "></span></a><span class="sd">            Only used when method is OVERLAP. Default is 0.5.</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><a href="#__codelineno-0-143"><span class="linenos" data-linenos="143 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><a href="#__codelineno-0-144"><span class="linenos" data-linenos="144 "></span></a>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><a href="#__codelineno-0-145"><span class="linenos" data-linenos="145 "></span></a>    <span class="n">method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">SkeletonMatchMethod</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><a href="#__codelineno-0-146"><span class="linenos" data-linenos="146 "></span></a>        <span class="n">default</span><span class="o">=</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">,</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><a href="#__codelineno-0-147"><span class="linenos" data-linenos="147 "></span></a>        <span class="n">converter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SkeletonMatchMethod</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><a href="#__codelineno-0-148"><span class="linenos" data-linenos="148 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><a href="#__codelineno-0-149"><span class="linenos" data-linenos="149 "></span></a>    <span class="n">require_same_order</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><a href="#__codelineno-0-150"><span class="linenos" data-linenos="150 "></span></a>    <span class="n">min_overlap</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><a href="#__codelineno-0-151"><span class="linenos" data-linenos="151 "></span></a>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><a href="#__codelineno-0-152"><span class="linenos" data-linenos="152 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skeleton1</span><span class="p">:</span> <span class="n">Skeleton</span><span class="p">,</span> <span class="n">skeleton2</span><span class="p">:</span> <span class="n">Skeleton</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><a href="#__codelineno-0-153"><span class="linenos" data-linenos="153 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two skeletons match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><a href="#__codelineno-0-154"><span class="linenos" data-linenos="154 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">EXACT</span><span class="p">:</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><a href="#__codelineno-0-155"><span class="linenos" data-linenos="155 "></span></a>            <span class="k">return</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">skeleton2</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><a href="#__codelineno-0-156"><span class="linenos" data-linenos="156 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">:</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><a href="#__codelineno-0-157"><span class="linenos" data-linenos="157 "></span></a>            <span class="k">return</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><a href="#__codelineno-0-158"><span class="linenos" data-linenos="158 "></span></a>                <span class="n">skeleton2</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">require_same_order</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><a href="#__codelineno-0-159"><span class="linenos" data-linenos="159 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><a href="#__codelineno-0-160"><span class="linenos" data-linenos="160 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">OVERLAP</span><span class="p">:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><a href="#__codelineno-0-161"><span class="linenos" data-linenos="161 "></span></a>            <span class="n">metrics</span> <span class="o">=</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">node_similarities</span><span class="p">(</span><span class="n">skeleton2</span><span class="p">)</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><a href="#__codelineno-0-162"><span class="linenos" data-linenos="162 "></span></a>            <span class="k">return</span> <span class="n">metrics</span><span class="p">[</span><span class="s2">&quot;jaccard&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_overlap</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><a href="#__codelineno-0-163"><span class="linenos" data-linenos="163 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">SUBSET</span><span class="p">:</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><a href="#__codelineno-0-164"><span class="linenos" data-linenos="164 "></span></a>            <span class="c1"># Check if skeleton1 nodes are subset of skeleton2</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><a href="#__codelineno-0-165"><span class="linenos" data-linenos="165 "></span></a>            <span class="n">nodes1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">skeleton1</span><span class="o">.</span><span class="n">node_names</span><span class="p">)</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><a href="#__codelineno-0-166"><span class="linenos" data-linenos="166 "></span></a>            <span class="n">nodes2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">skeleton2</span><span class="o">.</span><span class="n">node_names</span><span class="p">)</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><a href="#__codelineno-0-167"><span class="linenos" data-linenos="167 "></span></a>            <span class="k">return</span> <span class="n">nodes1</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">nodes2</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><a href="#__codelineno-0-168"><span class="linenos" data-linenos="168 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><a href="#__codelineno-0-169"><span class="linenos" data-linenos="169 "></span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown skeleton match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.SkeletonMatcher.__annotations__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__annotations__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Union[SkeletonMatchMethod, str]&#39;</span><span class="p">,</span> <span class="s1">&#39;require_same_order&#39;</span><span class="p">:</span> <span class="s1">&#39;bool&#39;</span><span class="p">,</span> <span class="s1">&#39;min_overlap&#39;</span><span class="p">:</span> <span class="s1">&#39;float&#39;</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SkeletonMatcher.__annotations__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>dict() -&gt; new empty dictionary
dict(mapping) -&gt; new dictionary initialized from a mapping object's
    (key, value) pairs
dict(iterable) -&gt; new dictionary initialized as if via:
    d = {}
    for k, v in iterable:
        d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.SkeletonMatcher.__attrs_own_setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__attrs_own_setattr__</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SkeletonMatcher.__attrs_own_setattr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.SkeletonMatcher.__attrs_props__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__attrs_props__</span> <span class="o">=</span> <span class="n">ClassProps</span><span class="p">(</span><span class="n">is_exception</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_slotted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">has_weakref_slot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">kw_only</span><span class="o">=&lt;</span><span class="n">KeywordOnly</span><span class="o">.</span><span class="n">NO</span><span class="p">:</span> <span class="s1">&#39;no&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">collected_fields_by_mro</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_init</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_repr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_eq</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_ordering</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hashability</span><span class="o">=&lt;</span><span class="n">Hashability</span><span class="o">.</span><span class="n">UNHASHABLE</span><span class="p">:</span> <span class="s1">&#39;unhashable&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">added_match_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_str</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">added_pickling</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on_setattr_hook</span><span class="o">=&lt;</span><span class="n">function</span> <span class="n">pipe</span><span class="o">.&lt;</span><span class="nb">locals</span><span class="o">&gt;.</span><span class="n">wrapped_pipe</span> <span class="n">at</span> <span class="mh">0x7f2d7812e0c0</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">field_transformer</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SkeletonMatcher.__attrs_props__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Effective class properties as derived from parameters to <code>attr.s()</code> or
<code>define()</code> decorators.</p>
<p>This is the same data structure that <em>attrs</em> uses internally to decide how
to construct the final class.</p>
<p>Warning:</p>
<div class="highlight"><pre><span></span><code>This feature is currently **experimental** and is not covered by our
strict backwards-compatibility guarantees.
</code></pre></div>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.is_exception">is_exception</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is treated as an exception class.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.is_slotted">is_slotted</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is <code>slotted &lt;slotted classes&gt;</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.has_weakref_slot">has_weakref_slot</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has a slot for weak references.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.is_frozen">is_frozen</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is frozen.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.kw_only">kw_only</span></code></td>
            <td>
                  <code><span title="KeywordOnly">KeywordOnly</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether / how the class enforces keyword-only arguments on the
<code>__init__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.collected_fields_by_mro">collected_fields_by_mro</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class fields were collected by method resolution order.
That is, correctly but unlike <code>dataclasses</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.added_init">added_init</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__init__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.added_repr">added_repr</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__repr__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.added_eq">added_eq</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated equality methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.added_ordering">added_ordering</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated ordering methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.hashability">hashability</span></code></td>
            <td>
                  <code><span title="Hashability">Hashability</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How <code>hashable &lt;hashing&gt;</code> the class is.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.added_match_args">added_match_args</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class supports positional <code>match &lt;match&gt;</code> over its
fields.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.added_str">added_str</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__str__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.added_pickling">added_pickling</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated <code>__getstate__</code> and
<code>__setstate__</code> methods for <code>pickle</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.on_setattr_hook">on_setattr_hook</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span>[[<span title="typing.Any">Any</span>, <span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class's <code>__setattr__</code> hook.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.__attrs_props__.field_transformer">field_transformer</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span>[[<span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>]], <span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class's <code>field transformers &lt;transform-fields&gt;</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>.. versionadded:: 25.4.0</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.SkeletonMatcher.__doc__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__doc__</span> <span class="o">=</span> <span class="s1">&#39;Matcher for comparing and matching skeletons.</span><span class="se">\n\n</span><span class="s1">    Attributes:</span><span class="se">\n</span><span class="s1">        method: The matching method to use. Can be a SkeletonMatchMethod enum value</span><span class="se">\n</span><span class="s1">            or a string that will be converted to the enum. Default is STRUCTURE.</span><span class="se">\n</span><span class="s1">        require_same_order: Whether to require nodes in the same order for STRUCTURE</span><span class="se">\n</span><span class="s1">            matching. Only used when method is STRUCTURE. Default is False.</span><span class="se">\n</span><span class="s1">        min_overlap: Minimum Jaccard similarity required for OVERLAP matching.</span><span class="se">\n</span><span class="s1">            Only used when method is OVERLAP. Default is 0.5.</span><span class="se">\n</span><span class="s1">    &#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SkeletonMatcher.__doc__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.SkeletonMatcher.__match_args__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__match_args__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s1">&#39;require_same_order&#39;</span><span class="p">,</span> <span class="s1">&#39;min_overlap&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SkeletonMatcher.__match_args__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.SkeletonMatcher.__module__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__module__</span> <span class="o">=</span> <span class="s1">&#39;sleap_io.model.matching&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SkeletonMatcher.__module__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.SkeletonMatcher.__slots__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s1">&#39;require_same_order&#39;</span><span class="p">,</span> <span class="s1">&#39;min_overlap&#39;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SkeletonMatcher.__slots__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.SkeletonMatcher.__weakref__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__weakref__</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#sleap_io.model.matching.SkeletonMatcher.__weakref__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>list of weak references to the object</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.SkeletonMatcher.__eq__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.SkeletonMatcher.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class SkeletonMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-16" name="__codelineno-0-16"></a><a href="#__codelineno-0-16"><span class="linenos" data-linenos="16 "></span></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><a href="#__codelineno-0-17"><span class="linenos" data-linenos="17 "></span></a>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><a href="#__codelineno-0-18"><span class="linenos" data-linenos="18 "></span></a><span class="s2">from __future__ import annotations</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><a href="#__codelineno-0-19"><span class="linenos" data-linenos="19 "></span></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><a href="#__codelineno-0-20"><span class="linenos" data-linenos="20 "></span></a><span class="s2">from enum import Enum</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><a href="#__codelineno-0-21"><span class="linenos" data-linenos="21 "></span></a><span class="s2">from typing import Any, Union</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><a href="#__codelineno-0-22"><span class="linenos" data-linenos="22 "></span></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><a href="#__codelineno-0-23"><span class="linenos" data-linenos="23 "></span></a><span class="s2">import attrs</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.SkeletonMatcher.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">method</span><span class="o">=&lt;</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">:</span> <span class="s1">&#39;structure&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">min_overlap</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.SkeletonMatcher.__init__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class SkeletonMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-24" name="__codelineno-0-24"></a><a href="#__codelineno-0-24"><span class="linenos" data-linenos="24 "></span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><a href="#__codelineno-0-25"><span class="linenos" data-linenos="25 "></span></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><a href="#__codelineno-0-26"><span class="linenos" data-linenos="26 "></span></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.instance</span><span class="w"> </span><span class="kn">import</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">Track</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><a href="#__codelineno-0-27"><span class="linenos" data-linenos="27 "></span></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.labeled_frame</span><span class="w"> </span><span class="kn">import</span> <span class="n">LabeledFrame</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><a href="#__codelineno-0-28"><span class="linenos" data-linenos="28 "></span></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.skeleton</span><span class="w"> </span><span class="kn">import</span> <span class="n">Skeleton</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.SkeletonMatcher.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#sleap_io.model.matching.SkeletonMatcher.__repr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class SkeletonMatcher.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="s2">&quot;&quot;&quot;Unified matcher system for comparing and matching data structures during merging.</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos=" 2 "></span></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><a href="#__codelineno-0-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s2">This module provides configurable matchers for comparing skeletons, instances, tracks,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><a href="#__codelineno-0-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s2">videos, and frames during merge operations. The matchers use various strategies to</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><a href="#__codelineno-0-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s2">determine when data structures should be considered equivalent during merging.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><a href="#__codelineno-0-6"><span class="linenos" data-linenos=" 6 "></span></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><a href="#__codelineno-0-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s2">Key features:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><a href="#__codelineno-0-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s2">- Skeleton matching: exact, structure-based, overlap, and subset matching</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><a href="#__codelineno-0-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s2">- Instance matching: spatial proximity, track identity, and bounding box IoU</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><a href="#__codelineno-0-10"><span class="linenos" data-linenos="10 "></span></a><span class="s2">- Track matching: by name or object identity</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><a href="#__codelineno-0-11"><span class="linenos" data-linenos="11 "></span></a><span class="s2">- Video matching: path, basename, content, and auto matching</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><a href="#__codelineno-0-12"><span class="linenos" data-linenos="12 "></span></a><span class="s2">- Frame matching with configurable video matching requirements</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><a href="#__codelineno-0-13"><span class="linenos" data-linenos="13 "></span></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><a href="#__codelineno-0-14"><span class="linenos" data-linenos="14 "></span></a><span class="s2">Video matching supports path-based, filename-based, content-based, and</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><a href="#__codelineno-0-15"><span class="linenos" data-linenos="15 "></span></a><span class="s2">automatic strategies.</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.SkeletonMatcher.__setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.SkeletonMatcher.__setattr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class SkeletonMatcher.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.SkeletonMatcher.match" class="doc doc-heading">
            <code class="highlight language-python"><span class="k">match</span><span class="p">(</span><span class="n">skeleton1</span><span class="p">,</span> <span class="n">skeleton2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.SkeletonMatcher.match" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Check if two skeletons match according to the configured method.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-152" name="__codelineno-0-152"></a><a href="#__codelineno-0-152"><span class="linenos" data-linenos="152 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skeleton1</span><span class="p">:</span> <span class="n">Skeleton</span><span class="p">,</span> <span class="n">skeleton2</span><span class="p">:</span> <span class="n">Skeleton</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><a href="#__codelineno-0-153"><span class="linenos" data-linenos="153 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two skeletons match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><a href="#__codelineno-0-154"><span class="linenos" data-linenos="154 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">EXACT</span><span class="p">:</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><a href="#__codelineno-0-155"><span class="linenos" data-linenos="155 "></span></a>        <span class="k">return</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">skeleton2</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><a href="#__codelineno-0-156"><span class="linenos" data-linenos="156 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">:</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><a href="#__codelineno-0-157"><span class="linenos" data-linenos="157 "></span></a>        <span class="k">return</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><a href="#__codelineno-0-158"><span class="linenos" data-linenos="158 "></span></a>            <span class="n">skeleton2</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">require_same_order</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><a href="#__codelineno-0-159"><span class="linenos" data-linenos="159 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><a href="#__codelineno-0-160"><span class="linenos" data-linenos="160 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">OVERLAP</span><span class="p">:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><a href="#__codelineno-0-161"><span class="linenos" data-linenos="161 "></span></a>        <span class="n">metrics</span> <span class="o">=</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">node_similarities</span><span class="p">(</span><span class="n">skeleton2</span><span class="p">)</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><a href="#__codelineno-0-162"><span class="linenos" data-linenos="162 "></span></a>        <span class="k">return</span> <span class="n">metrics</span><span class="p">[</span><span class="s2">&quot;jaccard&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_overlap</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><a href="#__codelineno-0-163"><span class="linenos" data-linenos="163 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">SUBSET</span><span class="p">:</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><a href="#__codelineno-0-164"><span class="linenos" data-linenos="164 "></span></a>        <span class="c1"># Check if skeleton1 nodes are subset of skeleton2</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><a href="#__codelineno-0-165"><span class="linenos" data-linenos="165 "></span></a>        <span class="n">nodes1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">skeleton1</span><span class="o">.</span><span class="n">node_names</span><span class="p">)</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><a href="#__codelineno-0-166"><span class="linenos" data-linenos="166 "></span></a>        <span class="n">nodes2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">skeleton2</span><span class="o">.</span><span class="n">node_names</span><span class="p">)</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><a href="#__codelineno-0-167"><span class="linenos" data-linenos="167 "></span></a>        <span class="k">return</span> <span class="n">nodes1</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">nodes2</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><a href="#__codelineno-0-168"><span class="linenos" data-linenos="168 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><a href="#__codelineno-0-169"><span class="linenos" data-linenos="169 "></span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown skeleton match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="pre-configured-matchers">Pre-configured matchers<a class="headerlink" href="#pre-configured-matchers" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-attribute">



<h4 id="sleap_io.model.matching.BASENAME_VIDEO_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">BASENAME_VIDEO_MATCHER</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=&lt;</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">:</span> <span class="s1">&#39;basename&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.BASENAME_VIDEO_MATCHER" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Matcher for comparing and matching videos.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.BASENAME_VIDEO_MATCHER.method">method</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be a VideoMatchMethod enum value
or a string that will be converted to the enum. Default is AUTO.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.BASENAME_VIDEO_MATCHER.strict">strict</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use strict path matching for the PATH method.
When True, paths must be exactly identical. When False, paths
are normalized before comparison. Only used when method is PATH.
Default is False.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="sleap_io.model.matching.AUTO_VIDEO_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">AUTO_VIDEO_MATCHER</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=&lt;</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.AUTO_VIDEO_MATCHER" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">

        <p>Matcher for comparing and matching videos.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.AUTO_VIDEO_MATCHER.method">method</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be a VideoMatchMethod enum value
or a string that will be converted to the enum. Default is AUTO.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.AUTO_VIDEO_MATCHER.strict">strict</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use strict path matching for the PATH method.
When True, paths must be exactly identical. When False, paths
are normalized before comparison. Only used when method is PATH.
Default is False.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div><h3 id="result-classes">Result classes<a class="headerlink" href="#result-classes" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-class">



<h4 id="sleap_io.model.matching.MergeResult" class="doc doc-heading">
            <code>sleap_io.model.matching.MergeResult</code>


<a href="#sleap_io.model.matching.MergeResult" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents first">



        <p>Result of a merge operation.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.successful">successful</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the merge completed successfully.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.frames_merged">frames_merged</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of frames that were merged.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.instances_added">instances_added</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of new instances added.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.instances_updated">instances_updated</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of existing instances that were updated.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.instances_skipped">instances_skipped</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of instances that were skipped.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.conflicts">conflicts</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of conflicts that were resolved during merging.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.errors">errors</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of errors encountered during merging.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__eq__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeResult.__eq__&lt;/code&gt;)" href="#sleap_io.model.matching.MergeResult.__eq__">__eq__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class MergeResult.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;successful&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frames_merged&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instances_added&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instances_updated&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instances_skipped&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conflicts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NOTHING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NOTHING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeResult.__init__&lt;/code&gt;)" href="#sleap_io.model.matching.MergeResult.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class MergeResult.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__repr__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeResult.__repr__&lt;/code&gt;)" href="#sleap_io.model.matching.MergeResult.__repr__">__repr__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Method generated by attrs for class MergeResult.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeResult.summary&lt;/code&gt;)" href="#sleap_io.model.matching.MergeResult.summary">summary</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Generate a human-readable summary of the merge result.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="mkdocstrings-source">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-409" name="__codelineno-0-409"></a><a href="#__codelineno-0-409"><span class="linenos" data-linenos="409 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><a href="#__codelineno-0-410"><span class="linenos" data-linenos="410 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">MergeResult</span><span class="p">:</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><a href="#__codelineno-0-411"><span class="linenos" data-linenos="411 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Result of a merge operation.</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><a href="#__codelineno-0-412"><span class="linenos" data-linenos="412 "></span></a>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><a href="#__codelineno-0-413"><span class="linenos" data-linenos="413 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><a href="#__codelineno-0-414"><span class="linenos" data-linenos="414 "></span></a><span class="sd">        successful: Whether the merge completed successfully.</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><a href="#__codelineno-0-415"><span class="linenos" data-linenos="415 "></span></a><span class="sd">        frames_merged: Number of frames that were merged.</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><a href="#__codelineno-0-416"><span class="linenos" data-linenos="416 "></span></a><span class="sd">        instances_added: Number of new instances added.</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><a href="#__codelineno-0-417"><span class="linenos" data-linenos="417 "></span></a><span class="sd">        instances_updated: Number of existing instances that were updated.</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><a href="#__codelineno-0-418"><span class="linenos" data-linenos="418 "></span></a><span class="sd">        instances_skipped: Number of instances that were skipped.</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><a href="#__codelineno-0-419"><span class="linenos" data-linenos="419 "></span></a><span class="sd">        conflicts: List of conflicts that were resolved during merging.</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><a href="#__codelineno-0-420"><span class="linenos" data-linenos="420 "></span></a><span class="sd">        errors: List of errors encountered during merging.</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><a href="#__codelineno-0-421"><span class="linenos" data-linenos="421 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><a href="#__codelineno-0-422"><span class="linenos" data-linenos="422 "></span></a>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><a href="#__codelineno-0-423"><span class="linenos" data-linenos="423 "></span></a>    <span class="n">successful</span><span class="p">:</span> <span class="nb">bool</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><a href="#__codelineno-0-424"><span class="linenos" data-linenos="424 "></span></a>    <span class="n">frames_merged</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><a href="#__codelineno-0-425"><span class="linenos" data-linenos="425 "></span></a>    <span class="n">instances_added</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><a href="#__codelineno-0-426"><span class="linenos" data-linenos="426 "></span></a>    <span class="n">instances_updated</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><a href="#__codelineno-0-427"><span class="linenos" data-linenos="427 "></span></a>    <span class="n">instances_skipped</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><a href="#__codelineno-0-428"><span class="linenos" data-linenos="428 "></span></a>    <span class="n">conflicts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ConflictResolution</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><a href="#__codelineno-0-429"><span class="linenos" data-linenos="429 "></span></a>    <span class="n">errors</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MergeError</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><a href="#__codelineno-0-430"><span class="linenos" data-linenos="430 "></span></a>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><a href="#__codelineno-0-431"><span class="linenos" data-linenos="431 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><a href="#__codelineno-0-432"><span class="linenos" data-linenos="432 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a human-readable summary of the merge result.&quot;&quot;&quot;</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><a href="#__codelineno-0-433"><span class="linenos" data-linenos="433 "></span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><a href="#__codelineno-0-434"><span class="linenos" data-linenos="434 "></span></a>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><a href="#__codelineno-0-435"><span class="linenos" data-linenos="435 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">successful</span><span class="p">:</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><a href="#__codelineno-0-436"><span class="linenos" data-linenos="436 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;✓ Merge completed successfully&quot;</span><span class="p">)</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><a href="#__codelineno-0-437"><span class="linenos" data-linenos="437 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><a href="#__codelineno-0-438"><span class="linenos" data-linenos="438 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;✗ Merge completed with errors&quot;</span><span class="p">)</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><a href="#__codelineno-0-439"><span class="linenos" data-linenos="439 "></span></a>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a><a href="#__codelineno-0-440"><span class="linenos" data-linenos="440 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Frames merged: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frames_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a><a href="#__codelineno-0-441"><span class="linenos" data-linenos="441 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances added: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_added</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a><a href="#__codelineno-0-442"><span class="linenos" data-linenos="442 "></span></a>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a><a href="#__codelineno-0-443"><span class="linenos" data-linenos="443 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances_updated</span><span class="p">:</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a><a href="#__codelineno-0-444"><span class="linenos" data-linenos="444 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances updated: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_updated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a><a href="#__codelineno-0-445"><span class="linenos" data-linenos="445 "></span></a>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a><a href="#__codelineno-0-446"><span class="linenos" data-linenos="446 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances_skipped</span><span class="p">:</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><a href="#__codelineno-0-447"><span class="linenos" data-linenos="447 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances skipped: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_skipped</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><a href="#__codelineno-0-448"><span class="linenos" data-linenos="448 "></span></a>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a><a href="#__codelineno-0-449"><span class="linenos" data-linenos="449 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><a href="#__codelineno-0-450"><span class="linenos" data-linenos="450 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Conflicts resolved: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conflicts</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><a href="#__codelineno-0-451"><span class="linenos" data-linenos="451 "></span></a>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><a href="#__codelineno-0-452"><span class="linenos" data-linenos="452 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><a href="#__codelineno-0-453"><span class="linenos" data-linenos="453 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Errors encountered: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><a href="#__codelineno-0-454"><span class="linenos" data-linenos="454 "></span></a>            <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>  <span class="c1"># Show first 5 errors</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><a href="#__codelineno-0-455"><span class="linenos" data-linenos="455 "></span></a>                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    - </span><span class="si">{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><a href="#__codelineno-0-456"><span class="linenos" data-linenos="456 "></span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><a href="#__codelineno-0-457"><span class="linenos" data-linenos="457 "></span></a>                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    ... and </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="si">}</span><span class="s2"> more&quot;</span><span class="p">)</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><a href="#__codelineno-0-458"><span class="linenos" data-linenos="458 "></span></a>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><a href="#__codelineno-0-459"><span class="linenos" data-linenos="459 "></span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.MergeResult.__annotations__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__annotations__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;successful&#39;</span><span class="p">:</span> <span class="s1">&#39;bool&#39;</span><span class="p">,</span> <span class="s1">&#39;frames_merged&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_added&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_skipped&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="s1">&#39;conflicts&#39;</span><span class="p">:</span> <span class="s1">&#39;list[ConflictResolution]&#39;</span><span class="p">,</span> <span class="s1">&#39;errors&#39;</span><span class="p">:</span> <span class="s1">&#39;list[MergeError]&#39;</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.MergeResult.__annotations__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>dict() -&gt; new empty dictionary
dict(mapping) -&gt; new dictionary initialized from a mapping object's
    (key, value) pairs
dict(iterable) -&gt; new dictionary initialized as if via:
    d = {}
    for k, v in iterable:
        d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.MergeResult.__attrs_own_setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__attrs_own_setattr__</span> <span class="o">=</span> <span class="kc">False</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.MergeResult.__attrs_own_setattr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.MergeResult.__attrs_props__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__attrs_props__</span> <span class="o">=</span> <span class="n">ClassProps</span><span class="p">(</span><span class="n">is_exception</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_slotted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">has_weakref_slot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">kw_only</span><span class="o">=&lt;</span><span class="n">KeywordOnly</span><span class="o">.</span><span class="n">NO</span><span class="p">:</span> <span class="s1">&#39;no&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">collected_fields_by_mro</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_init</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_repr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_eq</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_ordering</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hashability</span><span class="o">=&lt;</span><span class="n">Hashability</span><span class="o">.</span><span class="n">UNHASHABLE</span><span class="p">:</span> <span class="s1">&#39;unhashable&#39;</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">added_match_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">added_str</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">added_pickling</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on_setattr_hook</span><span class="o">=&lt;</span><span class="n">function</span> <span class="n">pipe</span><span class="o">.&lt;</span><span class="nb">locals</span><span class="o">&gt;.</span><span class="n">wrapped_pipe</span> <span class="n">at</span> <span class="mh">0x7f2d7812e0c0</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">field_transformer</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.MergeResult.__attrs_props__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Effective class properties as derived from parameters to <code>attr.s()</code> or
<code>define()</code> decorators.</p>
<p>This is the same data structure that <em>attrs</em> uses internally to decide how
to construct the final class.</p>
<p>Warning:</p>
<div class="highlight"><pre><span></span><code>This feature is currently **experimental** and is not covered by our
strict backwards-compatibility guarantees.
</code></pre></div>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.is_exception">is_exception</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is treated as an exception class.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.is_slotted">is_slotted</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is <code>slotted &lt;slotted classes&gt;</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.has_weakref_slot">has_weakref_slot</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has a slot for weak references.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.is_frozen">is_frozen</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class is frozen.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.kw_only">kw_only</span></code></td>
            <td>
                  <code><span title="KeywordOnly">KeywordOnly</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether / how the class enforces keyword-only arguments on the
<code>__init__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.collected_fields_by_mro">collected_fields_by_mro</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class fields were collected by method resolution order.
That is, correctly but unlike <code>dataclasses</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.added_init">added_init</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__init__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.added_repr">added_repr</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__repr__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.added_eq">added_eq</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated equality methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.added_ordering">added_ordering</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated ordering methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.hashability">hashability</span></code></td>
            <td>
                  <code><span title="Hashability">Hashability</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How <code>hashable &lt;hashing&gt;</code> the class is.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.added_match_args">added_match_args</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class supports positional <code>match &lt;match&gt;</code> over its
fields.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.added_str">added_str</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has an <em>attrs</em>-generated <code>__str__</code> method.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.added_pickling">added_pickling</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the class has <em>attrs</em>-generated <code>__getstate__</code> and
<code>__setstate__</code> methods for <code>pickle</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.on_setattr_hook">on_setattr_hook</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span>[[<span title="typing.Any">Any</span>, <span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class's <code>__setattr__</code> hook.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.__attrs_props__.field_transformer">field_transformer</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span>[[<span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>]], <span title="Attribute">Attribute</span>[<span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class's <code>field transformers &lt;transform-fields&gt;</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>.. versionadded:: 25.4.0</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.MergeResult.__doc__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__doc__</span> <span class="o">=</span> <span class="s1">&#39;Result of a merge operation.</span><span class="se">\n\n</span><span class="s1">    Attributes:</span><span class="se">\n</span><span class="s1">        successful: Whether the merge completed successfully.</span><span class="se">\n</span><span class="s1">        frames_merged: Number of frames that were merged.</span><span class="se">\n</span><span class="s1">        instances_added: Number of new instances added.</span><span class="se">\n</span><span class="s1">        instances_updated: Number of existing instances that were updated.</span><span class="se">\n</span><span class="s1">        instances_skipped: Number of instances that were skipped.</span><span class="se">\n</span><span class="s1">        conflicts: List of conflicts that were resolved during merging.</span><span class="se">\n</span><span class="s1">        errors: List of errors encountered during merging.</span><span class="se">\n</span><span class="s1">    &#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.MergeResult.__doc__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.MergeResult.__match_args__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__match_args__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;successful&#39;</span><span class="p">,</span> <span class="s1">&#39;frames_merged&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_added&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_updated&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_skipped&#39;</span><span class="p">,</span> <span class="s1">&#39;conflicts&#39;</span><span class="p">,</span> <span class="s1">&#39;errors&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.MergeResult.__match_args__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.MergeResult.__module__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__module__</span> <span class="o">=</span> <span class="s1">&#39;sleap_io.model.matching&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.MergeResult.__module__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>str(object='') -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.<strong>str</strong>() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to 'strict'.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.MergeResult.__slots__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;successful&#39;</span><span class="p">,</span> <span class="s1">&#39;frames_merged&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_added&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_updated&#39;</span><span class="p">,</span> <span class="s1">&#39;instances_skipped&#39;</span><span class="p">,</span> <span class="s1">&#39;conflicts&#39;</span><span class="p">,</span> <span class="s1">&#39;errors&#39;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.MergeResult.__slots__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sleap_io.model.matching.MergeResult.__weakref__" class="doc doc-heading">
            <code class="highlight language-python"><span class="vm">__weakref__</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#sleap_io.model.matching.MergeResult.__weakref__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>list of weak references to the object</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.MergeResult.__eq__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.MergeResult.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class MergeResult.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-16" name="__codelineno-0-16"></a><a href="#__codelineno-0-16"><span class="linenos" data-linenos="16 "></span></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><a href="#__codelineno-0-17"><span class="linenos" data-linenos="17 "></span></a>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><a href="#__codelineno-0-18"><span class="linenos" data-linenos="18 "></span></a><span class="s2">from __future__ import annotations</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><a href="#__codelineno-0-19"><span class="linenos" data-linenos="19 "></span></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><a href="#__codelineno-0-20"><span class="linenos" data-linenos="20 "></span></a><span class="s2">from enum import Enum</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><a href="#__codelineno-0-21"><span class="linenos" data-linenos="21 "></span></a><span class="s2">from typing import Any, Union</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><a href="#__codelineno-0-22"><span class="linenos" data-linenos="22 "></span></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><a href="#__codelineno-0-23"><span class="linenos" data-linenos="23 "></span></a><span class="s2">import attrs</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><a href="#__codelineno-0-24"><span class="linenos" data-linenos="24 "></span></a><span class="s2">import numpy as np</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><a href="#__codelineno-0-25"><span class="linenos" data-linenos="25 "></span></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><a href="#__codelineno-0-26"><span class="linenos" data-linenos="26 "></span></a><span class="s2">from sleap_io.model.instance import Instance, Track</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><a href="#__codelineno-0-27"><span class="linenos" data-linenos="27 "></span></a><span class="s2">from sleap_io.model.labeled_frame import LabeledFrame</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.MergeResult.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">successful</span><span class="p">,</span> <span class="n">frames_merged</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">instances_added</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">instances_updated</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">instances_skipped</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">conflicts</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.MergeResult.__init__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class MergeResult.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-28" name="__codelineno-0-28"></a><a href="#__codelineno-0-28"><span class="linenos" data-linenos="28 "></span></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.skeleton</span><span class="w"> </span><span class="kn">import</span> <span class="n">Skeleton</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><a href="#__codelineno-0-29"><span class="linenos" data-linenos="29 "></span></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.video</span><span class="w"> </span><span class="kn">import</span> <span class="n">Video</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><a href="#__codelineno-0-30"><span class="linenos" data-linenos="30 "></span></a>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><a href="#__codelineno-0-31"><span class="linenos" data-linenos="31 "></span></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><a href="#__codelineno-0-32"><span class="linenos" data-linenos="32 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">SkeletonMatchMethod</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><a href="#__codelineno-0-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Methods for matching skeletons.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><a href="#__codelineno-0-34"><span class="linenos" data-linenos="34 "></span></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><a href="#__codelineno-0-35"><span class="linenos" data-linenos="35 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><a href="#__codelineno-0-36"><span class="linenos" data-linenos="36 "></span></a><span class="sd">        EXACT: Exact match requiring same nodes in the same order.</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><a href="#__codelineno-0-37"><span class="linenos" data-linenos="37 "></span></a><span class="sd">        STRUCTURE: Match requiring same nodes and edges, but order doesn&#39;t matter.</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><a href="#__codelineno-0-38"><span class="linenos" data-linenos="38 "></span></a><span class="sd">        OVERLAP: Partial match based on overlapping nodes (uses Jaccard similarity).</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><a href="#__codelineno-0-39"><span class="linenos" data-linenos="39 "></span></a><span class="sd">        SUBSET: Match if one skeleton&#39;s nodes are a subset of another&#39;s.</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><a href="#__codelineno-0-40"><span class="linenos" data-linenos="40 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.MergeResult.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#sleap_io.model.matching.MergeResult.__repr__" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Method generated by attrs for class MergeResult.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="s2">&quot;&quot;&quot;Unified matcher system for comparing and matching data structures during merging.</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos=" 2 "></span></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><a href="#__codelineno-0-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s2">This module provides configurable matchers for comparing skeletons, instances, tracks,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><a href="#__codelineno-0-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s2">videos, and frames during merge operations. The matchers use various strategies to</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><a href="#__codelineno-0-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s2">determine when data structures should be considered equivalent during merging.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><a href="#__codelineno-0-6"><span class="linenos" data-linenos=" 6 "></span></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><a href="#__codelineno-0-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s2">Key features:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><a href="#__codelineno-0-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s2">- Skeleton matching: exact, structure-based, overlap, and subset matching</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><a href="#__codelineno-0-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s2">- Instance matching: spatial proximity, track identity, and bounding box IoU</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><a href="#__codelineno-0-10"><span class="linenos" data-linenos="10 "></span></a><span class="s2">- Track matching: by name or object identity</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><a href="#__codelineno-0-11"><span class="linenos" data-linenos="11 "></span></a><span class="s2">- Video matching: path, basename, content, and auto matching</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><a href="#__codelineno-0-12"><span class="linenos" data-linenos="12 "></span></a><span class="s2">- Frame matching with configurable video matching requirements</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><a href="#__codelineno-0-13"><span class="linenos" data-linenos="13 "></span></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><a href="#__codelineno-0-14"><span class="linenos" data-linenos="14 "></span></a><span class="s2">Video matching supports path-based, filename-based, content-based, and</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><a href="#__codelineno-0-15"><span class="linenos" data-linenos="15 "></span></a><span class="s2">automatic strategies.</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="sleap_io.model.matching.MergeResult.summary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">summary</span><span class="p">()</span></code>

<a href="#sleap_io.model.matching.MergeResult.summary" class="headerlink" title="Permanent link">&para;</a></h5>


    <div class="doc doc-contents ">

        <p>Generate a human-readable summary of the merge result.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-431" name="__codelineno-0-431"></a><a href="#__codelineno-0-431"><span class="linenos" data-linenos="431 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><a href="#__codelineno-0-432"><span class="linenos" data-linenos="432 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a human-readable summary of the merge result.&quot;&quot;&quot;</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><a href="#__codelineno-0-433"><span class="linenos" data-linenos="433 "></span></a>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><a href="#__codelineno-0-434"><span class="linenos" data-linenos="434 "></span></a>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><a href="#__codelineno-0-435"><span class="linenos" data-linenos="435 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">successful</span><span class="p">:</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><a href="#__codelineno-0-436"><span class="linenos" data-linenos="436 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;✓ Merge completed successfully&quot;</span><span class="p">)</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><a href="#__codelineno-0-437"><span class="linenos" data-linenos="437 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><a href="#__codelineno-0-438"><span class="linenos" data-linenos="438 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;✗ Merge completed with errors&quot;</span><span class="p">)</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><a href="#__codelineno-0-439"><span class="linenos" data-linenos="439 "></span></a>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a><a href="#__codelineno-0-440"><span class="linenos" data-linenos="440 "></span></a>    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Frames merged: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frames_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a><a href="#__codelineno-0-441"><span class="linenos" data-linenos="441 "></span></a>    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances added: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_added</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a><a href="#__codelineno-0-442"><span class="linenos" data-linenos="442 "></span></a>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a><a href="#__codelineno-0-443"><span class="linenos" data-linenos="443 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances_updated</span><span class="p">:</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a><a href="#__codelineno-0-444"><span class="linenos" data-linenos="444 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances updated: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_updated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a><a href="#__codelineno-0-445"><span class="linenos" data-linenos="445 "></span></a>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a><a href="#__codelineno-0-446"><span class="linenos" data-linenos="446 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances_skipped</span><span class="p">:</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><a href="#__codelineno-0-447"><span class="linenos" data-linenos="447 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances skipped: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_skipped</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><a href="#__codelineno-0-448"><span class="linenos" data-linenos="448 "></span></a>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a><a href="#__codelineno-0-449"><span class="linenos" data-linenos="449 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><a href="#__codelineno-0-450"><span class="linenos" data-linenos="450 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Conflicts resolved: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conflicts</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><a href="#__codelineno-0-451"><span class="linenos" data-linenos="451 "></span></a>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><a href="#__codelineno-0-452"><span class="linenos" data-linenos="452 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><a href="#__codelineno-0-453"><span class="linenos" data-linenos="453 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Errors encountered: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><a href="#__codelineno-0-454"><span class="linenos" data-linenos="454 "></span></a>        <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>  <span class="c1"># Show first 5 errors</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><a href="#__codelineno-0-455"><span class="linenos" data-linenos="455 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    - </span><span class="si">{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><a href="#__codelineno-0-456"><span class="linenos" data-linenos="456 "></span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><a href="#__codelineno-0-457"><span class="linenos" data-linenos="457 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    ... and </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="si">}</span><span class="s2"> more&quot;</span><span class="p">)</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><a href="#__codelineno-0-458"><span class="linenos" data-linenos="458 "></span></a>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><a href="#__codelineno-0-459"><span class="linenos" data-linenos="459 "></span></a>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2025 Talmo Lab

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/talmolab" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/talmop" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tracking", "toc.follow", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.tooltips", "content.code.select", "content.footnote.tooltips"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>