
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://io.sleap.ai/dev/merging/">
      
      
        <link rel="prev" href="../examples/">
      
      
        <link rel="next" href="../model/">
      
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Merging - sleap-io documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#merging-annotations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="sleap-io documentation" class="md-header__button md-logo" aria-label="sleap-io documentation" data-md-component="logo">
      
  <img src="../assets/sleap-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            sleap-io documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Merging
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/talmolab/sleap-io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="sleap-io documentation" class="md-nav__button md-logo" aria-label="sleap-io documentation" data-md-component="logo">
      
  <img src="../assets/sleap-logo.png" alt="logo">

    </a>
    sleap-io documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/talmolab/sleap-io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/talmolab/sleap-io/releases" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Releases
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Merging
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Merging
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      Common Workflows
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merge-result-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Merge Result Analysis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#provenance-tracking" class="md-nav__link">
    <span class="md-ellipsis">
      Provenance Tracking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frame-level-merging" class="md-nav__link">
    <span class="md-ellipsis">
      Frame-Level Merging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SkeletonMatchMethod" class="md-nav__link">
    <span class="md-ellipsis">
      SkeletonMatchMethod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.InstanceMatchMethod" class="md-nav__link">
    <span class="md-ellipsis">
      InstanceMatchMethod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.TrackMatchMethod" class="md-nav__link">
    <span class="md-ellipsis">
      TrackMatchMethod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.VideoMatchMethod" class="md-nav__link">
    <span class="md-ellipsis">
      VideoMatchMethod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.FrameStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      FrameStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.ErrorMode" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorMode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SkeletonMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      SkeletonMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.InstanceMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      InstanceMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.TrackMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      TrackMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.VideoMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      VideoMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.FrameMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      FrameMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.STRUCTURE_SKELETON_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      STRUCTURE_SKELETON_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SUBSET_SKELETON_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      SUBSET_SKELETON_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.OVERLAP_SKELETON_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      OVERLAP_SKELETON_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.DUPLICATE_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      DUPLICATE_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.IOU_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      IOU_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.IDENTITY_INSTANCE_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      IDENTITY_INSTANCE_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.NAME_TRACK_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      NAME_TRACK_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.IDENTITY_TRACK_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      IDENTITY_TRACK_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.AUTO_VIDEO_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      AUTO_VIDEO_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SOURCE_VIDEO_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      SOURCE_VIDEO_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.PATH_VIDEO_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      PATH_VIDEO_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.BASENAME_VIDEO_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      BASENAME_VIDEO_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.MergeResult" class="md-nav__link">
    <span class="md-ellipsis">
      MergeResult
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.ConflictResolution" class="md-nav__link">
    <span class="md-ellipsis">
      ConflictResolution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.MergeError" class="md-nav__link">
    <span class="md-ellipsis">
      MergeError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SkeletonMismatchError" class="md-nav__link">
    <span class="md-ellipsis">
      SkeletonMismatchError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.VideoNotFoundError" class="md-nav__link">
    <span class="md-ellipsis">
      VideoNotFoundError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.MergeProgressBar" class="md-nav__link">
    <span class="md-ellipsis">
      MergeProgressBar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.labels.Labels.merge" class="md-nav__link">
    <span class="md-ellipsis">
      merge
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../formats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Formats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Full API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Full API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sleap_io/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    sleap_io
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3_1" id="__nav_5_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_1">
            <span class="md-nav__icon md-icon"></span>
            sleap_io
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sleap_io/io/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    io
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3_1_1" id="__nav_5_3_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_3_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            io
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/coco/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    coco
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/dlc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dlc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/jabs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    jabs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/labelstudio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    labelstudio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/main/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    main
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/nwb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nwb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/skeleton/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    skeleton
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/slp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    slp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/ultralytics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ultralytics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/video_reading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    video_reading
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/io/video_writing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    video_writing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_1_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sleap_io/model/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    model
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3_1_2" id="__nav_5_3_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/camera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    camera
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/instance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    instance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/labeled_frame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    labeled_frame
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    labels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/labels_set/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    labels_set
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/matching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    matching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/skeleton/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    skeleton
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/suggestions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    suggestions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/model/video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    video
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sleap_io/version/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    version
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      Common Workflows
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merge-result-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Merge Result Analysis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#provenance-tracking" class="md-nav__link">
    <span class="md-ellipsis">
      Provenance Tracking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frame-level-merging" class="md-nav__link">
    <span class="md-ellipsis">
      Frame-Level Merging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SkeletonMatchMethod" class="md-nav__link">
    <span class="md-ellipsis">
      SkeletonMatchMethod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.InstanceMatchMethod" class="md-nav__link">
    <span class="md-ellipsis">
      InstanceMatchMethod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.TrackMatchMethod" class="md-nav__link">
    <span class="md-ellipsis">
      TrackMatchMethod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.VideoMatchMethod" class="md-nav__link">
    <span class="md-ellipsis">
      VideoMatchMethod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.FrameStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      FrameStrategy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.ErrorMode" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorMode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SkeletonMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      SkeletonMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.InstanceMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      InstanceMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.TrackMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      TrackMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.VideoMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      VideoMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.FrameMatcher" class="md-nav__link">
    <span class="md-ellipsis">
      FrameMatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.STRUCTURE_SKELETON_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      STRUCTURE_SKELETON_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SUBSET_SKELETON_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      SUBSET_SKELETON_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.OVERLAP_SKELETON_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      OVERLAP_SKELETON_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.DUPLICATE_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      DUPLICATE_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.IOU_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      IOU_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.IDENTITY_INSTANCE_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      IDENTITY_INSTANCE_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.NAME_TRACK_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      NAME_TRACK_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.IDENTITY_TRACK_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      IDENTITY_TRACK_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.AUTO_VIDEO_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      AUTO_VIDEO_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SOURCE_VIDEO_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      SOURCE_VIDEO_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.PATH_VIDEO_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      PATH_VIDEO_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.BASENAME_VIDEO_MATCHER" class="md-nav__link">
    <span class="md-ellipsis">
      BASENAME_VIDEO_MATCHER
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.MergeResult" class="md-nav__link">
    <span class="md-ellipsis">
      MergeResult
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.ConflictResolution" class="md-nav__link">
    <span class="md-ellipsis">
      ConflictResolution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.MergeError" class="md-nav__link">
    <span class="md-ellipsis">
      MergeError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.SkeletonMismatchError" class="md-nav__link">
    <span class="md-ellipsis">
      SkeletonMismatchError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.VideoNotFoundError" class="md-nav__link">
    <span class="md-ellipsis">
      VideoNotFoundError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.matching.MergeProgressBar" class="md-nav__link">
    <span class="md-ellipsis">
      MergeProgressBar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleap_io.model.labels.Labels.merge" class="md-nav__link">
    <span class="md-ellipsis">
      merge
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="merging-annotations">Merging Annotations<a class="headerlink" href="#merging-annotations" title="Permanent link">&para;</a></h1>
<p>The <code>sleap-io</code> library provides comprehensive functionality for merging multiple annotation files. This is particularly useful for:</p>
<ul>
<li>Combining predictions with manual labels (human-in-the-loop workflows)</li>
<li>Merging annotations from multiple annotators</li>
<li>Consolidating partial annotations</li>
<li>Updating existing projects with new predictions</li>
</ul>
<h2 id="basic-usage">Basic Usage<a class="headerlink" href="#basic-usage" title="Permanent link">&para;</a></h2>
<h3 id="merging-two-labels-objects">Merging Two Labels Objects<a class="headerlink" href="#merging-two-labels-objects" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sleap_io</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sio</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># Load two annotation files</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">base_labels</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;base_annotations.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">new_labels</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;new_predictions.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># Merge new labels into base</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># Check the result</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</code></pre></div>
<h3 id="merge-strategies">Merge Strategies<a class="headerlink" href="#merge-strategies" title="Permanent link">&para;</a></h3>
<p>The merge system supports different strategies for handling overlapping instances:</p>
<h4 id="smart-strategy-default">Smart Strategy (Default)<a class="headerlink" href="#smart-strategy-default" title="Permanent link">&para;</a></h4>
<p>Preserves user labels over predictions when they overlap:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;smart&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="keep-original-strategy">Keep Original Strategy<a class="headerlink" href="#keep-original-strategy" title="Permanent link">&para;</a></h4>
<p>Always keeps instances from the base labels:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;keep_original&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="keep-new-strategy">Keep New Strategy<a class="headerlink" href="#keep-new-strategy" title="Permanent link">&para;</a></h4>
<p>Always keeps instances from the new labels:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;keep_new&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="keep-both-strategy">Keep Both Strategy<a class="headerlink" href="#keep-both-strategy" title="Permanent link">&para;</a></h4>
<p>Keeps all instances from both sources:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;keep_both&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="advanced-configuration">Advanced Configuration<a class="headerlink" href="#advanced-configuration" title="Permanent link">&para;</a></h2>
<h3 id="video-matching">Video Matching<a class="headerlink" href="#video-matching" title="Permanent link">&para;</a></h3>
<p>Control how videos are matched between projects, especially useful for cross-platform workflows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">VideoMatcher</span><span class="p">,</span> <span class="n">VideoMatchMethod</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="c1"># AUTO mode (default) - tries multiple strategies</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">auto_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="c1"># PATH mode - exact path matching</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">path_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">PATH</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="c1"># BASENAME mode - match by filename only</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">basename_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">)</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="c1"># CONTENT mode - match by video shape and backend type  </span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="n">content_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">)</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="c1"># Use pre-configured matcher for filename-based matching</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">BASENAME_VIDEO_MATCHER</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="c1"># Use in merge</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>    <span class="n">new_labels</span><span class="p">,</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>    <span class="n">video_matcher</span><span class="o">=</span><span class="n">BASENAME_VIDEO_MATCHER</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="p">)</span>
</code></pre></div>
<h4 id="cross-platform-video-matching">Cross-Platform Video Matching<a class="headerlink" href="#cross-platform-video-matching" title="Permanent link">&para;</a></h4>
<p>Video paths often differ between systems, especially when collaborating or moving projects. Here's how to handle these scenarios:</p>
<h5 id="scenario-1-same-files-different-paths">Scenario 1: Same Files, Different Paths<a class="headerlink" href="#scenario-1-same-files-different-paths" title="Permanent link">&para;</a></h5>
<p><strong>Problem</strong>: You created annotations on Windows and received predictions generated on Linux:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a># Original annotations (Windows)
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>├── C:\Users\researcher\Desktop\project\
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>│   ├── annotations.slp
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>│   └── videos\
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>│       ├── day1_trial1.mp4
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>│       ├── day1_trial2.mp4
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>│       └── day2_trial1.mp4
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a># New predictions (Linux) 
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>├── /home/lab/sleap_projects/mouse_behavior/
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>│   ├── predictions.slp
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>│   └── video_data/
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>│       ├── day1_trial1.mp4  # Same file!
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>│       ├── day1_trial2.mp4  # Same file!
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>│       └── day2_trial1.mp4  # Same file!
</code></pre></div>
<p><strong>Solution</strong>: Use BASENAME matching to match by filename only:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sleap_io</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sio</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">VideoMatcher</span><span class="p">,</span> <span class="n">VideoMatchMethod</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1"># Load the files</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">annotations</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;C:\Users\researcher\Desktop\project\annotations.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="n">predictions</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;/home/lab/sleap_projects/mouse_behavior/predictions.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="c1"># Create basename matcher - ignores directory paths</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="n">basename_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">)</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="c1"># Merge - will match videos despite different directory structures</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="n">result</span> <span class="o">=</span> <span class="n">annotations</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">basename_matcher</span><span class="p">)</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully matched </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">videos_matched</span><span class="p">)</span><span class="si">}</span><span class="s2"> videos&quot;</span><span class="p">)</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="c1"># Output: Successfully matched 3 videos</span>
</code></pre></div>
<h5 id="scenario-2-reorganized-project-structure">Scenario 2: Reorganized Project Structure<a class="headerlink" href="#scenario-2-reorganized-project-structure" title="Permanent link">&para;</a></h5>
<p><strong>Problem</strong>: You reorganized your project structure after creating annotations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># Original structure when annotations were created
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>├── /data/experiments/
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>│   ├── session_001/
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>│   │   └── behavior_recording.mp4
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>│   ├── session_002/
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>│   │   └── behavior_recording.mp4
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>│   └── annotations.slp
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a># New organized structure  
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>├── /data/organized_experiments/
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>│   ├── behavior_videos/
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>│   │   ├── session_001_behavior_recording.mp4  # Renamed!
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>│   │   └── session_002_behavior_recording.mp4  # Renamed!
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>│   ├── old_annotations.slp                     # Original annotations
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>│   └── new_predictions.slp                     # New predictions with new paths
</code></pre></div>
<p><strong>Problem</strong>: Filenames changed, so BASENAME won't work. <strong>Solution</strong>: Use CONTENT matching:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Load files with mismatched names</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">old_annotations</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;/data/organized_experiments/old_annotations.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">new_predictions</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;/data/organized_experiments/new_predictions.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="c1"># Use content matching - matches by video shape and backend type</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="n">content_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">)</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="n">result</span> <span class="o">=</span> <span class="n">old_annotations</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_predictions</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">content_matcher</span><span class="p">)</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Matched </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">videos_matched</span><span class="p">)</span><span class="si">}</span><span class="s2"> videos by content analysis&quot;</span><span class="p">)</span>
</code></pre></div>
<h5 id="scenario-3-mixed-situations-recommended">Scenario 3: Mixed Situations (Recommended)<a class="headerlink" href="#scenario-3-mixed-situations-recommended" title="Permanent link">&para;</a></h5>
<p><strong>Problem</strong>: Some videos have matching filenames, others have different names but same content:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a># Collaboration scenario - mixed file organization
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>├── /lab_server/shared_data/
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>│   ├── student_annotations.slp
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>│   └── videos/
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>│       ├── mouse_01_day1.mp4
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>│       ├── mouse_01_day2.mp4
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>│       └── mouse_02_day1.mp4
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a># PI&#39;s predictions from different system
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>├── /home/pi/analysis_results/
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>│   ├── sleap_predictions.slp  
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>│   └── renamed_videos/
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>│       ├── mouse_01_day1.mp4        # Same name ✓
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>│       ├── subject01_session02.mp4  # Different name, same content as mouse_01_day2.mp4
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>│       └── mouse_02_day1.mp4        # Same name ✓
</code></pre></div>
<p><strong>Solution</strong>: Use AUTO mode (tries BASENAME first, then CONTENT):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># Load annotations and predictions</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">student_work</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;/lab_server/shared_data/student_annotations.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">pi_predictions</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;/home/pi/analysis_results/sleap_predictions.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="c1"># AUTO mode: tries filename matching first, falls back to content matching</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">auto_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">)</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="n">result</span> <span class="o">=</span> <span class="n">student_work</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pi_predictions</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">auto_matcher</span><span class="p">)</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="c1"># Check what happened</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">student_video</span><span class="p">,</span> <span class="n">pred_video</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">student_work</span><span class="o">.</span><span class="n">videos</span><span class="p">,</span> <span class="n">pi_predictions</span><span class="o">.</span><span class="n">videos</span><span class="p">)):</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Video </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Student: </span><span class="si">{</span><span class="n">student_video</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Prediction: </span><span class="si">{</span><span class="n">pred_video</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Matched: </span><span class="si">{</span><span class="s1">&#39;✓&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">auto_matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">student_video</span><span class="p">,</span><span class="w"> </span><span class="n">pred_video</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;✗&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="c1"># Output:</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="c1"># Video 1:</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="c1">#   Student: /lab_server/shared_data/videos/mouse_01_day1.mp4  </span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="c1">#   Prediction: /home/pi/analysis_results/renamed_videos/mouse_01_day1.mp4</span>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="c1">#   Matched: ✓ (by filename)</span>
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="c1"># </span>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="c1"># Video 2:</span>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="c1">#   Student: /lab_server/shared_data/videos/mouse_01_day2.mp4</span>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a><span class="c1">#   Prediction: /home/pi/analysis_results/renamed_videos/subject01_session02.mp4  </span>
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="c1">#   Matched: ✓ (by content)</span>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a><span class="c1">#</span>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a><span class="c1"># Video 3:</span>
<a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a><span class="c1">#   Student: /lab_server/shared_data/videos/mouse_02_day1.mp4</span>
<a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a><span class="c1">#   Prediction: /home/pi/analysis_results/renamed_videos/mouse_02_day1.mp4</span>
<a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a><span class="c1">#   Matched: ✓ (by filename)</span>
</code></pre></div>
<h5 id="scenario-4-strict-path-matching">Scenario 4: Strict Path Matching<a class="headerlink" href="#scenario-4-strict-path-matching" title="Permanent link">&para;</a></h5>
<p><strong>Problem</strong>: You need exact path matching (same system, no file movement):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a># Development workflow - everything in same locations
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>├── /project/
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>│   ├── manual_labels.slp      # Created manually
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>│   ├── predictions.slp        # Generated by model
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>│   └── videos/
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>│       ├── trial_001.mp4
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>│       ├── trial_002.mp4
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>│       └── trial_003.mp4
</code></pre></div>
<p><strong>Solution</strong>: Use PATH matching for strict validation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># Load files that should have identical paths</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">manual</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;/project/manual_labels.slp&quot;</span><span class="p">)</span>  
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">predictions</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;/project/predictions.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1"># Strict path matching - paths must be identical</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="n">strict_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">PATH</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">manual</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">strict_matcher</span><span class="p">)</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ All video paths matched exactly&quot;</span><span class="p">)</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✗ Path mismatch detected: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>    <span class="c1"># Fall back to more lenient matching</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>    <span class="n">backup_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">)</span>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">manual</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">backup_matcher</span><span class="p">)</span>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✓ Successful merge with AUTO matching&quot;</span><span class="p">)</span>
</code></pre></div>
<h5 id="real-world-workflow-example">Real-World Workflow Example<a class="headerlink" href="#real-world-workflow-example" title="Permanent link">&para;</a></h5>
<p>Here's a complete example of a typical collaboration workflow:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sleap_io</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sio</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">VideoMatcher</span><span class="p">,</span> <span class="n">VideoMatchMethod</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">smart_merge_with_fallback</span><span class="p">(</span><span class="n">base_labels_path</span><span class="p">,</span> <span class="n">new_labels_path</span><span class="p">):</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Merge labels with intelligent video matching and fallback strategies.&quot;&quot;&quot;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>    <span class="c1"># Load the label files</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading base labels: </span><span class="si">{</span><span class="n">base_labels_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>    <span class="n">base</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">base_labels_path</span><span class="p">)</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">videos</span><span class="p">)</span><span class="si">}</span><span class="s2"> videos, </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">base</span><span class="p">)</span><span class="si">}</span><span class="s2"> frames&quot;</span><span class="p">)</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading new labels: </span><span class="si">{</span><span class="n">new_labels_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>    <span class="n">new</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">new_labels_path</span><span class="p">)</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">new</span><span class="o">.</span><span class="n">videos</span><span class="p">)</span><span class="si">}</span><span class="s2"> videos, </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">new</span><span class="p">)</span><span class="si">}</span><span class="s2"> frames&quot;</span><span class="p">)</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>    <span class="c1"># Try different matching strategies in order of preference</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>    <span class="n">strategies</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>        <span class="p">(</span><span class="s2">&quot;AUTO&quot;</span><span class="p">,</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">)),</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>        <span class="p">(</span><span class="s2">&quot;BASENAME&quot;</span><span class="p">,</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">)),</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>        <span class="p">(</span><span class="s2">&quot;CONTENT&quot;</span><span class="p">,</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">)),</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>    <span class="p">]</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>    <span class="k">for</span> <span class="n">strategy_name</span><span class="p">,</span> <span class="n">matcher</span> <span class="ow">in</span> <span class="n">strategies</span><span class="p">:</span>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Trying </span><span class="si">{</span><span class="n">strategy_name</span><span class="si">}</span><span class="s2"> matching...&quot;</span><span class="p">)</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a>            <span class="c1"># Test matching before full merge</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a>            <span class="n">matched_videos</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a>            <span class="k">for</span> <span class="n">base_video</span> <span class="ow">in</span> <span class="n">base</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a>                <span class="k">for</span> <span class="n">new_video</span> <span class="ow">in</span> <span class="n">new</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a>                    <span class="k">if</span> <span class="n">matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">base_video</span><span class="p">,</span> <span class="n">new_video</span><span class="p">):</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a>                        <span class="n">matched_videos</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a>                        <span class="k">break</span>
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a>
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a>            <span class="k">if</span> <span class="n">matched_videos</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">videos</span><span class="p">):</span>
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ All </span><span class="si">{</span><span class="n">matched_videos</span><span class="si">}</span><span class="s2"> videos would match with </span><span class="si">{</span><span class="n">strategy_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a>
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a>                <span class="c1"># Perform the actual merge</span>
<a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="n">matcher</span><span class="p">)</span>
<a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a>
<a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ Merge completed successfully!&quot;</span><span class="p">)</span>
<a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - Frames merged: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - Instances added: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">instances_added</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a>
<a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a>                <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✗ Only </span><span class="si">{</span><span class="n">matched_videos</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">videos</span><span class="p">)</span><span class="si">}</span><span class="s2"> videos match with </span><span class="si">{</span><span class="n">strategy_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a>
<a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✗ </span><span class="si">{</span><span class="n">strategy_name</span><span class="si">}</span><span class="s2"> matching failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a>            <span class="k">continue</span>
<a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a>
<a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Could not match videos with any strategy&quot;</span><span class="p">)</span>
<a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a>
<a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a><span class="c1"># Usage example</span>
<a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">smart_merge_with_fallback</span><span class="p">(</span>
<a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a>        <span class="s2">&quot;/lab/annotations/manual_session1.slp&quot;</span><span class="p">,</span>
<a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a>        <span class="s2">&quot;/home/student/predictions/session1_preds.slp&quot;</span>
<a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a>    <span class="p">)</span>
<a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🎉 Successfully merged! Summary:&quot;</span><span class="p">)</span>
<a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
<a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a>
<a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ Merge failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;💡 Try checking that video files exist and have matching content&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="custom-instance-matching">Custom Instance Matching<a class="headerlink" href="#custom-instance-matching" title="Permanent link">&para;</a></h3>
<p>You can customize how instances are matched between frames:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">InstanceMatcher</span><span class="p">,</span> <span class="n">InstanceMatchMethod</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="c1"># Match instances by spatial proximity (default)</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="n">spatial_matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    <span class="n">method</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">,</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>    <span class="n">threshold</span><span class="o">=</span><span class="mf">5.0</span>  <span class="c1"># pixels</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="p">)</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="c1"># Match instances by track identity</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="n">identity_matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>    <span class="n">method</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IDENTITY</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="p">)</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="c1"># Match instances by IoU overlap</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="n">iou_matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>    <span class="n">method</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">,</span>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>    <span class="n">threshold</span><span class="o">=</span><span class="mf">0.5</span>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="p">)</span>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a><span class="c1"># Use custom matcher in merge</span>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>    <span class="n">new_labels</span><span class="p">,</span>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>    <span class="n">instance_matcher</span><span class="o">=</span><span class="n">spatial_matcher</span>
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="p">)</span>
</code></pre></div>
<h3 id="skeleton-matching">Skeleton Matching<a class="headerlink" href="#skeleton-matching" title="Permanent link">&para;</a></h3>
<p>Control how skeletons are matched between projects:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">SkeletonMatcher</span><span class="p">,</span> <span class="n">SkeletonMatchMethod</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="c1"># Exact match (same nodes in same order)</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="n">exact_matcher</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">EXACT</span><span class="p">)</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="c1"># Structure match (same nodes, any order)</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="n">structure_matcher</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">)</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="c1"># Overlap match (partial node overlap)</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="n">overlap_matcher</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>    <span class="n">method</span><span class="o">=</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">OVERLAP</span><span class="p">,</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>    <span class="n">min_overlap</span><span class="o">=</span><span class="mf">0.7</span>  <span class="c1"># 70% node overlap required</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="p">)</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>    <span class="n">new_labels</span><span class="p">,</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>    <span class="n">skeleton_matcher</span><span class="o">=</span><span class="n">overlap_matcher</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="p">)</span>
</code></pre></div>
<h3 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h3>
<p>Configure how merge errors are handled:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># Continue on errors (default)</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">,</span> <span class="n">error_mode</span><span class="o">=</span><span class="s2">&quot;continue&quot;</span><span class="p">)</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="c1"># Stop on first error</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">,</span> <span class="n">error_mode</span><span class="o">=</span><span class="s2">&quot;strict&quot;</span><span class="p">)</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="c1"># Warn about errors but continue</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">,</span> <span class="n">error_mode</span><span class="o">=</span><span class="s2">&quot;warn&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="common-workflows">Common Workflows<a class="headerlink" href="#common-workflows" title="Permanent link">&para;</a></h2>
<h3 id="human-in-the-loop-hitl-workflow">Human-in-the-Loop (HITL) Workflow<a class="headerlink" href="#human-in-the-loop-hitl-workflow" title="Permanent link">&para;</a></h3>
<p>Merge predictions back into a manually annotated project:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sleap_io</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sio</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="c1"># Load manual annotations and predictions</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">manual_labels</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;manual_annotations.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="n">predictions</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;predictions.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="c1"># Merge predictions, preserving manual labels</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="n">result</span> <span class="o">=</span> <span class="n">manual_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>    <span class="n">predictions</span><span class="p">,</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>    <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;smart&quot;</span><span class="p">,</span>  <span class="c1"># Keep manual labels over predictions</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>    <span class="n">validate</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Validate skeleton compatibility</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="p">)</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="c1"># Check what was merged</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Frames merged: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instances added: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">instances_added</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instances updated: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">instances_updated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Conflicts resolved: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="c1"># Save the merged project</span>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="n">manual_labels</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;merged_project.slp&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="combining-multiple-annotators">Combining Multiple Annotators<a class="headerlink" href="#combining-multiple-annotators" title="Permanent link">&para;</a></h3>
<p>Merge annotations from different team members:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># Load annotations from multiple annotators</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">annotator1</span> <span class="o">=</span> <span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;annotator1.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="n">annotator2</span> <span class="o">=</span> <span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;annotator2.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">annotator3</span> <span class="o">=</span> <span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;annotator3.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="c1"># Create base project</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="n">merged</span> <span class="o">=</span> <span class="n">annotator1</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="c1"># Merge additional annotators</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="k">for</span> <span class="n">labels</span> <span class="ow">in</span> <span class="p">[</span><span class="n">annotator2</span><span class="p">,</span> <span class="n">annotator3</span><span class="p">]:</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">merged</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>        <span class="n">labels</span><span class="p">,</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>        <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;keep_both&quot;</span><span class="p">,</span>  <span class="c1"># Keep all annotations</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>        <span class="n">validate</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>    <span class="p">)</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Merged </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span><span class="si">}</span><span class="s2"> frames from </span><span class="si">{</span><span class="n">labels</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="c1"># Review conflicts</span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="k">for</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Conflict at frame </span><span class="si">{</span><span class="n">conflict</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">frame_idx</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">conflict</span><span class="o">.</span><span class="n">conflict_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="updating-predictions">Updating Predictions<a class="headerlink" href="#updating-predictions" title="Permanent link">&para;</a></h3>
<p>Replace old predictions with new ones:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1"># Load existing project and new predictions</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="n">project</span> <span class="o">=</span> <span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;project.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="n">new_predictions</span> <span class="o">=</span> <span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;new_predictions.slp&quot;</span><span class="p">)</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="c1"># Replace predictions while keeping manual labels</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="n">result</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>    <span class="n">new_predictions</span><span class="p">,</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="n">frame_strategy</span><span class="o">=</span><span class="s2">&quot;smart&quot;</span><span class="p">,</span>  <span class="c1"># Smart replacement</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    <span class="n">instance_matcher</span><span class="o">=</span><span class="n">InstanceMatcher</span><span class="p">(</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>        <span class="n">method</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">,</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>        <span class="n">threshold</span><span class="o">=</span><span class="mf">10.0</span>  <span class="c1"># More lenient matching</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>    <span class="p">)</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="p">)</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</code></pre></div>
<h2 id="merge-result-analysis">Merge Result Analysis<a class="headerlink" href="#merge-result-analysis" title="Permanent link">&para;</a></h2>
<p>The merge operation returns a <code>MergeResult</code> object with detailed information:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">)</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># Basic statistics</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successful: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">successful</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Frames merged: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instances added: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">instances_added</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instances updated: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">instances_updated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instances skipped: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">instances_skipped</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="c1"># Detailed information</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skeletons merged: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">skeletons_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Videos merged: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">videos_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tracks merged: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">tracks_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="c1"># Error information</span>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Errors: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>    <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a><span class="c1"># Conflict information</span>
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Conflicts: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a>    <span class="k">for</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - Frame </span><span class="si">{</span><span class="n">conflict</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">frame_idx</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">conflict</span><span class="o">.</span><span class="n">conflict_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a>
<a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a><span class="c1"># Get full summary</span>
<a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</code></pre></div>
<h2 id="provenance-tracking">Provenance Tracking<a class="headerlink" href="#provenance-tracking" title="Permanent link">&para;</a></h2>
<p>Merge operations are automatically tracked in the Labels provenance:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># After merging</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="n">result</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_labels</span><span class="p">)</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="c1"># Check merge history</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="n">merge_history</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">provenance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;merge_history&quot;</span><span class="p">,</span> <span class="p">[])</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="k">for</span> <span class="n">merge</span> <span class="ow">in</span> <span class="n">merge_history</span><span class="p">:</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Merged at: </span><span class="si">{</span><span class="n">merge</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Source frames: </span><span class="si">{</span><span class="n">merge</span><span class="p">[</span><span class="s1">&#39;source_labels&#39;</span><span class="p">][</span><span class="s1">&#39;n_frames&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Frames merged: </span><span class="si">{</span><span class="n">merge</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">][</span><span class="s1">&#39;frames_merged&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="frame-level-merging">Frame-Level Merging<a class="headerlink" href="#frame-level-merging" title="Permanent link">&para;</a></h2>
<p>For fine-grained control, you can merge individual frames:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.labeled_frame</span><span class="w"> </span><span class="kn">import</span> <span class="n">LabeledFrame</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="c1"># Get frames from different sources</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="n">frame1</span> <span class="o">=</span> <span class="n">base_labels</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="n">frame2</span> <span class="o">=</span> <span class="n">new_labels</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="c1"># Merge frames</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="n">merged_instances</span><span class="p">,</span> <span class="n">conflicts</span> <span class="o">=</span> <span class="n">frame1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>    <span class="n">frame2</span><span class="p">,</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>    <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;smart&quot;</span><span class="p">,</span>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>    <span class="n">instance_matcher</span><span class="o">=</span><span class="n">InstanceMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">)</span>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="p">)</span>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="c1"># Update frame with merged instances</span>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="n">frame1</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">merged_instances</span>
</code></pre></div>
<h2 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Always validate skeletons</strong> when merging from different sources:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">result</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Use appropriate matching thresholds</strong> based on your data:</p>
</li>
<li>Tighter thresholds (2-5 pixels) for high-precision tracking</li>
<li>
<p>Looser thresholds (10-20 pixels) for noisy or low-resolution data</p>
</li>
<li>
<p><strong>Review conflicts</strong> after merging:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">for</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="c1"># Handle or log conflicts</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>    <span class="k">pass</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Save provenance</strong> for reproducibility:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># Provenance is automatically saved with the Labels</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="n">merged_labels</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;merged_with_provenance.slp&quot;</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Test merge strategies</strong> on a subset first:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># Test on first 100 frames</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="n">test_base</span> <span class="o">=</span> <span class="n">base_labels</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="n">test_new</span> <span class="o">=</span> <span class="n">new_labels</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="n">test_result</span> <span class="o">=</span> <span class="n">test_base</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">test_new</span><span class="p">)</span>
</code></pre></div></p>
</li>
</ol>
<h2 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>
<h3 id="enums">Enums<a class="headerlink" href="#enums" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.SkeletonMatchMethod" class="doc doc-heading">
            <code>sleap_io.model.matching.SkeletonMatchMethod</code>


<a href="#sleap_io.model.matching.SkeletonMatchMethod" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>Methods for matching skeletons.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatchMethod.EXACT">EXACT</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exact match requiring same nodes in the same order.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatchMethod.STRUCTURE">STRUCTURE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match requiring same nodes and edges, but order doesn't matter.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatchMethod.OVERLAP">OVERLAP</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Partial match based on overlapping nodes (uses Jaccard similarity).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatchMethod.SUBSET">SUBSET</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match if one skeleton's nodes are a subset of another's.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-32" name="__codelineno-0-32"></a><a href="#__codelineno-0-32"><span class="linenos" data-linenos="32 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">SkeletonMatchMethod</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><a href="#__codelineno-0-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Methods for matching skeletons.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><a href="#__codelineno-0-34"><span class="linenos" data-linenos="34 "></span></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><a href="#__codelineno-0-35"><span class="linenos" data-linenos="35 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><a href="#__codelineno-0-36"><span class="linenos" data-linenos="36 "></span></a><span class="sd">        EXACT: Exact match requiring same nodes in the same order.</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><a href="#__codelineno-0-37"><span class="linenos" data-linenos="37 "></span></a><span class="sd">        STRUCTURE: Match requiring same nodes and edges, but order doesn&#39;t matter.</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><a href="#__codelineno-0-38"><span class="linenos" data-linenos="38 "></span></a><span class="sd">        OVERLAP: Partial match based on overlapping nodes (uses Jaccard similarity).</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><a href="#__codelineno-0-39"><span class="linenos" data-linenos="39 "></span></a><span class="sd">        SUBSET: Match if one skeleton&#39;s nodes are a subset of another&#39;s.</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><a href="#__codelineno-0-40"><span class="linenos" data-linenos="40 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><a href="#__codelineno-0-41"><span class="linenos" data-linenos="41 "></span></a>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><a href="#__codelineno-0-42"><span class="linenos" data-linenos="42 "></span></a>    <span class="n">EXACT</span> <span class="o">=</span> <span class="s2">&quot;exact&quot;</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><a href="#__codelineno-0-43"><span class="linenos" data-linenos="43 "></span></a>    <span class="n">STRUCTURE</span> <span class="o">=</span> <span class="s2">&quot;structure&quot;</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><a href="#__codelineno-0-44"><span class="linenos" data-linenos="44 "></span></a>    <span class="n">OVERLAP</span> <span class="o">=</span> <span class="s2">&quot;overlap&quot;</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><a href="#__codelineno-0-45"><span class="linenos" data-linenos="45 "></span></a>    <span class="n">SUBSET</span> <span class="o">=</span> <span class="s2">&quot;subset&quot;</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.InstanceMatchMethod" class="doc doc-heading">
            <code>sleap_io.model.matching.InstanceMatchMethod</code>


<a href="#sleap_io.model.matching.InstanceMatchMethod" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>Methods for matching instances.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatchMethod.SPATIAL">SPATIAL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match instances by spatial proximity using Euclidean distance.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatchMethod.IDENTITY">IDENTITY</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match instances by track identity (same track object).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatchMethod.IOU">IOU</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match instances by bounding box Intersection over Union.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-48" name="__codelineno-0-48"></a><a href="#__codelineno-0-48"><span class="linenos" data-linenos="48 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">InstanceMatchMethod</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><a href="#__codelineno-0-49"><span class="linenos" data-linenos="49 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Methods for matching instances.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><a href="#__codelineno-0-50"><span class="linenos" data-linenos="50 "></span></a>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><a href="#__codelineno-0-51"><span class="linenos" data-linenos="51 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><a href="#__codelineno-0-52"><span class="linenos" data-linenos="52 "></span></a><span class="sd">        SPATIAL: Match instances by spatial proximity using Euclidean distance.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><a href="#__codelineno-0-53"><span class="linenos" data-linenos="53 "></span></a><span class="sd">        IDENTITY: Match instances by track identity (same track object).</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><a href="#__codelineno-0-54"><span class="linenos" data-linenos="54 "></span></a><span class="sd">        IOU: Match instances by bounding box Intersection over Union.</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><a href="#__codelineno-0-55"><span class="linenos" data-linenos="55 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><a href="#__codelineno-0-56"><span class="linenos" data-linenos="56 "></span></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><a href="#__codelineno-0-57"><span class="linenos" data-linenos="57 "></span></a>    <span class="n">SPATIAL</span> <span class="o">=</span> <span class="s2">&quot;spatial&quot;</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><a href="#__codelineno-0-58"><span class="linenos" data-linenos="58 "></span></a>    <span class="n">IDENTITY</span> <span class="o">=</span> <span class="s2">&quot;identity&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><a href="#__codelineno-0-59"><span class="linenos" data-linenos="59 "></span></a>    <span class="n">IOU</span> <span class="o">=</span> <span class="s2">&quot;iou&quot;</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.TrackMatchMethod" class="doc doc-heading">
            <code>sleap_io.model.matching.TrackMatchMethod</code>


<a href="#sleap_io.model.matching.TrackMatchMethod" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>Methods for matching tracks.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.TrackMatchMethod.NAME">NAME</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match tracks by their name attribute.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.TrackMatchMethod.IDENTITY">IDENTITY</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match tracks by object identity (same Python object).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-62" name="__codelineno-0-62"></a><a href="#__codelineno-0-62"><span class="linenos" data-linenos="62 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">TrackMatchMethod</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><a href="#__codelineno-0-63"><span class="linenos" data-linenos="63 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Methods for matching tracks.</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><a href="#__codelineno-0-64"><span class="linenos" data-linenos="64 "></span></a>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><a href="#__codelineno-0-65"><span class="linenos" data-linenos="65 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><a href="#__codelineno-0-66"><span class="linenos" data-linenos="66 "></span></a><span class="sd">        NAME: Match tracks by their name attribute.</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><a href="#__codelineno-0-67"><span class="linenos" data-linenos="67 "></span></a><span class="sd">        IDENTITY: Match tracks by object identity (same Python object).</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><a href="#__codelineno-0-68"><span class="linenos" data-linenos="68 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><a href="#__codelineno-0-69"><span class="linenos" data-linenos="69 "></span></a>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><a href="#__codelineno-0-70"><span class="linenos" data-linenos="70 "></span></a>    <span class="n">NAME</span> <span class="o">=</span> <span class="s2">&quot;name&quot;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><a href="#__codelineno-0-71"><span class="linenos" data-linenos="71 "></span></a>    <span class="n">IDENTITY</span> <span class="o">=</span> <span class="s2">&quot;identity&quot;</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.VideoMatchMethod" class="doc doc-heading">
            <code>sleap_io.model.matching.VideoMatchMethod</code>


<a href="#sleap_io.model.matching.VideoMatchMethod" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>Methods for matching videos.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatchMethod.PATH">PATH</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match by exact file path (strict or lenient based on
VideoMatcher.strict setting).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatchMethod.BASENAME">BASENAME</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match by filename only, ignoring directory paths.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatchMethod.CONTENT">CONTENT</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Match by video shape (frames, height, width, channels) and
backend type.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatchMethod.AUTO">AUTO</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Automatic matching - tries BASENAME first, then falls back to CONTENT.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-74" name="__codelineno-0-74"></a><a href="#__codelineno-0-74"><span class="linenos" data-linenos="74 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">VideoMatchMethod</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><a href="#__codelineno-0-75"><span class="linenos" data-linenos="75 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Methods for matching videos.</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><a href="#__codelineno-0-76"><span class="linenos" data-linenos="76 "></span></a>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><a href="#__codelineno-0-77"><span class="linenos" data-linenos="77 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><a href="#__codelineno-0-78"><span class="linenos" data-linenos="78 "></span></a><span class="sd">        PATH: Match by exact file path (strict or lenient based on</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><a href="#__codelineno-0-79"><span class="linenos" data-linenos="79 "></span></a><span class="sd">            VideoMatcher.strict setting).</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><a href="#__codelineno-0-80"><span class="linenos" data-linenos="80 "></span></a><span class="sd">        BASENAME: Match by filename only, ignoring directory paths.</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><a href="#__codelineno-0-81"><span class="linenos" data-linenos="81 "></span></a><span class="sd">        CONTENT: Match by video shape (frames, height, width, channels) and</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><a href="#__codelineno-0-82"><span class="linenos" data-linenos="82 "></span></a><span class="sd">            backend type.</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><a href="#__codelineno-0-83"><span class="linenos" data-linenos="83 "></span></a><span class="sd">        AUTO: Automatic matching - tries BASENAME first, then falls back to CONTENT.</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><a href="#__codelineno-0-84"><span class="linenos" data-linenos="84 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><a href="#__codelineno-0-85"><span class="linenos" data-linenos="85 "></span></a>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><a href="#__codelineno-0-86"><span class="linenos" data-linenos="86 "></span></a>    <span class="n">PATH</span> <span class="o">=</span> <span class="s2">&quot;path&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><a href="#__codelineno-0-87"><span class="linenos" data-linenos="87 "></span></a>    <span class="n">BASENAME</span> <span class="o">=</span> <span class="s2">&quot;basename&quot;</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><a href="#__codelineno-0-88"><span class="linenos" data-linenos="88 "></span></a>    <span class="n">CONTENT</span> <span class="o">=</span> <span class="s2">&quot;content&quot;</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><a href="#__codelineno-0-89"><span class="linenos" data-linenos="89 "></span></a>    <span class="n">AUTO</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.FrameStrategy" class="doc doc-heading">
            <code>sleap_io.model.matching.FrameStrategy</code>


<a href="#sleap_io.model.matching.FrameStrategy" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>Strategies for handling frame merging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.SMART">SMART</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Smart merging that preserves user labels over predictions when
they overlap.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_ORIGINAL">KEEP_ORIGINAL</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the original (base) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_NEW">KEEP_NEW</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always keep instances from the new (incoming) frame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameStrategy.KEEP_BOTH">KEEP_BOTH</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keep all instances from both frames without filtering.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-92" name="__codelineno-0-92"></a><a href="#__codelineno-0-92"><span class="linenos" data-linenos=" 92 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">FrameStrategy</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><a href="#__codelineno-0-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Strategies for handling frame merging.</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><a href="#__codelineno-0-94"><span class="linenos" data-linenos=" 94 "></span></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><a href="#__codelineno-0-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><a href="#__codelineno-0-96"><span class="linenos" data-linenos=" 96 "></span></a><span class="sd">        SMART: Smart merging that preserves user labels over predictions when</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><a href="#__codelineno-0-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="sd">            they overlap.</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><a href="#__codelineno-0-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="sd">        KEEP_ORIGINAL: Always keep instances from the original (base) frame.</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><a href="#__codelineno-0-99"><span class="linenos" data-linenos=" 99 "></span></a><span class="sd">        KEEP_NEW: Always keep instances from the new (incoming) frame.</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><a href="#__codelineno-0-100"><span class="linenos" data-linenos="100 "></span></a><span class="sd">        KEEP_BOTH: Keep all instances from both frames without filtering.</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><a href="#__codelineno-0-101"><span class="linenos" data-linenos="101 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><a href="#__codelineno-0-102"><span class="linenos" data-linenos="102 "></span></a>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><a href="#__codelineno-0-103"><span class="linenos" data-linenos="103 "></span></a>    <span class="n">SMART</span> <span class="o">=</span> <span class="s2">&quot;smart&quot;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><a href="#__codelineno-0-104"><span class="linenos" data-linenos="104 "></span></a>    <span class="n">KEEP_ORIGINAL</span> <span class="o">=</span> <span class="s2">&quot;keep_original&quot;</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><a href="#__codelineno-0-105"><span class="linenos" data-linenos="105 "></span></a>    <span class="n">KEEP_NEW</span> <span class="o">=</span> <span class="s2">&quot;keep_new&quot;</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><a href="#__codelineno-0-106"><span class="linenos" data-linenos="106 "></span></a>    <span class="n">KEEP_BOTH</span> <span class="o">=</span> <span class="s2">&quot;keep_both&quot;</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.ErrorMode" class="doc doc-heading">
            <code>sleap_io.model.matching.ErrorMode</code>


<a href="#sleap_io.model.matching.ErrorMode" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>Error handling modes for merge operations.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.ErrorMode.CONTINUE">CONTINUE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Continue merging on errors, collecting them in the result.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.ErrorMode.STRICT">STRICT</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raise an exception on the first error encountered.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.ErrorMode.WARN">WARN</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Issue warnings about errors but continue merging.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-109" name="__codelineno-0-109"></a><a href="#__codelineno-0-109"><span class="linenos" data-linenos="109 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">ErrorMode</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><a href="#__codelineno-0-110"><span class="linenos" data-linenos="110 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Error handling modes for merge operations.</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><a href="#__codelineno-0-111"><span class="linenos" data-linenos="111 "></span></a>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><a href="#__codelineno-0-112"><span class="linenos" data-linenos="112 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><a href="#__codelineno-0-113"><span class="linenos" data-linenos="113 "></span></a><span class="sd">        CONTINUE: Continue merging on errors, collecting them in the result.</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><a href="#__codelineno-0-114"><span class="linenos" data-linenos="114 "></span></a><span class="sd">        STRICT: Raise an exception on the first error encountered.</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><a href="#__codelineno-0-115"><span class="linenos" data-linenos="115 "></span></a><span class="sd">        WARN: Issue warnings about errors but continue merging.</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><a href="#__codelineno-0-116"><span class="linenos" data-linenos="116 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><a href="#__codelineno-0-117"><span class="linenos" data-linenos="117 "></span></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><a href="#__codelineno-0-118"><span class="linenos" data-linenos="118 "></span></a>    <span class="n">CONTINUE</span> <span class="o">=</span> <span class="s2">&quot;continue&quot;</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><a href="#__codelineno-0-119"><span class="linenos" data-linenos="119 "></span></a>    <span class="n">STRICT</span> <span class="o">=</span> <span class="s2">&quot;strict&quot;</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><a href="#__codelineno-0-120"><span class="linenos" data-linenos="120 "></span></a>    <span class="n">WARN</span> <span class="o">=</span> <span class="s2">&quot;warn&quot;</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="matcher-classes">Matcher Classes<a class="headerlink" href="#matcher-classes" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.SkeletonMatcher" class="doc doc-heading">
            <code>sleap_io.model.matching.SkeletonMatcher</code>


<a href="#sleap_io.model.matching.SkeletonMatcher" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Matcher for comparing and matching skeletons.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.method">method</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.model.matching.SkeletonMatchMethod&lt;/code&gt;" href="#sleap_io.model.matching.SkeletonMatchMethod">SkeletonMatchMethod</a>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be a SkeletonMatchMethod enum value
or a string that will be converted to the enum. Default is STRUCTURE.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.require_same_order">require_same_order</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to require nodes in the same order for STRUCTURE
matching. Only used when method is STRUCTURE. Default is False.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.SkeletonMatcher.min_overlap">min_overlap</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum Jaccard similarity required for OVERLAP matching.
Only used when method is OVERLAP. Default is 0.5.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skeleton1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;skeleton2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.SkeletonMatcher.match&lt;/code&gt;)" href="#sleap_io.model.matching.SkeletonMatcher.match">match</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if two skeletons match according to the configured method.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-123" name="__codelineno-0-123"></a><a href="#__codelineno-0-123"><span class="linenos" data-linenos="123 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><a href="#__codelineno-0-124"><span class="linenos" data-linenos="124 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">SkeletonMatcher</span><span class="p">:</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><a href="#__codelineno-0-125"><span class="linenos" data-linenos="125 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Matcher for comparing and matching skeletons.</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><a href="#__codelineno-0-126"><span class="linenos" data-linenos="126 "></span></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><a href="#__codelineno-0-127"><span class="linenos" data-linenos="127 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><a href="#__codelineno-0-128"><span class="linenos" data-linenos="128 "></span></a><span class="sd">        method: The matching method to use. Can be a SkeletonMatchMethod enum value</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><a href="#__codelineno-0-129"><span class="linenos" data-linenos="129 "></span></a><span class="sd">            or a string that will be converted to the enum. Default is STRUCTURE.</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><a href="#__codelineno-0-130"><span class="linenos" data-linenos="130 "></span></a><span class="sd">        require_same_order: Whether to require nodes in the same order for STRUCTURE</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><a href="#__codelineno-0-131"><span class="linenos" data-linenos="131 "></span></a><span class="sd">            matching. Only used when method is STRUCTURE. Default is False.</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><a href="#__codelineno-0-132"><span class="linenos" data-linenos="132 "></span></a><span class="sd">        min_overlap: Minimum Jaccard similarity required for OVERLAP matching.</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><a href="#__codelineno-0-133"><span class="linenos" data-linenos="133 "></span></a><span class="sd">            Only used when method is OVERLAP. Default is 0.5.</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><a href="#__codelineno-0-134"><span class="linenos" data-linenos="134 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><a href="#__codelineno-0-135"><span class="linenos" data-linenos="135 "></span></a>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><a href="#__codelineno-0-136"><span class="linenos" data-linenos="136 "></span></a>    <span class="n">method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">SkeletonMatchMethod</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><a href="#__codelineno-0-137"><span class="linenos" data-linenos="137 "></span></a>        <span class="n">default</span><span class="o">=</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">,</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><a href="#__codelineno-0-138"><span class="linenos" data-linenos="138 "></span></a>        <span class="n">converter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SkeletonMatchMethod</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><a href="#__codelineno-0-139"><span class="linenos" data-linenos="139 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><a href="#__codelineno-0-140"><span class="linenos" data-linenos="140 "></span></a>    <span class="n">require_same_order</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><a href="#__codelineno-0-141"><span class="linenos" data-linenos="141 "></span></a>    <span class="n">min_overlap</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><a href="#__codelineno-0-142"><span class="linenos" data-linenos="142 "></span></a>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><a href="#__codelineno-0-143"><span class="linenos" data-linenos="143 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skeleton1</span><span class="p">:</span> <span class="n">Skeleton</span><span class="p">,</span> <span class="n">skeleton2</span><span class="p">:</span> <span class="n">Skeleton</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><a href="#__codelineno-0-144"><span class="linenos" data-linenos="144 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two skeletons match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><a href="#__codelineno-0-145"><span class="linenos" data-linenos="145 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">EXACT</span><span class="p">:</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><a href="#__codelineno-0-146"><span class="linenos" data-linenos="146 "></span></a>            <span class="k">return</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">skeleton2</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><a href="#__codelineno-0-147"><span class="linenos" data-linenos="147 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">:</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><a href="#__codelineno-0-148"><span class="linenos" data-linenos="148 "></span></a>            <span class="k">return</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><a href="#__codelineno-0-149"><span class="linenos" data-linenos="149 "></span></a>                <span class="n">skeleton2</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">require_same_order</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><a href="#__codelineno-0-150"><span class="linenos" data-linenos="150 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><a href="#__codelineno-0-151"><span class="linenos" data-linenos="151 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">OVERLAP</span><span class="p">:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><a href="#__codelineno-0-152"><span class="linenos" data-linenos="152 "></span></a>            <span class="n">metrics</span> <span class="o">=</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">node_similarities</span><span class="p">(</span><span class="n">skeleton2</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><a href="#__codelineno-0-153"><span class="linenos" data-linenos="153 "></span></a>            <span class="k">return</span> <span class="n">metrics</span><span class="p">[</span><span class="s2">&quot;jaccard&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_overlap</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><a href="#__codelineno-0-154"><span class="linenos" data-linenos="154 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">SUBSET</span><span class="p">:</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><a href="#__codelineno-0-155"><span class="linenos" data-linenos="155 "></span></a>            <span class="c1"># Check if skeleton1 nodes are subset of skeleton2</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><a href="#__codelineno-0-156"><span class="linenos" data-linenos="156 "></span></a>            <span class="n">nodes1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">skeleton1</span><span class="o">.</span><span class="n">node_names</span><span class="p">)</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><a href="#__codelineno-0-157"><span class="linenos" data-linenos="157 "></span></a>            <span class="n">nodes2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">skeleton2</span><span class="o">.</span><span class="n">node_names</span><span class="p">)</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><a href="#__codelineno-0-158"><span class="linenos" data-linenos="158 "></span></a>            <span class="k">return</span> <span class="n">nodes1</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">nodes2</span><span class="p">)</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><a href="#__codelineno-0-159"><span class="linenos" data-linenos="159 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><a href="#__codelineno-0-160"><span class="linenos" data-linenos="160 "></span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown skeleton match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.SkeletonMatcher.match" class="doc doc-heading">
            <code class="highlight language-python"><span class="k">match</span><span class="p">(</span><span class="n">skeleton1</span><span class="p">,</span> <span class="n">skeleton2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.SkeletonMatcher.match" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if two skeletons match according to the configured method.</p>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-143" name="__codelineno-0-143"></a><a href="#__codelineno-0-143"><span class="linenos" data-linenos="143 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skeleton1</span><span class="p">:</span> <span class="n">Skeleton</span><span class="p">,</span> <span class="n">skeleton2</span><span class="p">:</span> <span class="n">Skeleton</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><a href="#__codelineno-0-144"><span class="linenos" data-linenos="144 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two skeletons match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><a href="#__codelineno-0-145"><span class="linenos" data-linenos="145 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">EXACT</span><span class="p">:</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><a href="#__codelineno-0-146"><span class="linenos" data-linenos="146 "></span></a>        <span class="k">return</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">skeleton2</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><a href="#__codelineno-0-147"><span class="linenos" data-linenos="147 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">:</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><a href="#__codelineno-0-148"><span class="linenos" data-linenos="148 "></span></a>        <span class="k">return</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><a href="#__codelineno-0-149"><span class="linenos" data-linenos="149 "></span></a>            <span class="n">skeleton2</span><span class="p">,</span> <span class="n">require_same_order</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">require_same_order</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><a href="#__codelineno-0-150"><span class="linenos" data-linenos="150 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><a href="#__codelineno-0-151"><span class="linenos" data-linenos="151 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">OVERLAP</span><span class="p">:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><a href="#__codelineno-0-152"><span class="linenos" data-linenos="152 "></span></a>        <span class="n">metrics</span> <span class="o">=</span> <span class="n">skeleton1</span><span class="o">.</span><span class="n">node_similarities</span><span class="p">(</span><span class="n">skeleton2</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><a href="#__codelineno-0-153"><span class="linenos" data-linenos="153 "></span></a>        <span class="k">return</span> <span class="n">metrics</span><span class="p">[</span><span class="s2">&quot;jaccard&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_overlap</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><a href="#__codelineno-0-154"><span class="linenos" data-linenos="154 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">SUBSET</span><span class="p">:</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><a href="#__codelineno-0-155"><span class="linenos" data-linenos="155 "></span></a>        <span class="c1"># Check if skeleton1 nodes are subset of skeleton2</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><a href="#__codelineno-0-156"><span class="linenos" data-linenos="156 "></span></a>        <span class="n">nodes1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">skeleton1</span><span class="o">.</span><span class="n">node_names</span><span class="p">)</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><a href="#__codelineno-0-157"><span class="linenos" data-linenos="157 "></span></a>        <span class="n">nodes2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">skeleton2</span><span class="o">.</span><span class="n">node_names</span><span class="p">)</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><a href="#__codelineno-0-158"><span class="linenos" data-linenos="158 "></span></a>        <span class="k">return</span> <span class="n">nodes1</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">nodes2</span><span class="p">)</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><a href="#__codelineno-0-159"><span class="linenos" data-linenos="159 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><a href="#__codelineno-0-160"><span class="linenos" data-linenos="160 "></span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown skeleton match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.InstanceMatcher" class="doc doc-heading">
            <code>sleap_io.model.matching.InstanceMatcher</code>


<a href="#sleap_io.model.matching.InstanceMatcher" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Matcher for comparing and matching instances.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.method">method</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.model.matching.InstanceMatchMethod&lt;/code&gt;" href="#sleap_io.model.matching.InstanceMatchMethod">InstanceMatchMethod</a>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be an InstanceMatchMethod enum value
or a string that will be converted to the enum. Default is SPATIAL.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.InstanceMatcher.threshold">threshold</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The threshold value used for matching. For SPATIAL method, this is
the maximum pixel distance. For IOU method, this is the minimum IoU value.
Not used for IDENTITY method. Default is 5.0.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;find_matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instances1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instances2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.InstanceMatcher.find_matches&lt;/code&gt;)" href="#sleap_io.model.matching.InstanceMatcher.find_matches">find_matches</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Find all matching instances between two lists.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.InstanceMatcher.match&lt;/code&gt;)" href="#sleap_io.model.matching.InstanceMatcher.match">match</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if two instances match according to the configured method.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-163" name="__codelineno-0-163"></a><a href="#__codelineno-0-163"><span class="linenos" data-linenos="163 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><a href="#__codelineno-0-164"><span class="linenos" data-linenos="164 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">InstanceMatcher</span><span class="p">:</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><a href="#__codelineno-0-165"><span class="linenos" data-linenos="165 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Matcher for comparing and matching instances.</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><a href="#__codelineno-0-166"><span class="linenos" data-linenos="166 "></span></a>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><a href="#__codelineno-0-167"><span class="linenos" data-linenos="167 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><a href="#__codelineno-0-168"><span class="linenos" data-linenos="168 "></span></a><span class="sd">        method: The matching method to use. Can be an InstanceMatchMethod enum value</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><a href="#__codelineno-0-169"><span class="linenos" data-linenos="169 "></span></a><span class="sd">            or a string that will be converted to the enum. Default is SPATIAL.</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><a href="#__codelineno-0-170"><span class="linenos" data-linenos="170 "></span></a><span class="sd">        threshold: The threshold value used for matching. For SPATIAL method, this is</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><a href="#__codelineno-0-171"><span class="linenos" data-linenos="171 "></span></a><span class="sd">            the maximum pixel distance. For IOU method, this is the minimum IoU value.</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><a href="#__codelineno-0-172"><span class="linenos" data-linenos="172 "></span></a><span class="sd">            Not used for IDENTITY method. Default is 5.0.</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><a href="#__codelineno-0-173"><span class="linenos" data-linenos="173 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><a href="#__codelineno-0-174"><span class="linenos" data-linenos="174 "></span></a>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><a href="#__codelineno-0-175"><span class="linenos" data-linenos="175 "></span></a>    <span class="n">method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">InstanceMatchMethod</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a><a href="#__codelineno-0-176"><span class="linenos" data-linenos="176 "></span></a>        <span class="n">default</span><span class="o">=</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">,</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><a href="#__codelineno-0-177"><span class="linenos" data-linenos="177 "></span></a>        <span class="n">converter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">InstanceMatchMethod</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><a href="#__codelineno-0-178"><span class="linenos" data-linenos="178 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><a href="#__codelineno-0-179"><span class="linenos" data-linenos="179 "></span></a>    <span class="n">threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><a href="#__codelineno-0-180"><span class="linenos" data-linenos="180 "></span></a>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><a href="#__codelineno-0-181"><span class="linenos" data-linenos="181 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance1</span><span class="p">:</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">instance2</span><span class="p">:</span> <span class="n">Instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><a href="#__codelineno-0-182"><span class="linenos" data-linenos="182 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two instances match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><a href="#__codelineno-0-183"><span class="linenos" data-linenos="183 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><a href="#__codelineno-0-184"><span class="linenos" data-linenos="184 "></span></a>            <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">same_pose_as</span><span class="p">(</span><span class="n">instance2</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><a href="#__codelineno-0-185"><span class="linenos" data-linenos="185 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><a href="#__codelineno-0-186"><span class="linenos" data-linenos="186 "></span></a>            <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">same_identity_as</span><span class="p">(</span><span class="n">instance2</span><span class="p">)</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><a href="#__codelineno-0-187"><span class="linenos" data-linenos="187 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">:</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><a href="#__codelineno-0-188"><span class="linenos" data-linenos="188 "></span></a>            <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">instance2</span><span class="p">,</span> <span class="n">iou_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><a href="#__codelineno-0-189"><span class="linenos" data-linenos="189 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><a href="#__codelineno-0-190"><span class="linenos" data-linenos="190 "></span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown instance match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><a href="#__codelineno-0-191"><span class="linenos" data-linenos="191 "></span></a>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><a href="#__codelineno-0-192"><span class="linenos" data-linenos="192 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">find_matches</span><span class="p">(</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><a href="#__codelineno-0-193"><span class="linenos" data-linenos="193 "></span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">instances1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span><span class="p">],</span> <span class="n">instances2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span><span class="p">]</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><a href="#__codelineno-0-194"><span class="linenos" data-linenos="194 "></span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><a href="#__codelineno-0-195"><span class="linenos" data-linenos="195 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Find all matching instances between two lists.</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><a href="#__codelineno-0-196"><span class="linenos" data-linenos="196 "></span></a>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><a href="#__codelineno-0-197"><span class="linenos" data-linenos="197 "></span></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><a href="#__codelineno-0-198"><span class="linenos" data-linenos="198 "></span></a><span class="sd">            List of (idx1, idx2, score) tuples for matching instances.</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><a href="#__codelineno-0-199"><span class="linenos" data-linenos="199 "></span></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><a href="#__codelineno-0-200"><span class="linenos" data-linenos="200 "></span></a>        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><a href="#__codelineno-0-201"><span class="linenos" data-linenos="201 "></span></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><a href="#__codelineno-0-202"><span class="linenos" data-linenos="202 "></span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">inst1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instances1</span><span class="p">):</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><a href="#__codelineno-0-203"><span class="linenos" data-linenos="203 "></span></a>            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">inst2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instances2</span><span class="p">):</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><a href="#__codelineno-0-204"><span class="linenos" data-linenos="204 "></span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">inst1</span><span class="p">,</span> <span class="n">inst2</span><span class="p">):</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><a href="#__codelineno-0-205"><span class="linenos" data-linenos="205 "></span></a>                    <span class="c1"># Calculate match score based on method</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><a href="#__codelineno-0-206"><span class="linenos" data-linenos="206 "></span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><a href="#__codelineno-0-207"><span class="linenos" data-linenos="207 "></span></a>                        <span class="c1"># Use inverse distance as score</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><a href="#__codelineno-0-208"><span class="linenos" data-linenos="208 "></span></a>                        <span class="n">pts1</span> <span class="o">=</span> <span class="n">inst1</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><a href="#__codelineno-0-209"><span class="linenos" data-linenos="209 "></span></a>                        <span class="n">pts2</span> <span class="o">=</span> <span class="n">inst2</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><a href="#__codelineno-0-210"><span class="linenos" data-linenos="210 "></span></a>                        <span class="n">valid</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pts1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pts2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]))</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><a href="#__codelineno-0-211"><span class="linenos" data-linenos="211 "></span></a>                        <span class="k">if</span> <span class="n">valid</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><a href="#__codelineno-0-212"><span class="linenos" data-linenos="212 "></span></a>                            <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><a href="#__codelineno-0-213"><span class="linenos" data-linenos="213 "></span></a>                                <span class="n">pts1</span><span class="p">[</span><span class="n">valid</span><span class="p">]</span> <span class="o">-</span> <span class="n">pts2</span><span class="p">[</span><span class="n">valid</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><a href="#__codelineno-0-214"><span class="linenos" data-linenos="214 "></span></a>                            <span class="p">)</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><a href="#__codelineno-0-215"><span class="linenos" data-linenos="215 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">distances</span><span class="p">))</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><a href="#__codelineno-0-216"><span class="linenos" data-linenos="216 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><a href="#__codelineno-0-217"><span class="linenos" data-linenos="217 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><a href="#__codelineno-0-218"><span class="linenos" data-linenos="218 "></span></a>                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">:</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><a href="#__codelineno-0-219"><span class="linenos" data-linenos="219 "></span></a>                        <span class="c1"># Calculate actual IoU as score</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><a href="#__codelineno-0-220"><span class="linenos" data-linenos="220 "></span></a>                        <span class="n">bbox1</span> <span class="o">=</span> <span class="n">inst1</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><a href="#__codelineno-0-221"><span class="linenos" data-linenos="221 "></span></a>                        <span class="n">bbox2</span> <span class="o">=</span> <span class="n">inst2</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><a href="#__codelineno-0-222"><span class="linenos" data-linenos="222 "></span></a>                        <span class="k">if</span> <span class="n">bbox1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bbox2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><a href="#__codelineno-0-223"><span class="linenos" data-linenos="223 "></span></a>                            <span class="c1"># Calculate IoU</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><a href="#__codelineno-0-224"><span class="linenos" data-linenos="224 "></span></a>                            <span class="n">intersection_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><a href="#__codelineno-0-225"><span class="linenos" data-linenos="225 "></span></a>                            <span class="n">intersection_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><a href="#__codelineno-0-226"><span class="linenos" data-linenos="226 "></span></a>                            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">intersection_min</span> <span class="o">&lt;</span> <span class="n">intersection_max</span><span class="p">):</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><a href="#__codelineno-0-227"><span class="linenos" data-linenos="227 "></span></a>                                <span class="n">intersection_area</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><a href="#__codelineno-0-228"><span class="linenos" data-linenos="228 "></span></a>                                    <span class="n">intersection_max</span> <span class="o">-</span> <span class="n">intersection_min</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><a href="#__codelineno-0-229"><span class="linenos" data-linenos="229 "></span></a>                                <span class="p">)</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><a href="#__codelineno-0-230"><span class="linenos" data-linenos="230 "></span></a>                                <span class="n">area1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><a href="#__codelineno-0-231"><span class="linenos" data-linenos="231 "></span></a>                                <span class="n">area2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">bbox2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><a href="#__codelineno-0-232"><span class="linenos" data-linenos="232 "></span></a>                                <span class="n">union_area</span> <span class="o">=</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">area2</span> <span class="o">-</span> <span class="n">intersection_area</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><a href="#__codelineno-0-233"><span class="linenos" data-linenos="233 "></span></a>                                <span class="n">score</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><a href="#__codelineno-0-234"><span class="linenos" data-linenos="234 "></span></a>                                    <span class="n">intersection_area</span> <span class="o">/</span> <span class="n">union_area</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><a href="#__codelineno-0-235"><span class="linenos" data-linenos="235 "></span></a>                                    <span class="k">if</span> <span class="n">union_area</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><a href="#__codelineno-0-236"><span class="linenos" data-linenos="236 "></span></a>                                    <span class="k">else</span> <span class="mi">0</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><a href="#__codelineno-0-237"><span class="linenos" data-linenos="237 "></span></a>                                <span class="p">)</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><a href="#__codelineno-0-238"><span class="linenos" data-linenos="238 "></span></a>                            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><a href="#__codelineno-0-239"><span class="linenos" data-linenos="239 "></span></a>                                <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><a href="#__codelineno-0-240"><span class="linenos" data-linenos="240 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><a href="#__codelineno-0-241"><span class="linenos" data-linenos="241 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><a href="#__codelineno-0-242"><span class="linenos" data-linenos="242 "></span></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><a href="#__codelineno-0-243"><span class="linenos" data-linenos="243 "></span></a>                        <span class="n">score</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Binary match for identity</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><a href="#__codelineno-0-244"><span class="linenos" data-linenos="244 "></span></a>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><a href="#__codelineno-0-245"><span class="linenos" data-linenos="245 "></span></a>                    <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">score</span><span class="p">))</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><a href="#__codelineno-0-246"><span class="linenos" data-linenos="246 "></span></a>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><a href="#__codelineno-0-247"><span class="linenos" data-linenos="247 "></span></a>        <span class="k">return</span> <span class="n">matches</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.InstanceMatcher.find_matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_matches</span><span class="p">(</span><span class="n">instances1</span><span class="p">,</span> <span class="n">instances2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.InstanceMatcher.find_matches" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Find all matching instances between two lists.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of (idx1, idx2, score) tuples for matching instances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-192" name="__codelineno-0-192"></a><a href="#__codelineno-0-192"><span class="linenos" data-linenos="192 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">find_matches</span><span class="p">(</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><a href="#__codelineno-0-193"><span class="linenos" data-linenos="193 "></span></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">instances1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span><span class="p">],</span> <span class="n">instances2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Instance</span><span class="p">]</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><a href="#__codelineno-0-194"><span class="linenos" data-linenos="194 "></span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><a href="#__codelineno-0-195"><span class="linenos" data-linenos="195 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Find all matching instances between two lists.</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><a href="#__codelineno-0-196"><span class="linenos" data-linenos="196 "></span></a>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><a href="#__codelineno-0-197"><span class="linenos" data-linenos="197 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><a href="#__codelineno-0-198"><span class="linenos" data-linenos="198 "></span></a><span class="sd">        List of (idx1, idx2, score) tuples for matching instances.</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><a href="#__codelineno-0-199"><span class="linenos" data-linenos="199 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><a href="#__codelineno-0-200"><span class="linenos" data-linenos="200 "></span></a>    <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><a href="#__codelineno-0-201"><span class="linenos" data-linenos="201 "></span></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><a href="#__codelineno-0-202"><span class="linenos" data-linenos="202 "></span></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">inst1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instances1</span><span class="p">):</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><a href="#__codelineno-0-203"><span class="linenos" data-linenos="203 "></span></a>        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">inst2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instances2</span><span class="p">):</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><a href="#__codelineno-0-204"><span class="linenos" data-linenos="204 "></span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">inst1</span><span class="p">,</span> <span class="n">inst2</span><span class="p">):</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><a href="#__codelineno-0-205"><span class="linenos" data-linenos="205 "></span></a>                <span class="c1"># Calculate match score based on method</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><a href="#__codelineno-0-206"><span class="linenos" data-linenos="206 "></span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><a href="#__codelineno-0-207"><span class="linenos" data-linenos="207 "></span></a>                    <span class="c1"># Use inverse distance as score</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><a href="#__codelineno-0-208"><span class="linenos" data-linenos="208 "></span></a>                    <span class="n">pts1</span> <span class="o">=</span> <span class="n">inst1</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><a href="#__codelineno-0-209"><span class="linenos" data-linenos="209 "></span></a>                    <span class="n">pts2</span> <span class="o">=</span> <span class="n">inst2</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><a href="#__codelineno-0-210"><span class="linenos" data-linenos="210 "></span></a>                    <span class="n">valid</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pts1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pts2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]))</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><a href="#__codelineno-0-211"><span class="linenos" data-linenos="211 "></span></a>                    <span class="k">if</span> <span class="n">valid</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><a href="#__codelineno-0-212"><span class="linenos" data-linenos="212 "></span></a>                        <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><a href="#__codelineno-0-213"><span class="linenos" data-linenos="213 "></span></a>                            <span class="n">pts1</span><span class="p">[</span><span class="n">valid</span><span class="p">]</span> <span class="o">-</span> <span class="n">pts2</span><span class="p">[</span><span class="n">valid</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><a href="#__codelineno-0-214"><span class="linenos" data-linenos="214 "></span></a>                        <span class="p">)</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><a href="#__codelineno-0-215"><span class="linenos" data-linenos="215 "></span></a>                        <span class="n">score</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">distances</span><span class="p">))</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><a href="#__codelineno-0-216"><span class="linenos" data-linenos="216 "></span></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><a href="#__codelineno-0-217"><span class="linenos" data-linenos="217 "></span></a>                        <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><a href="#__codelineno-0-218"><span class="linenos" data-linenos="218 "></span></a>                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">:</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><a href="#__codelineno-0-219"><span class="linenos" data-linenos="219 "></span></a>                    <span class="c1"># Calculate actual IoU as score</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><a href="#__codelineno-0-220"><span class="linenos" data-linenos="220 "></span></a>                    <span class="n">bbox1</span> <span class="o">=</span> <span class="n">inst1</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><a href="#__codelineno-0-221"><span class="linenos" data-linenos="221 "></span></a>                    <span class="n">bbox2</span> <span class="o">=</span> <span class="n">inst2</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><a href="#__codelineno-0-222"><span class="linenos" data-linenos="222 "></span></a>                    <span class="k">if</span> <span class="n">bbox1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bbox2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><a href="#__codelineno-0-223"><span class="linenos" data-linenos="223 "></span></a>                        <span class="c1"># Calculate IoU</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><a href="#__codelineno-0-224"><span class="linenos" data-linenos="224 "></span></a>                        <span class="n">intersection_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><a href="#__codelineno-0-225"><span class="linenos" data-linenos="225 "></span></a>                        <span class="n">intersection_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><a href="#__codelineno-0-226"><span class="linenos" data-linenos="226 "></span></a>                        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">intersection_min</span> <span class="o">&lt;</span> <span class="n">intersection_max</span><span class="p">):</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><a href="#__codelineno-0-227"><span class="linenos" data-linenos="227 "></span></a>                            <span class="n">intersection_area</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><a href="#__codelineno-0-228"><span class="linenos" data-linenos="228 "></span></a>                                <span class="n">intersection_max</span> <span class="o">-</span> <span class="n">intersection_min</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><a href="#__codelineno-0-229"><span class="linenos" data-linenos="229 "></span></a>                            <span class="p">)</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><a href="#__codelineno-0-230"><span class="linenos" data-linenos="230 "></span></a>                            <span class="n">area1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">bbox1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><a href="#__codelineno-0-231"><span class="linenos" data-linenos="231 "></span></a>                            <span class="n">area2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">bbox2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><a href="#__codelineno-0-232"><span class="linenos" data-linenos="232 "></span></a>                            <span class="n">union_area</span> <span class="o">=</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">area2</span> <span class="o">-</span> <span class="n">intersection_area</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><a href="#__codelineno-0-233"><span class="linenos" data-linenos="233 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><a href="#__codelineno-0-234"><span class="linenos" data-linenos="234 "></span></a>                                <span class="n">intersection_area</span> <span class="o">/</span> <span class="n">union_area</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><a href="#__codelineno-0-235"><span class="linenos" data-linenos="235 "></span></a>                                <span class="k">if</span> <span class="n">union_area</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><a href="#__codelineno-0-236"><span class="linenos" data-linenos="236 "></span></a>                                <span class="k">else</span> <span class="mi">0</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><a href="#__codelineno-0-237"><span class="linenos" data-linenos="237 "></span></a>                            <span class="p">)</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><a href="#__codelineno-0-238"><span class="linenos" data-linenos="238 "></span></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><a href="#__codelineno-0-239"><span class="linenos" data-linenos="239 "></span></a>                            <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><a href="#__codelineno-0-240"><span class="linenos" data-linenos="240 "></span></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><a href="#__codelineno-0-241"><span class="linenos" data-linenos="241 "></span></a>                        <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><a href="#__codelineno-0-242"><span class="linenos" data-linenos="242 "></span></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><a href="#__codelineno-0-243"><span class="linenos" data-linenos="243 "></span></a>                    <span class="n">score</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Binary match for identity</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><a href="#__codelineno-0-244"><span class="linenos" data-linenos="244 "></span></a>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><a href="#__codelineno-0-245"><span class="linenos" data-linenos="245 "></span></a>                <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">score</span><span class="p">))</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><a href="#__codelineno-0-246"><span class="linenos" data-linenos="246 "></span></a>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><a href="#__codelineno-0-247"><span class="linenos" data-linenos="247 "></span></a>    <span class="k">return</span> <span class="n">matches</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.InstanceMatcher.match" class="doc doc-heading">
            <code class="highlight language-python"><span class="k">match</span><span class="p">(</span><span class="n">instance1</span><span class="p">,</span> <span class="n">instance2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.InstanceMatcher.match" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if two instances match according to the configured method.</p>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-181" name="__codelineno-0-181"></a><a href="#__codelineno-0-181"><span class="linenos" data-linenos="181 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance1</span><span class="p">:</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">instance2</span><span class="p">:</span> <span class="n">Instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><a href="#__codelineno-0-182"><span class="linenos" data-linenos="182 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two instances match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><a href="#__codelineno-0-183"><span class="linenos" data-linenos="183 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">:</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><a href="#__codelineno-0-184"><span class="linenos" data-linenos="184 "></span></a>        <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">same_pose_as</span><span class="p">(</span><span class="n">instance2</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><a href="#__codelineno-0-185"><span class="linenos" data-linenos="185 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><a href="#__codelineno-0-186"><span class="linenos" data-linenos="186 "></span></a>        <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">same_identity_as</span><span class="p">(</span><span class="n">instance2</span><span class="p">)</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><a href="#__codelineno-0-187"><span class="linenos" data-linenos="187 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">:</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><a href="#__codelineno-0-188"><span class="linenos" data-linenos="188 "></span></a>        <span class="k">return</span> <span class="n">instance1</span><span class="o">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">instance2</span><span class="p">,</span> <span class="n">iou_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><a href="#__codelineno-0-189"><span class="linenos" data-linenos="189 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><a href="#__codelineno-0-190"><span class="linenos" data-linenos="190 "></span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown instance match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.TrackMatcher" class="doc doc-heading">
            <code>sleap_io.model.matching.TrackMatcher</code>


<a href="#sleap_io.model.matching.TrackMatcher" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Matcher for comparing and matching tracks.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.TrackMatcher.method">method</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.model.matching.TrackMatchMethod&lt;/code&gt;" href="#sleap_io.model.matching.TrackMatchMethod">TrackMatchMethod</a>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be a TrackMatchMethod enum value
or a string that will be converted to the enum. Default is NAME.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;track1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;track2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.TrackMatcher.match&lt;/code&gt;)" href="#sleap_io.model.matching.TrackMatcher.match">match</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if two tracks match according to the configured method.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-250" name="__codelineno-0-250"></a><a href="#__codelineno-0-250"><span class="linenos" data-linenos="250 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><a href="#__codelineno-0-251"><span class="linenos" data-linenos="251 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">TrackMatcher</span><span class="p">:</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><a href="#__codelineno-0-252"><span class="linenos" data-linenos="252 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Matcher for comparing and matching tracks.</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><a href="#__codelineno-0-253"><span class="linenos" data-linenos="253 "></span></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><a href="#__codelineno-0-254"><span class="linenos" data-linenos="254 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><a href="#__codelineno-0-255"><span class="linenos" data-linenos="255 "></span></a><span class="sd">        method: The matching method to use. Can be a TrackMatchMethod enum value</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><a href="#__codelineno-0-256"><span class="linenos" data-linenos="256 "></span></a><span class="sd">            or a string that will be converted to the enum. Default is NAME.</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><a href="#__codelineno-0-257"><span class="linenos" data-linenos="257 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><a href="#__codelineno-0-258"><span class="linenos" data-linenos="258 "></span></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><a href="#__codelineno-0-259"><span class="linenos" data-linenos="259 "></span></a>    <span class="n">method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">TrackMatchMethod</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><a href="#__codelineno-0-260"><span class="linenos" data-linenos="260 "></span></a>        <span class="n">default</span><span class="o">=</span><span class="n">TrackMatchMethod</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><a href="#__codelineno-0-261"><span class="linenos" data-linenos="261 "></span></a>        <span class="n">converter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">TrackMatchMethod</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><a href="#__codelineno-0-262"><span class="linenos" data-linenos="262 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a><a href="#__codelineno-0-263"><span class="linenos" data-linenos="263 "></span></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><a href="#__codelineno-0-264"><span class="linenos" data-linenos="264 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">track1</span><span class="p">:</span> <span class="n">Track</span><span class="p">,</span> <span class="n">track2</span><span class="p">:</span> <span class="n">Track</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><a href="#__codelineno-0-265"><span class="linenos" data-linenos="265 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two tracks match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><a href="#__codelineno-0-266"><span class="linenos" data-linenos="266 "></span></a>        <span class="k">return</span> <span class="n">track1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">track2</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.TrackMatcher.match" class="doc doc-heading">
            <code class="highlight language-python"><span class="k">match</span><span class="p">(</span><span class="n">track1</span><span class="p">,</span> <span class="n">track2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.TrackMatcher.match" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if two tracks match according to the configured method.</p>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-264" name="__codelineno-0-264"></a><a href="#__codelineno-0-264"><span class="linenos" data-linenos="264 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">track1</span><span class="p">:</span> <span class="n">Track</span><span class="p">,</span> <span class="n">track2</span><span class="p">:</span> <span class="n">Track</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><a href="#__codelineno-0-265"><span class="linenos" data-linenos="265 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two tracks match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><a href="#__codelineno-0-266"><span class="linenos" data-linenos="266 "></span></a>    <span class="k">return</span> <span class="n">track1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">track2</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.VideoMatcher" class="doc doc-heading">
            <code>sleap_io.model.matching.VideoMatcher</code>


<a href="#sleap_io.model.matching.VideoMatcher" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Matcher for comparing and matching videos.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.method">method</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.model.matching.VideoMatchMethod&lt;/code&gt;" href="#sleap_io.model.matching.VideoMatchMethod">VideoMatchMethod</a>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching method to use. Can be a VideoMatchMethod enum value
or a string that will be converted to the enum. Default is AUTO.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.VideoMatcher.strict">strict</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use strict path matching for the PATH method.
When True, paths must be exactly identical. When False, paths
are normalized before comparison. Only used when method is PATH.
Default is False.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;video1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;video2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.VideoMatcher.match&lt;/code&gt;)" href="#sleap_io.model.matching.VideoMatcher.match">match</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if two videos match according to the configured method.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-269" name="__codelineno-0-269"></a><a href="#__codelineno-0-269"><span class="linenos" data-linenos="269 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><a href="#__codelineno-0-270"><span class="linenos" data-linenos="270 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">VideoMatcher</span><span class="p">:</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><a href="#__codelineno-0-271"><span class="linenos" data-linenos="271 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Matcher for comparing and matching videos.</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><a href="#__codelineno-0-272"><span class="linenos" data-linenos="272 "></span></a>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><a href="#__codelineno-0-273"><span class="linenos" data-linenos="273 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a><a href="#__codelineno-0-274"><span class="linenos" data-linenos="274 "></span></a><span class="sd">        method: The matching method to use. Can be a VideoMatchMethod enum value</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><a href="#__codelineno-0-275"><span class="linenos" data-linenos="275 "></span></a><span class="sd">            or a string that will be converted to the enum. Default is AUTO.</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><a href="#__codelineno-0-276"><span class="linenos" data-linenos="276 "></span></a><span class="sd">        strict: Whether to use strict path matching for the PATH method.</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a><a href="#__codelineno-0-277"><span class="linenos" data-linenos="277 "></span></a><span class="sd">            When True, paths must be exactly identical. When False, paths</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><a href="#__codelineno-0-278"><span class="linenos" data-linenos="278 "></span></a><span class="sd">            are normalized before comparison. Only used when method is PATH.</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><a href="#__codelineno-0-279"><span class="linenos" data-linenos="279 "></span></a><span class="sd">            Default is False.</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><a href="#__codelineno-0-280"><span class="linenos" data-linenos="280 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><a href="#__codelineno-0-281"><span class="linenos" data-linenos="281 "></span></a>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><a href="#__codelineno-0-282"><span class="linenos" data-linenos="282 "></span></a>    <span class="n">method</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">VideoMatchMethod</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><a href="#__codelineno-0-283"><span class="linenos" data-linenos="283 "></span></a>        <span class="n">default</span><span class="o">=</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">,</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><a href="#__codelineno-0-284"><span class="linenos" data-linenos="284 "></span></a>        <span class="n">converter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">VideoMatchMethod</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><a href="#__codelineno-0-285"><span class="linenos" data-linenos="285 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><a href="#__codelineno-0-286"><span class="linenos" data-linenos="286 "></span></a>    <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><a href="#__codelineno-0-287"><span class="linenos" data-linenos="287 "></span></a>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><a href="#__codelineno-0-288"><span class="linenos" data-linenos="288 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video1</span><span class="p">:</span> <span class="n">Video</span><span class="p">,</span> <span class="n">video2</span><span class="p">:</span> <span class="n">Video</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><a href="#__codelineno-0-289"><span class="linenos" data-linenos="289 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two videos match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><a href="#__codelineno-0-290"><span class="linenos" data-linenos="290 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">:</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><a href="#__codelineno-0-291"><span class="linenos" data-linenos="291 "></span></a>            <span class="c1"># Try different methods in order (identity check is redundant)</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><a href="#__codelineno-0-292"><span class="linenos" data-linenos="292 "></span></a>            <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><a href="#__codelineno-0-293"><span class="linenos" data-linenos="293 "></span></a>                <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><a href="#__codelineno-0-294"><span class="linenos" data-linenos="294 "></span></a>            <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">video2</span><span class="p">):</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><a href="#__codelineno-0-295"><span class="linenos" data-linenos="295 "></span></a>                <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><a href="#__codelineno-0-296"><span class="linenos" data-linenos="296 "></span></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><a href="#__codelineno-0-297"><span class="linenos" data-linenos="297 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">PATH</span><span class="p">:</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><a href="#__codelineno-0-298"><span class="linenos" data-linenos="298 "></span></a>            <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">)</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><a href="#__codelineno-0-299"><span class="linenos" data-linenos="299 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">:</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><a href="#__codelineno-0-300"><span class="linenos" data-linenos="300 "></span></a>            <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><a href="#__codelineno-0-301"><span class="linenos" data-linenos="301 "></span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><a href="#__codelineno-0-302"><span class="linenos" data-linenos="302 "></span></a>            <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">video2</span><span class="p">)</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><a href="#__codelineno-0-303"><span class="linenos" data-linenos="303 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><a href="#__codelineno-0-304"><span class="linenos" data-linenos="304 "></span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown video match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.VideoMatcher.match" class="doc doc-heading">
            <code class="highlight language-python"><span class="k">match</span><span class="p">(</span><span class="n">video1</span><span class="p">,</span> <span class="n">video2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.VideoMatcher.match" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if two videos match according to the configured method.</p>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-288" name="__codelineno-0-288"></a><a href="#__codelineno-0-288"><span class="linenos" data-linenos="288 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video1</span><span class="p">:</span> <span class="n">Video</span><span class="p">,</span> <span class="n">video2</span><span class="p">:</span> <span class="n">Video</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><a href="#__codelineno-0-289"><span class="linenos" data-linenos="289 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two videos match according to the configured method.&quot;&quot;&quot;</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><a href="#__codelineno-0-290"><span class="linenos" data-linenos="290 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">:</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><a href="#__codelineno-0-291"><span class="linenos" data-linenos="291 "></span></a>        <span class="c1"># Try different methods in order (identity check is redundant)</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><a href="#__codelineno-0-292"><span class="linenos" data-linenos="292 "></span></a>        <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><a href="#__codelineno-0-293"><span class="linenos" data-linenos="293 "></span></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><a href="#__codelineno-0-294"><span class="linenos" data-linenos="294 "></span></a>        <span class="k">if</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">video2</span><span class="p">):</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><a href="#__codelineno-0-295"><span class="linenos" data-linenos="295 "></span></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><a href="#__codelineno-0-296"><span class="linenos" data-linenos="296 "></span></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><a href="#__codelineno-0-297"><span class="linenos" data-linenos="297 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">PATH</span><span class="p">:</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><a href="#__codelineno-0-298"><span class="linenos" data-linenos="298 "></span></a>        <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">)</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><a href="#__codelineno-0-299"><span class="linenos" data-linenos="299 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">:</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><a href="#__codelineno-0-300"><span class="linenos" data-linenos="300 "></span></a>        <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_path</span><span class="p">(</span><span class="n">video2</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><a href="#__codelineno-0-301"><span class="linenos" data-linenos="301 "></span></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">CONTENT</span><span class="p">:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><a href="#__codelineno-0-302"><span class="linenos" data-linenos="302 "></span></a>        <span class="k">return</span> <span class="n">video1</span><span class="o">.</span><span class="n">matches_content</span><span class="p">(</span><span class="n">video2</span><span class="p">)</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><a href="#__codelineno-0-303"><span class="linenos" data-linenos="303 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><a href="#__codelineno-0-304"><span class="linenos" data-linenos="304 "></span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown video match method: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.FrameMatcher" class="doc doc-heading">
            <code>sleap_io.model.matching.FrameMatcher</code>


<a href="#sleap_io.model.matching.FrameMatcher" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Matcher for comparing and matching labeled frames.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.FrameMatcher.video_must_match">video_must_match</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether frames must belong to the same video to be
considered a match. Default is True.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frame1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frame2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.FrameMatcher.match&lt;/code&gt;)" href="#sleap_io.model.matching.FrameMatcher.match">match</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if two frames match.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-307" name="__codelineno-0-307"></a><a href="#__codelineno-0-307"><span class="linenos" data-linenos="307 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><a href="#__codelineno-0-308"><span class="linenos" data-linenos="308 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">FrameMatcher</span><span class="p">:</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><a href="#__codelineno-0-309"><span class="linenos" data-linenos="309 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Matcher for comparing and matching labeled frames.</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><a href="#__codelineno-0-310"><span class="linenos" data-linenos="310 "></span></a>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><a href="#__codelineno-0-311"><span class="linenos" data-linenos="311 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><a href="#__codelineno-0-312"><span class="linenos" data-linenos="312 "></span></a><span class="sd">        video_must_match: Whether frames must belong to the same video to be</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><a href="#__codelineno-0-313"><span class="linenos" data-linenos="313 "></span></a><span class="sd">            considered a match. Default is True.</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><a href="#__codelineno-0-314"><span class="linenos" data-linenos="314 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><a href="#__codelineno-0-315"><span class="linenos" data-linenos="315 "></span></a>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><a href="#__codelineno-0-316"><span class="linenos" data-linenos="316 "></span></a>    <span class="n">video_must_match</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><a href="#__codelineno-0-317"><span class="linenos" data-linenos="317 "></span></a>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><a href="#__codelineno-0-318"><span class="linenos" data-linenos="318 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame1</span><span class="p">:</span> <span class="n">LabeledFrame</span><span class="p">,</span> <span class="n">frame2</span><span class="p">:</span> <span class="n">LabeledFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><a href="#__codelineno-0-319"><span class="linenos" data-linenos="319 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two frames match.&quot;&quot;&quot;</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><a href="#__codelineno-0-320"><span class="linenos" data-linenos="320 "></span></a>        <span class="k">return</span> <span class="n">frame1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">frame2</span><span class="p">,</span> <span class="n">video_must_match</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_must_match</span><span class="p">)</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.FrameMatcher.match" class="doc doc-heading">
            <code class="highlight language-python"><span class="k">match</span><span class="p">(</span><span class="n">frame1</span><span class="p">,</span> <span class="n">frame2</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.FrameMatcher.match" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if two frames match.</p>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-318" name="__codelineno-0-318"></a><a href="#__codelineno-0-318"><span class="linenos" data-linenos="318 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame1</span><span class="p">:</span> <span class="n">LabeledFrame</span><span class="p">,</span> <span class="n">frame2</span><span class="p">:</span> <span class="n">LabeledFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><a href="#__codelineno-0-319"><span class="linenos" data-linenos="319 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two frames match.&quot;&quot;&quot;</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><a href="#__codelineno-0-320"><span class="linenos" data-linenos="320 "></span></a>    <span class="k">return</span> <span class="n">frame1</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">frame2</span><span class="p">,</span> <span class="n">video_must_match</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">video_must_match</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="pre-configured-matchers">Pre-configured Matchers<a class="headerlink" href="#pre-configured-matchers" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.STRUCTURE_SKELETON_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">STRUCTURE_SKELETON_MATCHER</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.STRUCTURE_SKELETON_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.SUBSET_SKELETON_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">SUBSET_SKELETON_MATCHER</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">SUBSET</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SUBSET_SKELETON_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.OVERLAP_SKELETON_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">OVERLAP_SKELETON_MATCHER</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">OVERLAP</span><span class="p">),</span> <span class="n">min_overlap</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.OVERLAP_SKELETON_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.DUPLICATE_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">DUPLICATE_MATCHER</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">SPATIAL</span><span class="p">),</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.DUPLICATE_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.IOU_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">IOU_MATCHER</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IOU</span><span class="p">),</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.IOU_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.IDENTITY_INSTANCE_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">IDENTITY_INSTANCE_MATCHER</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">InstanceMatchMethod</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.IDENTITY_INSTANCE_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.NAME_TRACK_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">NAME_TRACK_MATCHER</span> <span class="o">=</span> <span class="n">TrackMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">TrackMatchMethod</span><span class="o">.</span><span class="n">NAME</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.NAME_TRACK_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.IDENTITY_TRACK_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">IDENTITY_TRACK_MATCHER</span> <span class="o">=</span> <span class="n">TrackMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">TrackMatchMethod</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.IDENTITY_TRACK_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.AUTO_VIDEO_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">AUTO_VIDEO_MATCHER</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">AUTO</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.AUTO_VIDEO_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.SOURCE_VIDEO_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">SOURCE_VIDEO_MATCHER</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.SOURCE_VIDEO_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.PATH_VIDEO_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">PATH_VIDEO_MATCHER</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">PATH</span><span class="p">),</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.PATH_VIDEO_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="sleap_io.model.matching.BASENAME_VIDEO_MATCHER" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">matching</span><span class="o">.</span><span class="n">BASENAME_VIDEO_MATCHER</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">(</span><span class="n">VideoMatchMethod</span><span class="o">.</span><span class="n">BASENAME</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#sleap_io.model.matching.BASENAME_VIDEO_MATCHER" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

    </div>

</div><h3 id="result-classes">Result Classes<a class="headerlink" href="#result-classes" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.MergeResult" class="doc doc-heading">
            <code>sleap_io.model.matching.MergeResult</code>


<a href="#sleap_io.model.matching.MergeResult" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Result of a merge operation.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.successful">successful</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the merge completed successfully.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.frames_merged">frames_merged</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of frames that were merged.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.instances_added">instances_added</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of new instances added.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.instances_updated">instances_updated</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of existing instances that were updated.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.instances_skipped">instances_skipped</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of instances that were skipped.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.conflicts">conflicts</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.model.matching.ConflictResolution&lt;/code&gt;" href="#sleap_io.model.matching.ConflictResolution">ConflictResolution</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of conflicts that were resolved during merging.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeResult.errors">errors</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.model.matching.MergeError&lt;/code&gt;" href="#sleap_io.model.matching.MergeError">MergeError</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of errors encountered during merging.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>










<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeResult.summary&lt;/code&gt;)" href="#sleap_io.model.matching.MergeResult.summary">summary</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Generate a human-readable summary of the merge result.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-388" name="__codelineno-0-388"></a><a href="#__codelineno-0-388"><span class="linenos" data-linenos="388 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><a href="#__codelineno-0-389"><span class="linenos" data-linenos="389 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">MergeResult</span><span class="p">:</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><a href="#__codelineno-0-390"><span class="linenos" data-linenos="390 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Result of a merge operation.</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><a href="#__codelineno-0-391"><span class="linenos" data-linenos="391 "></span></a>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><a href="#__codelineno-0-392"><span class="linenos" data-linenos="392 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><a href="#__codelineno-0-393"><span class="linenos" data-linenos="393 "></span></a><span class="sd">        successful: Whether the merge completed successfully.</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><a href="#__codelineno-0-394"><span class="linenos" data-linenos="394 "></span></a><span class="sd">        frames_merged: Number of frames that were merged.</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a><a href="#__codelineno-0-395"><span class="linenos" data-linenos="395 "></span></a><span class="sd">        instances_added: Number of new instances added.</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><a href="#__codelineno-0-396"><span class="linenos" data-linenos="396 "></span></a><span class="sd">        instances_updated: Number of existing instances that were updated.</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><a href="#__codelineno-0-397"><span class="linenos" data-linenos="397 "></span></a><span class="sd">        instances_skipped: Number of instances that were skipped.</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><a href="#__codelineno-0-398"><span class="linenos" data-linenos="398 "></span></a><span class="sd">        conflicts: List of conflicts that were resolved during merging.</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><a href="#__codelineno-0-399"><span class="linenos" data-linenos="399 "></span></a><span class="sd">        errors: List of errors encountered during merging.</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><a href="#__codelineno-0-400"><span class="linenos" data-linenos="400 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><a href="#__codelineno-0-401"><span class="linenos" data-linenos="401 "></span></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><a href="#__codelineno-0-402"><span class="linenos" data-linenos="402 "></span></a>    <span class="n">successful</span><span class="p">:</span> <span class="nb">bool</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><a href="#__codelineno-0-403"><span class="linenos" data-linenos="403 "></span></a>    <span class="n">frames_merged</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><a href="#__codelineno-0-404"><span class="linenos" data-linenos="404 "></span></a>    <span class="n">instances_added</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><a href="#__codelineno-0-405"><span class="linenos" data-linenos="405 "></span></a>    <span class="n">instances_updated</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><a href="#__codelineno-0-406"><span class="linenos" data-linenos="406 "></span></a>    <span class="n">instances_skipped</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><a href="#__codelineno-0-407"><span class="linenos" data-linenos="407 "></span></a>    <span class="n">conflicts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ConflictResolution</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><a href="#__codelineno-0-408"><span class="linenos" data-linenos="408 "></span></a>    <span class="n">errors</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MergeError</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><a href="#__codelineno-0-409"><span class="linenos" data-linenos="409 "></span></a>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><a href="#__codelineno-0-410"><span class="linenos" data-linenos="410 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><a href="#__codelineno-0-411"><span class="linenos" data-linenos="411 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a human-readable summary of the merge result.&quot;&quot;&quot;</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><a href="#__codelineno-0-412"><span class="linenos" data-linenos="412 "></span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><a href="#__codelineno-0-413"><span class="linenos" data-linenos="413 "></span></a>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><a href="#__codelineno-0-414"><span class="linenos" data-linenos="414 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">successful</span><span class="p">:</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><a href="#__codelineno-0-415"><span class="linenos" data-linenos="415 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;✓ Merge completed successfully&quot;</span><span class="p">)</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><a href="#__codelineno-0-416"><span class="linenos" data-linenos="416 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><a href="#__codelineno-0-417"><span class="linenos" data-linenos="417 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;✗ Merge completed with errors&quot;</span><span class="p">)</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><a href="#__codelineno-0-418"><span class="linenos" data-linenos="418 "></span></a>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><a href="#__codelineno-0-419"><span class="linenos" data-linenos="419 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Frames merged: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frames_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><a href="#__codelineno-0-420"><span class="linenos" data-linenos="420 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances added: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_added</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><a href="#__codelineno-0-421"><span class="linenos" data-linenos="421 "></span></a>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><a href="#__codelineno-0-422"><span class="linenos" data-linenos="422 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances_updated</span><span class="p">:</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><a href="#__codelineno-0-423"><span class="linenos" data-linenos="423 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances updated: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_updated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><a href="#__codelineno-0-424"><span class="linenos" data-linenos="424 "></span></a>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><a href="#__codelineno-0-425"><span class="linenos" data-linenos="425 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances_skipped</span><span class="p">:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><a href="#__codelineno-0-426"><span class="linenos" data-linenos="426 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances skipped: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_skipped</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><a href="#__codelineno-0-427"><span class="linenos" data-linenos="427 "></span></a>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><a href="#__codelineno-0-428"><span class="linenos" data-linenos="428 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><a href="#__codelineno-0-429"><span class="linenos" data-linenos="429 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Conflicts resolved: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conflicts</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><a href="#__codelineno-0-430"><span class="linenos" data-linenos="430 "></span></a>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><a href="#__codelineno-0-431"><span class="linenos" data-linenos="431 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><a href="#__codelineno-0-432"><span class="linenos" data-linenos="432 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Errors encountered: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><a href="#__codelineno-0-433"><span class="linenos" data-linenos="433 "></span></a>            <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>  <span class="c1"># Show first 5 errors</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><a href="#__codelineno-0-434"><span class="linenos" data-linenos="434 "></span></a>                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    - </span><span class="si">{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><a href="#__codelineno-0-435"><span class="linenos" data-linenos="435 "></span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><a href="#__codelineno-0-436"><span class="linenos" data-linenos="436 "></span></a>                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    ... and </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="si">}</span><span class="s2"> more&quot;</span><span class="p">)</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><a href="#__codelineno-0-437"><span class="linenos" data-linenos="437 "></span></a>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><a href="#__codelineno-0-438"><span class="linenos" data-linenos="438 "></span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.MergeResult.summary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">summary</span><span class="p">()</span></code>

<a href="#sleap_io.model.matching.MergeResult.summary" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate a human-readable summary of the merge result.</p>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-410" name="__codelineno-0-410"></a><a href="#__codelineno-0-410"><span class="linenos" data-linenos="410 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><a href="#__codelineno-0-411"><span class="linenos" data-linenos="411 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a human-readable summary of the merge result.&quot;&quot;&quot;</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><a href="#__codelineno-0-412"><span class="linenos" data-linenos="412 "></span></a>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><a href="#__codelineno-0-413"><span class="linenos" data-linenos="413 "></span></a>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><a href="#__codelineno-0-414"><span class="linenos" data-linenos="414 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">successful</span><span class="p">:</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><a href="#__codelineno-0-415"><span class="linenos" data-linenos="415 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;✓ Merge completed successfully&quot;</span><span class="p">)</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><a href="#__codelineno-0-416"><span class="linenos" data-linenos="416 "></span></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><a href="#__codelineno-0-417"><span class="linenos" data-linenos="417 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;✗ Merge completed with errors&quot;</span><span class="p">)</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><a href="#__codelineno-0-418"><span class="linenos" data-linenos="418 "></span></a>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><a href="#__codelineno-0-419"><span class="linenos" data-linenos="419 "></span></a>    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Frames merged: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frames_merged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><a href="#__codelineno-0-420"><span class="linenos" data-linenos="420 "></span></a>    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances added: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_added</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><a href="#__codelineno-0-421"><span class="linenos" data-linenos="421 "></span></a>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><a href="#__codelineno-0-422"><span class="linenos" data-linenos="422 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances_updated</span><span class="p">:</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><a href="#__codelineno-0-423"><span class="linenos" data-linenos="423 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances updated: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_updated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><a href="#__codelineno-0-424"><span class="linenos" data-linenos="424 "></span></a>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><a href="#__codelineno-0-425"><span class="linenos" data-linenos="425 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances_skipped</span><span class="p">:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><a href="#__codelineno-0-426"><span class="linenos" data-linenos="426 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instances skipped: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instances_skipped</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><a href="#__codelineno-0-427"><span class="linenos" data-linenos="427 "></span></a>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><a href="#__codelineno-0-428"><span class="linenos" data-linenos="428 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><a href="#__codelineno-0-429"><span class="linenos" data-linenos="429 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Conflicts resolved: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conflicts</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><a href="#__codelineno-0-430"><span class="linenos" data-linenos="430 "></span></a>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><a href="#__codelineno-0-431"><span class="linenos" data-linenos="431 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><a href="#__codelineno-0-432"><span class="linenos" data-linenos="432 "></span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Errors encountered: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><a href="#__codelineno-0-433"><span class="linenos" data-linenos="433 "></span></a>        <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>  <span class="c1"># Show first 5 errors</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><a href="#__codelineno-0-434"><span class="linenos" data-linenos="434 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    - </span><span class="si">{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><a href="#__codelineno-0-435"><span class="linenos" data-linenos="435 "></span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><a href="#__codelineno-0-436"><span class="linenos" data-linenos="436 "></span></a>            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    ... and </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="si">}</span><span class="s2"> more&quot;</span><span class="p">)</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><a href="#__codelineno-0-437"><span class="linenos" data-linenos="437 "></span></a>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><a href="#__codelineno-0-438"><span class="linenos" data-linenos="438 "></span></a>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.ConflictResolution" class="doc doc-heading">
            <code>sleap_io.model.matching.ConflictResolution</code>


<a href="#sleap_io.model.matching.ConflictResolution" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Information about a conflict that was resolved during merging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.ConflictResolution.frame">frame</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;LabeledFrame&lt;/code&gt; (&lt;code&gt;sleap_io.model.labeled_frame.LabeledFrame&lt;/code&gt;)" href="../reference/sleap_io/model/labeled_frame/#sleap_io.model.labeled_frame.LabeledFrame">LabeledFrame</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The labeled frame where the conflict occurred.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.ConflictResolution.conflict_type">conflict_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of conflict (e.g., "duplicate_instance",
"skeleton_mismatch").</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.ConflictResolution.original_data">original_data</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original data before resolution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.ConflictResolution.new_data">new_data</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new/incoming data that caused the conflict.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.ConflictResolution.resolution">resolution</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of how the conflict was resolved.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-343" name="__codelineno-0-343"></a><a href="#__codelineno-0-343"><span class="linenos" data-linenos="343 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><a href="#__codelineno-0-344"><span class="linenos" data-linenos="344 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">ConflictResolution</span><span class="p">:</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><a href="#__codelineno-0-345"><span class="linenos" data-linenos="345 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Information about a conflict that was resolved during merging.</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><a href="#__codelineno-0-346"><span class="linenos" data-linenos="346 "></span></a>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><a href="#__codelineno-0-347"><span class="linenos" data-linenos="347 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><a href="#__codelineno-0-348"><span class="linenos" data-linenos="348 "></span></a><span class="sd">        frame: The labeled frame where the conflict occurred.</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><a href="#__codelineno-0-349"><span class="linenos" data-linenos="349 "></span></a><span class="sd">        conflict_type: Type of conflict (e.g., &quot;duplicate_instance&quot;,</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><a href="#__codelineno-0-350"><span class="linenos" data-linenos="350 "></span></a><span class="sd">            &quot;skeleton_mismatch&quot;).</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a><a href="#__codelineno-0-351"><span class="linenos" data-linenos="351 "></span></a><span class="sd">        original_data: The original data before resolution.</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><a href="#__codelineno-0-352"><span class="linenos" data-linenos="352 "></span></a><span class="sd">        new_data: The new/incoming data that caused the conflict.</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><a href="#__codelineno-0-353"><span class="linenos" data-linenos="353 "></span></a><span class="sd">        resolution: Description of how the conflict was resolved.</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><a href="#__codelineno-0-354"><span class="linenos" data-linenos="354 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a><a href="#__codelineno-0-355"><span class="linenos" data-linenos="355 "></span></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><a href="#__codelineno-0-356"><span class="linenos" data-linenos="356 "></span></a>    <span class="n">frame</span><span class="p">:</span> <span class="n">LabeledFrame</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><a href="#__codelineno-0-357"><span class="linenos" data-linenos="357 "></span></a>    <span class="n">conflict_type</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><a href="#__codelineno-0-358"><span class="linenos" data-linenos="358 "></span></a>    <span class="n">original_data</span><span class="p">:</span> <span class="n">Any</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><a href="#__codelineno-0-359"><span class="linenos" data-linenos="359 "></span></a>    <span class="n">new_data</span><span class="p">:</span> <span class="n">Any</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><a href="#__codelineno-0-360"><span class="linenos" data-linenos="360 "></span></a>    <span class="n">resolution</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.MergeError" class="doc doc-heading">
            <code>sleap_io.model.matching.MergeError</code>


<a href="#sleap_io.model.matching.MergeError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Base exception for merge errors.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeError.message">message</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Human-readable error message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="sleap_io.model.matching.MergeError.details">details</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing additional error details and context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-363" name="__codelineno-0-363"></a><a href="#__codelineno-0-363"><span class="linenos" data-linenos="363 "></span></a><span class="nd">@attrs</span><span class="o">.</span><span class="n">define</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><a href="#__codelineno-0-364"><span class="linenos" data-linenos="364 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">MergeError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><a href="#__codelineno-0-365"><span class="linenos" data-linenos="365 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base exception for merge errors.</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><a href="#__codelineno-0-366"><span class="linenos" data-linenos="366 "></span></a>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><a href="#__codelineno-0-367"><span class="linenos" data-linenos="367 "></span></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><a href="#__codelineno-0-368"><span class="linenos" data-linenos="368 "></span></a><span class="sd">        message: Human-readable error message.</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a><a href="#__codelineno-0-369"><span class="linenos" data-linenos="369 "></span></a><span class="sd">        details: Dictionary containing additional error details and context.</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a><a href="#__codelineno-0-370"><span class="linenos" data-linenos="370 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><a href="#__codelineno-0-371"><span class="linenos" data-linenos="371 "></span></a>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a><a href="#__codelineno-0-372"><span class="linenos" data-linenos="372 "></span></a>    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a><a href="#__codelineno-0-373"><span class="linenos" data-linenos="373 "></span></a>    <span class="n">details</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.SkeletonMismatchError" class="doc doc-heading">
            <code>sleap_io.model.matching.SkeletonMismatchError</code>


<a href="#sleap_io.model.matching.SkeletonMismatchError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.model.matching.MergeError&lt;/code&gt;" href="#sleap_io.model.matching.MergeError">MergeError</a></code></p>


        <p>Raised when skeletons don't match during merge.</p>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-376" name="__codelineno-0-376"></a><a href="#__codelineno-0-376"><span class="linenos" data-linenos="376 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">SkeletonMismatchError</span><span class="p">(</span><span class="n">MergeError</span><span class="p">):</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><a href="#__codelineno-0-377"><span class="linenos" data-linenos="377 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when skeletons don&#39;t match during merge.&quot;&quot;&quot;</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><a href="#__codelineno-0-378"><span class="linenos" data-linenos="378 "></span></a>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><a href="#__codelineno-0-379"><span class="linenos" data-linenos="379 "></span></a>    <span class="k">pass</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.VideoNotFoundError" class="doc doc-heading">
            <code>sleap_io.model.matching.VideoNotFoundError</code>


<a href="#sleap_io.model.matching.VideoNotFoundError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;code&gt;sleap_io.model.matching.MergeError&lt;/code&gt;" href="#sleap_io.model.matching.MergeError">MergeError</a></code></p>


        <p>Raised when a video file cannot be found during merge.</p>











              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-382" name="__codelineno-0-382"></a><a href="#__codelineno-0-382"><span class="linenos" data-linenos="382 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">VideoNotFoundError</span><span class="p">(</span><span class="n">MergeError</span><span class="p">):</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><a href="#__codelineno-0-383"><span class="linenos" data-linenos="383 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when a video file cannot be found during merge.&quot;&quot;&quot;</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><a href="#__codelineno-0-384"><span class="linenos" data-linenos="384 "></span></a>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><a href="#__codelineno-0-385"><span class="linenos" data-linenos="385 "></span></a>    <span class="k">pass</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="progress-tracking">Progress Tracking<a class="headerlink" href="#progress-tracking" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-class">



<h2 id="sleap_io.model.matching.MergeProgressBar" class="doc doc-heading">
            <code>sleap_io.model.matching.MergeProgressBar</code>


<a href="#sleap_io.model.matching.MergeProgressBar" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">


        <p>Context manager for merge progress tracking using tqdm.</p>
<p>This provides a clean interface for tracking merge progress with visual feedback.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>with MergeProgressBar("Merging predictions") as progress:
    result = labels.merge(predictions, progress_callback=progress.callback)</p>
</details>









<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__enter__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeProgressBar.__enter__&lt;/code&gt;)" href="#sleap_io.model.matching.MergeProgressBar.__enter__">__enter__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Enter the context manager.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__exit__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exc_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exc_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exc_tb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeProgressBar.__exit__&lt;/code&gt;)" href="#sleap_io.model.matching.MergeProgressBar.__exit__">__exit__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Exit the context manager and close the progress bar.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;fm&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Merging&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;leave&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeProgressBar.__init__&lt;/code&gt;)" href="#sleap_io.model.matching.MergeProgressBar.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Initialize the progress bar.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;sleap_io.model.matching.MergeProgressBar.callback&lt;/code&gt;)" href="#sleap_io.model.matching.MergeProgressBar.callback">callback</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Progress callback for merge operations.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="quote">
                <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
                <div class="highlight"><pre><span></span><code><a id="__codelineno-0-441" name="__codelineno-0-441"></a><a href="#__codelineno-0-441"><span class="linenos" data-linenos="441 "></span></a><span class="k">class</span><span class="w"> </span><span class="nc">MergeProgressBar</span><span class="p">:</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a><a href="#__codelineno-0-442"><span class="linenos" data-linenos="442 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Context manager for merge progress tracking using tqdm.</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a><a href="#__codelineno-0-443"><span class="linenos" data-linenos="443 "></span></a>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a><a href="#__codelineno-0-444"><span class="linenos" data-linenos="444 "></span></a><span class="sd">    This provides a clean interface for tracking merge progress with visual feedback.</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a><a href="#__codelineno-0-445"><span class="linenos" data-linenos="445 "></span></a>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a><a href="#__codelineno-0-446"><span class="linenos" data-linenos="446 "></span></a><span class="sd">    Example:</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><a href="#__codelineno-0-447"><span class="linenos" data-linenos="447 "></span></a><span class="sd">        with MergeProgressBar(&quot;Merging predictions&quot;) as progress:</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><a href="#__codelineno-0-448"><span class="linenos" data-linenos="448 "></span></a><span class="sd">            result = labels.merge(predictions, progress_callback=progress.callback)</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a><a href="#__codelineno-0-449"><span class="linenos" data-linenos="449 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><a href="#__codelineno-0-450"><span class="linenos" data-linenos="450 "></span></a>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><a href="#__codelineno-0-451"><span class="linenos" data-linenos="451 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Merging&quot;</span><span class="p">,</span> <span class="n">leave</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><a href="#__codelineno-0-452"><span class="linenos" data-linenos="452 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the progress bar.</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><a href="#__codelineno-0-453"><span class="linenos" data-linenos="453 "></span></a>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><a href="#__codelineno-0-454"><span class="linenos" data-linenos="454 "></span></a><span class="sd">        Args:</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><a href="#__codelineno-0-455"><span class="linenos" data-linenos="455 "></span></a><span class="sd">            desc: Description to show in the progress bar.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><a href="#__codelineno-0-456"><span class="linenos" data-linenos="456 "></span></a><span class="sd">            leave: Whether to leave the progress bar on screen after completion.</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><a href="#__codelineno-0-457"><span class="linenos" data-linenos="457 "></span></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><a href="#__codelineno-0-458"><span class="linenos" data-linenos="458 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><a href="#__codelineno-0-459"><span class="linenos" data-linenos="459 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">leave</span> <span class="o">=</span> <span class="n">leave</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a><a href="#__codelineno-0-460"><span class="linenos" data-linenos="460 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a><a href="#__codelineno-0-461"><span class="linenos" data-linenos="461 "></span></a>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><a href="#__codelineno-0-462"><span class="linenos" data-linenos="462 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a><a href="#__codelineno-0-463"><span class="linenos" data-linenos="463 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enter the context manager.&quot;&quot;&quot;</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a><a href="#__codelineno-0-464"><span class="linenos" data-linenos="464 "></span></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a><a href="#__codelineno-0-465"><span class="linenos" data-linenos="465 "></span></a>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a><a href="#__codelineno-0-466"><span class="linenos" data-linenos="466 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a><a href="#__codelineno-0-467"><span class="linenos" data-linenos="467 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Exit the context manager and close the progress bar.&quot;&quot;&quot;</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><a href="#__codelineno-0-468"><span class="linenos" data-linenos="468 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><a href="#__codelineno-0-469"><span class="linenos" data-linenos="469 "></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><a href="#__codelineno-0-470"><span class="linenos" data-linenos="470 "></span></a>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><a href="#__codelineno-0-471"><span class="linenos" data-linenos="471 "></span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><a href="#__codelineno-0-472"><span class="linenos" data-linenos="472 "></span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Progress callback for merge operations.</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><a href="#__codelineno-0-473"><span class="linenos" data-linenos="473 "></span></a>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><a href="#__codelineno-0-474"><span class="linenos" data-linenos="474 "></span></a><span class="sd">        Args:</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><a href="#__codelineno-0-475"><span class="linenos" data-linenos="475 "></span></a><span class="sd">            current: Current progress value.</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><a href="#__codelineno-0-476"><span class="linenos" data-linenos="476 "></span></a><span class="sd">            total: Total items to process.</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><a href="#__codelineno-0-477"><span class="linenos" data-linenos="477 "></span></a><span class="sd">            message: Optional message to display.</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><a href="#__codelineno-0-478"><span class="linenos" data-linenos="478 "></span></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><a href="#__codelineno-0-479"><span class="linenos" data-linenos="479 "></span></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><a href="#__codelineno-0-480"><span class="linenos" data-linenos="480 "></span></a>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><a href="#__codelineno-0-481"><span class="linenos" data-linenos="481 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">total</span><span class="p">:</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><a href="#__codelineno-0-482"><span class="linenos" data-linenos="482 "></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span> <span class="o">=</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">total</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="p">,</span> <span class="n">leave</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leave</span><span class="p">)</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><a href="#__codelineno-0-483"><span class="linenos" data-linenos="483 "></span></a>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><a href="#__codelineno-0-484"><span class="linenos" data-linenos="484 "></span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="p">:</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><a href="#__codelineno-0-485"><span class="linenos" data-linenos="485 "></span></a>            <span class="k">if</span> <span class="n">message</span><span class="p">:</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><a href="#__codelineno-0-486"><span class="linenos" data-linenos="486 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><a href="#__codelineno-0-487"><span class="linenos" data-linenos="487 "></span></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><a href="#__codelineno-0-488"><span class="linenos" data-linenos="488 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="p">)</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><a href="#__codelineno-0-489"><span class="linenos" data-linenos="489 "></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">current</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><a href="#__codelineno-0-490"><span class="linenos" data-linenos="490 "></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.MergeProgressBar.__enter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__enter__</span><span class="p">()</span></code>

<a href="#sleap_io.model.matching.MergeProgressBar.__enter__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Enter the context manager.</p>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-462" name="__codelineno-0-462"></a><a href="#__codelineno-0-462"><span class="linenos" data-linenos="462 "></span></a><span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a><a href="#__codelineno-0-463"><span class="linenos" data-linenos="463 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Enter the context manager.&quot;&quot;&quot;</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a><a href="#__codelineno-0-464"><span class="linenos" data-linenos="464 "></span></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.MergeProgressBar.__exit__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__exit__</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.MergeProgressBar.__exit__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Exit the context manager and close the progress bar.</p>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-466" name="__codelineno-0-466"></a><a href="#__codelineno-0-466"><span class="linenos" data-linenos="466 "></span></a><span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a><a href="#__codelineno-0-467"><span class="linenos" data-linenos="467 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Exit the context manager and close the progress bar.&quot;&quot;&quot;</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><a href="#__codelineno-0-468"><span class="linenos" data-linenos="468 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><a href="#__codelineno-0-469"><span class="linenos" data-linenos="469 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.MergeProgressBar.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="s1">&#39;Merging&#39;</span><span class="p">,</span> <span class="n">leave</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.MergeProgressBar.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the progress bar.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>desc</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description to show in the progress bar.</p>
              </div>
            </td>
            <td>
                  <code>&#39;Merging&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>leave</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to leave the progress bar on screen after completion.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-451" name="__codelineno-0-451"></a><a href="#__codelineno-0-451"><span class="linenos" data-linenos="451 "></span></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Merging&quot;</span><span class="p">,</span> <span class="n">leave</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><a href="#__codelineno-0-452"><span class="linenos" data-linenos="452 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the progress bar.</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><a href="#__codelineno-0-453"><span class="linenos" data-linenos="453 "></span></a>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><a href="#__codelineno-0-454"><span class="linenos" data-linenos="454 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><a href="#__codelineno-0-455"><span class="linenos" data-linenos="455 "></span></a><span class="sd">        desc: Description to show in the progress bar.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><a href="#__codelineno-0-456"><span class="linenos" data-linenos="456 "></span></a><span class="sd">        leave: Whether to leave the progress bar on screen after completion.</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><a href="#__codelineno-0-457"><span class="linenos" data-linenos="457 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><a href="#__codelineno-0-458"><span class="linenos" data-linenos="458 "></span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><a href="#__codelineno-0-459"><span class="linenos" data-linenos="459 "></span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">leave</span> <span class="o">=</span> <span class="n">leave</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a><a href="#__codelineno-0-460"><span class="linenos" data-linenos="460 "></span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="sleap_io.model.matching.MergeProgressBar.callback" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">callback</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#sleap_io.model.matching.MergeProgressBar.callback" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Progress callback for merge operations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>current</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current progress value.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>total</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total items to process.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional message to display.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>sleap_io/model/matching.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-471" name="__codelineno-0-471"></a><a href="#__codelineno-0-471"><span class="linenos" data-linenos="471 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><a href="#__codelineno-0-472"><span class="linenos" data-linenos="472 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Progress callback for merge operations.</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><a href="#__codelineno-0-473"><span class="linenos" data-linenos="473 "></span></a>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><a href="#__codelineno-0-474"><span class="linenos" data-linenos="474 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><a href="#__codelineno-0-475"><span class="linenos" data-linenos="475 "></span></a><span class="sd">        current: Current progress value.</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><a href="#__codelineno-0-476"><span class="linenos" data-linenos="476 "></span></a><span class="sd">        total: Total items to process.</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><a href="#__codelineno-0-477"><span class="linenos" data-linenos="477 "></span></a><span class="sd">        message: Optional message to display.</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><a href="#__codelineno-0-478"><span class="linenos" data-linenos="478 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><a href="#__codelineno-0-479"><span class="linenos" data-linenos="479 "></span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><a href="#__codelineno-0-480"><span class="linenos" data-linenos="480 "></span></a>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><a href="#__codelineno-0-481"><span class="linenos" data-linenos="481 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">total</span><span class="p">:</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><a href="#__codelineno-0-482"><span class="linenos" data-linenos="482 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span> <span class="o">=</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">total</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="p">,</span> <span class="n">leave</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leave</span><span class="p">)</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><a href="#__codelineno-0-483"><span class="linenos" data-linenos="483 "></span></a>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><a href="#__codelineno-0-484"><span class="linenos" data-linenos="484 "></span></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="p">:</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><a href="#__codelineno-0-485"><span class="linenos" data-linenos="485 "></span></a>        <span class="k">if</span> <span class="n">message</span><span class="p">:</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><a href="#__codelineno-0-486"><span class="linenos" data-linenos="486 "></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><a href="#__codelineno-0-487"><span class="linenos" data-linenos="487 "></span></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><a href="#__codelineno-0-488"><span class="linenos" data-linenos="488 "></span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="p">)</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><a href="#__codelineno-0-489"><span class="linenos" data-linenos="489 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">current</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><a href="#__codelineno-0-490"><span class="linenos" data-linenos="490 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pbar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="labels-merge-method">Labels Merge Method<a class="headerlink" href="#labels-merge-method" title="Permanent link">&para;</a></h3>


<div class="doc doc-object doc-function">


<h2 id="sleap_io.model.labels.Labels.merge" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sleap_io</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">Labels</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">instance_matcher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skeleton_matcher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">video_matcher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">track_matcher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frame_strategy</span><span class="o">=</span><span class="s1">&#39;smart&#39;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">error_mode</span><span class="o">=</span><span class="s1">&#39;continue&#39;</span><span class="p">)</span></code>

<a href="#sleap_io.model.labels.Labels.merge" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">

        <p>Merge another Labels object into this one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>other</code>
            </td>
            <td>
                  <code>&#39;Labels&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Another Labels object to merge into this one.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>instance_matcher</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[&#39;InstanceMatcher&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matcher for comparing instances. If None, uses default
spatial matching with 5px tolerance.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>skeleton_matcher</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[&#39;SkeletonMatcher&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matcher for comparing skeletons. If None, uses structure
matching.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>video_matcher</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[&#39;VideoMatcher&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matcher for comparing videos. If None, uses auto matching.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>track_matcher</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[&#39;TrackMatcher&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matcher for comparing tracks. If None, uses name matching.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>frame_strategy</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Strategy for merging frames:
- "smart": Keep user labels, update predictions
- "keep_original": Keep original frames
- "keep_new": Replace with new frames
- "keep_both": Keep all frames</p>
              </div>
            </td>
            <td>
                  <code>&#39;smart&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>validate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, validate for conflicts before merging.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress_callback</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Callable">Callable</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional callback for progress updates.
Should accept (current, total, message) arguments.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>error_mode</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How to handle errors:
- "continue": Log errors but continue
- "strict": Raise exception on first error
- "warn": Print warnings but continue</p>
              </div>
            </td>
            <td>
                  <code>&#39;continue&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>&#39;MergeResult&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>MergeResult object with statistics and any errors/conflicts.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <p>This method modifies the Labels object in place. The merge is designed to
handle common workflows like merging predictions back into a project.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>sleap_io/model/labels.py</code></summary>
              <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1639" name="__codelineno-0-1639"></a><a href="#__codelineno-0-1639"><span class="linenos" data-linenos="1639 "></span></a><span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span>
<a id="__codelineno-0-1640" name="__codelineno-0-1640"></a><a href="#__codelineno-0-1640"><span class="linenos" data-linenos="1640 "></span></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1641" name="__codelineno-0-1641"></a><a href="#__codelineno-0-1641"><span class="linenos" data-linenos="1641 "></span></a>    <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;Labels&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1642" name="__codelineno-0-1642"></a><a href="#__codelineno-0-1642"><span class="linenos" data-linenos="1642 "></span></a>    <span class="n">instance_matcher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;InstanceMatcher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1643" name="__codelineno-0-1643"></a><a href="#__codelineno-0-1643"><span class="linenos" data-linenos="1643 "></span></a>    <span class="n">skeleton_matcher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;SkeletonMatcher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1644" name="__codelineno-0-1644"></a><a href="#__codelineno-0-1644"><span class="linenos" data-linenos="1644 "></span></a>    <span class="n">video_matcher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;VideoMatcher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1645" name="__codelineno-0-1645"></a><a href="#__codelineno-0-1645"><span class="linenos" data-linenos="1645 "></span></a>    <span class="n">track_matcher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;TrackMatcher&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1646" name="__codelineno-0-1646"></a><a href="#__codelineno-0-1646"><span class="linenos" data-linenos="1646 "></span></a>    <span class="n">frame_strategy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;smart&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1647" name="__codelineno-0-1647"></a><a href="#__codelineno-0-1647"><span class="linenos" data-linenos="1647 "></span></a>    <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-1648" name="__codelineno-0-1648"></a><a href="#__codelineno-0-1648"><span class="linenos" data-linenos="1648 "></span></a>    <span class="n">progress_callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1649" name="__codelineno-0-1649"></a><a href="#__codelineno-0-1649"><span class="linenos" data-linenos="1649 "></span></a>    <span class="n">error_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;continue&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1650" name="__codelineno-0-1650"></a><a href="#__codelineno-0-1650"><span class="linenos" data-linenos="1650 "></span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;MergeResult&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1651" name="__codelineno-0-1651"></a><a href="#__codelineno-0-1651"><span class="linenos" data-linenos="1651 "></span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Merge another Labels object into this one.</span>
<a id="__codelineno-0-1652" name="__codelineno-0-1652"></a><a href="#__codelineno-0-1652"><span class="linenos" data-linenos="1652 "></span></a>
<a id="__codelineno-0-1653" name="__codelineno-0-1653"></a><a href="#__codelineno-0-1653"><span class="linenos" data-linenos="1653 "></span></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1654" name="__codelineno-0-1654"></a><a href="#__codelineno-0-1654"><span class="linenos" data-linenos="1654 "></span></a><span class="sd">        other: Another Labels object to merge into this one.</span>
<a id="__codelineno-0-1655" name="__codelineno-0-1655"></a><a href="#__codelineno-0-1655"><span class="linenos" data-linenos="1655 "></span></a><span class="sd">        instance_matcher: Matcher for comparing instances. If None, uses default</span>
<a id="__codelineno-0-1656" name="__codelineno-0-1656"></a><a href="#__codelineno-0-1656"><span class="linenos" data-linenos="1656 "></span></a><span class="sd">            spatial matching with 5px tolerance.</span>
<a id="__codelineno-0-1657" name="__codelineno-0-1657"></a><a href="#__codelineno-0-1657"><span class="linenos" data-linenos="1657 "></span></a><span class="sd">        skeleton_matcher: Matcher for comparing skeletons. If None, uses structure</span>
<a id="__codelineno-0-1658" name="__codelineno-0-1658"></a><a href="#__codelineno-0-1658"><span class="linenos" data-linenos="1658 "></span></a><span class="sd">            matching.</span>
<a id="__codelineno-0-1659" name="__codelineno-0-1659"></a><a href="#__codelineno-0-1659"><span class="linenos" data-linenos="1659 "></span></a><span class="sd">        video_matcher: Matcher for comparing videos. If None, uses auto matching.</span>
<a id="__codelineno-0-1660" name="__codelineno-0-1660"></a><a href="#__codelineno-0-1660"><span class="linenos" data-linenos="1660 "></span></a><span class="sd">        track_matcher: Matcher for comparing tracks. If None, uses name matching.</span>
<a id="__codelineno-0-1661" name="__codelineno-0-1661"></a><a href="#__codelineno-0-1661"><span class="linenos" data-linenos="1661 "></span></a><span class="sd">        frame_strategy: Strategy for merging frames:</span>
<a id="__codelineno-0-1662" name="__codelineno-0-1662"></a><a href="#__codelineno-0-1662"><span class="linenos" data-linenos="1662 "></span></a><span class="sd">            - &quot;smart&quot;: Keep user labels, update predictions</span>
<a id="__codelineno-0-1663" name="__codelineno-0-1663"></a><a href="#__codelineno-0-1663"><span class="linenos" data-linenos="1663 "></span></a><span class="sd">            - &quot;keep_original&quot;: Keep original frames</span>
<a id="__codelineno-0-1664" name="__codelineno-0-1664"></a><a href="#__codelineno-0-1664"><span class="linenos" data-linenos="1664 "></span></a><span class="sd">            - &quot;keep_new&quot;: Replace with new frames</span>
<a id="__codelineno-0-1665" name="__codelineno-0-1665"></a><a href="#__codelineno-0-1665"><span class="linenos" data-linenos="1665 "></span></a><span class="sd">            - &quot;keep_both&quot;: Keep all frames</span>
<a id="__codelineno-0-1666" name="__codelineno-0-1666"></a><a href="#__codelineno-0-1666"><span class="linenos" data-linenos="1666 "></span></a><span class="sd">        validate: If True, validate for conflicts before merging.</span>
<a id="__codelineno-0-1667" name="__codelineno-0-1667"></a><a href="#__codelineno-0-1667"><span class="linenos" data-linenos="1667 "></span></a><span class="sd">        progress_callback: Optional callback for progress updates.</span>
<a id="__codelineno-0-1668" name="__codelineno-0-1668"></a><a href="#__codelineno-0-1668"><span class="linenos" data-linenos="1668 "></span></a><span class="sd">            Should accept (current, total, message) arguments.</span>
<a id="__codelineno-0-1669" name="__codelineno-0-1669"></a><a href="#__codelineno-0-1669"><span class="linenos" data-linenos="1669 "></span></a><span class="sd">        error_mode: How to handle errors:</span>
<a id="__codelineno-0-1670" name="__codelineno-0-1670"></a><a href="#__codelineno-0-1670"><span class="linenos" data-linenos="1670 "></span></a><span class="sd">            - &quot;continue&quot;: Log errors but continue</span>
<a id="__codelineno-0-1671" name="__codelineno-0-1671"></a><a href="#__codelineno-0-1671"><span class="linenos" data-linenos="1671 "></span></a><span class="sd">            - &quot;strict&quot;: Raise exception on first error</span>
<a id="__codelineno-0-1672" name="__codelineno-0-1672"></a><a href="#__codelineno-0-1672"><span class="linenos" data-linenos="1672 "></span></a><span class="sd">            - &quot;warn&quot;: Print warnings but continue</span>
<a id="__codelineno-0-1673" name="__codelineno-0-1673"></a><a href="#__codelineno-0-1673"><span class="linenos" data-linenos="1673 "></span></a>
<a id="__codelineno-0-1674" name="__codelineno-0-1674"></a><a href="#__codelineno-0-1674"><span class="linenos" data-linenos="1674 "></span></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1675" name="__codelineno-0-1675"></a><a href="#__codelineno-0-1675"><span class="linenos" data-linenos="1675 "></span></a><span class="sd">        MergeResult object with statistics and any errors/conflicts.</span>
<a id="__codelineno-0-1676" name="__codelineno-0-1676"></a><a href="#__codelineno-0-1676"><span class="linenos" data-linenos="1676 "></span></a>
<a id="__codelineno-0-1677" name="__codelineno-0-1677"></a><a href="#__codelineno-0-1677"><span class="linenos" data-linenos="1677 "></span></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-1678" name="__codelineno-0-1678"></a><a href="#__codelineno-0-1678"><span class="linenos" data-linenos="1678 "></span></a><span class="sd">        This method modifies the Labels object in place. The merge is designed to</span>
<a id="__codelineno-0-1679" name="__codelineno-0-1679"></a><a href="#__codelineno-0-1679"><span class="linenos" data-linenos="1679 "></span></a><span class="sd">        handle common workflows like merging predictions back into a project.</span>
<a id="__codelineno-0-1680" name="__codelineno-0-1680"></a><a href="#__codelineno-0-1680"><span class="linenos" data-linenos="1680 "></span></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1681" name="__codelineno-0-1681"></a><a href="#__codelineno-0-1681"><span class="linenos" data-linenos="1681 "></span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<a id="__codelineno-0-1682" name="__codelineno-0-1682"></a><a href="#__codelineno-0-1682"><span class="linenos" data-linenos="1682 "></span></a>
<a id="__codelineno-0-1683" name="__codelineno-0-1683"></a><a href="#__codelineno-0-1683"><span class="linenos" data-linenos="1683 "></span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">sleap_io.model.matching</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-0-1684" name="__codelineno-0-1684"></a><a href="#__codelineno-0-1684"><span class="linenos" data-linenos="1684 "></span></a>        <span class="n">ConflictResolution</span><span class="p">,</span>
<a id="__codelineno-0-1685" name="__codelineno-0-1685"></a><a href="#__codelineno-0-1685"><span class="linenos" data-linenos="1685 "></span></a>        <span class="n">ErrorMode</span><span class="p">,</span>
<a id="__codelineno-0-1686" name="__codelineno-0-1686"></a><a href="#__codelineno-0-1686"><span class="linenos" data-linenos="1686 "></span></a>        <span class="n">InstanceMatcher</span><span class="p">,</span>
<a id="__codelineno-0-1687" name="__codelineno-0-1687"></a><a href="#__codelineno-0-1687"><span class="linenos" data-linenos="1687 "></span></a>        <span class="n">MergeError</span><span class="p">,</span>
<a id="__codelineno-0-1688" name="__codelineno-0-1688"></a><a href="#__codelineno-0-1688"><span class="linenos" data-linenos="1688 "></span></a>        <span class="n">MergeResult</span><span class="p">,</span>
<a id="__codelineno-0-1689" name="__codelineno-0-1689"></a><a href="#__codelineno-0-1689"><span class="linenos" data-linenos="1689 "></span></a>        <span class="n">SkeletonMatcher</span><span class="p">,</span>
<a id="__codelineno-0-1690" name="__codelineno-0-1690"></a><a href="#__codelineno-0-1690"><span class="linenos" data-linenos="1690 "></span></a>        <span class="n">SkeletonMatchMethod</span><span class="p">,</span>
<a id="__codelineno-0-1691" name="__codelineno-0-1691"></a><a href="#__codelineno-0-1691"><span class="linenos" data-linenos="1691 "></span></a>        <span class="n">SkeletonMismatchError</span><span class="p">,</span>
<a id="__codelineno-0-1692" name="__codelineno-0-1692"></a><a href="#__codelineno-0-1692"><span class="linenos" data-linenos="1692 "></span></a>        <span class="n">TrackMatcher</span><span class="p">,</span>
<a id="__codelineno-0-1693" name="__codelineno-0-1693"></a><a href="#__codelineno-0-1693"><span class="linenos" data-linenos="1693 "></span></a>        <span class="n">VideoMatcher</span><span class="p">,</span>
<a id="__codelineno-0-1694" name="__codelineno-0-1694"></a><a href="#__codelineno-0-1694"><span class="linenos" data-linenos="1694 "></span></a>    <span class="p">)</span>
<a id="__codelineno-0-1695" name="__codelineno-0-1695"></a><a href="#__codelineno-0-1695"><span class="linenos" data-linenos="1695 "></span></a>
<a id="__codelineno-0-1696" name="__codelineno-0-1696"></a><a href="#__codelineno-0-1696"><span class="linenos" data-linenos="1696 "></span></a>    <span class="c1"># Initialize matchers with defaults if not provided</span>
<a id="__codelineno-0-1697" name="__codelineno-0-1697"></a><a href="#__codelineno-0-1697"><span class="linenos" data-linenos="1697 "></span></a>    <span class="k">if</span> <span class="n">instance_matcher</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1698" name="__codelineno-0-1698"></a><a href="#__codelineno-0-1698"><span class="linenos" data-linenos="1698 "></span></a>        <span class="n">instance_matcher</span> <span class="o">=</span> <span class="n">InstanceMatcher</span><span class="p">()</span>
<a id="__codelineno-0-1699" name="__codelineno-0-1699"></a><a href="#__codelineno-0-1699"><span class="linenos" data-linenos="1699 "></span></a>    <span class="k">if</span> <span class="n">skeleton_matcher</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1700" name="__codelineno-0-1700"></a><a href="#__codelineno-0-1700"><span class="linenos" data-linenos="1700 "></span></a>        <span class="n">skeleton_matcher</span> <span class="o">=</span> <span class="n">SkeletonMatcher</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">SkeletonMatchMethod</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">)</span>
<a id="__codelineno-0-1701" name="__codelineno-0-1701"></a><a href="#__codelineno-0-1701"><span class="linenos" data-linenos="1701 "></span></a>    <span class="k">if</span> <span class="n">video_matcher</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1702" name="__codelineno-0-1702"></a><a href="#__codelineno-0-1702"><span class="linenos" data-linenos="1702 "></span></a>        <span class="n">video_matcher</span> <span class="o">=</span> <span class="n">VideoMatcher</span><span class="p">()</span>
<a id="__codelineno-0-1703" name="__codelineno-0-1703"></a><a href="#__codelineno-0-1703"><span class="linenos" data-linenos="1703 "></span></a>    <span class="k">if</span> <span class="n">track_matcher</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1704" name="__codelineno-0-1704"></a><a href="#__codelineno-0-1704"><span class="linenos" data-linenos="1704 "></span></a>        <span class="n">track_matcher</span> <span class="o">=</span> <span class="n">TrackMatcher</span><span class="p">()</span>
<a id="__codelineno-0-1705" name="__codelineno-0-1705"></a><a href="#__codelineno-0-1705"><span class="linenos" data-linenos="1705 "></span></a>
<a id="__codelineno-0-1706" name="__codelineno-0-1706"></a><a href="#__codelineno-0-1706"><span class="linenos" data-linenos="1706 "></span></a>    <span class="c1"># Parse error mode</span>
<a id="__codelineno-0-1707" name="__codelineno-0-1707"></a><a href="#__codelineno-0-1707"><span class="linenos" data-linenos="1707 "></span></a>    <span class="n">error_mode_enum</span> <span class="o">=</span> <span class="n">ErrorMode</span><span class="p">(</span><span class="n">error_mode</span><span class="p">)</span>
<a id="__codelineno-0-1708" name="__codelineno-0-1708"></a><a href="#__codelineno-0-1708"><span class="linenos" data-linenos="1708 "></span></a>
<a id="__codelineno-0-1709" name="__codelineno-0-1709"></a><a href="#__codelineno-0-1709"><span class="linenos" data-linenos="1709 "></span></a>    <span class="c1"># Initialize result</span>
<a id="__codelineno-0-1710" name="__codelineno-0-1710"></a><a href="#__codelineno-0-1710"><span class="linenos" data-linenos="1710 "></span></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">MergeResult</span><span class="p">(</span><span class="n">successful</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1711" name="__codelineno-0-1711"></a><a href="#__codelineno-0-1711"><span class="linenos" data-linenos="1711 "></span></a>
<a id="__codelineno-0-1712" name="__codelineno-0-1712"></a><a href="#__codelineno-0-1712"><span class="linenos" data-linenos="1712 "></span></a>    <span class="c1"># Track merge history in provenance</span>
<a id="__codelineno-0-1713" name="__codelineno-0-1713"></a><a href="#__codelineno-0-1713"><span class="linenos" data-linenos="1713 "></span></a>    <span class="k">if</span> <span class="s2">&quot;merge_history&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">provenance</span><span class="p">:</span>
<a id="__codelineno-0-1714" name="__codelineno-0-1714"></a><a href="#__codelineno-0-1714"><span class="linenos" data-linenos="1714 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">provenance</span><span class="p">[</span><span class="s2">&quot;merge_history&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1715" name="__codelineno-0-1715"></a><a href="#__codelineno-0-1715"><span class="linenos" data-linenos="1715 "></span></a>
<a id="__codelineno-0-1716" name="__codelineno-0-1716"></a><a href="#__codelineno-0-1716"><span class="linenos" data-linenos="1716 "></span></a>    <span class="n">merge_record</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-1717" name="__codelineno-0-1717"></a><a href="#__codelineno-0-1717"><span class="linenos" data-linenos="1717 "></span></a>        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
<a id="__codelineno-0-1718" name="__codelineno-0-1718"></a><a href="#__codelineno-0-1718"><span class="linenos" data-linenos="1718 "></span></a>        <span class="s2">&quot;source_labels&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-1719" name="__codelineno-0-1719"></a><a href="#__codelineno-0-1719"><span class="linenos" data-linenos="1719 "></span></a>            <span class="s2">&quot;n_frames&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">),</span>
<a id="__codelineno-0-1720" name="__codelineno-0-1720"></a><a href="#__codelineno-0-1720"><span class="linenos" data-linenos="1720 "></span></a>            <span class="s2">&quot;n_videos&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">videos</span><span class="p">),</span>
<a id="__codelineno-0-1721" name="__codelineno-0-1721"></a><a href="#__codelineno-0-1721"><span class="linenos" data-linenos="1721 "></span></a>            <span class="s2">&quot;n_skeletons&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">skeletons</span><span class="p">),</span>
<a id="__codelineno-0-1722" name="__codelineno-0-1722"></a><a href="#__codelineno-0-1722"><span class="linenos" data-linenos="1722 "></span></a>            <span class="s2">&quot;n_tracks&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">tracks</span><span class="p">),</span>
<a id="__codelineno-0-1723" name="__codelineno-0-1723"></a><a href="#__codelineno-0-1723"><span class="linenos" data-linenos="1723 "></span></a>        <span class="p">},</span>
<a id="__codelineno-0-1724" name="__codelineno-0-1724"></a><a href="#__codelineno-0-1724"><span class="linenos" data-linenos="1724 "></span></a>        <span class="s2">&quot;strategy&quot;</span><span class="p">:</span> <span class="n">frame_strategy</span><span class="p">,</span>
<a id="__codelineno-0-1725" name="__codelineno-0-1725"></a><a href="#__codelineno-0-1725"><span class="linenos" data-linenos="1725 "></span></a>    <span class="p">}</span>
<a id="__codelineno-0-1726" name="__codelineno-0-1726"></a><a href="#__codelineno-0-1726"><span class="linenos" data-linenos="1726 "></span></a>
<a id="__codelineno-0-1727" name="__codelineno-0-1727"></a><a href="#__codelineno-0-1727"><span class="linenos" data-linenos="1727 "></span></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1728" name="__codelineno-0-1728"></a><a href="#__codelineno-0-1728"><span class="linenos" data-linenos="1728 "></span></a>        <span class="c1"># Step 1: Match and merge skeletons</span>
<a id="__codelineno-0-1729" name="__codelineno-0-1729"></a><a href="#__codelineno-0-1729"><span class="linenos" data-linenos="1729 "></span></a>        <span class="n">skeleton_map</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1730" name="__codelineno-0-1730"></a><a href="#__codelineno-0-1730"><span class="linenos" data-linenos="1730 "></span></a>        <span class="k">for</span> <span class="n">other_skel</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">skeletons</span><span class="p">:</span>
<a id="__codelineno-0-1731" name="__codelineno-0-1731"></a><a href="#__codelineno-0-1731"><span class="linenos" data-linenos="1731 "></span></a>            <span class="n">matched</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1732" name="__codelineno-0-1732"></a><a href="#__codelineno-0-1732"><span class="linenos" data-linenos="1732 "></span></a>            <span class="k">for</span> <span class="n">self_skel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">skeletons</span><span class="p">:</span>
<a id="__codelineno-0-1733" name="__codelineno-0-1733"></a><a href="#__codelineno-0-1733"><span class="linenos" data-linenos="1733 "></span></a>                <span class="k">if</span> <span class="n">skeleton_matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">self_skel</span><span class="p">,</span> <span class="n">other_skel</span><span class="p">):</span>
<a id="__codelineno-0-1734" name="__codelineno-0-1734"></a><a href="#__codelineno-0-1734"><span class="linenos" data-linenos="1734 "></span></a>                    <span class="n">skeleton_map</span><span class="p">[</span><span class="n">other_skel</span><span class="p">]</span> <span class="o">=</span> <span class="n">self_skel</span>
<a id="__codelineno-0-1735" name="__codelineno-0-1735"></a><a href="#__codelineno-0-1735"><span class="linenos" data-linenos="1735 "></span></a>                    <span class="n">matched</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-1736" name="__codelineno-0-1736"></a><a href="#__codelineno-0-1736"><span class="linenos" data-linenos="1736 "></span></a>                    <span class="k">break</span>
<a id="__codelineno-0-1737" name="__codelineno-0-1737"></a><a href="#__codelineno-0-1737"><span class="linenos" data-linenos="1737 "></span></a>
<a id="__codelineno-0-1738" name="__codelineno-0-1738"></a><a href="#__codelineno-0-1738"><span class="linenos" data-linenos="1738 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">matched</span><span class="p">:</span>
<a id="__codelineno-0-1739" name="__codelineno-0-1739"></a><a href="#__codelineno-0-1739"><span class="linenos" data-linenos="1739 "></span></a>                <span class="k">if</span> <span class="n">validate</span> <span class="ow">and</span> <span class="n">error_mode_enum</span> <span class="o">==</span> <span class="n">ErrorMode</span><span class="o">.</span><span class="n">STRICT</span><span class="p">:</span>
<a id="__codelineno-0-1740" name="__codelineno-0-1740"></a><a href="#__codelineno-0-1740"><span class="linenos" data-linenos="1740 "></span></a>                    <span class="k">raise</span> <span class="n">SkeletonMismatchError</span><span class="p">(</span>
<a id="__codelineno-0-1741" name="__codelineno-0-1741"></a><a href="#__codelineno-0-1741"><span class="linenos" data-linenos="1741 "></span></a>                        <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;No matching skeleton found for </span><span class="si">{</span><span class="n">other_skel</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1742" name="__codelineno-0-1742"></a><a href="#__codelineno-0-1742"><span class="linenos" data-linenos="1742 "></span></a>                        <span class="n">details</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;skeleton&quot;</span><span class="p">:</span> <span class="n">other_skel</span><span class="p">},</span>
<a id="__codelineno-0-1743" name="__codelineno-0-1743"></a><a href="#__codelineno-0-1743"><span class="linenos" data-linenos="1743 "></span></a>                    <span class="p">)</span>
<a id="__codelineno-0-1744" name="__codelineno-0-1744"></a><a href="#__codelineno-0-1744"><span class="linenos" data-linenos="1744 "></span></a>                <span class="k">elif</span> <span class="n">error_mode_enum</span> <span class="o">==</span> <span class="n">ErrorMode</span><span class="o">.</span><span class="n">WARN</span><span class="p">:</span>
<a id="__codelineno-0-1745" name="__codelineno-0-1745"></a><a href="#__codelineno-0-1745"><span class="linenos" data-linenos="1745 "></span></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: No matching skeleton for </span><span class="si">{</span><span class="n">other_skel</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1746" name="__codelineno-0-1746"></a><a href="#__codelineno-0-1746"><span class="linenos" data-linenos="1746 "></span></a>
<a id="__codelineno-0-1747" name="__codelineno-0-1747"></a><a href="#__codelineno-0-1747"><span class="linenos" data-linenos="1747 "></span></a>                <span class="c1"># Add new skeleton if no match</span>
<a id="__codelineno-0-1748" name="__codelineno-0-1748"></a><a href="#__codelineno-0-1748"><span class="linenos" data-linenos="1748 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">skeletons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other_skel</span><span class="p">)</span>
<a id="__codelineno-0-1749" name="__codelineno-0-1749"></a><a href="#__codelineno-0-1749"><span class="linenos" data-linenos="1749 "></span></a>                <span class="n">skeleton_map</span><span class="p">[</span><span class="n">other_skel</span><span class="p">]</span> <span class="o">=</span> <span class="n">other_skel</span>
<a id="__codelineno-0-1750" name="__codelineno-0-1750"></a><a href="#__codelineno-0-1750"><span class="linenos" data-linenos="1750 "></span></a>
<a id="__codelineno-0-1751" name="__codelineno-0-1751"></a><a href="#__codelineno-0-1751"><span class="linenos" data-linenos="1751 "></span></a>        <span class="c1"># Step 2: Match and merge videos</span>
<a id="__codelineno-0-1752" name="__codelineno-0-1752"></a><a href="#__codelineno-0-1752"><span class="linenos" data-linenos="1752 "></span></a>        <span class="n">video_map</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1753" name="__codelineno-0-1753"></a><a href="#__codelineno-0-1753"><span class="linenos" data-linenos="1753 "></span></a>        <span class="k">for</span> <span class="n">other_video</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-0-1754" name="__codelineno-0-1754"></a><a href="#__codelineno-0-1754"><span class="linenos" data-linenos="1754 "></span></a>            <span class="n">matched</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1755" name="__codelineno-0-1755"></a><a href="#__codelineno-0-1755"><span class="linenos" data-linenos="1755 "></span></a>            <span class="k">for</span> <span class="n">self_video</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="p">:</span>
<a id="__codelineno-0-1756" name="__codelineno-0-1756"></a><a href="#__codelineno-0-1756"><span class="linenos" data-linenos="1756 "></span></a>                <span class="k">if</span> <span class="n">video_matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">self_video</span><span class="p">,</span> <span class="n">other_video</span><span class="p">):</span>
<a id="__codelineno-0-1757" name="__codelineno-0-1757"></a><a href="#__codelineno-0-1757"><span class="linenos" data-linenos="1757 "></span></a>                    <span class="n">video_map</span><span class="p">[</span><span class="n">other_video</span><span class="p">]</span> <span class="o">=</span> <span class="n">self_video</span>
<a id="__codelineno-0-1758" name="__codelineno-0-1758"></a><a href="#__codelineno-0-1758"><span class="linenos" data-linenos="1758 "></span></a>                    <span class="n">matched</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-1759" name="__codelineno-0-1759"></a><a href="#__codelineno-0-1759"><span class="linenos" data-linenos="1759 "></span></a>                    <span class="k">break</span>
<a id="__codelineno-0-1760" name="__codelineno-0-1760"></a><a href="#__codelineno-0-1760"><span class="linenos" data-linenos="1760 "></span></a>
<a id="__codelineno-0-1761" name="__codelineno-0-1761"></a><a href="#__codelineno-0-1761"><span class="linenos" data-linenos="1761 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">matched</span><span class="p">:</span>
<a id="__codelineno-0-1762" name="__codelineno-0-1762"></a><a href="#__codelineno-0-1762"><span class="linenos" data-linenos="1762 "></span></a>                <span class="c1"># Add new video if no match</span>
<a id="__codelineno-0-1763" name="__codelineno-0-1763"></a><a href="#__codelineno-0-1763"><span class="linenos" data-linenos="1763 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">videos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other_video</span><span class="p">)</span>
<a id="__codelineno-0-1764" name="__codelineno-0-1764"></a><a href="#__codelineno-0-1764"><span class="linenos" data-linenos="1764 "></span></a>                <span class="n">video_map</span><span class="p">[</span><span class="n">other_video</span><span class="p">]</span> <span class="o">=</span> <span class="n">other_video</span>
<a id="__codelineno-0-1765" name="__codelineno-0-1765"></a><a href="#__codelineno-0-1765"><span class="linenos" data-linenos="1765 "></span></a>
<a id="__codelineno-0-1766" name="__codelineno-0-1766"></a><a href="#__codelineno-0-1766"><span class="linenos" data-linenos="1766 "></span></a>        <span class="c1"># Step 3: Match and merge tracks</span>
<a id="__codelineno-0-1767" name="__codelineno-0-1767"></a><a href="#__codelineno-0-1767"><span class="linenos" data-linenos="1767 "></span></a>        <span class="n">track_map</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1768" name="__codelineno-0-1768"></a><a href="#__codelineno-0-1768"><span class="linenos" data-linenos="1768 "></span></a>        <span class="k">for</span> <span class="n">other_track</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">tracks</span><span class="p">:</span>
<a id="__codelineno-0-1769" name="__codelineno-0-1769"></a><a href="#__codelineno-0-1769"><span class="linenos" data-linenos="1769 "></span></a>            <span class="n">matched</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1770" name="__codelineno-0-1770"></a><a href="#__codelineno-0-1770"><span class="linenos" data-linenos="1770 "></span></a>            <span class="k">for</span> <span class="n">self_track</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracks</span><span class="p">:</span>
<a id="__codelineno-0-1771" name="__codelineno-0-1771"></a><a href="#__codelineno-0-1771"><span class="linenos" data-linenos="1771 "></span></a>                <span class="k">if</span> <span class="n">track_matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">self_track</span><span class="p">,</span> <span class="n">other_track</span><span class="p">):</span>
<a id="__codelineno-0-1772" name="__codelineno-0-1772"></a><a href="#__codelineno-0-1772"><span class="linenos" data-linenos="1772 "></span></a>                    <span class="n">track_map</span><span class="p">[</span><span class="n">other_track</span><span class="p">]</span> <span class="o">=</span> <span class="n">self_track</span>
<a id="__codelineno-0-1773" name="__codelineno-0-1773"></a><a href="#__codelineno-0-1773"><span class="linenos" data-linenos="1773 "></span></a>                    <span class="n">matched</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-1774" name="__codelineno-0-1774"></a><a href="#__codelineno-0-1774"><span class="linenos" data-linenos="1774 "></span></a>                    <span class="k">break</span>
<a id="__codelineno-0-1775" name="__codelineno-0-1775"></a><a href="#__codelineno-0-1775"><span class="linenos" data-linenos="1775 "></span></a>
<a id="__codelineno-0-1776" name="__codelineno-0-1776"></a><a href="#__codelineno-0-1776"><span class="linenos" data-linenos="1776 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">matched</span><span class="p">:</span>
<a id="__codelineno-0-1777" name="__codelineno-0-1777"></a><a href="#__codelineno-0-1777"><span class="linenos" data-linenos="1777 "></span></a>                <span class="c1"># Add new track if no match</span>
<a id="__codelineno-0-1778" name="__codelineno-0-1778"></a><a href="#__codelineno-0-1778"><span class="linenos" data-linenos="1778 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tracks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other_track</span><span class="p">)</span>
<a id="__codelineno-0-1779" name="__codelineno-0-1779"></a><a href="#__codelineno-0-1779"><span class="linenos" data-linenos="1779 "></span></a>                <span class="n">track_map</span><span class="p">[</span><span class="n">other_track</span><span class="p">]</span> <span class="o">=</span> <span class="n">other_track</span>
<a id="__codelineno-0-1780" name="__codelineno-0-1780"></a><a href="#__codelineno-0-1780"><span class="linenos" data-linenos="1780 "></span></a>
<a id="__codelineno-0-1781" name="__codelineno-0-1781"></a><a href="#__codelineno-0-1781"><span class="linenos" data-linenos="1781 "></span></a>        <span class="c1"># Step 4: Merge frames</span>
<a id="__codelineno-0-1782" name="__codelineno-0-1782"></a><a href="#__codelineno-0-1782"><span class="linenos" data-linenos="1782 "></span></a>        <span class="n">total_frames</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">)</span>
<a id="__codelineno-0-1783" name="__codelineno-0-1783"></a><a href="#__codelineno-0-1783"><span class="linenos" data-linenos="1783 "></span></a>
<a id="__codelineno-0-1784" name="__codelineno-0-1784"></a><a href="#__codelineno-0-1784"><span class="linenos" data-linenos="1784 "></span></a>        <span class="k">for</span> <span class="n">frame_idx</span><span class="p">,</span> <span class="n">other_frame</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">labeled_frames</span><span class="p">):</span>
<a id="__codelineno-0-1785" name="__codelineno-0-1785"></a><a href="#__codelineno-0-1785"><span class="linenos" data-linenos="1785 "></span></a>            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
<a id="__codelineno-0-1786" name="__codelineno-0-1786"></a><a href="#__codelineno-0-1786"><span class="linenos" data-linenos="1786 "></span></a>                <span class="n">progress_callback</span><span class="p">(</span>
<a id="__codelineno-0-1787" name="__codelineno-0-1787"></a><a href="#__codelineno-0-1787"><span class="linenos" data-linenos="1787 "></span></a>                    <span class="n">frame_idx</span><span class="p">,</span>
<a id="__codelineno-0-1788" name="__codelineno-0-1788"></a><a href="#__codelineno-0-1788"><span class="linenos" data-linenos="1788 "></span></a>                    <span class="n">total_frames</span><span class="p">,</span>
<a id="__codelineno-0-1789" name="__codelineno-0-1789"></a><a href="#__codelineno-0-1789"><span class="linenos" data-linenos="1789 "></span></a>                    <span class="sa">f</span><span class="s2">&quot;Merging frame </span><span class="si">{</span><span class="n">frame_idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total_frames</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1790" name="__codelineno-0-1790"></a><a href="#__codelineno-0-1790"><span class="linenos" data-linenos="1790 "></span></a>                <span class="p">)</span>
<a id="__codelineno-0-1791" name="__codelineno-0-1791"></a><a href="#__codelineno-0-1791"><span class="linenos" data-linenos="1791 "></span></a>
<a id="__codelineno-0-1792" name="__codelineno-0-1792"></a><a href="#__codelineno-0-1792"><span class="linenos" data-linenos="1792 "></span></a>            <span class="c1"># Map video to self</span>
<a id="__codelineno-0-1793" name="__codelineno-0-1793"></a><a href="#__codelineno-0-1793"><span class="linenos" data-linenos="1793 "></span></a>            <span class="n">mapped_video</span> <span class="o">=</span> <span class="n">video_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">other_frame</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">other_frame</span><span class="o">.</span><span class="n">video</span><span class="p">)</span>
<a id="__codelineno-0-1794" name="__codelineno-0-1794"></a><a href="#__codelineno-0-1794"><span class="linenos" data-linenos="1794 "></span></a>
<a id="__codelineno-0-1795" name="__codelineno-0-1795"></a><a href="#__codelineno-0-1795"><span class="linenos" data-linenos="1795 "></span></a>            <span class="c1"># Find matching frame in self</span>
<a id="__codelineno-0-1796" name="__codelineno-0-1796"></a><a href="#__codelineno-0-1796"><span class="linenos" data-linenos="1796 "></span></a>            <span class="n">matching_frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">mapped_video</span><span class="p">,</span> <span class="n">other_frame</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">)</span>
<a id="__codelineno-0-1797" name="__codelineno-0-1797"></a><a href="#__codelineno-0-1797"><span class="linenos" data-linenos="1797 "></span></a>
<a id="__codelineno-0-1798" name="__codelineno-0-1798"></a><a href="#__codelineno-0-1798"><span class="linenos" data-linenos="1798 "></span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching_frames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-1799" name="__codelineno-0-1799"></a><a href="#__codelineno-0-1799"><span class="linenos" data-linenos="1799 "></span></a>                <span class="c1"># No matching frame, create new one</span>
<a id="__codelineno-0-1800" name="__codelineno-0-1800"></a><a href="#__codelineno-0-1800"><span class="linenos" data-linenos="1800 "></span></a>                <span class="n">new_frame</span> <span class="o">=</span> <span class="n">LabeledFrame</span><span class="p">(</span>
<a id="__codelineno-0-1801" name="__codelineno-0-1801"></a><a href="#__codelineno-0-1801"><span class="linenos" data-linenos="1801 "></span></a>                    <span class="n">video</span><span class="o">=</span><span class="n">mapped_video</span><span class="p">,</span>
<a id="__codelineno-0-1802" name="__codelineno-0-1802"></a><a href="#__codelineno-0-1802"><span class="linenos" data-linenos="1802 "></span></a>                    <span class="n">frame_idx</span><span class="o">=</span><span class="n">other_frame</span><span class="o">.</span><span class="n">frame_idx</span><span class="p">,</span>
<a id="__codelineno-0-1803" name="__codelineno-0-1803"></a><a href="#__codelineno-0-1803"><span class="linenos" data-linenos="1803 "></span></a>                    <span class="n">instances</span><span class="o">=</span><span class="p">[],</span>
<a id="__codelineno-0-1804" name="__codelineno-0-1804"></a><a href="#__codelineno-0-1804"><span class="linenos" data-linenos="1804 "></span></a>                <span class="p">)</span>
<a id="__codelineno-0-1805" name="__codelineno-0-1805"></a><a href="#__codelineno-0-1805"><span class="linenos" data-linenos="1805 "></span></a>
<a id="__codelineno-0-1806" name="__codelineno-0-1806"></a><a href="#__codelineno-0-1806"><span class="linenos" data-linenos="1806 "></span></a>                <span class="c1"># Map instances to new skeleton/track</span>
<a id="__codelineno-0-1807" name="__codelineno-0-1807"></a><a href="#__codelineno-0-1807"><span class="linenos" data-linenos="1807 "></span></a>                <span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">other_frame</span><span class="o">.</span><span class="n">instances</span><span class="p">:</span>
<a id="__codelineno-0-1808" name="__codelineno-0-1808"></a><a href="#__codelineno-0-1808"><span class="linenos" data-linenos="1808 "></span></a>                    <span class="n">new_inst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_instance</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span> <span class="n">skeleton_map</span><span class="p">,</span> <span class="n">track_map</span><span class="p">)</span>
<a id="__codelineno-0-1809" name="__codelineno-0-1809"></a><a href="#__codelineno-0-1809"><span class="linenos" data-linenos="1809 "></span></a>                    <span class="n">new_frame</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_inst</span><span class="p">)</span>
<a id="__codelineno-0-1810" name="__codelineno-0-1810"></a><a href="#__codelineno-0-1810"><span class="linenos" data-linenos="1810 "></span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">instances_added</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-1811" name="__codelineno-0-1811"></a><a href="#__codelineno-0-1811"><span class="linenos" data-linenos="1811 "></span></a>
<a id="__codelineno-0-1812" name="__codelineno-0-1812"></a><a href="#__codelineno-0-1812"><span class="linenos" data-linenos="1812 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_frame</span><span class="p">)</span>
<a id="__codelineno-0-1813" name="__codelineno-0-1813"></a><a href="#__codelineno-0-1813"><span class="linenos" data-linenos="1813 "></span></a>                <span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-1814" name="__codelineno-0-1814"></a><a href="#__codelineno-0-1814"><span class="linenos" data-linenos="1814 "></span></a>
<a id="__codelineno-0-1815" name="__codelineno-0-1815"></a><a href="#__codelineno-0-1815"><span class="linenos" data-linenos="1815 "></span></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1816" name="__codelineno-0-1816"></a><a href="#__codelineno-0-1816"><span class="linenos" data-linenos="1816 "></span></a>                <span class="c1"># Merge into existing frame</span>
<a id="__codelineno-0-1817" name="__codelineno-0-1817"></a><a href="#__codelineno-0-1817"><span class="linenos" data-linenos="1817 "></span></a>                <span class="n">self_frame</span> <span class="o">=</span> <span class="n">matching_frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-1818" name="__codelineno-0-1818"></a><a href="#__codelineno-0-1818"><span class="linenos" data-linenos="1818 "></span></a>
<a id="__codelineno-0-1819" name="__codelineno-0-1819"></a><a href="#__codelineno-0-1819"><span class="linenos" data-linenos="1819 "></span></a>                <span class="c1"># Merge instances using frame-level merge</span>
<a id="__codelineno-0-1820" name="__codelineno-0-1820"></a><a href="#__codelineno-0-1820"><span class="linenos" data-linenos="1820 "></span></a>                <span class="n">merged_instances</span><span class="p">,</span> <span class="n">conflicts</span> <span class="o">=</span> <span class="n">self_frame</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
<a id="__codelineno-0-1821" name="__codelineno-0-1821"></a><a href="#__codelineno-0-1821"><span class="linenos" data-linenos="1821 "></span></a>                    <span class="n">other_frame</span><span class="p">,</span>
<a id="__codelineno-0-1822" name="__codelineno-0-1822"></a><a href="#__codelineno-0-1822"><span class="linenos" data-linenos="1822 "></span></a>                    <span class="n">instance_matcher</span><span class="o">=</span><span class="n">instance_matcher</span><span class="p">,</span>
<a id="__codelineno-0-1823" name="__codelineno-0-1823"></a><a href="#__codelineno-0-1823"><span class="linenos" data-linenos="1823 "></span></a>                    <span class="n">strategy</span><span class="o">=</span><span class="n">frame_strategy</span><span class="p">,</span>
<a id="__codelineno-0-1824" name="__codelineno-0-1824"></a><a href="#__codelineno-0-1824"><span class="linenos" data-linenos="1824 "></span></a>                <span class="p">)</span>
<a id="__codelineno-0-1825" name="__codelineno-0-1825"></a><a href="#__codelineno-0-1825"><span class="linenos" data-linenos="1825 "></span></a>
<a id="__codelineno-0-1826" name="__codelineno-0-1826"></a><a href="#__codelineno-0-1826"><span class="linenos" data-linenos="1826 "></span></a>                <span class="c1"># Remap skeleton and track references for instances from other frame</span>
<a id="__codelineno-0-1827" name="__codelineno-0-1827"></a><a href="#__codelineno-0-1827"><span class="linenos" data-linenos="1827 "></span></a>                <span class="n">remapped_instances</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1828" name="__codelineno-0-1828"></a><a href="#__codelineno-0-1828"><span class="linenos" data-linenos="1828 "></span></a>                <span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">merged_instances</span><span class="p">:</span>
<a id="__codelineno-0-1829" name="__codelineno-0-1829"></a><a href="#__codelineno-0-1829"><span class="linenos" data-linenos="1829 "></span></a>                    <span class="c1"># Check if instance needs remapping (from other_frame)</span>
<a id="__codelineno-0-1830" name="__codelineno-0-1830"></a><a href="#__codelineno-0-1830"><span class="linenos" data-linenos="1830 "></span></a>                    <span class="k">if</span> <span class="n">inst</span><span class="o">.</span><span class="n">skeleton</span> <span class="ow">in</span> <span class="n">skeleton_map</span><span class="p">:</span>
<a id="__codelineno-0-1831" name="__codelineno-0-1831"></a><a href="#__codelineno-0-1831"><span class="linenos" data-linenos="1831 "></span></a>                        <span class="c1"># Instance needs remapping</span>
<a id="__codelineno-0-1832" name="__codelineno-0-1832"></a><a href="#__codelineno-0-1832"><span class="linenos" data-linenos="1832 "></span></a>                        <span class="n">remapped_inst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_instance</span><span class="p">(</span>
<a id="__codelineno-0-1833" name="__codelineno-0-1833"></a><a href="#__codelineno-0-1833"><span class="linenos" data-linenos="1833 "></span></a>                            <span class="n">inst</span><span class="p">,</span> <span class="n">skeleton_map</span><span class="p">,</span> <span class="n">track_map</span>
<a id="__codelineno-0-1834" name="__codelineno-0-1834"></a><a href="#__codelineno-0-1834"><span class="linenos" data-linenos="1834 "></span></a>                        <span class="p">)</span>
<a id="__codelineno-0-1835" name="__codelineno-0-1835"></a><a href="#__codelineno-0-1835"><span class="linenos" data-linenos="1835 "></span></a>                        <span class="n">remapped_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">remapped_inst</span><span class="p">)</span>
<a id="__codelineno-0-1836" name="__codelineno-0-1836"></a><a href="#__codelineno-0-1836"><span class="linenos" data-linenos="1836 "></span></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1837" name="__codelineno-0-1837"></a><a href="#__codelineno-0-1837"><span class="linenos" data-linenos="1837 "></span></a>                        <span class="c1"># Instance already has correct skeleton (from self_frame)</span>
<a id="__codelineno-0-1838" name="__codelineno-0-1838"></a><a href="#__codelineno-0-1838"><span class="linenos" data-linenos="1838 "></span></a>                        <span class="n">remapped_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>
<a id="__codelineno-0-1839" name="__codelineno-0-1839"></a><a href="#__codelineno-0-1839"><span class="linenos" data-linenos="1839 "></span></a>                <span class="n">merged_instances</span> <span class="o">=</span> <span class="n">remapped_instances</span>
<a id="__codelineno-0-1840" name="__codelineno-0-1840"></a><a href="#__codelineno-0-1840"><span class="linenos" data-linenos="1840 "></span></a>
<a id="__codelineno-0-1841" name="__codelineno-0-1841"></a><a href="#__codelineno-0-1841"><span class="linenos" data-linenos="1841 "></span></a>                <span class="c1"># Count changes</span>
<a id="__codelineno-0-1842" name="__codelineno-0-1842"></a><a href="#__codelineno-0-1842"><span class="linenos" data-linenos="1842 "></span></a>                <span class="n">n_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">self_frame</span><span class="o">.</span><span class="n">instances</span><span class="p">)</span>
<a id="__codelineno-0-1843" name="__codelineno-0-1843"></a><a href="#__codelineno-0-1843"><span class="linenos" data-linenos="1843 "></span></a>                <span class="n">n_after</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">merged_instances</span><span class="p">)</span>
<a id="__codelineno-0-1844" name="__codelineno-0-1844"></a><a href="#__codelineno-0-1844"><span class="linenos" data-linenos="1844 "></span></a>                <span class="n">result</span><span class="o">.</span><span class="n">instances_added</span> <span class="o">+=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_after</span> <span class="o">-</span> <span class="n">n_before</span><span class="p">)</span>
<a id="__codelineno-0-1845" name="__codelineno-0-1845"></a><a href="#__codelineno-0-1845"><span class="linenos" data-linenos="1845 "></span></a>
<a id="__codelineno-0-1846" name="__codelineno-0-1846"></a><a href="#__codelineno-0-1846"><span class="linenos" data-linenos="1846 "></span></a>                <span class="c1"># Record conflicts</span>
<a id="__codelineno-0-1847" name="__codelineno-0-1847"></a><a href="#__codelineno-0-1847"><span class="linenos" data-linenos="1847 "></span></a>                <span class="k">for</span> <span class="n">orig</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">resolution</span> <span class="ow">in</span> <span class="n">conflicts</span><span class="p">:</span>
<a id="__codelineno-0-1848" name="__codelineno-0-1848"></a><a href="#__codelineno-0-1848"><span class="linenos" data-linenos="1848 "></span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-1849" name="__codelineno-0-1849"></a><a href="#__codelineno-0-1849"><span class="linenos" data-linenos="1849 "></span></a>                        <span class="n">ConflictResolution</span><span class="p">(</span>
<a id="__codelineno-0-1850" name="__codelineno-0-1850"></a><a href="#__codelineno-0-1850"><span class="linenos" data-linenos="1850 "></span></a>                            <span class="n">frame</span><span class="o">=</span><span class="n">self_frame</span><span class="p">,</span>
<a id="__codelineno-0-1851" name="__codelineno-0-1851"></a><a href="#__codelineno-0-1851"><span class="linenos" data-linenos="1851 "></span></a>                            <span class="n">conflict_type</span><span class="o">=</span><span class="s2">&quot;instance_conflict&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1852" name="__codelineno-0-1852"></a><a href="#__codelineno-0-1852"><span class="linenos" data-linenos="1852 "></span></a>                            <span class="n">original_data</span><span class="o">=</span><span class="n">orig</span><span class="p">,</span>
<a id="__codelineno-0-1853" name="__codelineno-0-1853"></a><a href="#__codelineno-0-1853"><span class="linenos" data-linenos="1853 "></span></a>                            <span class="n">new_data</span><span class="o">=</span><span class="n">new</span><span class="p">,</span>
<a id="__codelineno-0-1854" name="__codelineno-0-1854"></a><a href="#__codelineno-0-1854"><span class="linenos" data-linenos="1854 "></span></a>                            <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
<a id="__codelineno-0-1855" name="__codelineno-0-1855"></a><a href="#__codelineno-0-1855"><span class="linenos" data-linenos="1855 "></span></a>                        <span class="p">)</span>
<a id="__codelineno-0-1856" name="__codelineno-0-1856"></a><a href="#__codelineno-0-1856"><span class="linenos" data-linenos="1856 "></span></a>                    <span class="p">)</span>
<a id="__codelineno-0-1857" name="__codelineno-0-1857"></a><a href="#__codelineno-0-1857"><span class="linenos" data-linenos="1857 "></span></a>
<a id="__codelineno-0-1858" name="__codelineno-0-1858"></a><a href="#__codelineno-0-1858"><span class="linenos" data-linenos="1858 "></span></a>                <span class="c1"># Update frame instances</span>
<a id="__codelineno-0-1859" name="__codelineno-0-1859"></a><a href="#__codelineno-0-1859"><span class="linenos" data-linenos="1859 "></span></a>                <span class="n">self_frame</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">merged_instances</span>
<a id="__codelineno-0-1860" name="__codelineno-0-1860"></a><a href="#__codelineno-0-1860"><span class="linenos" data-linenos="1860 "></span></a>                <span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-1861" name="__codelineno-0-1861"></a><a href="#__codelineno-0-1861"><span class="linenos" data-linenos="1861 "></span></a>
<a id="__codelineno-0-1862" name="__codelineno-0-1862"></a><a href="#__codelineno-0-1862"><span class="linenos" data-linenos="1862 "></span></a>        <span class="c1"># Step 5: Merge suggestions</span>
<a id="__codelineno-0-1863" name="__codelineno-0-1863"></a><a href="#__codelineno-0-1863"><span class="linenos" data-linenos="1863 "></span></a>        <span class="k">for</span> <span class="n">other_suggestion</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">suggestions</span><span class="p">:</span>
<a id="__codelineno-0-1864" name="__codelineno-0-1864"></a><a href="#__codelineno-0-1864"><span class="linenos" data-linenos="1864 "></span></a>            <span class="n">mapped_video</span> <span class="o">=</span> <span class="n">video_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-1865" name="__codelineno-0-1865"></a><a href="#__codelineno-0-1865"><span class="linenos" data-linenos="1865 "></span></a>                <span class="n">other_suggestion</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="n">other_suggestion</span><span class="o">.</span><span class="n">video</span>
<a id="__codelineno-0-1866" name="__codelineno-0-1866"></a><a href="#__codelineno-0-1866"><span class="linenos" data-linenos="1866 "></span></a>            <span class="p">)</span>
<a id="__codelineno-0-1867" name="__codelineno-0-1867"></a><a href="#__codelineno-0-1867"><span class="linenos" data-linenos="1867 "></span></a>            <span class="c1"># Check if suggestion already exists</span>
<a id="__codelineno-0-1868" name="__codelineno-0-1868"></a><a href="#__codelineno-0-1868"><span class="linenos" data-linenos="1868 "></span></a>            <span class="n">exists</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1869" name="__codelineno-0-1869"></a><a href="#__codelineno-0-1869"><span class="linenos" data-linenos="1869 "></span></a>            <span class="k">for</span> <span class="n">self_suggestion</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">suggestions</span><span class="p">:</span>
<a id="__codelineno-0-1870" name="__codelineno-0-1870"></a><a href="#__codelineno-0-1870"><span class="linenos" data-linenos="1870 "></span></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-1871" name="__codelineno-0-1871"></a><a href="#__codelineno-0-1871"><span class="linenos" data-linenos="1871 "></span></a>                    <span class="n">self_suggestion</span><span class="o">.</span><span class="n">video</span> <span class="o">==</span> <span class="n">mapped_video</span>
<a id="__codelineno-0-1872" name="__codelineno-0-1872"></a><a href="#__codelineno-0-1872"><span class="linenos" data-linenos="1872 "></span></a>                    <span class="ow">and</span> <span class="n">self_suggestion</span><span class="o">.</span><span class="n">frame_idx</span> <span class="o">==</span> <span class="n">other_suggestion</span><span class="o">.</span><span class="n">frame_idx</span>
<a id="__codelineno-0-1873" name="__codelineno-0-1873"></a><a href="#__codelineno-0-1873"><span class="linenos" data-linenos="1873 "></span></a>                <span class="p">):</span>
<a id="__codelineno-0-1874" name="__codelineno-0-1874"></a><a href="#__codelineno-0-1874"><span class="linenos" data-linenos="1874 "></span></a>                    <span class="n">exists</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-1875" name="__codelineno-0-1875"></a><a href="#__codelineno-0-1875"><span class="linenos" data-linenos="1875 "></span></a>                    <span class="k">break</span>
<a id="__codelineno-0-1876" name="__codelineno-0-1876"></a><a href="#__codelineno-0-1876"><span class="linenos" data-linenos="1876 "></span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">:</span>
<a id="__codelineno-0-1877" name="__codelineno-0-1877"></a><a href="#__codelineno-0-1877"><span class="linenos" data-linenos="1877 "></span></a>                <span class="c1"># Create new suggestion with mapped video</span>
<a id="__codelineno-0-1878" name="__codelineno-0-1878"></a><a href="#__codelineno-0-1878"><span class="linenos" data-linenos="1878 "></span></a>                <span class="n">new_suggestion</span> <span class="o">=</span> <span class="n">SuggestionFrame</span><span class="p">(</span>
<a id="__codelineno-0-1879" name="__codelineno-0-1879"></a><a href="#__codelineno-0-1879"><span class="linenos" data-linenos="1879 "></span></a>                    <span class="n">video</span><span class="o">=</span><span class="n">mapped_video</span><span class="p">,</span> <span class="n">frame_idx</span><span class="o">=</span><span class="n">other_suggestion</span><span class="o">.</span><span class="n">frame_idx</span>
<a id="__codelineno-0-1880" name="__codelineno-0-1880"></a><a href="#__codelineno-0-1880"><span class="linenos" data-linenos="1880 "></span></a>                <span class="p">)</span>
<a id="__codelineno-0-1881" name="__codelineno-0-1881"></a><a href="#__codelineno-0-1881"><span class="linenos" data-linenos="1881 "></span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">suggestions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_suggestion</span><span class="p">)</span>
<a id="__codelineno-0-1882" name="__codelineno-0-1882"></a><a href="#__codelineno-0-1882"><span class="linenos" data-linenos="1882 "></span></a>
<a id="__codelineno-0-1883" name="__codelineno-0-1883"></a><a href="#__codelineno-0-1883"><span class="linenos" data-linenos="1883 "></span></a>        <span class="c1"># Update merge record</span>
<a id="__codelineno-0-1884" name="__codelineno-0-1884"></a><a href="#__codelineno-0-1884"><span class="linenos" data-linenos="1884 "></span></a>        <span class="n">merge_record</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-1885" name="__codelineno-0-1885"></a><a href="#__codelineno-0-1885"><span class="linenos" data-linenos="1885 "></span></a>            <span class="s2">&quot;frames_merged&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">frames_merged</span><span class="p">,</span>
<a id="__codelineno-0-1886" name="__codelineno-0-1886"></a><a href="#__codelineno-0-1886"><span class="linenos" data-linenos="1886 "></span></a>            <span class="s2">&quot;instances_added&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">instances_added</span><span class="p">,</span>
<a id="__codelineno-0-1887" name="__codelineno-0-1887"></a><a href="#__codelineno-0-1887"><span class="linenos" data-linenos="1887 "></span></a>            <span class="s2">&quot;conflicts&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">conflicts</span><span class="p">),</span>
<a id="__codelineno-0-1888" name="__codelineno-0-1888"></a><a href="#__codelineno-0-1888"><span class="linenos" data-linenos="1888 "></span></a>        <span class="p">}</span>
<a id="__codelineno-0-1889" name="__codelineno-0-1889"></a><a href="#__codelineno-0-1889"><span class="linenos" data-linenos="1889 "></span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">provenance</span><span class="p">[</span><span class="s2">&quot;merge_history&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">merge_record</span><span class="p">)</span>
<a id="__codelineno-0-1890" name="__codelineno-0-1890"></a><a href="#__codelineno-0-1890"><span class="linenos" data-linenos="1890 "></span></a>
<a id="__codelineno-0-1891" name="__codelineno-0-1891"></a><a href="#__codelineno-0-1891"><span class="linenos" data-linenos="1891 "></span></a>    <span class="k">except</span> <span class="n">MergeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-1892" name="__codelineno-0-1892"></a><a href="#__codelineno-0-1892"><span class="linenos" data-linenos="1892 "></span></a>        <span class="n">result</span><span class="o">.</span><span class="n">successful</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1893" name="__codelineno-0-1893"></a><a href="#__codelineno-0-1893"><span class="linenos" data-linenos="1893 "></span></a>        <span class="n">result</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<a id="__codelineno-0-1894" name="__codelineno-0-1894"></a><a href="#__codelineno-0-1894"><span class="linenos" data-linenos="1894 "></span></a>        <span class="k">if</span> <span class="n">error_mode_enum</span> <span class="o">==</span> <span class="n">ErrorMode</span><span class="o">.</span><span class="n">STRICT</span><span class="p">:</span>
<a id="__codelineno-0-1895" name="__codelineno-0-1895"></a><a href="#__codelineno-0-1895"><span class="linenos" data-linenos="1895 "></span></a>            <span class="k">raise</span>
<a id="__codelineno-0-1896" name="__codelineno-0-1896"></a><a href="#__codelineno-0-1896"><span class="linenos" data-linenos="1896 "></span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-1897" name="__codelineno-0-1897"></a><a href="#__codelineno-0-1897"><span class="linenos" data-linenos="1897 "></span></a>        <span class="n">result</span><span class="o">.</span><span class="n">successful</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-1898" name="__codelineno-0-1898"></a><a href="#__codelineno-0-1898"><span class="linenos" data-linenos="1898 "></span></a>        <span class="n">result</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-1899" name="__codelineno-0-1899"></a><a href="#__codelineno-0-1899"><span class="linenos" data-linenos="1899 "></span></a>            <span class="n">MergeError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">details</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;exception&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">})</span>
<a id="__codelineno-0-1900" name="__codelineno-0-1900"></a><a href="#__codelineno-0-1900"><span class="linenos" data-linenos="1900 "></span></a>        <span class="p">)</span>
<a id="__codelineno-0-1901" name="__codelineno-0-1901"></a><a href="#__codelineno-0-1901"><span class="linenos" data-linenos="1901 "></span></a>        <span class="k">if</span> <span class="n">error_mode_enum</span> <span class="o">==</span> <span class="n">ErrorMode</span><span class="o">.</span><span class="n">STRICT</span><span class="p">:</span>
<a id="__codelineno-0-1902" name="__codelineno-0-1902"></a><a href="#__codelineno-0-1902"><span class="linenos" data-linenos="1902 "></span></a>            <span class="k">raise</span>
<a id="__codelineno-0-1903" name="__codelineno-0-1903"></a><a href="#__codelineno-0-1903"><span class="linenos" data-linenos="1903 "></span></a>
<a id="__codelineno-0-1904" name="__codelineno-0-1904"></a><a href="#__codelineno-0-1904"><span class="linenos" data-linenos="1904 "></span></a>    <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
<a id="__codelineno-0-1905" name="__codelineno-0-1905"></a><a href="#__codelineno-0-1905"><span class="linenos" data-linenos="1905 "></span></a>        <span class="n">progress_callback</span><span class="p">(</span><span class="n">total_frames</span><span class="p">,</span> <span class="n">total_frames</span><span class="p">,</span> <span class="s2">&quot;Merge complete&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1906" name="__codelineno-0-1906"></a><a href="#__codelineno-0-1906"><span class="linenos" data-linenos="1906 "></span></a>
<a id="__codelineno-0-1907" name="__codelineno-0-1907"></a><a href="#__codelineno-0-1907"><span class="linenos" data-linenos="1907 "></span></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
            </details>
    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 - 2025 Talmo Lab

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/talmolab" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/talmop" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "toc.follow", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.tooltips", "content.code.select", "content.footnote.tooltips"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>